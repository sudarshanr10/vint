{"version":3,"file":"index.js","sources":["../src/common/utils/bigint.ts","../src/common/utils/dimensions.ts","../src/common/utils/domains.ts","../src/common/utils/formatting.ts","../src/common/utils/interpolation.ts","../src/common/utils/position.ts","../src/common/utils/selection.ts","../src/common/utils/stroke.ts","../src/common/utils/ticks.ts","../src/common/utils/math.ts","../src/common/utils/functions.ts","../src/common/utils/array.ts","../src/common/utils/size.ts","../src/common/utils/wrapText.tsx","../src/common/utils/useHoverIntent.ts","../src/common/utils/useResizeObserver.ts","../src/common/utils/merge.ts","../src/common/Axis/LinearAxis/LinearAxisLine.tsx","../src/common/Axis/LinearAxis/LinearAxisTickLine.tsx","../src/common/Axis/LinearAxis/LinearAxisTickLabel.tsx","../src/common/Axis/LinearAxis/LinearAxisTickSeries.tsx","../src/common/Axis/LinearAxis/LinearAxis.tsx","../src/common/Axis/LinearAxis/LinearXAxis.tsx","../src/common/Axis/LinearAxis/LinearYAxis.tsx","../src/common/Axis/LinearAxis/helpers.ts","../src/common/Axis/RadialAxis/RadialAxisTickSeries/RadialAxisTickLine.tsx","../src/common/Axis/RadialAxis/RadialAxisTickSeries/RadialAxisTickLabel.tsx","../src/common/Axis/RadialAxis/RadialAxisTickSeries/RadialAxisTick.tsx","../src/common/Axis/RadialAxis/RadialAxisTickSeries/RadialAxisTickSeries.tsx","../src/common/Axis/RadialAxis/RadialAxisArcSeries/RadialAxisArc.tsx","../src/common/Axis/RadialAxis/RadialAxisArcSeries/utils.ts","../src/common/Axis/RadialAxis/RadialAxisArcSeries/RadialAxisArcSeries.tsx","../src/common/Axis/RadialAxis/RadialAxisArcSeries/RadialAxisArcLine.tsx","../src/common/Axis/RadialAxis/RadialAxis.tsx","../src/common/Gestures/Move.tsx","../src/common/Brush/BrushHandle.tsx","../src/common/Brush/BrushSlice.tsx","../src/common/Brush/Brush.tsx","../src/common/Brush/ChartBrush.tsx","../src/common/containers/ChartContext.ts","../src/common/containers/ChartContainer.tsx","../src/common/data/bigInteger.ts","../src/common/data/builder.ts","../src/common/data/histogram.ts","../src/common/data/barStack.ts","../src/common/data/marimekko.ts","../src/common/data/areaStack.ts","../src/common/data/waterfall.ts","../src/common/Gestures/Pan.tsx","../src/common/Gestures/pinchUtils.ts","../src/common/Gestures/Zoom.tsx","../src/common/legends/DiscreteLegend/DiscreteLegend.tsx","../src/common/legends/DiscreteLegend/DiscreteLegendSymbol.tsx","../src/common/legends/DiscreteLegend/DiscreteLegendEntry.tsx","../src/common/legends/SequentialLegend/SequentialLegend.tsx","../src/common/Gridline/Gridline.tsx","../src/common/Gridline/GridStripe.tsx","../src/common/Gridline/GridlineSeries.tsx","../src/common/MarkLine/MarkLine.tsx","../src/common/Gradient/GradientStop.tsx","../src/common/Gradient/Gradient.tsx","../src/common/Gradient/RadialGradient.tsx","../src/common/Mask/Mask.tsx","../src/common/Mask/Stripes.tsx","../src/common/Tooltip/TooltipTemplate.tsx","../src/common/Tooltip/TooltipTheme.ts","../src/common/Tooltip/ChartTooltip.tsx","../src/common/Tooltip/TooltipArea.tsx","../src/common/ZoomPan/ZoomPan.tsx","../src/common/scales/basic.ts","../src/common/scales/marimekko.ts","../src/common/scales/multiSeries.ts","../src/common/scales/radial.ts","../src/common/ZoomPan/ChartZoomPan.tsx","../src/common/Motion/config.ts","../src/common/Motion/MotionPath.tsx","../src/common/color/schemes.ts","../src/common/color/helper.ts","../src/common/Count/useCount.tsx","../src/common/Count/Count.tsx","../src/common/ValueMarker/LinearValueMarker.tsx","../src/common/ValueMarker/RadialValueMarker.tsx","../src/common/Glow/utils.ts","../src/ScatterPlot/ScatterSeries/ScatterPoint.tsx","../src/ScatterPlot/ScatterSeries/ScatterSeries.tsx","../src/ScatterPlot/ScatterPlot.tsx","../src/AreaChart/AreaSeries/PointSeries.tsx","../src/AreaChart/AreaSeries/Area.tsx","../src/AreaChart/AreaSeries/Line.tsx","../src/AreaChart/AreaSeries/AreaSeries.tsx","../src/AreaChart/AreaSeries/StackedNormalizedAreaSeries.tsx","../src/AreaChart/AreaSeries/StackedAreaSeries.tsx","../src/AreaChart/AreaChart.tsx","../src/AreaChart/StackedAreaChart.tsx","../src/AreaChart/StackedNormalizedAreaChart.tsx","../src/BarChart/BarSeries/BarLabel.tsx","../src/BarChart/BarSeries/Bar.tsx","../src/BarChart/BarSeries/BarSeries.tsx","../src/BarChart/BarSeries/RangeLines.tsx","../src/BarChart/BarSeries/StackedBarSeries.tsx","../src/BarChart/BarSeries/StackedNormalizedBarSeries.tsx","../src/BarChart/BarSeries/MarimekkoBarSeries.tsx","../src/BarChart/BarSeries/HistogramBarSeries.tsx","../src/BarChart/BarSeries/GuideBar.tsx","../src/BarChart/BarChart.tsx","../src/BarChart/MarimekkoChart.tsx","../src/BarChart/StackedBarChart.tsx","../src/BarChart/StackedNormalizedBarChart.tsx","../src/BarChart/HistogramBarChart.tsx","../src/LineChart/LineSeries.tsx","../src/LineChart/LineChart.tsx","../src/Map/Map.tsx","../src/Map/MapMarker.tsx","../src/PieChart/PieArcSeries/useInterpolate.ts","../src/PieChart/PieArcSeries/PieArc.tsx","../src/PieChart/PieArcSeries/findBreakPoint.ts","../src/PieChart/PieArcSeries/PieArcLabel.tsx","../src/PieChart/PieArcSeries/radiusUtils.ts","../src/PieChart/PieArcSeries/PieArcSeries.tsx","../src/PieChart/PieChart.tsx","../src/Sankey/utils.ts","../src/Sankey/Sankey.tsx","../src/Sankey/SankeyLabel/SankeyLabel.tsx","../src/Sankey/SankeyLink/SankeyLink.tsx","../src/Sankey/SankeyNode/SankeyNode.tsx","../src/Sparkline/SparklineChart.tsx","../src/Sparkline/AreaSparklineChart.tsx","../src/Sparkline/BarSparklineChart.tsx","../src/Sparkline/SonarChart.tsx","../src/RadialAreaChart/RadialAreaSeries/RadialArea.tsx","../src/RadialAreaChart/RadialAreaSeries/RadialLine.tsx","../src/RadialScatterPlot/RadialScatterPlot.tsx","../src/RadialScatterPlot/RadialScatterSeries/RadialScatterPoint.tsx","../src/RadialScatterPlot/RadialScatterSeries/RadialScatterSeries.tsx","../src/RadialAreaChart/RadialAreaSeries/RadialPointSeries.tsx","../src/RadialAreaChart/RadialAreaSeries/RadialAreaSeries.tsx","../src/RadialAreaChart/RadialAreaChart.tsx","../node_modules/d3-path/src/path.js","../src/RadialBarChart/RadialBarSeries/MotionBar.tsx","../src/RadialBarChart/RadialBarSeries/RadialGuideBar.tsx","../src/RadialBarChart/RadialBarSeries/RadialBar.tsx","../src/RadialBarChart/RadialBarSeries/RadialBarSeries.tsx","../src/RadialBarChart/RadialBarChart.tsx","../src/RadialGauge/RadialGaugeSeries/RadialGaugeArc.tsx","../src/RadialGauge/RadialGaugeSeries/RadialGaugeLabel/RadialGaugeLabel.tsx","../src/RadialGauge/RadialGaugeSeries/RadialGaugeValueLabel/RadialGaugeValueLabel.tsx","../src/RadialGauge/RadialGaugeSeries/RadialGaugeOuterArc.tsx","../src/RadialGauge/RadialGaugeSeries/RadialGaugeSeries.tsx","../src/RadialGauge/RadialGaugeSeries/RadialGaugeStackedArc.tsx","../src/RadialGauge/RadialGaugeSeries/StackedRadialGaugeValueLabel/StackedRadialGaugeValueLabel.tsx","../src/RadialGauge/RadialGaugeSeries/StackedRadialGaugeSeries.tsx","../src/RadialGauge/RadialGaugeSeries/StackedRadialGaugeDescriptionLabel/StackedRadialGaugeDescriptionLabel.tsx","../src/RadialGauge/RadialGauge.tsx","../src/Heatmap/HeatmapSeries/HeatmapCell.tsx","../src/Heatmap/HeatmapSeries/HeatmapSeries.tsx","../src/Heatmap/Heatmap.tsx","../node_modules/date-fns/toDate.mjs","../node_modules/date-fns/constructFrom.mjs","../node_modules/date-fns/addDays.mjs","../node_modules/date-fns/subDays.mjs","../src/Heatmap/calendarUtils.ts","../src/Heatmap/CalendarHeatmap.tsx","../src/LinearGauge/LinearGaugeBar.tsx","../src/LinearGauge/LinearGaugeOuterBar.tsx","../src/LinearGauge/LinearGaugeSeries.tsx","../src/LinearGauge/LinearGauge.tsx","../src/VennDiagram/useInterpolate.ts","../src/VennDiagram/VennArc.tsx","../src/VennDiagram/VennLabel.tsx","../src/VennDiagram/VennOuterLabel.tsx","../src/VennDiagram/VennSeries.tsx","../src/VennDiagram/starEuler/starEuler.ts","../src/VennDiagram/VennDiagram.tsx","../src/BubbleChart/Bubble.tsx","../src/BubbleChart/BubbleLabel.tsx","../src/BubbleChart/BubbleSeries.tsx","../src/BubbleChart/BubbleChart.tsx","../src/TreeMap/TreeMapLabel.tsx","../src/TreeMap/TreeMapRect.tsx","../src/TreeMap/TreeMapSeries.tsx","../src/TreeMap/TreeMap.tsx","../src/BarList/BarListSeries.tsx","../src/BarList/BarList.tsx","../src/Meter/MeterColumn.tsx","../src/Meter/Meter.tsx","../src/RadarChart/RadarChartSeries.tsx","../src/RadarChart/RadarChart.tsx","../src/FunnelChart/FunnelSeries/FunnelArc.tsx","../src/FunnelChart/FunnelSeries/FunnelAxis/FunnelAxisLabel.tsx","../src/FunnelChart/FunnelSeries/FunnelAxis/FunnelAxisLine.tsx","../src/FunnelChart/FunnelSeries/FunnelAxis/FunnelAxis.tsx","../src/FunnelChart/FunnelSeries/FunnelSeries.tsx","../src/FunnelChart/FunnelChart.tsx","../src/SunburstChart/useInterpolate.ts","../src/SunburstChart/SunburstArc.tsx","../src/SunburstChart/SunburstArcLabel.tsx","../src/SunburstChart/SunburstSeries.tsx","../src/SunburstChart/SunburstChart.tsx","../src/WordCloud/WordCloudLabel.tsx","../src/WordCloud/WordCloud.tsx"],"sourcesContent":["import humanFormat from 'human-format';\n\nconst humanFormatScale = new humanFormat.Scale({\n  k: 1000,\n  M: 1000000,\n  B: 1000000000\n});\n\nconst humanFormatMillionScale = new humanFormat.Scale({\n  M: 1,\n  B: 1000,\n  T: 1000000\n});\n\nconst ONE_MILLION = 1000000;\nconst ONE_BILLION = 1000000000;\n\nexport const humanFormatBigInteger = (bigInteger) => {\n  if (bigInteger.greater(ONE_BILLION)) {\n    return humanFormat(bigInteger.divide(ONE_MILLION).toJSNumber(), {\n      scale: humanFormatMillionScale\n    });\n  }\n  return humanFormat(bigInteger.toJSNumber(), { scale: humanFormatScale });\n};\n\nexport const bigIntegerToLocaleString = (bigInteger) => {\n  let i = 0;\n  let formattedString = '';\n  for (const c of bigInteger.toString().split('').reverse()) {\n    if (i > 0 && i % 3 === 0) {\n      formattedString = ',' + formattedString;\n    }\n    formattedString = c + formattedString;\n    i++;\n  }\n  return formattedString;\n};\n","export interface Dimensions {\n  xOffset: number;\n  yOffset: number;\n  height: number;\n  width: number;\n  chartWidth: number;\n  chartHeight: number;\n  xMargin: number;\n  yMargin: number;\n}\n\nexport interface DimensionParameter {\n  xOffset: number;\n  yOffset: number;\n  yAxis: any;\n  xAxis: any;\n  height: number;\n  width: number;\n  margins: Margins;\n}\n\nexport type Margins =\n  | [number, number]\n  | [number, number, number, number]\n  | number;\n\n/**\n * Given a margins object, returns the top/left/right/bottom positions.\n */\nfunction parseMargins(margins?: Margins) {\n  let top = 0;\n  let right = 0;\n  let bottom = 0;\n  let left = 0;\n\n  if (Array.isArray(margins)) {\n    if (margins.length === 2) {\n      top = margins[0];\n      bottom = margins[0];\n      left = margins[1];\n      right = margins[1];\n    } else if (margins.length === 4) {\n      top = margins[0];\n      right = margins[1];\n      bottom = margins[2];\n      left = margins[3];\n    }\n  } else if (margins !== undefined) {\n    top = margins;\n    right = margins;\n    bottom = margins;\n    left = margins;\n  }\n\n  return {\n    top,\n    right,\n    bottom,\n    left\n  };\n}\n\n/**\n * Calculates the margins for the chart.\n */\nfunction calculateMarginOffsets(\n  height: number,\n  width: number,\n  margins: { left: number; right: number; bottom: number; top: number }\n) {\n  const { left, right, bottom, top } = margins;\n  const newHeight = height - top - bottom;\n  const newWidth = width - left - right;\n\n  return {\n    height: newHeight,\n    width: newWidth\n  };\n}\n\n/**\n * Calculates the dimensions for the chart.\n */\nexport function getDimension({\n  xOffset,\n  yOffset,\n  height,\n  width,\n  margins\n}: DimensionParameter | any): Dimensions {\n  const parsedMargins = parseMargins(margins);\n  const marginDims = calculateMarginOffsets(height, width, parsedMargins);\n  const chartWidth = marginDims.width - xOffset;\n  const chartHeight = marginDims.height - yOffset;\n\n  return {\n    xOffset,\n    yOffset,\n    height,\n    width,\n    chartWidth,\n    chartHeight,\n    xMargin: xOffset + parsedMargins.left,\n    yMargin: parsedMargins.top\n  };\n}\n","import { min, max } from 'd3-array';\n\n/**\n * Gets the min/max values handling nested arrays.\n */\nexport function extent(data: any[], attr: string): number[] {\n  const accessor = (val, fn) => {\n    if (Array.isArray(val.data)) {\n      return fn(val.data, (vv) => vv[attr]);\n    }\n    return val[attr];\n  };\n\n  const minVal = min(data, (d) => accessor(d, min));\n  const maxVal = max(data, (d) => accessor(d, max));\n\n  return [minVal, maxVal];\n}\n\n/**\n * Get the domain for the Y Axis.\n */\nexport function getYDomain({\n  data,\n  scaled = false,\n  isDiverging = false\n}): number[] {\n  const [startY, endY] = extent(data, 'y');\n  const [startY1, endY1] = extent(data, 'y1');\n\n  // If dealing w/ negative numbers, we should\n  // normalize the top and bottom values\n  if (startY < 0 || isDiverging) {\n    const posStart = -startY;\n    const maxNum = Math.max(posStart, endY);\n\n    return [-maxNum, maxNum];\n  }\n\n  // Scaled start scale at non-zero\n  if (scaled) {\n    return [startY1, endY1];\n  }\n\n  // Start at 0 based\n  return [0, endY1];\n}\n\n/**\n * Get the domain for the X Axis.\n */\nexport function getXDomain({\n  data,\n  scaled = false,\n  isDiverging = false\n}): number[] {\n  const startX0 = extent(data, 'x0')[0];\n  const endX1 = extent(data, 'x1')[1];\n\n  // Histograms use dates for start/end\n  if (typeof startX0 === 'number' && typeof endX1 === 'number') {\n    // If dealing w/ negative numbers, we should\n    // normalize the top and bottom values\n    if (startX0 < 0 || isDiverging) {\n      const posStart = -startX0;\n      const maxNum = Math.max(posStart, endX1);\n\n      return [-maxNum, maxNum];\n    }\n\n    // If not scaled, return 0/max domains\n    if (!scaled) {\n      return [0, endX1];\n    }\n  }\n\n  // Scaled start scale at non-zero\n  return [startX0, endX1];\n}\n","import { ChartInternalDataTypes } from '@/common/data';\n\n// https://stackoverflow.com/questions/673905/best-way-to-determine-users-locale-within-browser\nconst getNavigatorLanguage = () => {\n  if (typeof window === 'undefined') {\n    return 'en';\n  }\n\n  if (navigator.languages && navigator.languages.length) {\n    return navigator.languages[0];\n  }\n\n  if (\n    (navigator as any).userLanguage ||\n    navigator.language ||\n    (navigator as any).browserLanguage\n  ) {\n    return 'en';\n  }\n};\n\nconst locale = getNavigatorLanguage();\n\nconst options = {\n  year: 'numeric',\n  month: 'numeric',\n  day: 'numeric',\n  hour12: true,\n  formatMatcher: 'best fit'\n};\n\n/**\n * Format a value based on type.\n */\nexport function formatValue(value: ChartInternalDataTypes): string {\n  if (value !== undefined) {\n    if (value instanceof Date) {\n      return (value as Date).toLocaleDateString(locale, options as any);\n    } else if (typeof value === 'number') {\n      return value.toLocaleString();\n    }\n\n    return value as string;\n  }\n\n  return 'No value';\n}\n\n/**\n * Generate aria label text for the given data point(s)\n * @param datapoint\n * @returns Aria Label\n */\nexport function getAriaLabel(datapoint) {\n  const isArray = Array.isArray(datapoint);\n  if (isArray) {\n    return datapoint?.map((row) => getAriaLabel(row)).join(', ');\n  } else {\n    const key = datapoint?.key || datapoint?.x;\n    // 'data' or 'y' will not be an array as the label is unique for each element\n    const value = datapoint?.data || datapoint?.y;\n    return `${key}: ${formatValue(value)}`;\n  }\n}\n","import { curveLinear, curveMonotoneX, curveStep } from 'd3-shape';\n\nexport type InterpolationTypes = 'linear' | 'smooth' | 'step';\nexport type RadialInterpolationTypes = 'linear' | 'smooth';\n\n/**\n * Helper function for interpolation.\n */\nexport function interpolate(\n  type: InterpolationTypes | RadialInterpolationTypes\n) {\n  if (type === 'smooth') {\n    return curveMonotoneX;\n  } else if (type === 'step') {\n    return curveStep;\n  } else {\n    return curveLinear;\n  }\n}\n","import { bisector } from 'd3-array';\nimport { applyToPoint, applyToPoints, inverse } from 'transformation-matrix';\n\ntype PointObjectNotation = { x: number; y: number };\n\n/**\n * Add ability to calculate scale band position.\n * Reference: https://stackoverflow.com/questions/38633082/d3-getting-invert-value-of-band-scales\n */\nconst scaleBandInvert = (scale, round = false) => {\n  const domain = scale.domain();\n  const paddingOuter = scale(domain[0]);\n  const eachBand = scale.step();\n  const [, end] = scale.range();\n\n  return (offset) => {\n    // Keep the band from going outside the domain length\n    let band = Math.min(\n      (offset - paddingOuter) / eachBand,\n      domain.length - 0.01\n    );\n\n    // Catch negative band values from horizontal charts exceeding domain length\n    if (band < 0 && Math.abs(band) > domain.length - 1) {\n      band = Math.floor(Math.abs(band)) * -1;\n    }\n\n    // Round to the closest index OR take the floor value\n    let index = round\n      ? Math.round(band) % domain.length\n      : Math.floor(band) % domain.length;\n\n    // Handle horizontal charts...\n    if (end === 0) {\n      index = index * -1;\n    }\n\n    return domain[Math.max(0, Math.min(index, domain.length - 1))];\n  };\n};\n\n/**\n * Get the data point closest to a given position on a continuous scale.\n *\n * @param {Object} params - The parameters for the function.\n * @param {number} params.pos - The position to find the closest point to.\n * @param {Object} params.scale - The scale object.\n * @param {Array} params.data - The data array.\n * @param {string} [params.attr='x'] - The attribute to use for comparison.\n * @param {boolean} [params.roundDown=false] - Whether to round down to the nearest point.\n *\n * @returns {Object} The closest point to the specified position.\n */\nexport const getClosestContinousScalePoint = ({\n  pos,\n  scale,\n  data,\n  attr = 'x',\n  roundDown = false\n}: {\n  pos: number;\n  scale: any;\n  data: any[];\n  attr?: string;\n  roundDown?: boolean;\n}) => {\n  const domain = scale.invert(pos);\n\n  // Select the index\n  const bisect = bisector((d: any) => {\n    // add 1 to an index so it's the upper limit of a domain\n    return attr === 'i' ? d[attr] + 1 : d[attr];\n  }).right;\n  const index = bisect(data, domain);\n\n  // Determine min index\n  const minIndex = Math.max(0, index - 1);\n  const before = data[minIndex];\n\n  if (roundDown) {\n    return before;\n  }\n\n  // Determine max index\n  const maxIndex = Math.min(data.length - 1, index);\n  const after = data[maxIndex];\n\n  // Determine which is closest to the point\n  let beforeVal = before[attr];\n  let afterVal = after[attr];\n  beforeVal = domain - beforeVal;\n  afterVal = afterVal - domain;\n\n  return beforeVal < afterVal ? before : after;\n};\n\n/**\n * Get the data point closest to a given position on a band scale. This rounds down by default.\n *\n * @param {Object} params - The parameters for the function.\n * @param {number} params.pos - The position to find the closest point to.\n * @param {Object} params.scale - The scale object.\n * @param {Array} params.data - The data array.\n * @param {boolean} [params.roundClosest=false] - Whether to round to the closest point instead of down.\n *\n * @returns {Object} The closest point to the specified position.\n */\nexport const getClosestBandScalePoint = ({\n  pos,\n  scale,\n  data,\n  roundClosest = false\n}: {\n  pos: number;\n  scale: any;\n  data: any[];\n  roundClosest?: boolean;\n}) => {\n  const domain = scale.domain();\n  let prop;\n\n  // Of course the Marimekko is a pain...\n  if (scale.mariemkoInvert) {\n    prop = scale.mariemkoInvert(pos);\n  } else {\n    prop = scaleBandInvert(scale, roundClosest)(pos);\n  }\n\n  const idx = domain.indexOf(prop);\n  return data[idx];\n};\n\n/**\n * Given an event, get the parent svg element;\n */\nexport const getParentSVG = (event) => {\n  // set node to targets owner svg\n  let node = event.target.ownerSVGElement;\n\n  // find the outermost svg\n  if (node) {\n    while (node.ownerSVGElement) {\n      node = node.ownerSVGElement;\n    }\n  }\n\n  return node;\n};\n\n/**\n * Given an event, get the relative X/Y position for a target.\n */\nexport const getPositionForTarget = ({ target, clientX, clientY }) => {\n  const rect = target.getBoundingClientRect();\n  return {\n    x: clientX - (rect?.left || 0) - target.clientLeft,\n    y: clientY - (rect?.top || 0) - target.clientTop\n  };\n};\n\n/**\n * Gets the point from q given matrix.\n */\nexport const getPointFromMatrix = (event, matrix): PointObjectNotation => {\n  const parent = getParentSVG(event);\n\n  if (!parent) {\n    return null;\n  }\n\n  // Determines client coordinates relative to the editor component\n  const { top, left } = parent.getBoundingClientRect();\n  const x = event.clientX - left;\n  const y = event.clientY - top;\n\n  // Transforms the coordinate to world coordinate (in the SVG/DIV world)\n  return applyToPoint(inverse(matrix), { x, y });\n};\n\n/**\n * Get the start/end matrix.\n */\nexport const getLimitMatrix = (\n  height: number,\n  width: number,\n  matrix\n): PointObjectNotation[] =>\n  applyToPoints(matrix, [\n    { x: 0, y: 0 },\n    { x: width, y: height }\n  ]);\n\n/**\n * Constrain the matrix.\n */\nexport const constrainMatrix = (height: number, width: number, matrix) => {\n  const [min, max] = getLimitMatrix(height, width, matrix) as {\n    x: number;\n    y: number;\n  }[];\n\n  if (max.x < width || max.y < height) {\n    return true;\n  }\n\n  if (min.x > 0 || min.y > 0) {\n    return true;\n  }\n\n  return false;\n};\n\n/**\n * Determine if scale factor is less than allowed.\n */\nconst lessThanScaleFactorMin = (value, scaleFactor: number) =>\n  value.scaleFactorMin && value.d * scaleFactor <= value.scaleFactorMin;\n\n/**\n * Determine if scale factor is larger than allowed.\n */\nconst moreThanScaleFactorMax = (value, scaleFactor: number) =>\n  value.scaleFactorMax && value.d * scaleFactor >= value.scaleFactorMax;\n\n/**\n * Determine if both min and max scale fctors are going out of bounds.\n */\nexport const isZoomLevelGoingOutOfBounds = (value, scaleFactor: number) => {\n  const a = lessThanScaleFactorMin(value, scaleFactor) && scaleFactor < 1;\n  const b = moreThanScaleFactorMax(value, scaleFactor) && scaleFactor > 1;\n  return a || b;\n};\n","/**\n * Toggle the text selection of the body.\n */\nexport function toggleTextSelection(allowSelection: boolean) {\n  const style = allowSelection ? '' : 'none';\n  [\n    '-webkit-touch-callout',\n    '-webkit-user-select',\n    '-khtml-user-select',\n    '-moz-user-select',\n    '-ms-user-select',\n    'user-select'\n  ].forEach((prop) => (document.body.style[prop] = style));\n}\n","import { ChartInternalShallowDataShape } from '@/common/data';\n\n/**\n * Calculates whether the stroke should be shown.\n */\nexport function calculateShowStroke(\n  current: ChartInternalShallowDataShape,\n  data: ChartInternalShallowDataShape[]\n) {\n  const i = data.indexOf(current);\n  let showLine = false;\n\n  const prev = data[i - 1];\n  if (i > 0 && prev.y) {\n    showLine = true;\n  }\n\n  const cur = data[i];\n  if (cur.y) {\n    showLine = true;\n  }\n\n  const next = data[i + 1];\n  if (i < data.length - 1 && next.y) {\n    showLine = true;\n  }\n\n  return showLine;\n}\n","import { TimeInterval } from 'd3-time';\n\nconst ONE_DAY = 60 * 60 * 24;\nconst DURATION_TICK_STEPS = [\n  0.001, // 1 ms\n  0.005, // 5 ms\n  0.01, // 10 ms\n  0.05, // 50 ms\n  0.1, // 100 ms\n  0.5, // 500 ms\n  1, // 1 s\n  5, // 5 s\n  10, // 10 s\n  15, // 15 s\n  60, // 1 m\n  60 * 15, // 15 m\n  60 * 30, // 30 m\n  60 * 60, // 1 h\n  60 * 60 * 2, // 2 h\n  60 * 60 * 4, // 4 h\n  60 * 60 * 6, // 6 h\n  60 * 60 * 8, // 8 h\n  60 * 60 * 12, // 12 h\n  ONE_DAY // 24 h\n];\n\n/**\n * Reduce the ticks to the max number of ticks.\n */\nexport function reduceTicks<T>(ticks: T[], maxTicks: number) {\n  if (ticks.length > maxTicks) {\n    const reduced: T[] = [];\n    const modulus = Math.floor(ticks.length / maxTicks);\n\n    for (let i = 0; i < ticks.length; i++) {\n      if (i % modulus === 0) {\n        reduced.push(ticks[i]);\n      }\n    }\n    ticks = reduced;\n  }\n\n  return ticks;\n}\n\n/**\n * Determine the max ticks for the available width.\n */\nexport function getMaxTicks(size: number, dimension: number) {\n  const tickWidth = Math.max(size, 0);\n  return Math.floor(dimension / tickWidth);\n}\n\n/**\n * Formats the ticks in a duration format.\n */\nexport function getDurationTicks(domain, maxTicks) {\n  const domainWidth = domain[1] - domain[0];\n  let tickStep: number | null = null;\n  for (const s of DURATION_TICK_STEPS) {\n    if (domainWidth / s < maxTicks) {\n      tickStep = s;\n      break;\n    }\n  }\n\n  if (tickStep === null) {\n    const numDayTicks = domainWidth / ONE_DAY;\n    const dayStep = Math.ceil(numDayTicks / maxTicks);\n    tickStep = ONE_DAY * dayStep;\n  }\n\n  const ticks = [domain[0]];\n  while (ticks[ticks.length - 1] + tickStep <= domain[1]) {\n    ticks.push(ticks[ticks.length - 1] + tickStep);\n  }\n\n  return ticks;\n}\n\n/**\n * Get the tick values from the scale.\n */\nexport function getTicks(\n  scale: any,\n  tickValues: any[],\n  type: 'value' | 'category' | 'time' | 'duration',\n  maxTicks = 100,\n  interval?: number | TimeInterval\n) {\n  let result;\n\n  if (tickValues) {\n    result = tickValues;\n  } else {\n    if (scale.ticks) {\n      if (type === 'duration') {\n        result = getDurationTicks(scale.domain(), maxTicks);\n      } else if (interval) {\n        result = scale.ticks(interval);\n      } else {\n        if (type === 'time') {\n          // If its time, we need to handle the time count\n          // manually because d3 does this odd rounding\n          result = scale.ticks();\n          result = reduceTicks(result, maxTicks);\n        } else {\n          result = scale.ticks(maxTicks);\n        }\n      }\n    } else {\n      tickValues = scale.domain();\n      result = reduceTicks(tickValues, maxTicks);\n    }\n  }\n\n  return result;\n}\n","/**\n * Get the angle from a radian.\n */\nexport const getDegrees = (radians: number) => (radians / Math.PI) * 180 - 90;\n\nexport const roundDecimals = (value: number, decimals: number = 5): number =>\n  parseFloat(value.toFixed(decimals));\n","import classNames from 'classnames';\n\nexport interface PropFunctionTypes {\n  /**\n   * Classnames to apply to the element.\n   */\n  className?: any;\n\n  /**\n   * CSS styles to apply to the element.\n   */\n  style?: any;\n}\n\nexport const functionProps = (prop: string, val: any, data: any) => {\n  if (typeof val === 'function') {\n    return val(data);\n  } else if (prop === 'className') {\n    return classNames(val);\n  } else if (val !== undefined || val !== null) {\n    return val;\n  }\n\n  return {};\n};\n\nexport const constructFunctionProps = (\n  props: PropFunctionTypes,\n  data: any\n) => ({\n  className: functionProps('className', props.className, data),\n  style: functionProps('style', props.style, data)\n});\n","type AccessorCallback = (data: any) => any;\n\n/**\n * Given a dataset and a list of accessors, returns a unique collection.\n */\nexport function uniqueBy<T = any>(data: T[], ...accessors: AccessorCallback[]) {\n  const result: any[] = [];\n\n  const ittr = (arr: T[], depth: number) => {\n    for (const a of arr) {\n      const acc = accessors[depth];\n      if (acc === undefined) {\n        throw new Error(`Accessor not found for depth: ${depth}`);\n      }\n\n      const val = acc(a);\n      if (Array.isArray(val)) {\n        ittr(val, depth + 1);\n      } else if (!result.includes(val)) {\n        result.push(val);\n      }\n    }\n  };\n\n  ittr(data, 0);\n\n  return result;\n}\n","export interface TextDimensions {\n  height: number;\n  width: number;\n}\n\nconst cache: { [key: string]: TextDimensions } = {};\n\nexport const calculateDimensions = (\n  text: string,\n  fontFamily: string,\n  fontSize: string | number\n): TextDimensions => {\n  const key = `${text}_${fontFamily}_${fontSize}`;\n\n  // Check if we have a cache hit\n  if (cache[key]) {\n    return cache[key];\n  }\n\n  // If we are in a Node.js environment\n  if (typeof window === 'undefined' || typeof document === 'undefined') {\n    const height = parseInt(typeof fontSize === 'string' ? fontSize : fontSize.toString(), 10);\n    const dimensions = {\n      height,\n      // 8 is an approximation of the width of a character\n      width: text.length * 8\n    };\n\n    cache[key] = dimensions;\n\n    return dimensions;\n  }\n\n  // Create a temporary div element\n  const element = document.createElement('div');\n\n  // Set up the style so the size can be measured\n  element.style.fontFamily = fontFamily;\n  element.style.fontSize = typeof fontSize === 'string' ? fontSize : `${fontSize}px`;\n  element.style.position = 'absolute';\n  element.style.left = '-9999px';\n  element.style.whiteSpace = 'nowrap';\n  element.style.height = 'auto';\n  element.style.fontWeight = 'normal';\n  element.style.lineHeight = 'normal';\n  element.style.width = 'auto';\n  element.style.wordBreak = 'normal';\n\n  // Add the text to the div\n  element.textContent = text;\n\n  // Add the div to the body\n  document.body.appendChild(element);\n\n  // Measure the div\n  const dimensions = {\n    height: element.offsetHeight,\n    width: element.offsetWidth\n  };\n\n  // Remove the div from the body\n  document.body.removeChild(element);\n\n  // Store the result in the cache for future calls\n  cache[key] = dimensions;\n\n  return dimensions;\n};\n","import React, { ReactElement } from 'react';\nimport { calculateDimensions } from './size';\n\nexport interface WrapTextInputs {\n  key: string;\n  x?: any;\n  paddingY?: number;\n  paddingX?: number;\n  width: number;\n  height?: number;\n  fontFamily: string;\n  fontSize: number;\n  wrap?: boolean;\n  size?: {\n    width: number;\n    height: number;\n  };\n  visibility?: 'auto' | 'always';\n}\n\nexport function wrapText({\n  key,\n  x = 0,\n  size,\n  paddingY,\n  wrap = true,\n  paddingX,\n  width,\n  height,\n  fontFamily,\n  fontSize,\n  visibility = 'auto'\n}: WrapTextInputs): ReactElement | ReactElement[] | null {\n  size = size || calculateDimensions(key, fontFamily, fontSize);\n  const words = key.toString().split(/\\s+/);\n\n  if (words.length > 1 && size.width > width) {\n    let rows = [];\n    let maxWidth = 0;\n    let maxHeight = 0;\n    let curText = '';\n    let currWidth = 0;\n    let nextText = '';\n    let nextWidth = 0;\n\n    for (const word of words) {\n      nextText = curText === '' ? word : `${curText} ${word}`;\n      nextWidth = calculateDimensions(nextText, fontFamily, fontSize).width;\n\n      if (nextWidth <= width - (paddingX ? 2 * paddingX : 0)) {\n        curText = nextText;\n        currWidth = nextWidth;\n      } else {\n        rows.push(curText);\n        maxWidth = Math.max(maxWidth, currWidth);\n        curText = word;\n        currWidth = calculateDimensions(curText, fontFamily, fontSize).width;\n      }\n    }\n    rows.push(curText);\n    maxHeight = rows.length * size.height;\n\n    if (visibility !== 'always') {\n      if (height && maxHeight >= height - (paddingY ? 2 * paddingY : 0)) {\n        return null;\n      }\n\n      if (width && maxWidth >= width - (paddingX ? 2 * paddingX : 0)) {\n        return null;\n      }\n    }\n\n    if (!wrap && rows.length > 1) {\n      return rows[0];\n    }\n\n    return rows.map((r, i) => (\n      <tspan\n        key={i}\n        dominantBaseline=\"alphabetic\"\n        style={{ baselineShift: '0%' }}\n        dy={\n          i > 0\n            ? size.height\n            : height\n              ? size.height / 2 - 5\n              : -maxHeight / 2 + size.height\n        }\n        x={x}\n      >\n        {r}\n      </tspan>\n    ));\n  }\n\n  if (visibility !== 'always') {\n    if (height && size.height + paddingY >= height) {\n      return null;\n    }\n\n    if (width && size.width + paddingX >= width) {\n      return null;\n    }\n  }\n\n  // NOTE: 5px seems to magic number for making it center\n  return (\n    <tspan\n      dominantBaseline=\"alphabetic\"\n      style={{ baselineShift: '0%' }}\n      dy={size.height / 2 - 5}\n      x={x}\n    >\n      {key}\n    </tspan>\n  );\n}\n","import { PointerEvent, useCallback, useRef } from 'react';\n\nexport interface HoverIntentOptions {\n  interval?: number;\n  sensitivity?: number;\n  timeout?: number;\n  disabled?: boolean;\n  onPointerOver: (event: PointerEvent<SVGElement>) => void;\n  onPointerOut: (event: PointerEvent<SVGElement>) => void;\n}\n\nexport interface HoverIntentResult {\n  pointerOut: (event: PointerEvent<SVGElement>) => void;\n  pointerOver: (event: PointerEvent<SVGElement>) => void;\n}\n\n/**\n * Hover intent identifies if the user actually is\n * intending to over by measuring the position of the mouse\n * once a pointer enters and determining if in a duration if\n * the mouse moved inside a certain threshold and fires the events.\n */\nexport const useHoverIntent = ({\n  sensitivity = 7,\n  interval = 50,\n  timeout = 10,\n  disabled,\n  onPointerOver,\n  onPointerOut\n}: HoverIntentOptions | undefined): HoverIntentResult => {\n  const mouseOver = useRef<boolean>(false);\n  const timer = useRef<any | null>(null);\n  const state = useRef<number>(0);\n  const coords = useRef({\n    x: null,\n    y: null,\n    px: null,\n    py: null\n  });\n\n  const onMouseMove = useCallback((event: MouseEvent) => {\n    coords.current.x = event.clientX;\n    coords.current.y = event.clientY;\n  }, []);\n\n  const comparePosition = useCallback(\n    (event: PointerEvent<SVGElement>) => {\n      timer.current = clearTimeout(timer.current);\n      const { px, x, py, y } = coords.current;\n\n      if (Math.abs(px - x) + Math.abs(py - y) < sensitivity) {\n        state.current = 1;\n        onPointerOver(event);\n      } else {\n        coords.current.px = x;\n        coords.current.py = y;\n        timer.current = setTimeout(() => comparePosition(event), interval);\n      }\n    },\n    [interval, onPointerOver, sensitivity]\n  );\n\n  const cleanup = useCallback(() => {\n    clearTimeout(timer.current);\n    document.removeEventListener('mousemove', onMouseMove, false);\n  }, [onMouseMove]);\n\n  const pointerOver = useCallback(\n    (event: PointerEvent<SVGElement>) => {\n      if (!disabled) {\n        mouseOver.current = true;\n        cleanup();\n\n        if (state.current !== 1) {\n          coords.current.px = event.nativeEvent.x;\n          coords.current.py = event.nativeEvent.y;\n          document.addEventListener('mousemove', onMouseMove, false);\n          timer.current = setTimeout(() => comparePosition(event), timeout);\n        }\n      }\n    },\n    [cleanup, comparePosition, disabled, onMouseMove, timeout]\n  );\n\n  const delay = useCallback(\n    (event: PointerEvent<SVGElement>) => {\n      timer.current = clearTimeout(timer.current);\n      state.current = 0;\n      onPointerOut(event);\n    },\n    [onPointerOut]\n  );\n\n  const pointerOut = useCallback(\n    (event: PointerEvent<SVGElement>) => {\n      mouseOver.current = false;\n      cleanup();\n\n      if (state.current === 1) {\n        timer.current = setTimeout(() => delay(event), timeout);\n      }\n    },\n    [cleanup, delay, timeout]\n  );\n\n  return {\n    pointerOver,\n    pointerOut\n  };\n};\n","import { useEffect, useRef, useState, RefObject } from 'react';\n\ntype Size = {\n  width: number | undefined;\n  height: number | undefined;\n};\n\nexport const useResizeObserver = <T extends HTMLElement>(): [\n  RefObject<T>,\n  Size\n] => {\n  const ref = useRef<T>(null);\n  const [size, setSize] = useState<Size>({\n    width: undefined,\n    height: undefined\n  });\n\n  useEffect(() => {\n    const element = ref.current;\n    if (!element) return;\n\n    const resizeObserver = new ResizeObserver((entries) => {\n      if (entries.length === 0) return;\n      const entry = entries[0];\n      setSize({\n        width: entry.contentRect.width,\n        height: entry.contentRect.height\n      });\n    });\n\n    resizeObserver.observe(element);\n\n    return () => {\n      resizeObserver.unobserve(element);\n    };\n  }, []);\n\n  return [ref, size];\n};\n","/**\n * Merges default props with props and returns a new object, filtering out undefined values to keep original behavior.\n * @param defaultProps - The default props to merge.\n * @param props - The props to merge.\n * @returns The merged props.\n */\n\nexport const mergeDefaultProps = <T>(\n  defaultProps: Partial<T>,\n  props: Partial<T> = {}\n): T => {\n  const filteredProps = Object.fromEntries(\n    Object.entries(props).filter(([_, value]) => value !== undefined)\n  );\n  return { ...defaultProps, ...filteredProps } as T;\n};\n","import React, { Fragment, FC, ReactElement } from 'react';\nimport { GradientProps, Gradient } from '@/common/Gradient';\nimport { CloneElement, useId } from 'reablocks';\nimport { mergeDefaultProps } from '@/common/utils';\n\nexport interface LinearAxisLineProps {\n  height: number;\n  width: number;\n  strokeColor?: string;\n  strokeWidth: number;\n  strokeGradient: ReactElement<GradientProps, typeof Gradient> | null;\n  scale: any;\n  orientation: 'horizontal' | 'vertical';\n  className?: string;\n}\n\nexport const LinearAxisLine: FC<Partial<LinearAxisLineProps>> = (props) => {\n  const {\n    strokeColor,\n    strokeWidth,\n    strokeGradient,\n    scale,\n    orientation,\n    className\n  } = mergeDefaultProps(linearAxisLineDefaultProps, props);\n  const id = useId();\n  const [range0, range1] = scale.range();\n\n  return (\n    <Fragment>\n      <line\n        className={className}\n        x1={orientation === 'vertical' ? 0 : range0}\n        // Workaround for a Chrome/Firefox bug where it won't render gradients for straight lines\n        x2={orientation === 'vertical' ? 0.00001 : range1}\n        y1={orientation === 'vertical' ? range0 : 0}\n        y2={orientation === 'vertical' ? range1 : 0.00001}\n        strokeWidth={strokeWidth}\n        stroke={strokeGradient ? `url(#axis-gradient-${id})` : strokeColor}\n      />\n      {strokeGradient && (\n        <CloneElement<GradientProps>\n          element={strokeGradient}\n          id={`axis-gradient-${id}`}\n        />\n      )}\n    </Fragment>\n  );\n};\n\nexport const linearAxisLineDefaultProps = {\n  strokeColor: '#8F979F',\n  strokeWidth: 1\n};\n","import React, { FC, useMemo } from 'react';\n\nexport interface LinearAxisTickLineProps {\n  height: number;\n  width: number;\n  orientation: 'horizontal' | 'vertical';\n  size: number;\n  strokeColor?: string;\n  strokeWidth: number;\n  position: 'start' | 'end' | 'center';\n  className?: string;\n}\n\nexport const LinearAxisTickLine: FC<Partial<LinearAxisTickLineProps>> = (\n  props\n) => {\n  const { size, position, orientation, strokeColor, strokeWidth, className } = {\n    ...LINEAR_AXIS_TICK_LINE_DEFAULT_PROPS,\n    ...props\n  };\n\n  const path = useMemo(() => {\n    const isVertical = orientation === 'vertical';\n    const tickSize = size || 0;\n    const start =\n      position === 'start'\n        ? tickSize * -1\n        : position === 'center'\n          ? tickSize * -0.5\n          : 0;\n    const end = start + tickSize;\n\n    return {\n      x1: isVertical ? end : 0,\n      x2: isVertical ? start : 0,\n      y1: isVertical ? 0 : start,\n      y2: isVertical ? 0 : end\n    };\n  }, [orientation, position, size]);\n\n  return (\n    <line\n      className={className}\n      strokeWidth={strokeWidth}\n      stroke={strokeColor}\n      {...path}\n    />\n  );\n};\n\nexport const LINEAR_AXIS_TICK_LINE_DEFAULT_PROPS = {\n  strokeColor: '#8F979F',\n  strokeWidth: 1,\n  size: 5\n};\n","import React, { FC, ReactElement } from 'react';\nimport {\n  LINEAR_AXIS_TICK_LINE_DEFAULT_PROPS,\n  LinearAxisTickLine,\n  LinearAxisTickLineProps\n} from './LinearAxisTickLine';\nimport { mergeDefaultProps } from '@/common/utils';\n\nexport interface LinearAxisTickLabelProps {\n  text: string;\n  fullText: string;\n  angle: number;\n  orientation: 'horizontal' | 'vertical';\n  half: 'start' | 'end' | 'center';\n  line: ReactElement<LinearAxisTickLineProps, typeof LinearAxisTickLine>;\n  format?: (v) => any;\n  /**\n   * Format tooltip title on hover label.\n   */\n  formatTooltip?: (value: any) => any | string;\n  fill: string;\n  fontSize: number;\n  fontFamily: string;\n  rotation: boolean | number;\n  padding: number | { fromAxis: number; alongAxis: number };\n  textAnchor?: 'start' | 'end' | 'middle';\n  position: 'start' | 'end' | 'center';\n  align: 'start' | 'end' | 'center' | 'inside' | 'outside';\n  className?: string;\n}\n\nexport const LinearAxisTickLabel: FC<Partial<LinearAxisTickLabelProps>> = (\n  props\n) => {\n  const {\n    text,\n    fullText,\n    angle,\n    orientation,\n    half,\n    line,\n    textAnchor,\n    position,\n    className,\n    fill,\n    fontSize,\n    fontFamily,\n    rotation,\n    padding,\n    formatTooltip,\n    align\n  } = mergeDefaultProps(LINEAR_AXIS_TICK_LABEL_DEFAULT_PROPS, props);\n\n  function getAlign() {\n    if ((align === 'inside' || align === 'outside') && half === 'center') {\n      return 'center';\n    }\n\n    if (align === 'inside') {\n      return half === 'start' ? 'end' : 'start';\n    }\n\n    if (align === 'outside') {\n      return half === 'start' ? 'start' : 'end';\n    }\n\n    return align;\n  }\n\n  // bug in this function - spacing is NA\n  function getTickLineSpacing() {\n    if (!line) {\n      return [0, 0];\n    }\n\n    const lineProps = { ...LINEAR_AXIS_TICK_LINE_DEFAULT_PROPS, ...line.props };\n    const size = lineProps.size ?? 3;\n    const position = lineProps.position ?? 'center';\n\n    if (position === 'start') {\n      return [size * -1, 0];\n    } else if (position === 'end') {\n      return [0, size];\n    } else {\n      return [size * -0.5, size * 0.5];\n    }\n  }\n\n  function getOffset() {\n    const adjustedPadding =\n      typeof padding === 'number'\n        ? { fromAxis: padding, alongAxis: padding }\n        : padding;\n\n    const spacing = getTickLineSpacing();\n    const offset1 =\n      position === 'start'\n        ? spacing[0] - adjustedPadding.fromAxis\n        : position === 'end'\n          ? spacing[1] + adjustedPadding.fromAxis\n          : 0;\n\n    const align = getAlign();\n    let offset2 = 0;\n    offset2 +=\n      align === 'center'\n        ? 0\n        : align === 'start'\n          ? -adjustedPadding.alongAxis\n          : adjustedPadding.alongAxis;\n\n    const horz = orientation === 'horizontal';\n\n    return {\n      [horz ? 'x' : 'y']: offset2,\n      [horz ? 'y' : 'x']: offset1\n    };\n  }\n\n  function getTextPosition() {\n    let transform = '';\n    let newtextAnchor = '';\n    let alignmentBaseline = 'middle' as 'middle' | 'baseline' | 'hanging';\n\n    if (angle !== 0) {\n      transform = `rotate(${angle})`;\n      newtextAnchor = 'end';\n    } else {\n      const align = getAlign();\n      if (orientation === 'horizontal') {\n        newtextAnchor =\n          align === 'center' ? 'middle' : align === 'start' ? 'end' : 'start';\n        if (position === 'start') {\n          alignmentBaseline = 'baseline';\n        } else if (position === 'end') {\n          alignmentBaseline = 'hanging';\n        }\n      } else {\n        alignmentBaseline =\n          align === 'center'\n            ? 'middle'\n            : align === 'start'\n              ? 'baseline'\n              : 'hanging';\n        if (position === 'start') {\n          newtextAnchor = 'end';\n        } else if (position === 'end') {\n          newtextAnchor = 'start';\n        } else {\n          newtextAnchor = 'middle';\n        }\n      }\n    }\n\n    return {\n      transform,\n      textAnchor: textAnchor || newtextAnchor,\n      alignmentBaseline\n    };\n  }\n\n  const { x, y } = getOffset();\n  const textPosition = getTextPosition();\n  const titleHover =\n    typeof formatTooltip === 'function' ? formatTooltip(fullText) : fullText;\n\n  return (\n    <g\n      transform={`translate(${x}, ${y})`}\n      fontSize={fontSize}\n      fontFamily={fontFamily}\n    >\n      <title>{titleHover}</title>\n      <text {...textPosition} fill={fill} className={className}>\n        {text}\n      </text>\n    </g>\n  );\n};\n\nexport const LINEAR_AXIS_TICK_LABEL_DEFAULT_PROPS: Partial<LinearAxisTickLabelProps> =\n  {\n    fill: '#8F979F',\n    fontSize: 11,\n    fontFamily: 'sans-serif',\n    rotation: true,\n    padding: 5,\n    align: 'center'\n  };\n","import React, { FC, Fragment, ReactElement, useCallback, useMemo } from 'react';\nimport {\n  LINEAR_AXIS_TICK_LABEL_DEFAULT_PROPS,\n  LinearAxisTickLabel,\n  LinearAxisTickLabelProps\n} from './LinearAxisTickLabel';\nimport {\n  LINEAR_AXIS_TICK_LINE_DEFAULT_PROPS,\n  LinearAxisTickLine,\n  LinearAxisTickLineProps\n} from './LinearAxisTickLine';\nimport { formatValue } from '@/common/utils/formatting';\nimport { getTicks, getMaxTicks } from '@/common/utils/ticks';\nimport { TimeInterval } from 'd3-time';\nimport { CloneElement } from 'reablocks';\nimport { LinearAxisProps } from './LinearAxis';\nimport ellipsize from 'ellipsize';\nimport { max } from 'd3-array';\nimport { calculateDimensions } from '@/common/utils/size';\nimport { mergeDefaultProps } from '@/common/utils';\n\nexport interface LinearAxisTickSeriesProps {\n  height: number;\n  width: number;\n  scale: any;\n  interval?: number | TimeInterval;\n  tickSize: number;\n  tickValues: any[];\n  orientation: 'horizontal' | 'vertical';\n  label: ReactElement<\n    LinearAxisTickLabelProps,\n    typeof LinearAxisTickLabel\n  > | null;\n  line: ReactElement<LinearAxisTickLineProps, typeof LinearAxisTickLine> | null;\n  axis: LinearAxisProps;\n}\n\ninterface ProcessedTick {\n  text: string;\n  fullText: string;\n  x: number;\n  y: number;\n  height: number;\n  width: number;\n  half: 'start' | 'end' | 'center';\n}\n\nexport const LinearAxisTickSeries: FC<Partial<LinearAxisTickSeriesProps>> = (\n  props\n) => {\n  const {\n    scale,\n    orientation,\n    height,\n    width,\n    label,\n    tickSize,\n    tickValues,\n    interval,\n    line,\n    axis\n  } = mergeDefaultProps(LINEAR_AXIS_TICK_SERIES_DEFAULT_PROPS, props);\n\n  const labelProps = useMemo(\n    () => ({\n      ...LINEAR_AXIS_TICK_LABEL_DEFAULT_PROPS,\n      ...(label?.props ?? {})\n    }),\n    [label?.props]\n  );\n\n  /**\n   * Gets the adjusted scale given offsets.\n   */\n  const getAdjustedScale = useCallback(() => {\n    if (scale.bandwidth) {\n      let offset = scale.bandwidth() / 2;\n      if (scale.round()) {\n        offset = Math.round(offset);\n      }\n\n      return (d) => +scale(d) + offset;\n    } else {\n      return (d) => +scale(d);\n    }\n  }, [scale]);\n\n  /**\n   * Gets the x/y position for a given tick.\n   */\n  const getPosition = useCallback(\n    (scaledTick: number) => {\n      if (orientation === 'horizontal') {\n        return { x: scaledTick, y: 0 };\n      } else {\n        return { x: 0, y: scaledTick };\n      }\n    },\n    [orientation]\n  );\n\n  /**\n   * Gets the dimension (height/width) this axis is calculating on.\n   */\n  const getDimension = useCallback(() => {\n    return orientation === 'vertical' ? height : width;\n  }, [height, orientation, width]);\n\n  /**\n   * Gets the formatted label of the tick.\n   */\n  const labelFormatFn = useMemo((): any => {\n    if (labelProps.format) {\n      return labelProps.format;\n    } else if (scale.tickFormat) {\n      return scale.tickFormat.apply(scale, [5]);\n    } else {\n      return (v) => formatValue(v);\n    }\n  }, [labelProps.format, scale]);\n\n  /**\n   * Gets the ticks given the dimensions and scales and returns\n   * the text and position.\n   */\n  const ticks = useMemo((): ProcessedTick[] => {\n    const dimension = getDimension();\n    const maxTicks = getMaxTicks(tickSize, dimension);\n    const ticks = getTicks(scale, tickValues, axis.type, maxTicks, interval);\n    const adjustedScale = getAdjustedScale();\n    const format = labelFormatFn;\n    const midpoint = dimension / 2;\n\n    return ticks.map((tick) => {\n      const fullText = format(tick);\n      const scaledTick = adjustedScale(tick);\n      const position = getPosition(scaledTick);\n      const text = ellipsize(fullText, 18);\n      const size = label\n        ? calculateDimensions(\n          text,\n          labelProps.fontFamily,\n          labelProps.fontSize?.toString()\n        )\n        : {};\n\n      return {\n        ...position,\n        ...size,\n        text,\n        fullText,\n        half:\n          scaledTick === midpoint\n            ? 'center'\n            : scaledTick < midpoint\n              ? 'start'\n              : 'end'\n      };\n    });\n  }, [\n    axis.type,\n    getAdjustedScale,\n    getDimension,\n    getPosition,\n    interval,\n    label,\n    labelProps,\n    labelFormatFn,\n    scale,\n    tickSize,\n    tickValues\n  ]);\n\n  /**\n   * Calculates the rotation angle that the ticks need to be shifted to.\n   * This equation will measure the length of the text in a external canvas\n   * object and determine what the longest label is and rotate until they fit.\n   */\n  const angle = useMemo((): number => {\n    if (!label) {\n      return 0;\n    }\n\n    const dimension = getDimension();\n    const maxTicksLength = max(ticks, (tick) => tick.width);\n    let angle = 0;\n\n    if (labelProps.rotation) {\n      if (labelProps.rotation === true) {\n        let baseWidth = maxTicksLength;\n        const maxBaseWidth = Math.floor(dimension / ticks.length);\n\n        while (baseWidth > maxBaseWidth && angle > -90) {\n          angle -= 30;\n          baseWidth = Math.cos(angle * (Math.PI / 180)) * maxTicksLength;\n        }\n      } else {\n        angle = labelProps.rotation;\n      }\n    }\n\n    return angle;\n  }, [getDimension, label, labelProps, ticks]);\n\n  return (\n    <Fragment>\n      {ticks.map((tick, i) => (\n        <g key={i} transform={`translate(${tick.x}, ${tick.y})`}>\n          {line && (\n            <CloneElement<LinearAxisTickLineProps>\n              element={line}\n              height={height}\n              width={width}\n              orientation={orientation}\n            />\n          )}\n          {label && (\n            <CloneElement<LinearAxisTickLabelProps>\n              element={label}\n              text={tick.text}\n              fullText={tick.fullText}\n              half={tick.half}\n              angle={angle}\n              orientation={orientation}\n              line={line!}\n            />\n          )}\n        </g>\n      ))}\n    </Fragment>\n  );\n};\n\nexport const LINEAR_AXIS_TICK_SERIES_DEFAULT_PROPS = {\n  line: (\n    <LinearAxisTickLine\n      {...LINEAR_AXIS_TICK_LINE_DEFAULT_PROPS}\n      height={10}\n      width={10}\n      orientation=\"horizontal\"\n      position=\"center\"\n    />\n  ),\n  label: (\n    <LinearAxisTickLabel\n      line={\n        <LinearAxisTickLine\n          {...LINEAR_AXIS_TICK_LINE_DEFAULT_PROPS}\n          orientation=\"horizontal\"\n          position=\"center\"\n          height={5}\n          width={5}\n        />\n      }\n      text=\"\"\n      fullText=\"\"\n      angle={0}\n      orientation=\"horizontal\"\n      half=\"start\"\n      position=\"center\"\n    />\n  ),\n  tickSize: 30\n};\n","import { CloneElement } from 'reablocks';\nimport React, {\n  FC,\n  ReactElement,\n  createRef,\n  useCallback,\n  useEffect,\n  useMemo,\n  useState\n} from 'react';\nimport { ChartDataTypes } from '@/common/data';\nimport { LinearAxisLine, LinearAxisLineProps } from './LinearAxisLine';\nimport {\n  LINEAR_AXIS_TICK_SERIES_DEFAULT_PROPS,\n  LinearAxisTickSeries,\n  LinearAxisTickSeriesProps\n} from './LinearAxisTickSeries';\nimport { mergeDefaultProps } from '@/common/utils';\n\nexport interface LinearAxisDimensionChanged {\n  height?: number;\n  width?: number;\n}\n\nexport interface LinearAxisProps {\n  height?: number;\n  width?: number;\n  domain?: ChartDataTypes[];\n  scaled?: boolean;\n  roundDomains?: boolean;\n  type?: 'value' | 'time' | 'category' | 'duration';\n  position?: 'start' | 'end' | 'center';\n  tickSeries?: ReactElement<\n    LinearAxisTickSeriesProps,\n    typeof LinearAxisTickSeries\n  >;\n  axisLine?: ReactElement<LinearAxisLineProps, typeof LinearAxisLine> | null;\n  scale?: any;\n  visibility?: 'visible' | 'hidden';\n  orientation?: 'horizontal' | 'vertical';\n  onDimensionsChange?: (event: LinearAxisDimensionChanged) => void;\n}\n\ninterface LinearAxisState {\n  height?: number;\n  width?: number;\n}\n\nexport const LinearAxis: FC<Partial<LinearAxisProps>> = (props) => {\n  const {\n    position,\n    tickSeries,\n    axisLine,\n    height,\n    width,\n    scale,\n    orientation,\n    visibility = 'visible',\n    onDimensionsChange\n  } = mergeDefaultProps(LINEAR_AXIS_DEFAULT_PROPS, props);\n  const tickSeriesProps = useMemo(\n    () =>\n      mergeDefaultProps(\n        LINEAR_AXIS_TICK_SERIES_DEFAULT_PROPS,\n        tickSeries?.props\n      ),\n    [tickSeries?.props]\n  );\n\n  const containerRef = createRef<SVGGElement>();\n  const [dimensions, setDimensions] = useState<LinearAxisState>({\n    height: height,\n    width: width\n  });\n\n  const updateDimensions = useCallback(() => {\n    const shouldOffset = position !== 'center';\n\n    let height;\n    let width;\n    if (shouldOffset) {\n      const dims = containerRef.current!.getBoundingClientRect();\n      width = Math.floor(dims.width);\n      height = Math.floor(dims.height);\n    }\n\n    if (orientation === 'vertical') {\n      if (dimensions.width !== width) {\n        setDimensions({ ...dimensions, width: width });\n        onDimensionsChange({ width });\n      }\n    } else {\n      if (dimensions.height !== height) {\n        setDimensions({ ...dimensions, height: height });\n        onDimensionsChange({ height });\n      }\n    }\n  }, [containerRef, dimensions, onDimensionsChange, orientation, position]);\n\n  useEffect(() => {\n    updateDimensions();\n  }, [updateDimensions, height, width, scale]);\n\n  function getPosition() {\n    let translateY = 0;\n    let translateX = 0;\n\n    if (position === 'end' && orientation === 'horizontal') {\n      translateY = height;\n    } else if (position === 'center' && orientation === 'horizontal') {\n      translateY = height / 2;\n    } else if (position === 'end' && orientation === 'vertical') {\n      translateX = width;\n    } else if (position === 'center' && orientation === 'vertical') {\n      translateX = width / 2;\n    }\n\n    return { translateX, translateY };\n  }\n\n  const { translateX, translateY } = getPosition();\n\n  return (\n    <g\n      transform={`translate(${translateX}, ${translateY})`}\n      ref={containerRef}\n      visibility={visibility}\n    >\n      {axisLine && (\n        <CloneElement<LinearAxisLineProps>\n          element={axisLine}\n          height={height}\n          width={width}\n          scale={scale}\n          orientation={orientation}\n        />\n      )}\n      {(tickSeriesProps.line || tickSeriesProps.label) && (\n        <CloneElement<LinearAxisTickSeriesProps>\n          element={tickSeries}\n          height={height}\n          width={width}\n          scale={scale}\n          orientation={orientation}\n          axis={props}\n        />\n      )}\n    </g>\n  );\n};\n\nexport const LINEAR_AXIS_DEFAULT_PROPS = {\n  scaled: false,\n  roundDomains: false,\n  axisLine: <LinearAxisLine />,\n  onDimensionsChange: () => undefined\n};\n","import React, { FC, useMemo } from 'react';\nimport {\n  LinearAxisTickLabelProps,\n  LinearAxisTickLabel,\n  LINEAR_AXIS_TICK_LABEL_DEFAULT_PROPS\n} from './LinearAxisTickLabel';\nimport {\n  LinearAxisTickLineProps,\n  LinearAxisTickLine,\n  LINEAR_AXIS_TICK_LINE_DEFAULT_PROPS\n} from './LinearAxisTickLine';\nimport {\n  LinearAxisTickSeriesProps,\n  LinearAxisTickSeries,\n  LINEAR_AXIS_TICK_SERIES_DEFAULT_PROPS\n} from './LinearAxisTickSeries';\nimport {\n  LinearAxisProps,\n  LinearAxis,\n  LINEAR_AXIS_DEFAULT_PROPS\n} from './LinearAxis';\nimport { mergeDefaultProps } from '@/common/utils';\n\nexport const LinearXAxisTickLabel: FC<Partial<LinearAxisTickLabelProps>> = (\n  props\n) => (\n  <LinearAxisTickLabel\n    {...mergeDefaultProps(LINEAR_X_AXIS_TICK_LABEL_DEFAULT_PROPS, props)}\n  />\n);\nexport const LINEAR_X_AXIS_TICK_LABEL_DEFAULT_PROPS = {\n  ...LINEAR_AXIS_TICK_LABEL_DEFAULT_PROPS,\n  rotation: true,\n  position: 'end',\n  align: 'center'\n} as Partial<LinearAxisTickLabelProps>;\n\nexport const LinearXAxisTickLine: FC<Partial<LinearAxisTickLineProps>> = (\n  props\n) => (\n  <LinearAxisTickLine\n    {...mergeDefaultProps(LINEAR_X_AXIS_TICK_LINE_DEFAULT_PROPS, props)}\n  />\n);\nexport const LINEAR_X_AXIS_TICK_LINE_DEFAULT_PROPS = {\n  ...LINEAR_AXIS_TICK_LINE_DEFAULT_PROPS,\n  position: 'end'\n} as Partial<LinearAxisTickLineProps>;\n\nexport const LinearXAxisTickSeries: FC<Partial<LinearAxisTickSeriesProps>> = (\n  props\n) => {\n  const xTickSeriesProps = mergeDefaultProps(\n    LINEAR_X_AXIS_TICK_SERIES_DEFAULT_PROPS,\n    props\n  );\n\n  return (\n    <LinearAxisTickSeries\n      {...xTickSeriesProps}\n      line={\n        xTickSeriesProps?.line ? (\n          <LinearXAxisTickLine\n            {...mergeDefaultProps(\n              LINEAR_X_AXIS_TICK_LINE_DEFAULT_PROPS,\n              props?.line?.props\n            )}\n          />\n        ) : null\n      }\n      label={\n        xTickSeriesProps?.label ? (\n          <LinearXAxisTickLabel\n            {...mergeDefaultProps(\n              LINEAR_X_AXIS_TICK_LABEL_DEFAULT_PROPS,\n              props?.label?.props\n            )}\n          />\n        ) : null\n      }\n    />\n  );\n};\nexport const LINEAR_X_AXIS_TICK_SERIES_DEFAULT_PROPS = {\n  ...LINEAR_AXIS_TICK_SERIES_DEFAULT_PROPS,\n  tickSize: 75,\n  line: <LinearXAxisTickLine {...LINEAR_X_AXIS_TICK_LINE_DEFAULT_PROPS} />,\n  label: <LinearXAxisTickLabel {...LINEAR_X_AXIS_TICK_LABEL_DEFAULT_PROPS} />\n};\n\nexport const LinearXAxis: FC<Partial<LinearAxisProps>> = (props) => {\n  const xAxisProps = useMemo(\n    () => mergeDefaultProps(LINEAR_X_AXIS_DEFAULT_PROPS, props),\n    [props]\n  );\n\n  return (\n    <LinearAxis\n      {...xAxisProps}\n      tickSeries={\n        xAxisProps.tickSeries && (\n          <LinearXAxisTickSeries\n            {...mergeDefaultProps(\n              LINEAR_X_AXIS_TICK_SERIES_DEFAULT_PROPS,\n              xAxisProps?.tickSeries?.props\n            )}\n          />\n        )\n      }\n    />\n  );\n};\nexport const LINEAR_X_AXIS_DEFAULT_PROPS = {\n  ...LINEAR_AXIS_DEFAULT_PROPS,\n  position: 'end',\n  roundDomains: false,\n  scaled: false,\n  type: 'value',\n  orientation: 'horizontal',\n  tickSeries: <LinearXAxisTickSeries />\n} as Partial<LinearAxisProps>;\n","import React, { FC, useMemo } from 'react';\nimport {\n  LinearAxisTickLabelProps,\n  LinearAxisTickLabel,\n  LINEAR_AXIS_TICK_LABEL_DEFAULT_PROPS\n} from './LinearAxisTickLabel';\nimport {\n  LinearAxisTickLineProps,\n  LinearAxisTickLine,\n  LINEAR_AXIS_TICK_LINE_DEFAULT_PROPS\n} from './LinearAxisTickLine';\nimport {\n  LinearAxisTickSeriesProps,\n  LinearAxisTickSeries,\n  LINEAR_AXIS_TICK_SERIES_DEFAULT_PROPS\n} from './LinearAxisTickSeries';\nimport {\n  LinearAxisProps,\n  LinearAxis,\n  LINEAR_AXIS_DEFAULT_PROPS\n} from './LinearAxis';\nimport { mergeDefaultProps } from '@/common/utils';\n\nexport const LinearYAxisTickLabel: FC<Partial<LinearAxisTickLabelProps>> = (\n  props\n) => (\n  <LinearAxisTickLabel\n    {...mergeDefaultProps(LINEAR_Y_AXIS_TICK_LABEL_DEFAULT_PROPS, props)}\n  />\n);\nexport const LINEAR_Y_AXIS_TICK_LABEL_DEFAULT_PROPS = {\n  ...LINEAR_AXIS_TICK_LABEL_DEFAULT_PROPS,\n  rotation: false,\n  position: 'start',\n  align: 'center'\n} as Partial<LinearAxisTickLabelProps>;\n\nexport const LinearYAxisTickLine: FC<Partial<LinearAxisTickLineProps>> = (\n  props\n) => (\n  <LinearAxisTickLine\n    {...mergeDefaultProps(LINEAR_Y_AXIS_TICK_LINE_DEFAULT_PROPS, props)}\n  />\n);\nexport const LINEAR_Y_AXIS_TICK_LINE_DEFAULT_PROPS = {\n  ...LINEAR_AXIS_TICK_LINE_DEFAULT_PROPS,\n  position: 'start'\n} as Partial<LinearAxisTickLineProps>;\n\nexport const LinearYAxisTickSeries: FC<Partial<LinearAxisTickSeriesProps>> = (\n  props\n) => {\n  const yTickSeriesProps = mergeDefaultProps(\n    LINEAR_Y_AXIS_TICK_SERIES_DEFAULT_PROPS,\n    props\n  );\n\n  return (\n    <LinearAxisTickSeries\n      {...yTickSeriesProps}\n      line={\n        yTickSeriesProps?.line ? (\n          <LinearYAxisTickLine\n            {...mergeDefaultProps(\n              LINEAR_Y_AXIS_TICK_LINE_DEFAULT_PROPS,\n              props?.line?.props\n            )}\n          />\n        ) : null\n      }\n      label={\n        yTickSeriesProps?.label ? (\n          <LinearYAxisTickLabel\n            {...mergeDefaultProps(\n              LINEAR_Y_AXIS_TICK_LABEL_DEFAULT_PROPS,\n              props?.label?.props\n            )}\n          />\n        ) : null\n      }\n    />\n  );\n};\nexport const LINEAR_Y_AXIS_TICK_SERIES_DEFAULT_PROPS = {\n  ...LINEAR_AXIS_TICK_SERIES_DEFAULT_PROPS,\n  tickSize: 30,\n  line: <LinearYAxisTickLine {...LINEAR_Y_AXIS_TICK_LINE_DEFAULT_PROPS} />,\n  label: <LinearYAxisTickLabel {...LINEAR_Y_AXIS_TICK_LABEL_DEFAULT_PROPS} />\n};\n\nexport const LinearYAxis: FC<Partial<LinearAxisProps>> = (props) => {\n  const yAxisProps = useMemo(\n    () => mergeDefaultProps(LINEAR_Y_AXIS_DEFAULT_PROPS, props),\n    [props]\n  );\n\n  return (\n    <LinearAxis\n      {...yAxisProps}\n      tickSeries={\n        yAxisProps.tickSeries && (\n          <LinearYAxisTickSeries\n            {...mergeDefaultProps(\n              LINEAR_Y_AXIS_TICK_SERIES_DEFAULT_PROPS,\n              yAxisProps?.tickSeries?.props\n            )}\n          />\n        )\n      }\n    />\n  );\n};\nexport const LINEAR_Y_AXIS_DEFAULT_PROPS = {\n  ...LINEAR_AXIS_DEFAULT_PROPS,\n  orientation: 'vertical',\n  scaled: false,\n  roundDomains: false,\n  type: 'value',\n  position: 'start',\n  tickSeries: <LinearYAxisTickSeries />\n} as Partial<LinearAxisProps>;\n","import { LinearAxisProps } from './LinearAxis';\n\n/**\n * Returns whether the axis has a visual element or not.\n */\nexport const isAxisVisible = (axis: LinearAxisProps) =>\n  !!axis.tickSeries.props.label || !!axis.tickSeries.props.line;\n","import React, { FC } from 'react';\n\nexport interface RadialAxisTickLineProps {\n  /**\n   * Size of the tick line.\n   */\n  size?: number;\n\n  /**\n   * Stroke color of the tick line.\n   */\n  stroke: string;\n\n  /**\n   * Inner radius of the arc.\n   */\n  innerRadius: number;\n\n  /**\n   * Outer radius of the arc.\n   */\n  outerRadius: number;\n\n  /**\n   * Position of the tick line.\n   */\n  position: 'inside' | 'outside';\n}\n\nexport const RadialAxisTickLine: FC<Partial<RadialAxisTickLineProps>> = (\n  props\n) => {\n  const { stroke, size, position, innerRadius, outerRadius } = {\n    ...RADIAL_AXIS_TICK_LINE_DEFAULT_PROPS,\n    ...props\n  };\n\n  const x1 = position === 'outside' ? size : -(outerRadius - innerRadius);\n\n  return (\n    <line x1={x1} x2={0} stroke={stroke} style={{ pointerEvents: 'none' }} />\n  );\n};\n\nexport const RADIAL_AXIS_TICK_LINE_DEFAULT_PROPS = {\n  stroke: 'rgba(113, 128, 141, .5)',\n  size: 10,\n  position: 'inside'\n};\n","import React, { FC, SVGTextElementAttributes, useMemo } from 'react';\nimport { formatValue } from '@/common/utils/formatting';\n\nconst rad2deg = (angle: number) => (angle * 180) / Math.PI;\n\nexport interface RadialAxisTickLabelProps\n  extends Omit<SVGTextElementAttributes<SVGTextElement>, 'format'> {\n  /**\n   * Data to render.\n   */\n  data: any;\n\n  /**\n   * Size of the line.\n   */\n  lineSize: number;\n\n  /**\n   * Color of the text.\n   */\n  fill: string;\n\n  /**\n   * Font size of the text.\n   */\n  fontSize: number;\n\n  /**\n   * Rotation of the text.\n   */\n  rotation: number;\n\n  /**\n   * Font family of the text.\n   */\n  fontFamily: string;\n\n  /**\n   * Index of the tick.\n   */\n  index: number;\n\n  /**\n   * Padding of the tick.\n   */\n  padding: number;\n\n  /**\n   * Point of the tick.\n   */\n  point: any;\n\n  /**\n   * Auto rotate the text.\n   */\n  autoRotate: boolean;\n\n  /**\n   * Format of the label.\n   */\n  format?: (value: any, index: number) => any | string;\n\n  /**\n   * Format tooltip title on hover label.\n   */\n  formatTooltip?: (value: any, index: number) => any | string;\n}\n\nexport const RadialAxisTickLabel: FC<Partial<RadialAxisTickLabelProps>> = ({\n  point,\n  autoRotate = true,\n  rotation,\n  padding = 15,\n  data,\n  fill = '#71808d',\n  fontFamily = 'sans-serif',\n  fontSize = 11,\n  format,\n  lineSize,\n  index,\n  formatTooltip,\n  ...rest\n}) => {\n  const { transform, textAnchor } = useMemo(() => {\n    let textAnchor;\n    let transform;\n\n    if (autoRotate) {\n      // TODO: This centers the text, determine better way later\n      if (\n        (rotation >= 85 && rotation <= 95) ||\n        (rotation <= -85 && rotation >= -95) ||\n        (rotation >= 265 && rotation <= 275) ||\n        (rotation <= -265 && rotation >= -275)\n      ) {\n        textAnchor = 'middle';\n      } else if (\n        (rotation < -85 && rotation > -265) ||\n        (rotation > 95 && rotation < 265)\n      ) {\n        textAnchor = 'end';\n      } else {\n        textAnchor = 'start';\n      }\n\n      transform = `rotate(${90 - rad2deg(point)}, ${padding}, 0)`;\n    } else {\n      const shouldRotate = rotation && (rotation > 100 || rotation < -100);\n      const rotate = shouldRotate ? 180 : 0;\n      const translate = shouldRotate ? -30 : 0;\n      textAnchor = shouldRotate ? 'end' : 'start';\n      transform = `rotate(${rotate}) translate(${translate})`;\n    }\n\n    return {\n      transform,\n      textAnchor\n    };\n  }, [autoRotate, padding, point, rotation]);\n\n  const text = format ? format(data, index) : formatValue(data);\n  const titleHover =\n    typeof formatTooltip === 'function' ? formatTooltip(data, index) : text;\n\n  return (\n    <g transform={transform}>\n      <title>{titleHover}</title>\n      <text\n        dy=\"0.35em\"\n        x={lineSize + 5}\n        textAnchor={textAnchor}\n        fill={fill}\n        fontFamily={fontFamily}\n        fontSize={fontSize}\n        {...rest}\n      >\n        {text}\n      </text>\n    </g>\n  );\n};\n","import React, { FC, ReactElement, useMemo } from 'react';\nimport {\n  RadialAxisTickLineProps,\n  RadialAxisTickLine,\n  RADIAL_AXIS_TICK_LINE_DEFAULT_PROPS\n} from './RadialAxisTickLine';\nimport {\n  RadialAxisTickLabelProps,\n  RadialAxisTickLabel\n} from './RadialAxisTickLabel';\nimport { CloneElement } from 'reablocks';\n\nexport interface RadialAxisTickProps {\n  /**\n   * Scale to use for the tick.\n   */\n  scale: any;\n\n  /**\n   * Outer radius of the arc.\n   */\n  outerRadius: number;\n\n  /**\n   * Inner radius of the arc.\n   */\n  innerRadius: number;\n\n  /**\n   * Padding between the tick and the label.\n   */\n  padding: number;\n\n  /**\n   * Data to render.\n   */\n  data: any;\n\n  /**\n   * Index of the tick.\n   */\n  index: number;\n\n  /**\n   * Line element to render.\n   */\n  line: ReactElement<RadialAxisTickLineProps, typeof RadialAxisTickLine> | null;\n\n  /**\n   * Label element to render.\n   */\n  label: ReactElement<\n    RadialAxisTickLabelProps,\n    typeof RadialAxisTickLabel\n  > | null;\n\n  /**\n   * Start angle for the first value.\n   */\n  startAngle?: number;\n\n  /**\n   * End angle for the last value.\n   */\n  endAngle?: number;\n}\n\nexport const RadialAxisTick: FC<Partial<RadialAxisTickProps>> = ({\n  line = <RadialAxisTickLine />,\n  label = <RadialAxisTickLabel />,\n  scale,\n  outerRadius = 0,\n  data,\n  index,\n  padding = 0,\n  innerRadius\n}) => {\n  const lineProps = useMemo(\n    () => ({ ...RADIAL_AXIS_TICK_LINE_DEFAULT_PROPS, ...(line?.props ?? {}) }),\n    [line?.props]\n  );\n  const point = scale(data);\n  const rotation = (point * 180) / Math.PI - 90;\n  const transform = `rotate(${rotation}) translate(${outerRadius + padding},0)`;\n  const lineSize = line ? lineProps.size : 0;\n\n  return (\n    <g transform={transform}>\n      {line && (\n        <CloneElement<RadialAxisTickLineProps>\n          element={line}\n          innerRadius={innerRadius}\n          outerRadius={outerRadius}\n        />\n      )}\n      {label && (\n        <CloneElement<RadialAxisTickLabelProps>\n          element={label}\n          index={index}\n          point={point}\n          rotation={rotation}\n          lineSize={lineSize}\n          data={data}\n        />\n      )}\n    </g>\n  );\n};\n","import React, { FC, Fragment, ReactElement } from 'react';\nimport { RadialAxisTick, RadialAxisTickProps } from './RadialAxisTick';\nimport { CloneElement } from 'reablocks';\nimport { getTicks } from '@/common/utils/ticks';\nimport { TimeInterval } from 'd3-time';\n\nexport interface TickCallback {\n  index?: number;\n}\n\nexport interface RadialAxisTickSeriesProps {\n  /**\n   * Scale to use for the tick.\n   */\n  scale: any;\n\n  /**\n   * Number of ticks to render.\n   */\n  count?: number;\n\n  /**\n   * Interval between ticks.\n   */\n  interval?: number | TimeInterval;\n\n  /**\n   * Tick values to render.\n   */\n  tickValues: any[];\n\n  /**\n   * Outer radius of the arc.\n   */\n  outerRadius: number;\n\n  /**\n   * Type of the axis.\n   */\n  type: 'value' | 'category' | 'time' | 'duration';\n\n  /**\n   * Inner radius of the arc.\n   */\n  innerRadius: number;\n\n  /**\n   * Tick element to render.\n   */\n  tick:\n    | ((\n        tick: TickCallback\n      ) => ReactElement<RadialAxisTickProps, typeof RadialAxisTick>)\n    | ReactElement<RadialAxisTickProps, typeof RadialAxisTick>;\n\n  /**\n   * Start angle for the first value.\n   */\n  startAngle?: number;\n\n  /**\n   * End angle for the last value.\n   */\n  endAngle?: number;\n}\n\nexport const RadialAxisTickSeries: FC<Partial<RadialAxisTickSeriesProps>> = ({\n  scale,\n  count = 12,\n  outerRadius,\n  tick = <RadialAxisTick />,\n  tickValues,\n  innerRadius,\n  interval,\n  type = 'time',\n  startAngle = 0,\n  endAngle = 2 * Math.PI\n}) => {\n  const ticks = getTicks(scale, tickValues, type, count, interval || count);\n\n  return (\n    <Fragment>\n      {ticks.map((data, i) => {\n        const tickElement =\n          typeof tick === 'function' ? tick({ index: i }) : tick;\n        return (\n          <CloneElement<RadialAxisTickProps>\n            element={tickElement}\n            key={i}\n            index={i}\n            scale={scale}\n            data={data}\n            innerRadius={innerRadius}\n            outerRadius={outerRadius}\n            startAngle={startAngle}\n            endAngle={endAngle}\n          />\n        );\n      })}\n    </Fragment>\n  );\n};\n","import { arc } from 'd3-shape';\nimport React, { FC } from 'react';\n\nexport interface RadialAxisArcProps {\n  /**\n   * Index of the arc.\n   */\n  index: number;\n\n  /**\n   * Scale to use for the arc.\n   */\n  scale: any;\n\n  /**\n   * Stroke color of the arc.\n   */\n  stroke: ((index: number) => string) | string;\n\n  /**\n   * Stroke dash array of the arc.\n   */\n  strokeDasharray: ((index: number) => string) | string;\n\n  /**\n   * Start angle for the first value.\n   */\n  startAngle?: number;\n\n  /**\n   * End angle for the last value.\n   */\n  endAngle?: number;\n}\n\nexport const RadialAxisArc: FC<Partial<RadialAxisArcProps>> = (props) => {\n  const { index, stroke, strokeDasharray, scale, startAngle, endAngle } = {\n    ...RADIAL_AXIS_ARC_DEFAULT_PROPS,\n    ...props\n  };\n\n  const r = scale(index);\n  const strokeColor = typeof stroke === 'string' ? stroke : stroke(index);\n  const strokeDash =\n    typeof strokeDasharray === 'string'\n      ? strokeDasharray\n      : strokeDasharray(index);\n\n  const isFullCircle = Math.abs(endAngle - startAngle) >= 2 * Math.PI;\n\n  const x = arc()({\n    innerRadius: r,\n    outerRadius: r,\n    startAngle: startAngle,\n    endAngle: endAngle\n  });\n\n  // Path calculation for intermediate angles\n  const REGEX = /(-?\\d+\\.?\\d*,-?\\d+\\.?\\d*A-?\\d+\\.?\\d*,-?\\d+\\.?\\d*)/gm;\n  const matches = x.match(REGEX);\n  const start = matches?.[0]?.split('A', 2)?.[0];\n  const end = matches?.[1]?.split('A', 2)?.[0];\n  const d = x + ` M ${start} L 0,0 M ${end} L 0,0`;\n\n  return (\n    <>\n      {isFullCircle ? (\n        <circle\n          fill=\"none\"\n          strokeDasharray={strokeDash}\n          stroke={strokeColor}\n          style={{ pointerEvents: 'none' }}\n          cx=\"0\"\n          cy=\"0\"\n          r={r}\n        />\n      ) : (\n        <path\n          d={d}\n          fill=\"none\"\n          strokeDasharray={strokeDash}\n          stroke={strokeColor}\n          style={{ pointerEvents: 'none' }}\n        />\n      )}\n    </>\n  );\n};\n\nexport const RADIAL_AXIS_ARC_DEFAULT_PROPS = {\n  stroke: '#71808d',\n  strokeDasharray: '1,4',\n  startAngle: 0,\n  endAngle: 2 * Math.PI\n};\n","/**\n * Given a set of arcs, return an array of points for each arc.\n */\nexport const getPointsForLevels = ({ count, outerRadius, ticks, arcs }) => {\n  const levels: Array<Array<{ x: number; y: number }>> = [];\n  const polyangle = (Math.PI * 2) / ticks;\n\n  for (const level of arcs) {\n    const hyp = (level / count) * outerRadius;\n\n    const points: Array<{ x: number; y: number }> = [];\n    for (let vertex = 0; vertex < ticks; vertex++) {\n      const theta = vertex * polyangle;\n      points.push({\n        x: hyp * Math.sin(Math.PI - theta),\n        y: hyp * Math.cos(Math.PI - theta)\n      });\n    }\n\n    levels.push([...points, points[0]]);\n  }\n\n  return levels;\n};\n","import React, { FC, ReactElement } from 'react';\nimport {\n  RADIAL_AXIS_ARC_DEFAULT_PROPS,\n  RadialAxisArc,\n  RadialAxisArcProps\n} from './RadialAxisArc';\nimport { CloneElement } from 'reablocks';\nimport { scaleLinear } from 'd3-scale';\nimport { getPointsForLevels } from './utils';\nimport { RadialAxisArcLine, RadialAxisArcLineProps } from './RadialAxisArcLine';\nimport { mergeDefaultProps } from '@/common/utils';\n\nexport interface RadialAxisArcSeriesProps {\n  /**\n   * Arc element to render.\n   */\n  arc: ReactElement<RadialAxisArcProps, typeof RadialAxisArc>;\n\n  /**\n   * Line element to render.\n   */\n  line: ReactElement<RadialAxisArcLineProps, typeof RadialAxisArcLine>;\n\n  /**\n   * Number of arcs to render.\n   */\n  count: number;\n\n  /**\n   * Inner radius of the arc.\n   */\n  innerRadius: number;\n\n  /**\n   * Outer radius of the arc.\n   */\n  outerRadius: number;\n\n  /**\n   * Calculated tick values by the Radial Axis.\n   */\n  tickValues?: any[];\n\n  /**\n   * Start angle for the first value.\n   */\n  startAngle?: number;\n\n  /**\n   * End angle for the last value.\n   */\n  endAngle?: number;\n}\n\nexport const RadialAxisArcSeries: FC<Partial<RadialAxisArcSeriesProps>> = (\n  props\n) => {\n  const {\n    count,\n    innerRadius,\n    outerRadius,\n    line,\n    arc,\n    tickValues,\n    startAngle,\n    endAngle\n  } = mergeDefaultProps(RADIAL_AXIS_ARC_SERIES_DEFAULT_PROPS, props);\n\n  const scale = scaleLinear()\n    .domain([0, count])\n    .range([innerRadius, outerRadius]);\n\n  const arcs = scale.ticks(count);\n\n  const points = getPointsForLevels({\n    count,\n    outerRadius,\n    ticks: tickValues.length,\n    arcs\n  });\n\n  return (\n    <>\n      {line && (\n        <>\n          {points.map((d, i) => (\n            <CloneElement<RadialAxisArcLineProps>\n              element={line}\n              key={i}\n              data={d}\n              index={i}\n            />\n          ))}\n        </>\n      )}\n      {arc && (\n        <>\n          {arcs.map((d) => (\n            <CloneElement<RadialAxisArcProps>\n              element={arc}\n              key={d}\n              index={d}\n              scale={scale}\n              startAngle={startAngle}\n              endAngle={endAngle}\n            />\n          ))}\n        </>\n      )}\n    </>\n  );\n};\n\nexport const RADIAL_AXIS_ARC_SERIES_DEFAULT_PROPS = {\n  count: 12,\n  arc: <RadialAxisArc />,\n  startAngle: 0,\n  endAngle: 2 * Math.PI\n};\n","import { line } from 'd3-shape';\nimport React, { FC } from 'react';\n\nexport interface RadialAxisArcLineProps {\n  /**\n   * Stroke color of the arc.\n   */\n  stroke: ((index: number) => string) | string;\n\n  /**\n   * Data to render the line.\n   */\n  data: Array<{ x: number; y: number }>;\n\n  /**\n   * Index of the arc.\n   */\n  index: number;\n}\n\nexport const RadialAxisArcLine: FC<Partial<RadialAxisArcLineProps>> = (\n  props\n) => {\n  const { data, stroke, index } = {\n    ...RADIAL_AXIS_ARC_LINE_DEFAULT_PROPS,\n    ...props\n  };\n\n  const lineGenerator = line<{ x: number; y: number }>()\n    .x((d: any) => d.x)\n    .y((d: any) => d.y);\n\n  const d = lineGenerator(data);\n  const strokeColor = typeof stroke === 'string' ? stroke : stroke(index);\n\n  return (\n    <path\n      d={d}\n      stroke={strokeColor}\n      fill=\"none\"\n      style={{ pointerEvents: 'none' }}\n    />\n  );\n};\n\nexport const RADIAL_AXIS_ARC_LINE_DEFAULT_PROPS = {\n  stroke: '#71808d'\n};\n","import React, { FC, Fragment, ReactElement } from 'react';\nimport {\n  RadialAxisTickSeries,\n  RadialAxisTickSeriesProps\n} from './RadialAxisTickSeries';\nimport {\n  RADIAL_AXIS_ARC_SERIES_DEFAULT_PROPS,\n  RadialAxisArcSeries,\n  RadialAxisArcSeriesProps\n} from './RadialAxisArcSeries';\nimport { CloneElement } from 'reablocks';\nimport { getTicks, mergeDefaultProps } from '@/common/utils';\n\ntype RadialAxisType = 'value' | 'time' | 'category';\n\nexport interface RadialAxisProps {\n  /**\n   * Height of the axis.\n   */\n  height: number;\n\n  /**\n   * Width of the axis.\n   */\n  width: number;\n\n  /**\n   * Scale to use for the axis.\n   */\n  xScale: any;\n\n  /**\n   * Inner radius of the axis.\n   */\n  innerRadius: number;\n\n  /**\n   * Type of the axis.\n   */\n  type: 'value' | 'time' | 'category';\n\n  /**\n   * Arc element to render.\n   */\n  arcs: ReactElement<\n    RadialAxisArcSeriesProps,\n    typeof RadialAxisArcSeries\n  > | null;\n\n  /**\n   * Tick element to render.\n   */\n  ticks: ReactElement<\n    RadialAxisTickSeriesProps,\n    typeof RadialAxisTickSeries\n  > | null;\n\n  /**\n   * Start angle for the first value.\n   */\n  startAngle?: number;\n\n  /**\n   * End angle for the last value.\n   */\n  endAngle?: number;\n}\n\nexport const RadialAxis: FC<Partial<RadialAxisProps>> = (props) => {\n  const {\n    arcs,\n    ticks,\n    xScale,\n    height,\n    width,\n    innerRadius,\n    type,\n    startAngle,\n    endAngle\n  } = mergeDefaultProps(RADIAL_AXIS_DEFAULT_PROPS, props);\n\n  const outerRadius = Math.min(height, width) / 2;\n\n  // TODO: This is a hack to get the ticks in the parent\n  // component. This is because the ticks are needed\n  // for the arcs's lines.\n  const tickValues = getTicks(\n    xScale,\n    ticks.props.tickValues,\n    type as RadialAxisType,\n    ticks.props.count,\n    ticks.props.interval || ticks.props.count\n  );\n\n  return (\n    <Fragment>\n      {arcs && (\n        <CloneElement<RadialAxisArcSeriesProps>\n          element={arcs}\n          outerRadius={outerRadius}\n          innerRadius={innerRadius}\n          tickValues={tickValues}\n          startAngle={startAngle}\n          endAngle={endAngle}\n        />\n      )}\n      {ticks && (\n        <CloneElement<RadialAxisTickSeriesProps>\n          element={ticks}\n          scale={xScale}\n          type={type as RadialAxisType}\n          innerRadius={innerRadius}\n          outerRadius={outerRadius}\n          startAngle={startAngle}\n          endAngle={endAngle}\n        />\n      )}\n    </Fragment>\n  );\n};\n\nexport const RADIAL_AXIS_DEFAULT_PROPS: Partial<RadialAxisProps> = {\n  innerRadius: 10,\n  type: 'value',\n  arcs: <RadialAxisArcSeries />,\n  ticks: <RadialAxisTickSeries />,\n  startAngle: 0,\n  endAngle: 2 * Math.PI\n};\n","import React, {\n  Children,\n  cloneElement,\n  PropsWithChildren,\n  FC,\n  useEffect,\n  useRef\n} from 'react';\nimport { toggleTextSelection } from '@/common/utils/selection';\n\ninterface MoveProps extends PropsWithChildren {\n  cursor?: string;\n  disabled?: boolean;\n  preventRightClick: boolean;\n  disableText: boolean;\n  threshold: number;\n  onMoveStart: (event) => void;\n  onMove: (event) => void;\n  onMoveCancel: (event) => void;\n  onMoveEnd: (event) => void;\n}\n\nexport const Move: FC<Partial<MoveProps>> = ({\n  cursor,\n  disabled = false,\n  preventRightClick = true,\n  disableText = true,\n  threshold = 0,\n  onMoveStart = () => undefined,\n  onMove = () => undefined,\n  onMoveCancel = () => undefined,\n  onMoveEnd = () => undefined,\n  children\n}) => {\n  let started = false;\n  let deltaX = 0;\n  let deltaY = 0;\n  let prevXPosition = 0;\n  let prevYPosition = 0;\n  const rqf = useRef<number>();\n\n  useEffect(() => {\n    return () => {\n      cancelAnimationFrame(rqf.current);\n      disposeHandlers();\n    };\n  }, []);\n\n  const disposeHandlers = () => {\n    window.removeEventListener('mousemove', onMouseMove);\n    window.removeEventListener('mouseup', onMouseUp);\n    window.removeEventListener('touchmove', onTouchMove);\n    window.removeEventListener('touchend', onTouchEnd);\n\n    setCursor(false);\n    disableTextSelection(true);\n  };\n\n  const disableTextSelection = (shouldDisable: boolean) => {\n    if (disableText) {\n      toggleTextSelection(shouldDisable);\n    }\n  };\n\n  const setCursor = (set: boolean) => {\n    if (cursor) {\n      document.body.style.cursor = set ? cursor : 'inherit';\n    }\n  };\n\n  const checkThreshold = () => {\n    return (\n      !started && (Math.abs(deltaX) > threshold || Math.abs(deltaY) > threshold)\n    );\n  };\n\n  const getTouchCoords = (event) => {\n    const { clientX, clientY } = event.touches[0];\n    return {\n      clientX,\n      clientY\n    };\n  };\n\n  const onMouseDown = (event: React.MouseEvent) => {\n    const shouldCancel = event.nativeEvent.which === 3 && preventRightClick;\n    if (shouldCancel || disabled) {\n      return;\n    }\n\n    event.preventDefault();\n    event.stopPropagation();\n\n    started = false;\n\n    // Always bind event so we cancel movement even if no action was taken\n    window.addEventListener('mousemove', onMouseMove);\n    window.addEventListener('mouseup', onMouseUp);\n  };\n\n  const onMouseMove = (event) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    const { movementX, movementY } = event;\n    let localDeltaX = deltaX + movementX;\n    let localDeltaY = deltaY + movementY;\n\n    if (checkThreshold()) {\n      disableTextSelection(true);\n      setCursor(true);\n\n      localDeltaX = 0;\n      localDeltaY = 0;\n      started = true;\n\n      onMoveStart({\n        nativeEvent: event,\n        type: 'mouse'\n      });\n    } else {\n      rqf.current = requestAnimationFrame(() => {\n        onMove({\n          nativeEvent: event,\n          type: 'mouse',\n          x: localDeltaX,\n          y: localDeltaY\n        });\n      });\n    }\n\n    deltaX = localDeltaX;\n    deltaY = localDeltaY;\n  };\n\n  const onMouseUp = (event) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    disposeHandlers();\n\n    if (started) {\n      onMoveEnd({\n        nativeEvent: event,\n        type: 'mouse'\n      });\n    } else {\n      onMoveCancel({\n        nativeEvent: event,\n        type: 'mouse'\n      });\n    }\n  };\n\n  const onTouchStart = (event: React.TouchEvent) => {\n    if (disabled || event.touches.length !== 1) {\n      return;\n    }\n\n    event.preventDefault();\n    event.stopPropagation();\n\n    started = false;\n    prevXPosition = event.touches[0].clientX;\n    prevYPosition = event.touches[0].clientY;\n\n    // Always bind event so we cancel movement even if no action was taken\n    window.addEventListener('touchmove', onTouchMove);\n    window.addEventListener('touchend', onTouchEnd);\n  };\n\n  const onTouchMove = (event: TouchEvent) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    // Calculate delta from previous position and current\n    const { clientX, clientY } = getTouchCoords(event);\n    let localDeltaX = clientX - prevXPosition;\n    let localDeltaY = clientY - prevYPosition;\n\n    // Track the delta\n    localDeltaX = localDeltaX + localDeltaX;\n    localDeltaY = localDeltaY + localDeltaY;\n\n    if (checkThreshold()) {\n      disableTextSelection(true);\n      setCursor(true);\n\n      localDeltaX = 0;\n      localDeltaY = 0;\n      started = true;\n\n      onMoveStart({\n        nativeEvent: { ...event, clientX, clientY },\n        type: 'touch'\n      });\n    } else {\n      rqf.current = requestAnimationFrame(() => {\n        onMove({\n          // TODO: Come back and clean this up...\n          nativeEvent: {\n            ...event,\n            clientX,\n            clientY\n          },\n          type: 'touch',\n          x: localDeltaX,\n          y: localDeltaY\n        });\n      });\n    }\n\n    prevXPosition = clientX;\n    prevYPosition = clientY;\n  };\n\n  const onTouchEnd = (event: TouchEvent) => {\n    event.preventDefault();\n    event.stopPropagation();\n    disposeHandlers();\n\n    if (started) {\n      onMoveEnd({\n        nativeEvent: event,\n        type: 'touch'\n      });\n    } else {\n      onMoveCancel({\n        nativeEvent: event,\n        type: 'touch'\n      });\n    }\n  };\n\n  return Children.map(children, (child: any) =>\n    cloneElement(child, {\n      ...child.props,\n      onMouseDown: (e) => {\n        onMouseDown(e);\n        if (child.props.onMouseDown) {\n          child.props.onMouseDown(e);\n        }\n      },\n      onTouchStart: (e) => {\n        onTouchStart(e);\n        if (child.props.onTouchStart) {\n          child.props.onTouchStart(e);\n        }\n      }\n    })\n  );\n};\n","import React, { FC, useState } from 'react';\nimport classNames from 'classnames';\nimport { range } from 'd3-array';\nimport { Move } from '@/common/Gestures/Move';\nimport css from './BrushHandle.module.css';\n\nexport interface BrushHandleProps {\n  height: number;\n  onHandleDrag: (deltaX: number) => void;\n}\n\nexport const BrushHandle: FC<BrushHandleProps> = (props) => {\n  const { height, onHandleDrag } = props;\n  const [isDragging, setIsDragging] = useState(false);\n\n  return (\n    <Move\n      cursor=\"ew-resize\"\n      onMoveStart={() => setIsDragging(true)}\n      onMove={({ x }) => onHandleDrag(x)}\n      onMoveEnd={() => setIsDragging(false)}\n    >\n      <g>\n        <line className={css.line} y1=\"0\" y2={height} x1=\"5\" x2=\"5\" />\n        <rect\n          className={classNames(css.handle, { [css.dragging]: isDragging })}\n          height={height - 10}\n          style={{ cursor: 'ew-resize' }}\n          width={8}\n          y=\"5\"\n          y1={height - 5}\n        />\n        <g\n          transform={`translate(-1, ${height / 2 - 10})`}\n          style={{ pointerEvents: 'none' }}\n        >\n          {range(5).map((i) => (\n            <circle cy={i * 5} cx=\"5\" r=\".5\" key={i} className={css.dot} />\n          ))}\n        </g>\n      </g>\n    </Move>\n  );\n};\n","import React, { Fragment, useState, FC, useCallback } from 'react';\nimport { BrushHandle } from './BrushHandle';\nimport { Move } from '@/common/Gestures/Move';\nimport css from './BrushSlice.module.css';\n\nexport interface BrushChangeEvent {\n  start?: number;\n  end?: number;\n}\n\ninterface BrushSliceProps {\n  height: number;\n  width: number;\n  start: number;\n  end: number;\n  onBrushChange: (event: BrushChangeEvent) => void;\n}\n\nexport const BrushSlice: FC<BrushSliceProps> = (props) => {\n  const { height, start, end, width, onBrushChange } = props;\n  const [isDragging, setIsDragging] = useState(false);\n  const sliceWidth = Math.max(end - start, 0);\n  const endSliceWidth = Math.max(width - end, 0);\n  const hasNoSlice = start === 0 && end === width;\n\n  const onMoveStart = useCallback(() => {\n    const hasNoSlice = start === 0 && end === width;\n\n    if (!hasNoSlice) {\n      setIsDragging(true);\n    }\n  }, [end, start, width]);\n\n  const onMove = useCallback(\n    ({ x }) => {\n      const startUpdated = start + x;\n      const endUpdated = end + x;\n\n      if (startUpdated >= 0 && endUpdated <= width) {\n        onBrushChange({\n          start: startUpdated,\n          end: endUpdated\n        });\n      }\n    },\n    [start, end, width, onBrushChange]\n  );\n\n  const onHandleDrag = useCallback(\n    (direction: 'start' | 'end', deltaX: number) => {\n      const startUpdated = direction === 'start' ? start + deltaX : start;\n      const endUpdated = direction !== 'start' ? end + deltaX : end;\n\n      onBrushChange({\n        start: startUpdated,\n        end: endUpdated\n      });\n    },\n    [end, onBrushChange, start]\n  );\n\n  return (\n    <Fragment>\n      <rect className={css.unsliced} height={height} width={start} />\n      <rect\n        transform={`translate(${end}, 0)`}\n        className={css.unsliced}\n        height={height}\n        width={endSliceWidth}\n      />\n      <g transform={`translate(${start}, 0)`}>\n        <Move\n          cursor=\"grabbing\"\n          onMoveStart={onMoveStart}\n          onMove={onMove}\n          onMoveEnd={() => setIsDragging(false)}\n        >\n          <rect\n            className={css.slice}\n            height={height}\n            width={sliceWidth}\n            style={{\n              cursor: isDragging ? 'grabbing' : 'grab',\n              opacity: hasNoSlice ? 0 : 0.1,\n              pointerEvents: !hasNoSlice ? 'initial' : 'none'\n            }}\n          />\n        </Move>\n        <g transform={'translate(-4, 0)'}>\n          <BrushHandle\n            height={height}\n            onHandleDrag={(deltaX) => onHandleDrag('start', deltaX)}\n          />\n        </g>\n        <g transform={`translate(${sliceWidth - 5}, 0)`}>\n          <BrushHandle\n            height={height}\n            onHandleDrag={(deltaX) => onHandleDrag('end', deltaX)}\n          />\n        </g>\n      </g>\n    </Fragment>\n  );\n};\n","import React, {\n  useState,\n  useEffect,\n  useRef,\n  FC,\n  PropsWithChildren,\n  useCallback\n} from 'react';\nimport { getPositionForTarget } from '@/common/utils/position';\nimport { BrushSlice, BrushChangeEvent } from './BrushSlice';\nimport { ChartDataTypes } from '@/common/data';\nimport { Move } from '@/common/Gestures/Move';\n\nexport interface BrushConfiguration {\n  disabled?: boolean;\n  fill?: string;\n  domain?: [ChartDataTypes, ChartDataTypes];\n  onBrushChange?: (e) => void;\n}\n\ninterface BrushProps extends PropsWithChildren {\n  height: number;\n  width: number;\n  disabled?: boolean;\n  start?: number;\n  end?: number;\n  onBrushChange?: (e: BrushChangeEvent) => void;\n}\n\ninterface BrushState {\n  start?: number;\n  end?: number;\n}\n\nexport const Brush: FC<Partial<BrushProps>> = (props) => {\n  const {\n    children,\n    disabled,\n    height,\n    width,\n    start: startProp,\n    end: endProp,\n    onBrushChange\n  } = props;\n  const [isSlicing, setIsSlicing] = useState(false);\n  const [initial, setInitial] = useState<number>();\n  const [range, setRange] = useState<BrushState>({\n    start: props.start || 0,\n    end: props.end || props.width\n  });\n  const { start, end } = range;\n\n  const ref = useRef<any>();\n\n  const ensurePositionInBounds = useCallback(\n    (newStart?: number, newEnd?: number) => {\n      let startUpdated = newStart;\n      let endUpdated = newEnd;\n\n      if (startUpdated === undefined || startUpdated <= 0) {\n        startUpdated = 0;\n      }\n\n      if (end === undefined) {\n        endUpdated = width;\n      }\n\n      if (startUpdated > endUpdated) {\n        startUpdated = start;\n      }\n\n      if (endUpdated < startUpdated) {\n        endUpdated = end;\n      }\n\n      if (endUpdated >= width) {\n        endUpdated = width;\n      }\n\n      return { start: startUpdated, end: endUpdated };\n    },\n    [end, start, width]\n  );\n\n  const getPositionsForPanEvent = useCallback((event: any) => {\n    const eventObj = {\n      target: ref.current,\n      clientX: event.clientX,\n      clientY: event.clientY\n    };\n\n    return getPositionForTarget(eventObj);\n  }, []);\n\n  const getStartEnd = useCallback(\n    (event: any) => {\n      const { x } = getPositionsForPanEvent(event);\n\n      if (x < initial) {\n        return ensurePositionInBounds(x, initial);\n      } else {\n        return ensurePositionInBounds(initial, x);\n      }\n    },\n    [ensurePositionInBounds, getPositionsForPanEvent, initial]\n  );\n\n  const onMoveStart = useCallback(\n    (event: any) => {\n      if (!disabled) {\n        const positions = getPositionsForPanEvent(event.nativeEvent);\n\n        setIsSlicing(true);\n        setInitial(positions.x);\n      }\n    },\n    [disabled, getPositionsForPanEvent]\n  );\n\n  const onMove = useCallback(\n    (event: any) => {\n      if (!disabled) {\n        const { start, end } = getStartEnd(event.nativeEvent);\n\n        if (onBrushChange) {\n          onBrushChange({\n            start,\n            end\n          });\n        }\n\n        setRange({ start, end });\n      }\n    },\n    [disabled, getStartEnd, onBrushChange]\n  );\n\n  const onMoveEnd = useCallback(() => {\n    setIsSlicing(false);\n  }, []);\n\n  const onMoveCancel = useCallback(() => {\n    const val = {\n      start: 0,\n      end: width\n    };\n\n    setRange(val);\n\n    if (onBrushChange) {\n      onBrushChange(val);\n    }\n  }, [onBrushChange, width]);\n\n  const onSliceChange = useCallback(\n    (event: BrushChangeEvent) => {\n      const val = ensurePositionInBounds(event.start, event.end);\n\n      setRange((state) => ({ ...state, ...val }));\n\n      if (onBrushChange) {\n        onBrushChange(val);\n      }\n    },\n    [ensurePositionInBounds, onBrushChange]\n  );\n\n  useEffect(() => {\n    if (end === width) {\n      setRange((prev) => ({\n        ...prev,\n        end: width\n      }));\n    }\n  }, [end, width]);\n\n  useEffect(() => {\n    // Don't update if we are doing the slicing\n    if (!isSlicing) {\n      const startUpdated = startProp !== start;\n      const endUpdated = endProp !== end;\n\n      if (startUpdated || endUpdated) {\n        setRange(ensurePositionInBounds(start, end));\n      }\n    }\n  }, [end, endProp, ensurePositionInBounds, isSlicing, start, startProp]);\n\n  return (\n    <Move\n      cursor=\"crosshair\"\n      onMoveStart={onMoveStart}\n      onMove={onMove}\n      onMoveEnd={onMoveEnd}\n      onMoveCancel={onMoveCancel}\n    >\n      <g\n        style={{\n          pointerEvents: isSlicing ? 'none' : 'auto',\n          cursor: disabled ? '' : 'crosshair'\n        }}\n      >\n        {children}\n        {!disabled && (\n          <>\n            <rect ref={ref} height={height} width={width} opacity={0} />\n            {start !== undefined && end !== undefined && (\n              <BrushSlice\n                start={start}\n                end={end}\n                height={height}\n                width={width}\n                onBrushChange={onSliceChange}\n              />\n            )}\n          </>\n        )}\n      </g>\n    </Move>\n  );\n};\n","import React, { FC, PropsWithChildren, useCallback } from 'react';\nimport { BrushConfiguration, Brush } from './Brush';\nimport { BrushChangeEvent } from './BrushSlice';\n\nexport interface ChartBrushProps extends BrushConfiguration, PropsWithChildren {\n  scale: any;\n  height: number;\n  width: number;\n  children: any;\n}\n\nexport const ChartBrush: FC<Partial<ChartBrushProps>> = (props) => {\n  const { disabled, domain, scale, onBrushChange, width, children } = props;\n\n  const getBrushOffset = useCallback(() => {\n    let start;\n    let end;\n\n    if (!disabled && domain) {\n      start = scale(domain[0]);\n      end = scale(domain[1]);\n    }\n\n    return { start, end };\n  }, [disabled, domain, scale]);\n\n  const onBrushChangeHandler = useCallback(\n    (event: BrushChangeEvent) => {\n      if (onBrushChange) {\n        let domain;\n\n        if (\n          event.start !== undefined &&\n          event.end !== undefined &&\n          (event.start !== 0 || event.end !== width)\n        ) {\n          if (scale.invert) {\n            const start = scale.invert(event.start);\n            const end = scale.invert(event.end);\n            domain = [start, end];\n          } else {\n            // invert scaleBend\n            const band = scale.step();\n            const start = Math.ceil((event.start - band / 2) / band);\n            const end = Math.ceil((event.end - band / 2) / band);\n\n            domain = [scale.domain()[start], scale.domain()[end]];\n          }\n        }\n\n        onBrushChange({\n          domain\n        });\n      }\n    },\n    [onBrushChange, scale, width]\n  );\n\n  return (\n    <Brush\n      {...props}\n      {...getBrushOffset()}\n      onBrushChange={onBrushChangeHandler}\n    >\n      {children}\n    </Brush>\n  );\n};\n","import { createContext, useContext } from 'react';\nimport { Dimensions } from '@/common/utils';\nimport { LinearAxisDimensionChanged } from '@/common/Axis';\n\nexport interface ChartContextProps extends Dimensions {\n  id: string;\n  chartSized?: boolean;\n  yAxisSized?: boolean;\n  xAxisSized?: boolean;\n  updateAxes: (\n    orientation: 'horizontal' | 'vertical',\n    event: LinearAxisDimensionChanged\n  ) => void;\n}\n\nexport const ChartContext = createContext<Partial<ChartContextProps>>({});\n\nexport const { Provider: ChartProvider, Consumer: ChartConsumer } =\n  ChartContext;\n\nexport const useChart = () => {\n  const context = useContext(ChartContext);\n\n  if (context === undefined) {\n    throw new Error('`useChart` hook must be used within a `ChartProvider`');\n  }\n\n  return context;\n};\n","import React, { FC, useCallback, useState, useMemo } from 'react';\nimport { Margins, getDimension } from '@/common/utils/dimensions';\nimport { useResizeObserver } from '@/common/utils/useResizeObserver';\nimport { useId } from 'reablocks';\nimport { LinearAxisDimensionChanged } from '@/common/Axis';\nimport classNames from 'classnames';\nimport { ChartContextProps, ChartProvider } from './ChartContext';\nimport css from './ChartContainer.module.css';\n\nexport interface ChartProps {\n  /**\n   * Id of the chart.\n   */\n  id?: string;\n\n  /**\n   * Width of the chart. If not provided will autosize.\n   */\n  width?: number;\n\n  /**\n   * Height of the chart. If not provided will autosize.\n   */\n  height?: number;\n\n  /**\n   * Margins for the chart.\n   */\n  margins?: Margins;\n\n  /**\n   * Classnames for the chart.\n   */\n  className?: string;\n\n  /**\n   * Classnames for the chart.\n   */\n  containerClassName?: string;\n\n  /**\n   * Additional css styles.\n   */\n  style?: React.StyleHTMLAttributes<SVGSVGElement>;\n\n  /**\n   * Center the chart. Used mainly internally.\n   */\n  center?: boolean;\n\n  /**\n   * Center chart on X Axis only. Used mainly internally.\n   */\n  centerX?: boolean;\n\n  /**\n   * Center chart on Y Axis only. Used mainly internally.\n   */\n  centerY?: boolean;\n}\n\nexport interface ChartContainerProps extends ChartProps {\n  /**\n   * Internal property to identify if the xAxis is visible.\n   */\n  xAxisVisible?: boolean;\n\n  /**\n   * Internal property to identify if the xAxis is visible.\n   */\n  yAxisVisible?: boolean;\n\n  /**\n   * Children elements to recieve the calculated props.\n   */\n  children: (props: ChartContainerChildProps) => any;\n}\n\nexport type ChartContainerChildProps = ChartContextProps;\n\nexport const ChartContainer: FC<ChartContainerProps> = ({\n  className,\n  children,\n  center,\n  centerX,\n  centerY,\n  style,\n  margins,\n  containerClassName,\n  xAxisVisible,\n  yAxisVisible,\n  id,\n  ...rest\n}) => {\n  const curId = useId(id);\n  const [xAxisSized, setXAxisSized] = useState<boolean>(false);\n  const [yAxisSized, setYAxisSized] = useState<boolean>(false);\n  const [xOffset, setXOffset] = useState<number>(0);\n  const [yOffset, setYOffset] = useState<number>(0);\n  const [ref, { width, height }] = useResizeObserver<HTMLDivElement>();\n\n  const chartSized = useMemo(() => {\n    if (!height || !width) {\n      return false;\n    }\n\n    // TODO: @amcdnl refactor this to account for 0-2 axises on x/y\n    if (xAxisVisible && !xAxisSized) {\n      return false;\n    }\n\n    if (yAxisVisible && !yAxisSized) {\n      return false;\n    }\n\n    return true;\n  }, [height, width, xAxisSized, xAxisVisible, yAxisVisible, yAxisSized]);\n\n  const onUpdateAxes = useCallback(\n    (\n      orientation: 'horizontal' | 'vertical',\n      event: LinearAxisDimensionChanged\n    ) => {\n      if (orientation === 'horizontal') {\n        setXAxisSized(true);\n      } else {\n        setYAxisSized(true);\n      }\n\n      if (event.height) {\n        setYOffset(event.height);\n      }\n\n      if (event.width) {\n        setXOffset(event.width);\n      }\n    },\n    []\n  );\n\n  const childProps: ChartContainerChildProps = useMemo(\n    () => ({\n      chartSized,\n      id: curId,\n      updateAxes: onUpdateAxes,\n      yAxisSized,\n      xAxisSized,\n      ...getDimension({\n        margins,\n        height,\n        width,\n        yOffset,\n        xOffset\n      })\n    }),\n    [\n      chartSized,\n      curId,\n      onUpdateAxes,\n      yAxisSized,\n      xAxisSized,\n      margins,\n      height,\n      width,\n      yOffset,\n      xOffset\n    ]\n  );\n\n  const translateX = center || centerX ? width / 2 : childProps.xMargin;\n  const translateY = center || centerY ? height / 2 : childProps.yMargin;\n\n  const styleHeight =\n    rest.height !== undefined && rest.height !== null ? rest.height : '100%';\n  const styleWidth =\n    rest.width !== undefined && rest.width !== null ? rest.width : '100%';\n\n  return (\n    <div\n      ref={ref}\n      style={{ height: styleHeight, width: styleWidth }}\n      className={classNames(containerClassName, css.container)}\n      {...rest}\n    >\n      <ChartProvider value={childProps}>\n        {height > 0 && width > 0 && (\n          <svg\n            width={width}\n            height={height}\n            className={classNames(css.svg, className)}\n            style={style}\n            tabIndex={0}\n          >\n            <g transform={`translate(${translateX}, ${translateY})`}>\n              {children(childProps)}\n            </g>\n          </svg>\n        )}\n      </ChartProvider>\n    </div>\n  );\n};\n","import bigInt from 'big-integer';\nimport { bigIntegerToLocaleString } from '@/common/utils/bigint';\nimport {\n  ChartDataTypes,\n  ChartInternalDataTypes,\n  ChartNestedDataShape,\n  ChartShallowDataShape\n} from './types';\n\nexport function normalizeValue(\n  value: ChartDataTypes,\n  maxBigInt: bigInt.BigInteger\n): ChartInternalDataTypes {\n  if (bigInt.isInstance(value)) {\n    if (maxBigInt.greater(1000000)) {\n      const divideBy = maxBigInt.divide(1000000);\n      return (value as bigInt.BigInteger).divide(divideBy).toJSNumber();\n    } else {\n      return (value as bigInt.BigInteger).toJSNumber();\n    }\n  } else {\n    return value as ChartInternalDataTypes;\n  }\n}\n\nexport function normalizeValueForFormatting(\n  value: ChartDataTypes\n): ChartInternalDataTypes {\n  if (bigInt.isInstance(value)) {\n    return bigIntegerToLocaleString(value as bigInt.BigInteger);\n  }\n  return value as ChartInternalDataTypes;\n}\n\nexport function getMaxBigIntegerForNested(series: ChartNestedDataShape[]) {\n  let maxBigInteger = bigInt.one;\n  for (const group of series) {\n    const maxBigIntegerForGroup = getMaxBigIntegerForShallow(group.data as any);\n    if (maxBigIntegerForGroup.greater(maxBigInteger)) {\n      maxBigInteger = maxBigIntegerForGroup;\n    }\n  }\n  return maxBigInteger;\n}\n\nexport function getMaxBigIntegerForShallow(series: ChartShallowDataShape[]) {\n  let maxBigInteger = bigInt.one;\n  for (const point of series) {\n    if (bigInt.isInstance(point.data)) {\n      const bigInteger = point.data as bigInt.BigInteger;\n      if (bigInteger.greater(maxBigInteger)) {\n        maxBigInteger = bigInteger;\n      }\n    }\n  }\n  return maxBigInteger;\n}\n","import { median } from 'd3-array';\nimport {\n  ChartInternalNestedDataShape,\n  ChartShallowDataShape,\n  ChartNestedDataShape,\n  ChartInternalShallowDataShape,\n  ChartDataTypes\n} from './types';\nimport {\n  getMaxBigIntegerForNested,\n  getMaxBigIntegerForShallow,\n  normalizeValue,\n  normalizeValueForFormatting\n} from './bigInteger';\nimport bigInt from 'big-integer';\n\nexport type Direction = 'vertical' | 'horizontal';\n\n/**\n * Accepts a `ChartDataShape` and transforms it to a chart readable data shape.\n *\n * Example:\n *\n *   [{\n *    key: 'Threat Intel',\n *    data: [{ key:'2011', data: 25 }]\n *   }]\n *\n * will be transformed to:\n *\n *  [{\n *    key: 'Threat Intel',\n *    data: [\n *      key: 'Threat Intel',\n *      x: '2011',\n *      y: 25\n *    ]\n *  }]\n */\nexport function buildNestedChartData(\n  series: ChartNestedDataShape[],\n  sort = false,\n  direction: Direction = 'vertical'\n): ChartInternalNestedDataShape[] {\n  let result: ChartInternalNestedDataShape[] = [];\n  const maxBigInteger = getMaxBigIntegerForNested(series);\n  const isVertical = direction === 'vertical';\n\n  for (const point of series) {\n    for (const nestedPoint of point.data) {\n      const key = normalizeValueForFormatting(point.key);\n      let idx = result.findIndex((r) => {\n        const left = r.key;\n        if (left instanceof Date && key instanceof Date) {\n          return left.getTime() === key.getTime();\n        }\n        return left === key;\n      });\n\n      if (idx === -1) {\n        result.push({\n          key,\n          metadata: point.metadata,\n          data: []\n        });\n\n        idx = result.length - 1;\n      }\n\n      const x = normalizeValue(\n        isVertical ? nestedPoint.key : (nestedPoint.data as any),\n        maxBigInteger\n      );\n\n      const y = normalizeValue(\n        isVertical ? nestedPoint.data : (nestedPoint.key as any),\n        maxBigInteger\n      );\n\n      result[idx].data.push({\n        key,\n        value: normalizeValueForFormatting(nestedPoint.data as any),\n        metadata: nestedPoint.metadata,\n        id: point.id,\n        x,\n        x0: isVertical ? x : 0,\n        x1: x,\n        y,\n        y0: isVertical ? 0 : y,\n        y1: y\n      });\n    }\n  }\n\n  // Sort the series data based on the median value\n  if (sort) {\n    result = result.sort((a, b) => {\n      const aMax = median(a.data, (d: any) => d.y)!;\n      const bMax = median(b.data, (d: any) => d.y)!;\n      return aMax < bMax ? 1 : -1;\n    });\n  }\n\n  return result;\n}\n\nfunction addToChartType(\n  a: ChartDataTypes,\n  b: number | bigInt.BigInteger\n): ChartDataTypes {\n  if (bigInt.isInstance(a) && bigInt.isInstance(b)) {\n    return (a as bigInt.BigInteger).add(b as bigInt.BigInteger);\n  } else if (a instanceof Date && typeof b === 'number') {\n    return new Date(a.valueOf() + b);\n  } else if (typeof a === 'number' && typeof b === 'number') {\n    return a + b;\n  } else {\n    throw new Error('Invalid types to addToChartTypes');\n  }\n}\n\n/**\n * Accepts a shallow shape and normalizes it to a chart readable format.\n */\nexport function buildShallowChartData(\n  series: ChartShallowDataShape[],\n  direction: Direction = 'vertical',\n  binSize: number | undefined = undefined\n): ChartInternalShallowDataShape[] {\n  const result: ChartInternalShallowDataShape[] = [];\n  const maxBigInteger = getMaxBigIntegerForShallow(series);\n  const isVertical = direction === 'vertical';\n\n  for (const point of series) {\n    const isTuple = Array.isArray(point.data);\n    let k1 = point.key;\n    if (binSize) {\n      k1 = addToChartType(point.key, binSize);\n    }\n\n    const props = {\n      k0: normalizeValue(point.key, maxBigInteger),\n      k1: normalizeValue(k1, maxBigInteger),\n      v0: normalizeValue(isTuple ? point.data[0] : 0, maxBigInteger),\n      v1: normalizeValue(isTuple ? point.data[1] : point.data, maxBigInteger)\n    };\n\n    const xProp = isVertical ? 'k' : 'v';\n    const yProp = isVertical ? 'v' : 'k';\n\n    result.push({\n      key: normalizeValueForFormatting(props.k0),\n      value: normalizeValueForFormatting(props.v1),\n      metadata: point.metadata,\n      id: point.id,\n      x: props[`${xProp}1`],\n      x0: props[`${xProp}0`],\n      x1: props[`${xProp}1`],\n      y: props[`${yProp}1`],\n      y0: props[`${yProp}0`],\n      y1: props[`${yProp}1`]\n    });\n  }\n\n  return result;\n}\n","import { histogram } from 'd3-array';\nimport { ChartInternalShallowDataShape, ChartInternalDataTypes } from './types';\n\n/**\n * Build a histogram given data set.\n */\nexport function buildBins(\n  xScale,\n  thresholds,\n  data: any[]\n): ChartInternalShallowDataShape[] {\n  const layout = histogram()\n    .value((d: any) => d.x)\n    .domain(xScale.domain())\n    .thresholds(xScale.ticks(thresholds));\n\n  const bins = layout(data as any);\n\n  return bins.map((bin) => ({\n    x0: bin.x0 as ChartInternalDataTypes,\n    x1: bin.x1 as ChartInternalDataTypes,\n    y: bin.length,\n    y0: 0,\n    y1: bin.length\n  }));\n}\n","import { stack, stackOffsetExpand, stackOffsetDiverging } from 'd3-shape';\nimport { ChartNestedDataShape, ChartInternalNestedDataShape } from './types';\nimport {\n  getMaxBigIntegerForNested,\n  normalizeValue,\n  normalizeValueForFormatting\n} from './bigInteger';\nimport { uniqueBy } from '@/common/utils/array';\n\nexport type StackTypes = 'default' | 'expand' | 'diverging';\n\n/**\n * Given a dataset like:\n *\n *   [{\n *    key: 'Threat Intel',\n *    data: [{ key:'2011', data: 25 }]\n *   }]\n *\n * it will transform it to:\n *\n *  [\n *    { x: 'Theat Intel', '2011': 25 }\n *  ]\n */\nfunction transformDataToStack(data: ChartNestedDataShape[]) {\n  const result: any[] = [];\n  const maxBigInteger = getMaxBigIntegerForNested(data);\n\n  for (const category of data) {\n    for (const value of category.data) {\n      let idx = result.findIndex((r) => {\n        if (r.x instanceof Date && category.key instanceof Date) {\n          return r.x.getTime() === category.key.getTime();\n        }\n        return r.x === category.key;\n      });\n\n      if (idx === -1) {\n        result.push({\n          metadata: category.metadata,\n          x: category.key,\n          formattedValues: {}\n        });\n\n        idx = result.length - 1;\n      }\n\n      result[idx].metadata = value.metadata;\n\n      result[idx][value.key as string] = normalizeValue(\n        value.data as any,\n        maxBigInteger\n      );\n\n      result[idx].formattedValues[value.key as string] =\n        normalizeValueForFormatting(value.data as any);\n    }\n  }\n\n  return result;\n}\n\n/**\n * Translates the stack data to a chart standard dataset.\n */\nfunction transformStackToData(\n  stackData,\n  direction = 'vertical'\n): ChartInternalNestedDataShape[] {\n  const result: ChartInternalNestedDataShape[] = [];\n  const isVertical = direction === 'vertical';\n\n  // Transform the data from the d3 stack format to our internal format\n  for (const category of stackData) {\n    for (const point of category) {\n      const key = point.data.x;\n\n      let idx = result.findIndex((r) => {\n        if (r.key instanceof Date && key instanceof Date) {\n          return r.key.getTime() === key.getTime();\n        }\n        return r.key === key;\n      });\n\n      if (idx === -1) {\n        result.push({\n          key,\n          data: []\n        });\n\n        idx = result.length - 1;\n      }\n\n      const categoryKey = category.key;\n      const y = point.data[categoryKey];\n      const [y0, y1] = point;\n\n      result[idx].data.push({\n        metadata: point.data.metadata,\n        key,\n        x: isVertical ? categoryKey : y1,\n        x0: isVertical ? categoryKey : y0,\n        x1: isVertical ? categoryKey : y1,\n        y: isVertical ? y : categoryKey,\n        y0: isVertical ? y0 : categoryKey,\n        y1: isVertical ? y1 : categoryKey,\n        value: point.data.formattedValues[categoryKey]\n      });\n    }\n  }\n\n  return result;\n}\n\n/**\n * Builds a stack dataset from the standard data format.\n */\nexport function buildBarStackData(\n  data: ChartNestedDataShape[] = [],\n  offset: StackTypes = 'default',\n  direction = 'vertical'\n) {\n  const keys = uniqueBy<ChartNestedDataShape>(\n    data,\n    (d) => d.data,\n    (d) => d.key\n  );\n  const stackData = transformDataToStack(data);\n\n  let stackFn = stack();\n  if (offset === 'expand') {\n    stackFn = stackFn.offset(stackOffsetExpand);\n  } else if (offset === 'diverging') {\n    stackFn = stackFn.offset(stackOffsetDiverging);\n  }\n\n  const result = stackFn.keys(keys)(stackData);\n\n  return transformStackToData(result, direction);\n}\n","import { ChartNestedDataShape, ChartInternalNestedDataShape } from './types';\nimport { buildBarStackData } from './barStack';\n\n/**\n * Builds a stack dataset from the standard data format.\n */\nexport function buildMarimekkoData(\n  data: ChartNestedDataShape[] = []\n): ChartInternalNestedDataShape[] {\n  const result = buildBarStackData(data, 'expand');\n  const sums = {};\n\n  // Calculate the sum for each series and the total sum\n  let totalSum = 0;\n  for (const series of result) {\n    const sum = series.data.reduce((acc, cur) => acc + (cur.y as number), 0);\n\n    sums[series.key as string] = sum;\n    totalSum += sum;\n  }\n\n  // Calculate the x0/x1 for each series\n  let prev = 0;\n  for (const series of result) {\n    const x0 = prev;\n    const x1 = prev + sums[series.key as string] / totalSum;\n    prev = x1;\n\n    for (const point of series.data) {\n      point.x0 = x0;\n      point.x1 = x1;\n    }\n  }\n\n  return result;\n}\n","import { stack, stackOffsetExpand } from 'd3-shape';\nimport {\n  ChartNestedDataShape,\n  ChartInternalDataShape,\n  ChartInternalNestedDataShape,\n  ChartInternalShallowDataShape\n} from './types';\nimport {\n  getMaxBigIntegerForNested,\n  normalizeValue,\n  normalizeValueForFormatting\n} from './bigInteger';\nimport { uniqueBy } from '@/common/utils/array';\n\n/**\n * Given a dataset like:\n *\n *   [{\n *    key: 'Threat Intel',\n *    data: [{ key:'2011', data: 25 }]\n *   }]\n *\n * it will transform it to:\n *\n *  [\n *    { x: '2011', 'Theat Intel': 25 }\n *  ]\n */\nfunction transformDataToStack(data) {\n  const result: any[] = [];\n  const maxBigInteger = getMaxBigIntegerForNested(data);\n\n  for (const category of data) {\n    for (const value of category.data) {\n      let idx = result.findIndex((r) => {\n        if (r.x instanceof Date && value.key instanceof Date) {\n          return r.x.getTime() === value.key.getTime();\n        }\n        return r.x === value.key;\n      });\n\n      if (idx === -1) {\n        result.push({\n          x: value.key,\n          formattedValues: {}\n        });\n\n        idx = result.length - 1;\n      }\n\n      result[idx][category.key as string] = normalizeValue(\n        value.data,\n        maxBigInteger\n      );\n      result[idx].formattedValues[category.key as string] =\n        normalizeValueForFormatting(value.data);\n    }\n  }\n\n  return result;\n}\n\n/**\n * Translates the stack data to a chart standard dataset.\n */\nfunction transformStackToData(stackData): ChartInternalNestedDataShape[] {\n  const result: ChartInternalNestedDataShape[] = [];\n\n  for (const category of stackData) {\n    const series: ChartInternalShallowDataShape[] = [];\n\n    for (const point of category) {\n      const [y0, y1] = point;\n      const x = point.data.x;\n      series.push({\n        key: category.key,\n        x,\n        x0: x,\n        x1: x,\n        y: y1 - y0,\n        y0,\n        y1,\n        value: point.data.formattedValues[category.key]\n      });\n    }\n\n    result.push({\n      key: category.key,\n      data: series\n    });\n  }\n\n  return result;\n}\n\n/**\n * Builds a stack dataset from the standard data format.\n */\nexport function buildStackData(\n  data: ChartNestedDataShape[],\n  normalized = false\n): ChartInternalDataShape[] {\n  const keys = uniqueBy<ChartNestedDataShape>(data, (d) => d.key);\n  const stackData = transformDataToStack(data);\n  const stackFn = !normalized ? stack() : stack().offset(stackOffsetExpand);\n\n  const result = stackFn.keys(keys)(stackData);\n\n  return transformStackToData(result);\n}\n","import { ChartShallowDataShape } from './types';\nimport { Direction, buildShallowChartData } from './builder';\n\nexport const buildWaterfall = (\n  series: ChartShallowDataShape[],\n  direction: Direction = 'vertical',\n  binSize: number | undefined = undefined\n) => {\n  const data = buildShallowChartData(series, direction, binSize);\n  const isVertical = direction === 'vertical';\n  const v = isVertical ? 'y' : 'x';\n\n  let cumulative = 0;\n  for (const point of data) {\n    point[`${v}0`] = cumulative;\n    cumulative += point[v] as number;\n    point[`${v}1`] = cumulative;\n    point[v] = cumulative;\n  }\n\n  return data;\n};\n","import React, { Component, PropsWithChildren, createRef } from 'react';\nimport { toggleTextSelection } from '@/common/utils/selection';\nimport { smoothMatrix, transform, translate } from 'transformation-matrix';\nimport { constrainMatrix } from '@/common/utils/position';\n\ninterface PanProps extends PropsWithChildren {\n  disabled: boolean;\n  threshold: number;\n  cursor?: string;\n  x: number;\n  y: number;\n  scale: number;\n  matrix: any;\n  width: number;\n  height: number;\n  constrain: boolean;\n  globalPanning: boolean;\n  onPanStart: (event: PanStartEvent) => void;\n  onPanMove: (event: PanMoveEvent) => void;\n  onPanEnd: (event: PanEndEvent) => void;\n  onPanCancel: (event: PanCancelEvent) => void;\n}\n\nexport interface PanStartEvent {\n  source: 'mouse' | 'touch';\n  nativeEvent: MouseEvent | TouchEvent;\n}\n\nexport interface PanMoveEvent {\n  source: 'mouse' | 'touch';\n  x: number;\n  y: number;\n  nativeEvent: MouseEvent | TouchEvent;\n}\n\nexport interface PanEndEvent {\n  source: 'mouse' | 'touch';\n  nativeEvent: MouseEvent | TouchEvent;\n}\n\nexport interface PanCancelEvent {\n  source: 'mouse' | 'touch';\n  nativeEvent: MouseEvent | TouchEvent;\n}\n\nexport class Pan extends Component<PanProps> {\n  static defaultProps: Partial<PanProps> = {\n    x: 0,\n    y: 0,\n    disabled: false,\n    scale: 1,\n    threshold: 10,\n    globalPanning: true,\n    onPanStart: () => undefined,\n    onPanMove: () => undefined,\n    onPanEnd: () => undefined,\n    onPanCancel: () => undefined\n  };\n\n  prevXPosition: number = 0;\n  prevYPosition: number = 0;\n  started: boolean = false;\n  deltaX: number = 0;\n  deltaY: number = 0;\n  childRef = createRef<SVGGElement>();\n\n  componentDidMount() {\n    if (this.childRef.current) {\n      this.childRef.current.addEventListener('mousedown', this.onMouseDown, {\n        passive: false\n      });\n      this.childRef.current.addEventListener('touchstart', this.onTouchStart, {\n        passive: false\n      });\n    }\n  }\n\n  componentWillUnmount() {\n    this.disposeHandlers();\n\n    if (this.childRef.current) {\n      this.childRef.current.removeEventListener('mousedown', this.onMouseDown);\n      this.childRef.current.removeEventListener(\n        'touchstart',\n        this.onTouchStart\n      );\n    }\n  }\n\n  disposeHandlers() {\n    window.removeEventListener('mousemove', this.onMouseMove);\n    window.removeEventListener('mouseup', this.onMouseUp);\n    window.removeEventListener('touchmove', this.onTouchMove);\n    window.removeEventListener('touchend', this.onTouchEnd);\n\n    // Reset cursor on body back to original\n    document.body.style['cursor'] = 'inherit';\n    toggleTextSelection(true);\n  }\n\n  checkThreshold() {\n    const { threshold } = this.props;\n    return (\n      !this.started &&\n      (Math.abs(this.deltaX) > threshold || Math.abs(this.deltaY) > threshold)\n    );\n  }\n\n  onPanStart(nativeEvent, source: 'mouse' | 'touch') {\n    this.props.onPanStart({\n      nativeEvent,\n      source\n    });\n  }\n\n  onPanMove(x: number, y: number, source: 'mouse' | 'touch', nativeEvent) {\n    this.props.onPanMove({\n      source,\n      nativeEvent,\n      x,\n      y\n    });\n  }\n\n  onPanEnd(nativeEvent, source: 'mouse' | 'touch') {\n    const { onPanEnd } = this.props;\n\n    onPanEnd({\n      nativeEvent,\n      source\n    });\n  }\n\n  pan(x: number, y: number, nativeEvent, source: 'mouse' | 'touch') {\n    const { scale, constrain, width, height, matrix } = this.props;\n\n    const newMatrix = smoothMatrix(\n      transform(matrix, translate(x / scale, y / scale)),\n      100\n    );\n\n    const shouldConstrain =\n      constrain && constrainMatrix(height, width, newMatrix);\n    if (!shouldConstrain) {\n      this.onPanMove(newMatrix.e, newMatrix.f, source, nativeEvent);\n    }\n\n    return shouldConstrain;\n  }\n\n  onMouseDown = (event: MouseEvent) => {\n    // Stop at disabled\n    if (this.props.disabled) {\n      return;\n    }\n\n    // Ignore right click\n    if (event.which === 3) {\n      return;\n    }\n\n    // If global panning is turned off, it will only pan on the container\n    if (\n      !this.props.globalPanning &&\n      event.target &&\n      !(event.target as HTMLElement).classList.contains('pan-container')\n    ) {\n      return;\n    }\n\n    event.preventDefault();\n    event.stopPropagation();\n\n    toggleTextSelection(false);\n    this.started = false;\n\n    // Always bind event so we cancel movement even if no action was taken\n    window.addEventListener('mousemove', this.onMouseMove);\n    window.addEventListener('mouseup', this.onMouseUp);\n  };\n\n  onMouseMove = (event: MouseEvent) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    this.deltaX = this.deltaX + event.movementX;\n    this.deltaY = this.deltaY + event.movementY;\n\n    if (this.checkThreshold()) {\n      if (this.props.cursor) {\n        document.body.style['cursor'] = this.props.cursor;\n      }\n\n      this.deltaX = 0;\n      this.deltaY = 0;\n      this.started = true;\n\n      this.onPanStart(event, 'mouse');\n    } else {\n      this.pan(event.movementX, event.movementY, event, 'mouse');\n    }\n  };\n\n  onMouseUp = (event: MouseEvent) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    this.disposeHandlers();\n    toggleTextSelection(true);\n\n    if (this.started) {\n      this.onPanEnd(event, 'mouse');\n    } else {\n      this.props.onPanCancel({\n        nativeEvent: event,\n        source: 'mouse'\n      });\n    }\n  };\n\n  onTouchStart = (event: TouchEvent) => {\n    // Stop at disabled\n    if (this.props.disabled) {\n      return;\n    }\n\n    // Reqquire more than one touch\n    if (event.touches.length !== 1) {\n      return;\n    }\n\n    event.preventDefault();\n    event.stopPropagation();\n\n    toggleTextSelection(false);\n    this.started = false;\n\n    this.prevXPosition = event.touches[0].clientX;\n    this.prevYPosition = event.touches[0].clientY;\n\n    // Always bind event so we cancel movement even if no action was taken\n    window.addEventListener('touchmove', this.onTouchMove);\n    window.addEventListener('touchend', this.onTouchEnd);\n  };\n\n  onTouchMove = (event: TouchEvent) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    // Calculate delta from previous position and current\n    const x = event.touches[0].clientX;\n    const y = event.touches[0].clientY;\n\n    const deltaX = x - this.prevXPosition;\n    const deltaY = y - this.prevYPosition;\n\n    this.deltaX = this.deltaX + deltaX;\n    this.deltaY = this.deltaY + deltaY;\n\n    if (this.checkThreshold()) {\n      this.deltaX = 0;\n      this.deltaY = 0;\n      this.started = true;\n\n      this.onPanStart(event, 'touch');\n    } else {\n      const contrained = this.pan(deltaX, deltaY, event, 'touch');\n\n      if (!contrained) {\n        this.prevXPosition = x;\n        this.prevYPosition = y;\n      }\n    }\n  };\n\n  onTouchEnd = (event: TouchEvent) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    this.disposeHandlers();\n    toggleTextSelection(true);\n\n    if (this.started) {\n      this.onPanEnd(event, 'touch');\n    } else {\n      this.props.onPanCancel({\n        nativeEvent: event,\n        source: 'touch'\n      });\n    }\n  };\n\n  render() {\n    return <g ref={this.childRef}>{this.props.children}</g>;\n  }\n}\n","/**\n * Gets the position between a given set of points.\n */\nexport const getMidpoint = (pointA, pointB) => ({\n  x: (pointA.x + pointB.x) / 2,\n  y: (pointA.y + pointB.y) / 2\n});\n\n/**\n * Gets the distance between a given set of points.\n */\nexport const getDistanceBetweenPoints = (pointA, pointB) =>\n  Math.sqrt(\n    Math.pow(pointB.y - pointA.y, 2) + Math.pow(pointB.x - pointA.x, 2)\n  );\n\n/**\n * Get touch points.\n */\nexport function getTouchPoints(event, node) {\n  const { left, top } = node.getBoundingClientRect();\n\n  const [pointA, pointB] = [...event.touches].map((touch) => ({\n    x: touch.clientX - Math.round(left),\n    y: touch.clientY - Math.round(top)\n  }));\n\n  const distance = getDistanceBetweenPoints(pointA, pointB);\n  const midpoint = getMidpoint(pointA, pointB);\n\n  return {\n    pointA,\n    pointB,\n    distance,\n    midpoint\n  };\n}\n","import React, { Component, PropsWithChildren, createRef } from 'react';\nimport { toggleTextSelection } from '@/common/utils/selection';\nimport {\n  getPointFromMatrix,\n  isZoomLevelGoingOutOfBounds\n} from '@/common/utils/position';\nimport { getTouchPoints } from './pinchUtils';\nimport {\n  scale,\n  smoothMatrix,\n  transform,\n  translate,\n  applyToPoint,\n  inverse\n} from 'transformation-matrix';\n\ninterface ZoomGestureProps extends PropsWithChildren {\n  disabled?: boolean;\n  maxZoom: number;\n  minZoom: number;\n  scaleFactor: number;\n  scale: number;\n  matrix: any;\n  x: number;\n  y: number;\n  style?: any;\n  disableMouseWheel?: boolean;\n  requireZoomModifier?: boolean;\n  onZoom: (event: ZoomEvent) => void;\n  onZoomEnd: () => void;\n}\n\nexport interface ZoomEvent {\n  scale: number;\n  x: number;\n  y: number;\n  nativeEvent: any;\n}\n\nexport class Zoom extends Component<ZoomGestureProps> {\n  static defaultProps: Partial<ZoomGestureProps> = {\n    x: 0,\n    y: 0,\n    scale: 1,\n    scaleFactor: 0.1,\n    minZoom: 1,\n    maxZoom: 10\n  };\n\n  firstTouch: any;\n  lastDistance: any;\n  timeout: any;\n  childRef = createRef<SVGGElement>();\n  rqf: any;\n\n  componentDidMount() {\n    const { disabled, disableMouseWheel } = this.props;\n\n    const ref = this.childRef.current;\n    if (!disabled && ref) {\n      if (!disableMouseWheel) {\n        ref.addEventListener('mousewheel', this.onMouseWheel, {\n          passive: false\n        });\n      }\n\n      ref.addEventListener('touchstart', this.onTouchStart, { passive: false });\n    }\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('touchmove', this.onTouchMove);\n    window.removeEventListener('touchend', this.onTouchEnd);\n    cancelAnimationFrame(this.rqf);\n    clearTimeout(this.timeout);\n\n    const ref = this.childRef.current;\n    if (ref) {\n      ref.removeEventListener('mousewheel', this.onMouseWheel);\n      ref.removeEventListener('touchstart', this.onTouchStart);\n    }\n\n    toggleTextSelection(true);\n  }\n\n  getStep(delta: number) {\n    const { scaleFactor } = this.props;\n    return -delta > 0 ? scaleFactor + 1 : 1 - scaleFactor;\n  }\n\n  scale(x: number, y: number, step: number, nativeEvent) {\n    const { minZoom, maxZoom, onZoom, matrix } = this.props;\n\n    const outside = isZoomLevelGoingOutOfBounds(\n      {\n        d: matrix.a,\n        scaleFactorMin: minZoom,\n        scaleFactorMax: maxZoom\n      },\n      step\n    );\n\n    if (!outside) {\n      const newMatrix = smoothMatrix(\n        transform(\n          matrix,\n          translate(x, y),\n          scale(step, step),\n          translate(-x, -y)\n        ),\n        100\n      );\n\n      this.rqf = requestAnimationFrame(() => {\n        onZoom({\n          scale: newMatrix.a,\n          x: newMatrix.e,\n          y: newMatrix.f,\n          nativeEvent\n        });\n      });\n    }\n\n    return outside;\n  }\n\n  onMouseWheel = (event) => {\n    const { disableMouseWheel, requireZoomModifier, matrix, onZoomEnd } =\n      this.props;\n\n    if (disableMouseWheel) {\n      return false;\n    }\n\n    const hasModifier = event.metaKey || event.ctrlKey;\n    if (requireZoomModifier && !hasModifier) {\n      return false;\n    }\n\n    event.preventDefault();\n    event.stopPropagation();\n\n    const point = getPointFromMatrix(event, matrix);\n    if (point) {\n      const { x, y } = point as { x: number; y: number };\n      const step = this.getStep(event.deltaY);\n\n      this.scale(x, y, step, event);\n\n      // Do small timeout to 'guess' when its done zooming\n      clearTimeout(this.timeout);\n      this.timeout = setTimeout(() => onZoomEnd(), 500);\n    }\n  };\n\n  onTouchStart = (event: TouchEvent) => {\n    if (event.touches.length === 2) {\n      event.preventDefault();\n      event.stopPropagation();\n      toggleTextSelection(false);\n\n      this.firstTouch = getTouchPoints(event, this.childRef.current);\n      this.lastDistance = this.firstTouch.distance;\n\n      window.addEventListener('touchmove', this.onTouchMove);\n      window.addEventListener('touchend', this.onTouchEnd);\n    }\n  };\n\n  onTouchMove = (event: TouchEvent) => {\n    if (event.touches.length === 2) {\n      event.preventDefault();\n      event.stopPropagation();\n\n      const { distance } = getTouchPoints(event, this.childRef.current);\n      const distanceFactor = distance / this.lastDistance;\n\n      const point = applyToPoint(inverse(this.props.matrix), {\n        x: this.firstTouch.midpoint.x,\n        y: this.firstTouch.midpoint.y\n      }) as { x: number; y: number };\n\n      if (point.x && point.y) {\n        const outside = this.scale(point.x, point.y, distanceFactor, event);\n\n        if (!outside) {\n          this.lastDistance = distance;\n        }\n      }\n    }\n  };\n\n  onTouchEnd = (event: TouchEvent) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    window.removeEventListener('touchmove', this.onTouchMove);\n    window.removeEventListener('touchend', this.onTouchEnd);\n\n    toggleTextSelection(true);\n    this.props.onZoomEnd();\n  };\n\n  render() {\n    const { style, children } = this.props;\n    return (\n      <g ref={this.childRef} style={style}>\n        {children}\n      </g>\n    );\n  }\n}\n","import React, { FC, ReactElement } from 'react';\nimport classNames from 'classnames';\nimport { CloneElement } from 'reablocks';\nimport {\n  DiscreteLegendEntryProps,\n  DiscreteLegendEntry\n} from './DiscreteLegendEntry';\nimport css from './DiscreteLegend.module.css';\n\nexport interface DiscreteLegendProps {\n  /**\n   * CSS Class name.\n   */\n  className?: string;\n\n  /**\n   * CSS Styles.\n   */\n  style?: React.CSSProperties;\n\n  /**\n   * Orientation of the legend.\n   */\n  orientation?: 'horizontal' | 'vertical';\n\n  /**\n   * Entry components to show in the legend.\n   */\n  entries: ReactElement<DiscreteLegendEntryProps, typeof DiscreteLegendEntry>[];\n}\n\nexport const DiscreteLegend: FC<Partial<DiscreteLegendProps>> = ({\n  entries,\n  orientation = 'vertical',\n  style,\n  className\n}) => (\n  <div\n    className={classNames(css.container, className, {\n      [css.horizontal]: orientation === 'horizontal',\n      [css.vertical]: orientation === 'vertical'\n    })}\n    style={style}\n  >\n    {entries.map((entry, index) => (\n      <CloneElement<DiscreteLegendEntryProps>\n        element={entry}\n        key={`dle-${index}`}\n        orientation={orientation}\n      />\n    ))}\n  </div>\n);\n","import React, { FC } from 'react';\nimport classNames from 'classnames';\nimport css from './DiscreteLegendSymbol.module.css';\n\nexport interface DiscreteLegendSymbolProps {\n  /**\n   * Color for the symbol set by the `DiscreteLegendEntry`.\n   */\n  color: string;\n\n  /**\n   * CSS Class names.\n   */\n  className?: string;\n}\n\nexport const DiscreteLegendSymbol: FC<Partial<DiscreteLegendSymbolProps>> = ({\n  className,\n  color\n}) => (\n  <div\n    className={classNames(css.symbol, className)}\n    style={{ background: color }}\n  />\n);\n","import React, { ReactNode, ReactElement, FC } from 'react';\nimport classNames from 'classnames';\nimport {\n  DiscreteLegendSymbol,\n  DiscreteLegendSymbolProps\n} from './DiscreteLegendSymbol';\nimport { CloneElement } from 'reablocks';\nimport css from './DiscreteLegendEntry.module.css';\n\nexport interface DiscreteLegendEntryProps {\n  /**\n   * Label for the entry.\n   */\n  label: string;\n\n  /**\n   * Color for the entry.\n   */\n  color: string;\n\n  /**\n   * Symbol for the entry.\n   */\n  symbol:\n    | ReactElement<DiscreteLegendSymbolProps, typeof DiscreteLegendSymbol>\n    | ReactNode;\n\n  /**\n   * CSS Styles.\n   */\n  style?: React.CSSProperties;\n\n  /**\n   * CSS Class names.\n   */\n  className?: string;\n\n  /**\n   * HTML Title Attribute.\n   */\n  title?: string;\n\n  /**\n   * Orientation of the entry set internally by `DiscreteLegend`.\n   */\n  orientation: 'horizontal' | 'vertical';\n\n  /**\n   * Mouse enter event.\n   */\n  onMouseEnter: (event: React.MouseEvent<HTMLDivElement>) => void;\n\n  /**\n   * Mouse leave event.\n   */\n  onMouseLeave: (event: React.MouseEvent<HTMLDivElement>) => void;\n\n  /**\n   * On click event.\n   */\n  onClick: (event: React.MouseEvent<HTMLDivElement>) => void;\n}\n\nexport const DiscreteLegendEntry: FC<Partial<DiscreteLegendEntryProps>> = ({\n  label,\n  symbol = <DiscreteLegendSymbol />,\n  title,\n  className,\n  color,\n  style,\n  orientation = 'horizontal',\n  onMouseEnter,\n  onMouseLeave,\n  onClick\n}) => (\n  <div\n    title={title}\n    className={classNames(css.entry, className, {\n      [css.vertical]: orientation === 'vertical',\n      [css.horizontal]: orientation === 'horizontal'\n    })}\n    onClick={onClick}\n    onMouseEnter={onMouseEnter}\n    onMouseLeave={onMouseLeave}\n    style={style}\n  >\n    <CloneElement<DiscreteLegendSymbolProps> element={symbol} color={color} />\n    <span className={css.label}>{label}</span>\n  </div>\n);\n","import React, { FC, useMemo } from 'react';\nimport classNames from 'classnames';\nimport { ChartDataShape } from '@/common/data';\nimport chroma from 'chroma-js';\nimport { uniqueBy } from '@/common/utils/array';\nimport { extent } from 'd3-array';\nimport { formatValue } from '@/common/utils/formatting';\n\nimport css from './SequentialLegend.module.css';\n\nexport interface SequentialLegendProps {\n  /**\n   * CSS Class name.\n   */\n  className?: any;\n\n  /**\n   * CSS Class name for the gradient element.\n   */\n  gradientClassName?: string;\n\n  /**\n   * CSS Styles.\n   */\n  style?: any;\n\n  /**\n   * Orientation of the legend.\n   */\n  orientation?: 'horizontal' | 'vertical';\n\n  /**\n   * Data to use to render the scale.\n   */\n  data: ChartDataShape[];\n\n  /**\n   * Color scheme for the scale.\n   */\n  colorScheme?: string[];\n}\n\nexport const SequentialLegend: FC<SequentialLegendProps> = ({\n  className,\n  gradientClassName,\n  style,\n  data,\n  colorScheme = ['rgba(28, 107, 86, 0.5)', '#2da283'],\n  orientation = 'vertical'\n}) => {\n  // Generate the color gradient\n  const color = chroma\n    .scale(colorScheme)\n    .colors(10)\n    .reverse()\n    .map((c, i) => `${c} ${i * 10}%`)\n    .join(',');\n\n  // Get the extent from the data passed\n  const [end, start] = useMemo(\n    () =>\n      extent(\n        uniqueBy(\n          data,\n          (d) => d.data,\n          (d) => d.data\n        )\n      ),\n    [data]\n  );\n\n  // Get direction\n  const gradientDir = orientation === 'vertical' ? '' : 'to left,';\n\n  return (\n    <div\n      style={style}\n      className={classNames(css.container, className, {\n        [css.vertical]: orientation === 'vertical',\n        [css.horizontal]: orientation === 'horizontal'\n      })}\n    >\n      <div className={css.start}>{formatValue(start)}</div>\n      <div\n        className={classNames(css.gradient, gradientClassName)}\n        style={{\n          background: `linear-gradient(${gradientDir}${color})`\n        }}\n      />\n      <div className={css.end}>{formatValue(end)}</div>\n    </div>\n  );\n};\n","import classNames from 'classnames';\nimport React, { FC, useMemo } from 'react';\nimport css from './Gridline.module.css';\nimport { mergeDefaultProps } from '../utils';\n\nexport interface GridlineProps {\n  /**\n   * Height of the line set by the `GridlineSeries`.\n   */\n  height: number;\n\n  /**\n   * Width of the line set by the `GridlineSeries`.\n   */\n  width: number;\n\n  /**\n   * CSS Classname to apply.\n   */\n  className?: string;\n\n  /**\n   * Direction set by the `GridlineSeries`.\n   */\n  direction: 'all' | 'x' | 'y';\n\n  /**\n   * D3 Scale set by `GridlineSeries`.\n   */\n  scale: any;\n\n  /**\n   * SVG Stroke Width Property.\n   */\n  strokeWidth: number;\n\n  /**\n   * SVG Stroke Color Property.\n   */\n  strokeColor: string;\n\n  /**\n   * Data point for the position set by the `GridlineSeries`.\n   */\n  data: number;\n\n  /**\n   * Index set by the `GridlineSeries`.\n   */\n  index: number;\n\n  /**\n   * SVG Stroke Dash Array Property.\n   */\n  strokeDasharray: string;\n}\n\nexport const Gridline: FC<Partial<GridlineProps>> = (props) => {\n  const {\n    strokeWidth,\n    direction,\n    className,\n    strokeColor,\n    data,\n    height,\n    width,\n    scale,\n    strokeDasharray\n  } = mergeDefaultProps(GRID_LINE_DEFAULT_PROPS, props);\n\n  const coords = useMemo(() => {\n    const pos = scale(data);\n\n    if (direction === 'x') {\n      return {\n        x1: pos,\n        x2: pos,\n        y1: 0,\n        y2: height\n      };\n    } else {\n      return {\n        y1: pos,\n        y2: pos,\n        x1: 0,\n        x2: width\n      };\n    }\n  }, [direction, data, height, width, scale]);\n\n  return (\n    <line\n      {...coords}\n      className={classNames(css.gridLine, className)}\n      strokeDasharray={strokeDasharray}\n      strokeWidth={strokeWidth}\n      stroke={strokeColor}\n      fill=\"none\"\n    />\n  );\n};\n\nexport const GRID_LINE_DEFAULT_PROPS: Partial<GridlineProps> = {\n  strokeWidth: 1,\n  strokeDasharray: '2 5',\n  direction: 'all',\n  strokeColor: 'rgba(153, 153, 153, 0.5)'\n};\n","import classNames from 'classnames';\nimport React, { FC, useMemo } from 'react';\nimport css from './GridStripe.module.css';\n\nexport interface GridStripeProps {\n  /**\n   * Position set by the `GridlineSeries`.\n   */\n  position: 'horizontal' | 'vertical';\n\n  /**\n   * CSS Classname to apply.\n   */\n  className?: string;\n\n  /**\n   * Stripe fill color.\n   */\n  fill: string;\n\n  /**\n   * Height of the line set by the `GridlineSeries`.\n   */\n  height: number;\n\n  /**\n   * Width of the line set by the `GridlineSeries`.\n   */\n  width: number;\n\n  /**\n   * Direction set by the `GridlineSeries`.\n   */\n  direction: 'all' | 'x' | 'y';\n\n  /**\n   * D3 Scale set by `GridlineSeries`.\n   */\n  scale: any;\n\n  /**\n   * Data point for the position set by the `GridlineSeries`.\n   */\n  data: number;\n\n  /**\n   * Index set by the `GridlineSeries`.\n   */\n  index: number;\n}\n\nexport const GridStripe: FC<Partial<GridStripeProps>> = (props) => {\n  const { fill, className, position, data, height, width, scale, index } = {\n    ...GRID_STRIPE_DEFAULT_PROPS,\n    ...props\n  };\n  const coords = useMemo(() => {\n    const pos = scale(data);\n    const stripeFill = index % 2 ? 'none' : fill;\n    const dim = scale.bandwidth();\n\n    if (position === 'vertical') {\n      return {\n        y: 0,\n        x: pos,\n        height: height,\n        width: dim,\n        fill: stripeFill\n      };\n    } else {\n      return {\n        y: pos,\n        x: 0,\n        height: dim,\n        width,\n        fill: stripeFill\n      };\n    }\n  }, [scale, data, index, height, width, fill, position]);\n\n  return <rect className={classNames(css.gridStripe, className)} {...coords} />;\n};\n\nexport const GRID_STRIPE_DEFAULT_PROPS = {\n  fill: '#393c3e'\n};\n","import React, { Fragment, ReactElement, FC, useMemo, useCallback } from 'react';\nimport { Gridline, GRID_LINE_DEFAULT_PROPS, GridlineProps } from './Gridline';\nimport { getTicks, getMaxTicks } from '@/common/utils/ticks';\nimport { CloneElement } from 'reablocks';\nimport {\n  LINEAR_X_AXIS_TICK_SERIES_DEFAULT_PROPS,\n  LINEAR_Y_AXIS_TICK_SERIES_DEFAULT_PROPS,\n  LinearAxisProps\n} from '../Axis';\nimport {\n  GridStripeProps,\n  GridStripe,\n  GRID_STRIPE_DEFAULT_PROPS\n} from './GridStripe';\n\ntype GridLineElement = ReactElement<GridlineProps, typeof Gridline>;\ntype GridStripeElement = ReactElement<GridStripeProps, typeof GridStripe>;\ntype GridElement = GridLineElement | GridStripeElement;\n\nexport interface GridlineSeriesProps {\n  /**\n   * D3 scale for Y Axis.\n   */\n  yScale: any;\n\n  /**\n   * D3 scale for X Axis.\n   */\n  xScale: any;\n\n  /**\n   * The linear axis component for the Y Axis of the chart.\n   */\n  yAxis: LinearAxisProps;\n\n  /**\n   * The linear axis component for the X Axis of the chart.\n   */\n  xAxis: LinearAxisProps;\n\n  /**\n   * Height of the chart.\n   */\n  height: number;\n\n  /**\n   * Width of the chart.\n   */\n  width: number;\n\n  /**\n   * Gridline that is rendered.\n   */\n  line: GridLineElement | null;\n\n  /**\n   * GridStripe that is rendered.\n   */\n  stripe: GridStripeElement | null;\n}\n\nexport const GridlineSeries: FC<Partial<GridlineSeriesProps>> = ({\n  line = <Gridline direction=\"all\" />,\n  stripe,\n  yScale,\n  xScale,\n  yAxis,\n  xAxis,\n  height,\n  width\n}) => {\n  const lineProps = useMemo(\n    () => ({ ...GRID_LINE_DEFAULT_PROPS, ...line.props }),\n    [line.props]\n  );\n  const stripeProps = useMemo(\n    () => ({ ...GRID_STRIPE_DEFAULT_PROPS, ...(stripe?.props ?? {}) }),\n    [stripe?.props]\n  );\n\n  const shouldRenderY = (direction: 'all' | 'x' | 'y') =>\n    direction === 'all' || direction === 'y';\n  const shouldRenderX = (direction: 'all' | 'x' | 'y') =>\n    direction === 'all' || direction === 'x';\n\n  const { yAxisGrid, xAxisGrid } = useMemo(() => {\n    const xTickSeriesProps = {\n      ...LINEAR_X_AXIS_TICK_SERIES_DEFAULT_PROPS,\n      ...xAxis.tickSeries.props\n    };\n    const yTickSeriesProps = {\n      ...LINEAR_Y_AXIS_TICK_SERIES_DEFAULT_PROPS,\n      ...yAxis.tickSeries.props\n    };\n\n    return {\n      yAxisGrid: getTicks(\n        yScale,\n        yTickSeriesProps.tickValues,\n        yAxis.type,\n        getMaxTicks(yTickSeriesProps.tickSize, height),\n        yTickSeriesProps.interval\n      ),\n      xAxisGrid: getTicks(\n        xScale,\n        xTickSeriesProps.tickValues,\n        xAxis.type,\n        getMaxTicks(xTickSeriesProps.tickSize, width),\n        xTickSeriesProps.interval\n      )\n    };\n  }, [height, width, xAxis, yAxis, yScale, xScale]);\n\n  const renderGroup = useCallback(\n    (\n      element: GridElement,\n      grid,\n      scale,\n      direction: 'x' | 'y',\n      type: 'line' | 'stripe'\n    ) => {\n      return grid.map((point, index) => (\n        <Fragment key={`${type}-${direction}-${index}`}>\n          <CloneElement<GridlineProps | GridStripeProps>\n            element={element}\n            index={index}\n            scale={scale}\n            data={point}\n            height={height}\n            width={width}\n            direction={direction}\n          />\n        </Fragment>\n      ));\n    },\n    [height, width]\n  );\n\n  const renderSeries = useCallback(\n    (\n      yAxisGrid,\n      xAxisGrid,\n      element: GridElement,\n      direction: 'x' | 'y' | 'all',\n      type: 'line' | 'stripe'\n    ) => {\n      return (\n        <Fragment>\n          {shouldRenderY(direction) &&\n            renderGroup(element, yAxisGrid, yScale, 'y', type)}\n          {shouldRenderX(direction) &&\n            renderGroup(element, xAxisGrid, xScale, 'x', type)}\n        </Fragment>\n      );\n    },\n    [renderGroup, xScale, yScale]\n  );\n\n  return (\n    <g style={{ pointerEvents: 'none' }}>\n      {line &&\n        renderSeries(yAxisGrid, xAxisGrid, line, lineProps.direction, 'line')}\n      {stripe &&\n        renderSeries(\n          yAxisGrid,\n          xAxisGrid,\n          stripe,\n          stripeProps.direction,\n          'stripe'\n        )}\n    </g>\n  );\n};\n","import React, { FC } from 'react';\nimport css from './MarkLine.module.css';\n\nexport interface MarkLineProps {\n  height: number;\n  pointX?: number;\n  strokeColor: string;\n  strokeWidth: number;\n}\n\nexport const MarkLine: FC<Partial<MarkLineProps>> = ({\n  pointX,\n  height,\n  strokeWidth = 1,\n  strokeColor = '#eee'\n}) => (\n  <line\n    stroke={strokeColor}\n    strokeWidth={strokeWidth}\n    y1=\"0\"\n    vectorEffect=\"non-scaling-stroke\"\n    y2={height}\n    x1={pointX}\n    x2={pointX}\n    className={css.markLine}\n  />\n);\n","import React, { FC } from 'react';\n\nexport interface GradientStopProps {\n  offset: number | string;\n  stopOpacity: number | string;\n  color?: string;\n}\n\nexport const GradientStop: FC<Partial<GradientStopProps>> = ({\n  color,\n  offset,\n  stopOpacity = 1\n}) => <stop offset={offset} stopOpacity={stopOpacity} stopColor={color} />;\n","import React, { FC, ReactElement } from 'react';\nimport { GradientStop, GradientStopProps } from './GradientStop';\nimport { CloneElement } from 'reablocks';\n\nexport interface GradientProps {\n  id: string;\n  stops: ReactElement<GradientStopProps, typeof GradientStop>[];\n  color?: string;\n  direction: 'vertical' | 'horizontal' | 'radial';\n}\n\nexport const Gradient: FC<Partial<GradientProps>> = ({\n  id,\n  color,\n  direction = 'vertical',\n  stops = [\n    <GradientStop offset=\"0%\" stopOpacity={0.3} key=\"start\" />,\n    <GradientStop offset=\"80%\" stopOpacity={1} key=\"stop\" />\n  ]\n}) => {\n  if (direction === 'radial') {\n    return (\n      <radialGradient id={id}>\n        {stops.map((stop, index) => (\n          <CloneElement<GradientStopProps>\n            element={stop}\n            key={`gradient-${index}`}\n            color={stop.props.color || color}\n          />\n        ))}\n      </radialGradient>\n    );\n  }\n\n  const pos =\n    direction === 'vertical'\n      ? {\n        x1: '10%',\n        x2: '10%',\n        y1: '100%',\n        y2: '0%'\n      }\n      : {\n        y1: '0%',\n        y2: '0%',\n        x1: '0%',\n        x2: '100%'\n      };\n\n  return (\n    <linearGradient spreadMethod=\"pad\" id={id} {...pos}>\n      {stops.map((stop, index) => (\n        <CloneElement<GradientStopProps>\n          element={stop}\n          key={`gradient-${index}`}\n          color={stop.props.color || color}\n        />\n      ))}\n    </linearGradient>\n  );\n};\n","import React, { FC, ReactElement } from 'react';\nimport { GradientStop, GradientStopProps } from './GradientStop';\nimport { CloneElement } from 'reablocks';\n\nexport interface RadialGradientProps {\n  id: string;\n  stops: ReactElement<GradientStopProps, typeof GradientStop>[];\n  color?: string;\n  radius: number | string;\n}\n\nexport const RadialGradient: FC<Partial<RadialGradientProps>> = ({\n  id,\n  color,\n  radius = '30%',\n  stops = [\n    <GradientStop offset=\"0%\" stopOpacity={0.2} key=\"start\" />,\n    <GradientStop offset=\"80%\" stopOpacity={0.7} key=\"stop\" />\n  ]\n}) => (\n  <radialGradient\n    id={id}\n    cx={0}\n    cy={0}\n    r={radius}\n    gradientUnits=\"userSpaceOnUse\"\n  >\n    {stops.map((stop, index) => (\n      <CloneElement<GradientStopProps>\n        element={stop}\n        key={`gradient-${index}`}\n        color={color}\n      />\n    ))}\n  </radialGradient>\n);\n","import React, { FC } from 'react';\n\nexport interface MaskProps {\n  id?: string;\n  fill?: string;\n}\n\nexport const Mask: FC<MaskProps> = ({ id, fill }) => (\n  <mask id={id}>\n    <rect x=\"0\" y=\"0\" width=\"100%\" height=\"100%\" fill={fill} />\n  </mask>\n);\n","import React, { FC } from 'react';\nimport { MaskProps } from './Mask';\n\nexport interface StripesProps extends MaskProps {\n  id?: string;\n  fill?: string;\n}\n\nexport const Stripes: FC<StripesProps> = ({ id, fill }) => (\n  <pattern\n    id={id}\n    width=\"4\"\n    height=\"4\"\n    patternUnits=\"userSpaceOnUse\"\n    patternTransform=\"rotate(45)\"\n  >\n    <rect className=\"area-stripe\" width=\"1\" height=\"4\" fill={fill} />\n  </pattern>\n);\n","import React, { Fragment, FC } from 'react';\nimport { formatValue } from '@/common/utils/formatting';\nimport { ChartInternalDataTypes } from '@/common/data';\nimport css from './TooltipTemplate.module.css';\n\ninterface SingleTooltipValue {\n  key?: ChartInternalDataTypes;\n  value?: ChartInternalDataTypes;\n  x: ChartInternalDataTypes;\n  y: ChartInternalDataTypes;\n}\n\ninterface MultipleTooltipValues {\n  x: ChartInternalDataTypes;\n  data: SingleTooltipValue[];\n}\n\ninterface TooltipTemplateProps {\n  /**\n   * Tooltip data value.\n   */\n  value?: SingleTooltipValue | MultipleTooltipValues;\n\n  /**\n   * Color scheme to apply.\n   */\n  color?: any;\n\n  /**\n   * Additional CSS classes to apply.\n   */\n  className?: any;\n}\n\nexport const TooltipTemplate: FC<TooltipTemplateProps> = ({\n  value,\n  color,\n  className\n}) => {\n  if (!value) {\n    return null;\n  }\n\n  const renderValues = (data: SingleTooltipValue, index: number) => {\n    const fill = color(data, index);\n\n    return (\n      <span className={css.subValue}>\n        <span className={css.subValueColor} style={{ backgroundColor: fill }} />\n        <span className={css.subValueName}>\n          {formatValue(data.key || data.x)}:\n        </span>\n        <span>{formatValue(data.value || data.y)}</span>\n      </span>\n    );\n  };\n\n  const renderMultiple = (value: MultipleTooltipValues) => {\n    const excessCount = value.data.length - 15;\n    const pagedValues = value.data.slice(0, 15);\n\n    return (\n      <Fragment>\n        {pagedValues.map((point, i) => (\n          <Fragment key={i}>{renderValues(point, i)}</Fragment>\n        ))}\n        {excessCount > 0 && <div>...{excessCount} more...</div>}\n      </Fragment>\n    );\n  };\n\n  const isMultiple = Array.isArray((value as any).data);\n\n  return (\n    <div className={className} role=\"tooltip\">\n      <div className={css.label}>{formatValue(value!.x)}</div>\n      <div className={css.value}>\n        {isMultiple && renderMultiple(value as MultipleTooltipValues)}\n        {!isMultiple && (\n          <Fragment>\n            {formatValue(\n              (value as SingleTooltipValue).value ||\n                (value as SingleTooltipValue).y\n            )}\n          </Fragment>\n        )}\n      </div>\n    </div>\n  );\n};\n","import { TooltipTheme } from 'reablocks';\n\nimport css from './Tooltip.module.css';\n\nexport const tooltipTheme: TooltipTheme = {\n  base: css.base,\n  disablePointer: css.disablePointer\n};\n","import React, { cloneElement, FC } from 'react';\nimport { Tooltip, TooltipProps } from 'reablocks';\nimport { TooltipTemplate } from './TooltipTemplate';\nimport { tooltipTheme } from './TooltipTheme';\n\nexport interface ChartTooltipProps extends TooltipProps {\n  /**\n   * Content for the tooltip.\n   */\n  content: any;\n\n  /**\n   * Tooltip data value.\n   */\n  value?: any;\n\n  /**\n   * Color scheme to apply.\n   */\n  color?: any;\n\n  /**\n   * Complete dataset.\n   */\n  data: any;\n\n  /**\n   * Whether the tooltip should move with the cursor or not.\n   */\n  followCursor?: boolean;\n}\n\nexport const ChartTooltip: FC<Partial<ChartTooltipProps>> = ({\n  content = <TooltipTemplate />,\n  value,\n  data,\n  color,\n  ...rest\n}) => {\n  return (\n    <Tooltip\n      theme={tooltipTheme}\n      {...rest}\n      content={() => {\n        if (!value && !data) {\n          return null;\n        }\n\n        return typeof content === 'function'\n          ? content(data || value, color)\n          : cloneElement(content, {\n            ...content.props,\n            value,\n            color\n          });\n      }}\n    />\n  );\n};\n","import React, {\n  Fragment,\n  ReactElement,\n  useState,\n  useRef,\n  useCallback,\n  useMemo,\n  forwardRef,\n  useImperativeHandle\n} from 'react';\nimport { flip, offset } from '@floating-ui/dom';\nimport { TooltipAreaEvent } from './TooltipAreaEvent';\nimport {\n  ChartDataTypes,\n  ChartInternalDataShape,\n  ChartInternalShallowDataShape,\n  ChartInternalNestedDataShape\n} from '@/common/data';\nimport {\n  getPositionForTarget,\n  getClosestContinousScalePoint,\n  getClosestBandScalePoint\n} from '@/common/utils/position';\nimport { CloneElement, Placement } from 'reablocks';\nimport { ChartTooltip, ChartTooltipProps } from './ChartTooltip';\nimport { arc } from 'd3-shape';\nimport isEqual from 'react-fast-compare';\nimport { scaleLinear } from 'd3-scale';\n\nexport interface TooltipAreaProps {\n  /**\n   * Popperjs placement.\n   */\n  placement: Placement;\n\n  /**\n   * Chart height. Set internally.\n   */\n  height: number;\n\n  /**\n   * Chart width. Set internally.\n   */\n  width: number;\n\n  /**\n   * Chart D3 XScale. Set internally.\n   */\n  xScale: any;\n\n  /**\n   * Chart D3 YScale. Set internally.\n   */\n  yScale: any;\n\n  /**\n   * Whether the tooltip is disabled or not.\n   */\n  disabled: boolean;\n\n  /**\n   * Color setter.\n   */\n  color: any;\n\n  /**\n   * Chart internal data type.\n   */\n  data: ChartInternalDataShape[];\n\n  /**\n   * Child elements to be contained by.\n   */\n  children?: any;\n\n  /**\n   * Whether the area is radial or not.\n   */\n  isRadial?: boolean;\n\n  /**\n   * Whether the area is continous or not (e.g. line and area charts are continous, bar charts are not).\n   */\n  isContinous?: boolean;\n\n  /**\n   * Inner-radius to set the positioning by. Set internally.\n   */\n  innerRadius?: number;\n\n  /**\n   * Outer-radius to set the positioning by. Set internally.\n   */\n  outerRadius?: number;\n\n  /**\n   * Tooltip element.\n   */\n  tooltip: ReactElement<ChartTooltipProps, typeof ChartTooltip>;\n\n  /**\n   * Whether to inverse the data or not.\n   */\n  inverse: boolean;\n\n  /**\n   * When pointer entered mouse area.\n   */\n  onValueEnter: (event: TooltipAreaEvent) => void;\n\n  /**\n   * When pointer left mouse area.\n   */\n  onValueLeave: () => void;\n\n  /**\n   * Whether the layout is horizontal or not.\n   */\n  isHorizontal: boolean;\n\n  /**\n   * Start angle for the first value.\n   */\n  startAngle?: number;\n\n  /**\n   * End angle for the last value.\n   */\n  endAngle?: number;\n}\n\ninterface TooltipDataShape {\n  x?: ChartDataTypes;\n  y?: ChartDataTypes;\n  data?: ChartDataTypes | Array<ChartDataTypes | ChartInternalShallowDataShape>;\n  i?: number;\n}\n\n// eslint-disable-next-line react/display-name\nexport const TooltipArea = forwardRef<any, Partial<TooltipAreaProps>>(\n  (\n    {\n      children,\n      inverse = true,\n      tooltip = <ChartTooltip />,\n      disabled,\n      color,\n      isRadial = false,\n      isContinous = true,\n      width,\n      height,\n      xScale,\n      yScale,\n      onValueEnter = () => undefined,\n      data,\n      isHorizontal,\n      innerRadius,\n      outerRadius,\n      placement: placementProp,\n      onValueLeave = () => undefined,\n      startAngle = 0,\n      endAngle = 2 * Math.PI\n    },\n    childRef\n  ) => {\n    const [visible, setVisible] = useState<boolean>();\n    const [placement, setPlacement] = useState<Placement>();\n    const [value, setValue] = useState<any>();\n    const [offsetX, setOffsetX] = useState<any>();\n    const [offsetY, setOffsetY] = useState<any>();\n    const [prevX, setPrevX] = useState<number>();\n    const [prevY, setPrevY] = useState<number>();\n    const ref = useRef<SVGRectElement | SVGPathElement | any>();\n    const fullCircleref = useRef<SVGRectElement | SVGPathElement | any>(null);\n    const isFullCircle = Math.abs(endAngle - startAngle) >= 2 * Math.PI;\n\n    const range = Math.abs(endAngle - startAngle);\n\n    const rotationFactor = 0.5;\n\n    const getXCoord = useCallback(\n      (x: number, y: number) => {\n        // If the shape is radial, we need to convert the X coords to a radial format.\n        if (isRadial) {\n          const outerRadiusNew = outerRadius || Math.min(width, height) / 2;\n          let rad =\n            Math.atan2(y - outerRadiusNew, x - outerRadiusNew) +\n            rotationFactor * Math.PI;\n\n          // Align it with the expected start angle\n          rad = (rad - startAngle) % (2 * Math.PI);\n\n          // TODO: Figure out what the 'correct' way to do this is...\n          if (rad < 0) {\n            rad += Math.PI * 2;\n          }\n\n          // convert to given range\n          const scale = scaleLinear()\n            .domain([0, range])\n            .range([startAngle, endAngle]);\n          rad = scale(rad);\n\n          return rad;\n        }\n\n        return x;\n      },\n      [endAngle, height, isRadial, outerRadius, range, startAngle, width]\n    );\n\n    const transformData = useCallback(\n      (series: ChartInternalDataShape[]) => {\n        const result: TooltipDataShape[] = [];\n\n        if (inverse) {\n          for (const point of series) {\n            const seriesPoint = point as ChartInternalNestedDataShape;\n            if (Array.isArray(seriesPoint.data)) {\n              for (const nestedPoint of seriesPoint.data) {\n                const right = nestedPoint.x;\n                let idx = result.findIndex((r) => {\n                  const left = r.x;\n                  if (left instanceof Date && right instanceof Date) {\n                    return left.getTime() === right.getTime();\n                  }\n                  return left === right;\n                });\n\n                if (idx === -1) {\n                  result.push({\n                    x: nestedPoint.x,\n                    data: []\n                  });\n\n                  idx = result.length - 1;\n                }\n\n                const data = result[idx].data;\n\n                if (Array.isArray(data)) {\n                  data.push(nestedPoint);\n                }\n              }\n            } else {\n              result.push(point);\n            }\n          }\n        } else {\n          for (const point of series) {\n            const nestedPoint = point as ChartInternalNestedDataShape;\n            if (Array.isArray(nestedPoint.data)) {\n              result.push({\n                ...nestedPoint,\n                x: nestedPoint.key,\n                data: nestedPoint.data.map((d) => ({\n                  ...d,\n                  key: !isHorizontal ? d.x : d.y,\n                  value: !isHorizontal ? d.y : d.x\n                }))\n              });\n            } else {\n              const shallowPoint = point as ChartInternalShallowDataShape;\n              result.push({\n                ...shallowPoint,\n                // Histograms special logic...\n                x: shallowPoint.key === undefined ? shallowPoint.x0 : point.key,\n                y:\n                  shallowPoint.value === undefined\n                    ? shallowPoint.y\n                    : shallowPoint.value\n              });\n            }\n          }\n        }\n\n        return result;\n      },\n      [inverse, isHorizontal]\n    );\n\n    const onMouseMove = useCallback(\n      (event: React.MouseEvent) => {\n        const transformed = transformData(data);\n\n        // Get our default placement\n        let newPlacement = placementProp;\n        if (!placementProp) {\n          if (isHorizontal) {\n            newPlacement = 'right';\n          } else {\n            newPlacement = 'top';\n          }\n        }\n\n        // Get the path container element\n        // Note that we are using the dummy 'full' circle for alignment\n        let target = fullCircleref.current || ref.current;\n\n        const { y, x } = getPositionForTarget({\n          target: target,\n          // Manually pass the x/y from the event\n          clientX: event.clientX,\n          clientY: event.clientY\n        });\n\n        // Need to flip scales/coords if we are a horz layout\n        let keyScale;\n        let valueScale;\n        let coord;\n        let attr = 'x';\n        if (isHorizontal) {\n          keyScale = yScale;\n          valueScale = xScale;\n          coord = y;\n        } else {\n          coord = getXCoord(x, y);\n          keyScale = xScale;\n          valueScale = yScale;\n        }\n\n        // If an index value exists in the data, use that to grab closest point\n        if (typeof transformed[0].i === 'number') {\n          attr = 'i';\n        }\n\n        // Get the closest point to the mouse\n        // Consider invertable scales to be continous\n        // Round non-continous charts with a continous scale down\n        // Round band scales to the closest point for radial charts\n        const newValue = keyScale.invert\n          ? getClosestContinousScalePoint({\n            pos: coord,\n            scale: keyScale,\n            data: transformed,\n            attr,\n            roundDown: !isContinous\n          })\n          : getClosestBandScalePoint({\n            pos: coord,\n            scale: keyScale,\n            data: transformed,\n            attr,\n            roundClosest: isRadial\n          });\n\n        if (!isEqual(newValue, value) && newValue) {\n          const pointX = keyScale(newValue.x);\n          let pointY = valueScale(newValue.y);\n          let marginX = 0;\n          let marginY = 0;\n\n          if (isNaN(pointY)) {\n            pointY = height / 2;\n            marginX = 10;\n            if (!placement) {\n              newPlacement = 'right';\n            }\n          } else {\n            marginY = -10;\n          }\n\n          // If the points didn't change, don't trigger an update\n          if (pointX === prevX && pointY === prevY) {\n            return;\n          }\n\n          setPrevX(pointX);\n          setPrevY(pointY);\n\n          const target = event.target as SVGRectElement;\n          const { top, left } = target.getBoundingClientRect();\n\n          let offsetX = 0;\n          let offsetY = 0;\n\n          if (isRadial) {\n            // If its radial, we need to convert the coords to radial format\n            const outerRadius = Math.min(width, height) / 2;\n            offsetX =\n              pointY * Math.cos(pointX - rotationFactor * Math.PI) +\n              outerRadius;\n            offsetY =\n              pointY * Math.sin(pointX - rotationFactor * Math.PI) +\n              outerRadius;\n          } else {\n            offsetX = pointX;\n            offsetY = pointY;\n          }\n\n          offsetX += left + marginX;\n          offsetY += top + marginY;\n\n          setPlacement(newPlacement);\n          setVisible(true);\n          setValue(newValue);\n          setOffsetX(offsetX);\n          setOffsetY(offsetY);\n\n          onValueEnter({\n            visible: true,\n            value: newValue,\n            pointY,\n            pointX,\n            offsetX,\n            offsetY,\n            nativeEvent: event\n          });\n        }\n      },\n      [\n        data,\n        getXCoord,\n        height,\n        isContinous,\n        isHorizontal,\n        isRadial,\n        onValueEnter,\n        placement,\n        placementProp,\n        prevX,\n        prevY,\n        transformData,\n        value,\n        width,\n        xScale,\n        yScale\n      ]\n    );\n\n    const onMouseLeave = useCallback(() => {\n      setPrevX(undefined);\n      setPrevY(undefined);\n\n      setValue(undefined);\n      setVisible(false);\n\n      onValueLeave();\n    }, [onValueLeave]);\n\n    useImperativeHandle(childRef, () => ({\n      triggerMouseMove(e: React.MouseEvent) {\n        onMouseMove(e);\n      }\n    }));\n\n    const tooltipReference = useMemo(\n      () => ({\n        width: 4,\n        height: 4,\n        top: offsetY,\n        left: offsetX\n      }),\n      [offsetX, offsetY]\n    );\n\n    const renderRadial = useCallback(() => {\n      const innerRadiusNew = innerRadius || 0;\n      const outerRadiusNew = outerRadius || Math.min(width, height) / 2;\n\n      const d = arc()({\n        innerRadius: innerRadiusNew,\n        outerRadius: outerRadiusNew,\n        startAngle: isFullCircle ? 0 : startAngle,\n        endAngle: isFullCircle ? 2 * Math.PI : endAngle\n      });\n\n      // This is a dummuy full circle in the background as we need the\n      // full circle to get the coordinates right from getBoundingClientRect().\n      // If we don't use a full circle, then the bounding rectangle could be of any dimension and\n      // the logic in getPositionForTarget() wouldn't work\n      const fullCircle = arc()({\n        innerRadius: innerRadiusNew,\n        outerRadius: outerRadiusNew,\n        startAngle: 0,\n        endAngle: 2 * Math.PI\n      });\n\n      return (\n        <>\n          <path d={fullCircle!} opacity=\"0\" cursor=\"auto\" ref={fullCircleref} />\n          <path\n            d={d!}\n            opacity=\"0\"\n            cursor=\"auto\"\n            ref={ref}\n            onMouseMove={onMouseMove}\n          />\n        </>\n      );\n    }, [\n      endAngle,\n      height,\n      innerRadius,\n      isFullCircle,\n      onMouseMove,\n      outerRadius,\n      startAngle,\n      width\n    ]);\n\n    const renderLinear = useCallback(() => {\n      return (\n        <rect\n          height={height}\n          ref={ref}\n          width={width}\n          opacity={0}\n          cursor=\"auto\"\n          onMouseMove={onMouseMove}\n        />\n      );\n    }, [height, onMouseMove, width]);\n\n    return (\n      <Fragment>\n        {disabled && children}\n        {!disabled && (\n          <g onMouseLeave={onMouseLeave} ref={childRef}>\n            {isRadial && renderRadial()}\n            {!isRadial && renderLinear()}\n            <CloneElement<ChartTooltipProps>\n              element={tooltip}\n              visible={visible}\n              placement={placement}\n              modifiers={[offset({ mainAxis: 15 }), flip()]}\n              reference={tooltipReference}\n              color={color}\n              value={value}\n            />\n            {children}\n          </g>\n        )}\n      </Fragment>\n    );\n  }\n);\n","import React, {\n  PropsWithChildren,\n  FC,\n  useRef,\n  useState,\n  useEffect,\n  useCallback\n} from 'react';\nimport {\n  Pan,\n  PanMoveEvent,\n  PanStartEvent,\n  PanEndEvent,\n  PanCancelEvent\n} from '@/common/Gestures/Pan';\nimport { Zoom, ZoomEvent } from '@/common/Gestures/Zoom';\nimport {\n  identity,\n  fromObject,\n  fromDefinition,\n  transform\n} from 'transformation-matrix';\nimport isEqual from 'react-fast-compare';\n\nexport interface ZoomPanEvent {\n  scale: number;\n  x: number;\n  y: number;\n  type: 'zoom' | 'pan';\n  nativeEvent: any;\n}\n\nexport interface ZoomPanProps extends PropsWithChildren {\n  height: number;\n  width: number;\n  scale: number;\n  x: number;\n  y: number;\n  pannable: boolean;\n  zoomable: boolean;\n  disabled?: boolean;\n  maxZoom: number;\n  minZoom: number;\n  zoomStep: number;\n  constrain: boolean;\n  globalPanning: boolean;\n  disableMouseWheel?: boolean;\n  requireZoomModifier?: boolean;\n  onZoomPan: (event: ZoomPanEvent) => void;\n  onZoom: (event: ZoomEvent) => void;\n  onZoomEnd: () => void;\n  onPanStart: (event: PanStartEvent) => void;\n  onPanMove: (event: PanMoveEvent) => void;\n  onPanEnd: (event: PanEndEvent) => void;\n  onPanCancel: (event: PanCancelEvent) => void;\n}\n\nexport const ZoomPan: FC<Partial<ZoomPanProps>> = ({\n  height = 0,\n  width = 0,\n  children,\n  disabled,\n  pannable = true,\n  maxZoom = 10,\n  minZoom = 0,\n  zoomable = true,\n  scale = 1,\n  x = 0,\n  y = 0,\n  disableMouseWheel,\n  constrain = true,\n  zoomStep = 0.1,\n  onPanCancel = () => undefined,\n  requireZoomModifier,\n  globalPanning = true,\n  onPanStart = () => undefined,\n  onZoomPan = () => undefined,\n  onPanMove = () => undefined,\n  onPanEnd = () => undefined,\n  onZoom = () => undefined,\n  onZoomEnd = () => undefined\n}) => {\n  const zoomRef = useRef<Zoom>();\n  const panRef = useRef<Pan>();\n  const [isZooming, setIsZooming] = useState<boolean>();\n  const [isPanning, setIsPanning] = useState<boolean>();\n  const [matrix, setMatrix] = useState<any>(identity());\n\n  useEffect(() => {\n    const newMatrix = transform(\n      fromDefinition([\n        { type: 'translate', tx: x, ty: y },\n        { type: 'scale', sx: scale, sy: scale }\n      ])\n    );\n\n    if (!isEqual(newMatrix, matrix)) {\n      setMatrix(newMatrix);\n    }\n  }, [x, y, scale, matrix]);\n\n  const onPanStartHandler = useCallback(\n    (event: PanStartEvent) => {\n      setIsPanning(true);\n      onPanStart(event);\n    },\n    [onPanStart]\n  );\n\n  const onPanMoveHandler = useCallback(\n    (event: PanMoveEvent) => {\n      onZoomPan({\n        scale: scale,\n        x: event.x,\n        y: event.y,\n        type: 'pan',\n        nativeEvent: event.nativeEvent\n      });\n\n      onPanMove(event);\n    },\n    [onPanMove, onZoomPan, scale]\n  );\n\n  const onPanEndHandler = useCallback(\n    (event: PanEndEvent) => {\n      setIsPanning(false);\n      onPanEnd(event);\n    },\n    [onPanEnd]\n  );\n\n  const onZoomHandler = useCallback(\n    (event: ZoomEvent) => {\n      onZoomPan({\n        x: event.x,\n        y: event.y,\n        scale: event.scale,\n        nativeEvent: event.nativeEvent,\n        type: 'zoom'\n      });\n      onZoom(event);\n    },\n    [onZoom, onZoomPan]\n  );\n\n  const onZoomEndHandler = useCallback(() => {\n    setIsZooming(false);\n    onZoomEnd();\n  }, [onZoomEnd]);\n\n  const cursor = pannable ? 'move' : 'auto';\n  const selection = isZooming || isPanning ? 'none' : 'auto';\n  const matrixObj = fromObject(matrix);\n\n  return (\n    <Pan\n      x={x}\n      y={y}\n      scale={scale}\n      matrix={matrixObj}\n      constrain={constrain}\n      height={height}\n      width={width}\n      disabled={!pannable || disabled}\n      ref={panRef}\n      globalPanning={globalPanning}\n      onPanStart={onPanStartHandler}\n      onPanMove={onPanMoveHandler}\n      onPanEnd={onPanEndHandler}\n      onPanCancel={onPanCancel}\n    >\n      <Zoom\n        ref={zoomRef}\n        disabled={!zoomable || disabled}\n        scaleFactor={zoomStep}\n        disableMouseWheel={disableMouseWheel}\n        maxZoom={maxZoom}\n        minZoom={minZoom}\n        scale={scale}\n        x={x}\n        y={y}\n        style={{ cursor }}\n        requireZoomModifier={requireZoomModifier}\n        matrix={matrix}\n        onZoom={onZoomHandler}\n        onZoomEnd={onZoomEndHandler}\n      >\n        {!disabled && (\n          <rect\n            height={height}\n            width={width}\n            opacity={0}\n            className=\"pan-container\"\n          />\n        )}\n        <g\n          style={{\n            pointerEvents: selection,\n            userSelect: selection\n          }}\n        >\n          {children}\n        </g>\n      </Zoom>\n    </Pan>\n  );\n};\n","import { scaleLinear, scaleTime, scaleBand } from 'd3-scale';\nimport { getXDomain, getYDomain } from '@/common/utils/domains';\nimport {\n  ChartInternalShallowDataShape,\n  ChartInternalNestedDataShape\n} from '../data';\nimport { uniqueBy } from '@/common/utils/array';\n\ninterface ScaleConfig {\n  type: 'category' | 'value' | 'time' | 'duration';\n  roundDomains?: boolean;\n  data: any[];\n  domain?: any[];\n  padding?: number;\n  scaled?: boolean;\n  width?: number;\n  height?: number;\n  isMultiSeries?: boolean;\n  isDiverging?: boolean;\n}\n\n/**\n * Gets the X Scale function.\n */\nexport function getXScale({\n  type,\n  roundDomains,\n  data,\n  width,\n  domain,\n  padding,\n  scaled,\n  isMultiSeries = false,\n  isDiverging = false\n}: ScaleConfig) {\n  let scale;\n\n  if (type === 'time' || type === 'duration' || type === 'value') {\n    if (type === 'time') {\n      scale = scaleTime().rangeRound([0, width!]);\n    } else {\n      scale = scaleLinear().rangeRound([0, width!]);\n    }\n\n    scale = scale.domain(domain || getXDomain({ data, scaled, isDiverging }));\n  } else {\n    if (!domain) {\n      if (isMultiSeries) {\n        domain = uniqueBy<ChartInternalShallowDataShape>(data, (d) => d.key);\n      } else {\n        domain = uniqueBy<ChartInternalShallowDataShape>(data, (d) => d.x);\n      }\n    }\n\n    scale = scaleBand()\n      .rangeRound([0, width!])\n      .padding(padding || 0)\n      .domain(domain as ReadonlyArray<any>);\n  }\n\n  return roundDomains ? scale.nice() : scale;\n}\n\n/**\n * Gets the Y Scale function.\n */\nexport function getYScale({\n  type,\n  height,\n  data,\n  domain,\n  roundDomains = false,\n  scaled = false,\n  padding = 0,\n  isMultiSeries = false,\n  isDiverging = false\n}: ScaleConfig) {\n  let scale;\n\n  if (type === 'time' || type === 'value' || type === 'duration') {\n    scale = scaleLinear()\n      .range([height!, 0])\n      .domain(domain || getYDomain({ data, scaled, isDiverging }));\n  } else {\n    if (!domain) {\n      if (isMultiSeries) {\n        domain = uniqueBy<ChartInternalNestedDataShape>(\n          data as [],\n          (d) => d.key\n        );\n      } else {\n        domain = uniqueBy<ChartInternalShallowDataShape>(data, (d) => d.y);\n      }\n    }\n\n    scale = scaleBand()\n      .rangeRound([height!, 0])\n      .padding(padding)\n      .domain(domain as ReadonlyArray<any>);\n  }\n\n  return roundDomains ? scale.nice() : scale;\n}\n","import { scaleLinear } from 'd3-scale';\nimport { ChartInternalNestedDataShape } from '@/common/data';\nimport { uniqueBy } from '@/common/utils/array';\n\ninterface MariemkoScaleData {\n  data: ChartInternalNestedDataShape[];\n  width: number;\n  valueScale: any;\n  padding: number;\n}\n\n/**\n * Get a linear scale for the mariemko chart.\n */\nexport const getMarimekkoScale = (width: number, roundDomains: boolean) => {\n  const scale = scaleLinear().rangeRound([0, width]);\n  return roundDomains ? scale.nice() : scale;\n};\n\n/**\n * Builds a fake scale function to get a group scale for a marimekko value scale.\n */\nexport const getMarimekkoGroupScale = ({\n  data,\n  width,\n  valueScale,\n  padding\n}: MariemkoScaleData) => {\n  const domain = uniqueBy<ChartInternalNestedDataShape>(data, (d) => d.key);\n  const barCount = data.length;\n  const widthMinusPadding = width - padding * (barCount - 1);\n  const xMultiplier = widthMinusPadding / width;\n\n  // Given a data series, find the x0/x1 for it.\n  const getXRange = (series) => {\n    const [val] = series.data;\n    const x0 = valueScale(val.x0);\n    const x1 = valueScale(val.x1);\n    return { x0, x1 };\n  };\n\n  const scale: any = (arg) => {\n    let result = 0;\n    const index = data.findIndex((d) => d.key === arg);\n    const series = data[index];\n\n    if (series && series.data && series.data.length) {\n      const { x1, x0 } = getXRange(series);\n      result = (x1 - x0) / 2 + x0;\n\n      if (padding) {\n        result = result * xMultiplier + index * padding;\n      }\n    }\n\n    return result;\n  };\n\n  scale.range = () => [0, width];\n  scale.domain = () => domain;\n\n  // Special invert function for marimekko\n  scale.mariemkoInvert = (offset: number) => {\n    let found;\n\n    for (let i = 0; i < domain.length; i++) {\n      const attr = domain[i];\n      const series = data[i];\n      const { x1, x0 } = getXRange(series);\n\n      if (offset >= x0 - padding / 2 && offset <= x1 - padding / 2) {\n        found = attr;\n        break;\n      }\n    }\n\n    return found;\n  };\n\n  return scale;\n};\n","import { scaleBand } from 'd3-scale';\nimport { uniqueBy } from '@/common/utils/array';\n\n/**\n * Get the group scale aka x0.\n */\nexport function getGroupScale({\n  dimension,\n  padding,\n  data,\n  direction = 'vertical'\n}) {\n  const domain = uniqueBy(data, (d) => d.key);\n  const spacing = domain.length / (dimension / padding + 1);\n  const range = direction === 'vertical' ? [0, dimension] : [dimension, 0];\n\n  return scaleBand()\n    .rangeRound(range as any)\n    .paddingInner(spacing)\n    .paddingOuter(spacing / 2)\n    .domain(domain as string[]);\n}\n\n/**\n * Get the inner scale aka x1.\n */\nexport function getInnerScale({ groupScale, padding, data, prop = 'x' }) {\n  const dimension = groupScale.bandwidth();\n  const domain = uniqueBy(\n    data,\n    (d) => d.data,\n    (d) => d[prop]\n  );\n  const spacing = domain.length / (dimension / padding + 1);\n\n  return scaleBand()\n    .rangeRound([0, dimension])\n    .paddingInner(spacing)\n    .domain(domain as string[]);\n}\n","import { scaleLinear } from 'd3-scale';\n\n/**\n * Get the Y Scale for a given set of radiuses.\n * Reference: https://github.com/d3/d3-scale/issues/90\n */\nexport const getRadialYScale = (\n  innerRadius: number,\n  outerRadius: number,\n  domain: any[]\n) => {\n  if (domain[0] === 0 && domain[1] === 0) {\n    // If all values are 0, set the domain to [0, 1], so the zero values are\n    // all at the bottom of the chart, not the middle.\n    domain = [0, 1];\n  }\n  const y = scaleLinear()\n    .range([innerRadius * innerRadius, outerRadius * outerRadius])\n    .domain(domain);\n\n  const yScale = Object.assign((d) => Math.sqrt(y(d)), y);\n\n  return yScale;\n};\n","import React, { FC, PropsWithChildren, useCallback, useMemo } from 'react';\nimport { ZoomPan, ZoomPanEvent } from './ZoomPan';\nimport { ChartInternalDataShape, ChartDataTypes } from '@/common/data';\nimport { getXScale } from '../scales';\n\nexport interface ZoomPanChangeEvent {\n  domain: [ChartDataTypes, ChartDataTypes];\n  isZoomed: boolean;\n}\n\nexport interface ChartZoomPanProps extends PropsWithChildren {\n  data: ChartInternalDataShape[];\n  domain?: [ChartDataTypes, ChartDataTypes];\n  axisType: 'value' | 'time' | 'category' | 'duration';\n  roundDomains: boolean;\n  height: number;\n  width: number;\n  scale: number;\n  offset: number;\n  pannable: boolean;\n  zoomable: boolean;\n  disabled?: boolean;\n  maxZoom: number;\n  zoomStep: number;\n  disableMouseWheel?: boolean;\n  requireZoomModifier?: boolean;\n  onZoomPan?: (event: ZoomPanChangeEvent) => void;\n}\n\nexport const ChartZoomPan: FC<Partial<ChartZoomPanProps>> = ({\n  data,\n  height,\n  children,\n  disabled,\n  domain,\n  width,\n  axisType,\n  roundDomains,\n  onZoomPan = () => undefined,\n  ...rest\n}) => {\n  const onZoomPanHandler = useCallback(\n    (event: ZoomPanEvent) => {\n      const can =\n        event.type === 'zoom' || (event.type === 'pan' && event.scale > 1);\n\n      if (can) {\n        const scale: any = getXScale({\n          width: width,\n          type: axisType,\n          roundDomains,\n          data\n        });\n\n        const newScale = scale.copy().domain(\n          scale\n            .range()\n            .map((x) => (x - event.x) / event.scale)\n            .map(scale.clamp(true).invert, event.x)\n        );\n\n        onZoomPan!({\n          domain: newScale.domain(),\n          isZoomed: event.scale !== 1\n        });\n      }\n    },\n    [axisType, data, onZoomPan, roundDomains, width]\n  );\n\n  const zoomOffset = useMemo(() => {\n    let zoomOffset = {\n      scale: undefined,\n      x: undefined\n    } as any;\n\n    if (!disabled && domain) {\n      const xScale: any = getXScale({\n        width,\n        type: axisType,\n        roundDomains,\n        data\n      });\n\n      let offset = xScale(domain[0]);\n      const endOffset = xScale(domain[1]);\n      const scale = width / (endOffset - offset);\n\n      // Apply the new scale to the offset so its scaled correctly\n      offset = offset * scale;\n\n      zoomOffset = {\n        scale: scale,\n        x: -offset\n      };\n    }\n\n    return zoomOffset;\n  }, [axisType, data, disabled, domain, roundDomains, width]);\n\n  return (\n    <ZoomPan\n      {...rest}\n      scale={zoomOffset.scale}\n      x={zoomOffset.x}\n      height={height}\n      width={width}\n      pannable={zoomOffset.scale > 1}\n      onZoomPan={onZoomPanHandler}\n    >\n      {children}\n    </ZoomPan>\n  );\n};\n","export const DEFAULT_TRANSITION = {\n  type: 'spring',\n  velocity: 5,\n  damping: 20,\n  // https://github.com/framer/motion/issues/1513#issuecomment-1121133717\n  restDelta: 0.01,\n  restSpeed: 0.01\n};\n","import React, { useEffect } from 'react';\nimport { motion, useSpring, useMotionValue } from 'motion/react';\nimport { interpolate } from 'd3-interpolate';\nimport { DEFAULT_TRANSITION } from './config';\n\nexport const MotionPath = ({ custom, transition, ...rest }) => {\n  const d = useMotionValue(custom.exit.d);\n  const spring = useSpring(0, DEFAULT_TRANSITION);\n\n  useEffect(() => {\n    const interpolator = interpolate(d.get(), custom.enter.d);\n    const prevSpring = spring.get();\n    spring.set(prevSpring + 1);\n\n    return spring.on('change', (v) => d.set(interpolator(v - prevSpring)));\n  }, [custom.enter.d, custom.exit.d, d, spring]);\n\n  const { d: enterD, ...enterRest } = custom.enter;\n  const { d: exitD, ...exitRest } = custom.exit;\n\n  return (\n    <motion.path\n      {...rest}\n      initial={{ opacity: 0, ...exitRest }}\n      exit={{ opacity: 0, ...exitRest }}\n      animate={{ opacity: 1, ...enterRest }}\n      transition={transition}\n      d={transition.type !== false ? d : enterD}\n    />\n  );\n};\n","import chroma from 'chroma-js';\n\n/**\n * Color Schemes\n * Credits: https://gka.github.io/chroma.js/#chroma-brewer\n */\nexport const schemes = {\n  unifyviz: [\n    '#4C86FF',\n    '#40D3F4',\n    '#40E5D1',\n    '#9152EE',\n    '#A840E8',\n    '#80CE5B',\n    '#AADC40',\n    '#D740BE',\n    '#EE4094',\n    '#E84045',\n    '#F8A340',\n    '#FFD440'\n  ],\n  unifyvizwarm: ['#FFD440', '#F8A340', '#E84045'],\n  unify8Colors: chroma\n    .scale(['#4C86FF', '#26efb5'])\n    .correctLightness()\n    .colors(8),\n  cybertron: chroma.scale(['#2d60e8', '#26efb5']).correctLightness().colors(8),\n  ...chroma.brewer\n};\n","import { scaleOrdinal, scaleQuantile } from 'd3-scale';\nimport { maxIndex, extent } from 'd3-array';\nimport { schemes } from './schemes';\nimport { uniqueBy } from '../utils';\n\nexport type ColorSchemeType =\n  | ((data, index: number, active?: any[]) => string)\n  | string[]\n  | string;\n\nexport type ColorSchemeStyleArray = Partial<CSSStyleDeclaration>[];\n\ntype ColorHelperProps = {\n  colorScheme: ColorSchemeType;\n  point: any;\n  data: any[];\n  index: number;\n  active: any[];\n  scale?: any;\n  domain?: any[];\n  key?: any;\n  attribute?: string;\n  isMultiSeries?: boolean;\n};\n\ntype ColorSchemeValueScale = (point: any) => string;\n\nfunction isColorSchemeStyleArray(\n  colorScheme: any\n): colorScheme is ColorSchemeStyleArray {\n  return Array.isArray(colorScheme) && typeof colorScheme[0] === 'object';\n}\n\n/**\n * Given a point, get the key attributes for it.\n */\nconst rangeHelper = (point: any, attribute: string) =>\n  point.map((r, i) => {\n    if (r) {\n      if (r[attribute] !== undefined) {\n        return r[attribute];\n      } else if (r.data && r.data[attribute] !== undefined) {\n        return r.data[attribute];\n      }\n    }\n\n    return i;\n  });\n\n/**\n * Get a color given a range.\n */\nexport const getColor = (props: Partial<ColorHelperProps>) => {\n  let {\n    point,\n    colorScheme,\n    attribute,\n    index,\n    data,\n    active,\n    isMultiSeries,\n    domain,\n    key,\n    scale\n  } = {\n    attribute: 'key',\n    isMultiSeries: false,\n    scale: scaleOrdinal,\n    ...props\n  };\n\n  if (typeof colorScheme === 'string' && schemes[colorScheme]) {\n    colorScheme = schemes[colorScheme];\n  }\n\n  if (Array.isArray(colorScheme)) {\n    if (!domain) {\n      if (isMultiSeries && Array.isArray(data)) {\n        const maxIdx = maxIndex(data, (d) => d.data.length);\n        const maxVal = data[maxIdx];\n        data = maxVal.data;\n      }\n\n      domain = rangeHelper(data, attribute);\n    }\n\n    key = key !== undefined ? key : point[attribute];\n\n    return scale(colorScheme).domain(domain)(key);\n  } else if (typeof colorScheme === 'function') {\n    return colorScheme(point, index!, active);\n  } else {\n    return colorScheme;\n  }\n};\n\n/**\n * This function creates a value scale that maps data points to colors or CSS styles.\n *\n * @param {Array} data - The data used to create the scale.\n * @param {ColorSchemeType} colorScheme - The color scheme used to generate the scale.\n * @param {string} emptyColor - The color used for data points with no value.\n * @param {any} selections - Selected values in active state\n *\n * @returns {ColorSchemeValueScale} A function that takes a data point and returns a color or CSS style based on the data point's value.\n */\nconst getValueScale = (\n  data,\n  colorScheme: ColorSchemeType,\n  emptyColor: string,\n  selections: any\n): ColorSchemeValueScale => {\n  const valueDomain = extent(\n    uniqueBy(\n      data,\n      (d) => d.data,\n      (d) => d.value\n    )\n  );\n\n  return (point) => {\n    // For 0 values, lets show a placeholder fill\n    if (point?.value === undefined || point?.value === null) {\n      return emptyColor;\n    }\n\n    // Note: this can return css style values, not just colors\n    return getColor({\n      scale: scaleQuantile,\n      domain: valueDomain,\n      key: point.value,\n      colorScheme,\n      point,\n      active: selections\n    });\n  };\n};\n\n/**\n * This function generates a style object for a given data point based on a map of value scales.\n *\n * @param {any} point - The data point for which to generate the style object.\n * @param {Map<string, ColorSchemeValueScale>} valueScales - A map where each key is a property name and each value is a function that takes a data point and returns a CSS style.\n *\n * @returns {Partial<CSSStyleDeclaration>} A style object where each key is a property name and each value is a color or CSS style based on the value of the data point for that property.\n */\nexport const getColorSchemeStyles = (\n  point,\n  valueScales: Map<string, ColorSchemeValueScale>\n): Partial<CSSStyleDeclaration> =>\n  Array.from(valueScales).reduce((acc, [key, valueScale]) => {\n    return { ...acc, [key]: valueScale(point) };\n  }, {});\n\n/**\n * This function retrieves a color scheme for a specific property from a given color scheme.\n *\n * @param {ColorSchemeStyleArray} colorScheme - The color scheme used to generate the scale.\n * @param {string} colorSchemeProperty - The property for which to retrieve the new color scheme.\n *\n * @returns {ColorSchemeType} A color scheme for the specified property.\n */\nconst getColorSchemeForProperty = (\n  colorScheme: ColorSchemeStyleArray,\n  colorSchemeProperty: string\n): ColorSchemeType =>\n  colorScheme.map(\n    (schemeItem: Partial<CSSStyleDeclaration>) =>\n      schemeItem?.[colorSchemeProperty]\n  );\n\n/**\n * This function creates a map of value scales for different properties based on a provided color scheme.\n * Each value scale is a function that takes a data point and returns a css style value based on that point.\n *\n * @param {Array} data - The data used to create the scales.\n * @param {ColorSchemeType | ColorSchemeStyleArray} colorScheme - The color scheme used to generate the scales. This can be an array of colors or an array of objects where each object contains a set of css styles.\n * @param {string} emptyColor - The color used for data points with no value.\n * @param {any} selections - Selected values in active state\n *\n * @returns {Map<string, ColorSchemeValueScale>} A map where each key is a property name and each value is a function that takes a data point and returns a value for the property.\n *\n * If the color scheme is an array of strings, they will be treated as fill values.\n */\nexport const createColorSchemeValueScales = (\n  data,\n  colorScheme: ColorSchemeType | ColorSchemeStyleArray,\n  emptyColor: string,\n  selections: any\n): Map<string, ColorSchemeValueScale> => {\n  const valueScales = new Map<string, ColorSchemeValueScale>();\n\n  if (isColorSchemeStyleArray(colorScheme)) {\n    const colorSchemeProperties = [\n      ...new Set(colorScheme.flatMap(Object.keys))\n    ];\n\n    colorSchemeProperties.forEach((key) => {\n      const valueScale = getValueScale(\n        data,\n        getColorSchemeForProperty(colorScheme, key),\n        emptyColor,\n        selections\n      );\n      valueScales.set(key, valueScale);\n    });\n  } else {\n    valueScales.set('fill', getValueScale(data, colorScheme, emptyColor, selections));\n  }\n\n  return valueScales;\n};\n","import { animate } from 'motion/react';\nimport { useEffect, useRef } from 'react';\n\nexport interface CountInputs {\n  /**\n   * Number to animate to\n   */\n  to: number;\n\n  /**\n   * Number to animate from. Defaults 0.\n   */\n  from?: number;\n\n  /**\n   * Duration of the animation in seconds. Defaults 1.\n   */\n  duration?: number;\n\n  /**\n   * Delay of the animation. Defaults 0.\n   */\n  delay?: number;\n\n  /**\n   * Localize the number. Defaults true.\n   */\n  format?: boolean;\n\n  /**\n   * Number of decimal places. Defaults 0.\n   */\n  decimalPlaces?: number;\n\n  /**\n   * Prefix the number with a string or number.\n   */\n  prefix?: string | number;\n\n  /**\n   * Suffix the number with a string or number.\n   */\n  suffix?: string | number;\n}\n\nexport const COUNT_DEFAULTS = {\n  from: 0,\n  duration: 1,\n  delay: 0,\n  format: true,\n  decimalPlaces: 0\n};\n\nexport const useCount = ({\n  from,\n  to,\n  duration,\n  delay,\n  prefix,\n  suffix,\n  decimalPlaces,\n  format\n}: CountInputs) => {\n  const nodeRef = useRef<any | null>(null);\n\n  from = from || COUNT_DEFAULTS.from;\n  duration = duration || COUNT_DEFAULTS.duration;\n  delay = delay || COUNT_DEFAULTS.delay;\n  format = format || COUNT_DEFAULTS.format;\n  decimalPlaces = decimalPlaces || COUNT_DEFAULTS.decimalPlaces;\n\n  useEffect(() => {\n    const node = nodeRef.current;\n\n    const controls = animate(from, to, {\n      duration,\n      delay,\n      onUpdate(value) {\n        let formatted: number | string = value;\n        if (decimalPlaces) {\n          formatted = Number(value.toFixed(decimalPlaces));\n        } else {\n          formatted = Number(value.toFixed(0));\n        }\n\n        if (format) {\n          formatted = formatted.toLocaleString();\n        }\n\n        if (node) {\n          if (prefix) {\n            formatted = `${prefix}${formatted}`;\n          }\n          if (suffix) {\n            formatted = `${formatted}${suffix}`;\n          }\n\n          node.textContent = formatted as string;\n        }\n      }\n    });\n\n    return () => controls.stop();\n  }, [from, to, duration, delay, decimalPlaces, format, prefix, suffix]);\n\n  return nodeRef;\n};\n","import React, { FC } from 'react';\nimport { CountInputs, useCount } from './useCount';\n\nexport interface CountProps extends CountInputs {\n  className?: string;\n}\n\nexport const Count: FC<CountProps> = ({ className, ...rest }) => {\n  const ref = useCount(rest);\n  return <span ref={ref} className={className} />;\n};\n","import React, { FC } from 'react';\n\nexport interface LinearValueMarkerProps {\n  color: string;\n  value: any;\n  className?: string;\n  thickness?: number;\n  size?: number;\n  direction?: 'horizontal' | 'vertical';\n}\nexport const LinearValueMarker: FC<LinearValueMarkerProps> = ({\n  color,\n  value,\n  className,\n  thickness = 1,\n  size,\n  direction = 'horizontal'\n}) => {\n  const coordinates =\n    direction === 'horizontal'\n      ? { x1: 0, y1: value, x2: size, y2: value }\n      : { x1: value, y1: 0, x2: value, y2: size };\n\n  return (\n    <line\n      className={className}\n      stroke={color}\n      strokeWidth={thickness}\n      {...coordinates}\n    />\n  );\n};\n","import React, { FC } from 'react';\n\nexport interface RadialValueMarkerProps {\n  color: string;\n  value: number;\n  className?: string;\n  thickness?: number;\n}\nexport const RadialValueMarker: FC<RadialValueMarkerProps> = ({\n  color,\n  value,\n  className,\n  thickness = 1\n}) => (\n  <circle\n    className={className}\n    cx={0}\n    cy={0}\n    r={value}\n    fill=\"none\"\n    stroke={color}\n    strokeWidth={thickness}\n  />\n);\n","import { Glow } from './Glow';\nimport chroma from 'chroma-js';\n\nexport interface generateGlowStylesInput {\n  glow?: Glow;\n  colorSchemeColor?: string;\n}\n\nexport const generateGlowStyles = ({\n  glow,\n  colorSchemeColor\n}: generateGlowStylesInput) => {\n  if (!glow) return {};\n\n  let {\n    x = 0,\n    y = 0,\n    blur = 5,\n    color = colorSchemeColor || 'rgb(255, 255, 255, 0.25)',\n    opacity = 1\n  } = glow;\n\n  color = chroma(color).alpha(opacity).css();\n\n  return blur\n    ? { filter: `drop-shadow(${x}px ${y}px ${blur}px ${color})` }\n    : {};\n};\n","import React, {\n  Fragment,\n  ReactNode,\n  ReactElement,\n  useState,\n  FC,\n  useRef,\n  useMemo\n} from 'react';\nimport { ChartInternalShallowDataShape } from '@/common/data';\nimport { ChartTooltip, ChartTooltipProps } from '@/common/Tooltip';\nimport classNames from 'classnames';\nimport { CloneElement } from 'reablocks';\nimport {\n  constructFunctionProps,\n  PropFunctionTypes\n} from '@/common/utils/functions';\nimport { motion } from 'motion/react';\nimport { DEFAULT_TRANSITION } from '@/common/Motion';\nimport { schemes, getColor, ColorSchemeType } from '@/common/color';\nimport { identifier } from 'safe-identifier';\nimport css from './ScatterPoint.module.css';\nimport { Glow } from '@/common/Glow';\nimport { generateGlowStyles } from '@/common/Glow/utils';\nimport { getAriaLabel, mergeDefaultProps } from '@/common';\n\nexport type ScatterPointProps = {\n  /**\n   * Whether the element is active or not. Set internally by `ScatterSeries`.\n   */\n  active?: boolean;\n\n  /**\n   * Size of the circle element.\n   */\n  size?: ((data: ChartInternalShallowDataShape) => number) | number;\n\n  /**\n   * Color of the circle.\n   */\n  color?: ColorSchemeType;\n\n  /**\n   * Cursor for the element.\n   */\n  cursor?: string;\n\n  /**\n   * D3 scale for X Axis. Set internally by `ScatterPlot`.\n   */\n  xScale: any;\n\n  /**\n   * D3 scale for Y Axis. Set internally by `ScatterPlot`.\n   */\n  yScale: any;\n\n  /**\n   * Height of the chart. Set internally by `ScatterPlot`.\n   */\n  height: number;\n\n  /**\n   * Whether to animate the enter/update/exit. Set internally by `ScatterSeries`.\n   */\n  animated?: boolean;\n\n  /**\n   * Index of the element in the series. Set internally by `ScatterSeries`.\n   */\n  index: number;\n\n  /**\n   * Tooltip element.\n   */\n  tooltip: ReactElement<ChartTooltipProps, typeof ChartTooltip> | null;\n\n  /**\n   * Parsed data shape. Set internally by `ScatterPlot`.\n   */\n  data: ChartInternalShallowDataShape;\n\n  /**\n   * Id set internally by `ScatterPlot`.\n   */\n  id: string;\n\n  /**\n   * Glow styling for the point.\n   */\n  glow?: Glow;\n\n  /**\n   * Symbol element to render.\n   */\n  symbol?: (data: ChartInternalShallowDataShape) => ReactNode;\n\n  /**\n   * Whether the elment is visiblbe or not.\n   */\n  visible?: (data: ChartInternalShallowDataShape, index: number) => boolean;\n\n  /**\n   * Event for when a symbol is clicked.\n   */\n  onClick?: (data: ChartInternalShallowDataShape) => void;\n\n  /**\n   * Event for when the symbol has mouse enter.\n   */\n  onMouseEnter?: (data: ChartInternalShallowDataShape) => void;\n\n  /**\n   * Event for when the symbol has mouse leave.\n   */\n  onMouseLeave?: (data: ChartInternalShallowDataShape) => void;\n} & PropFunctionTypes;\n\nexport const ScatterPoint: FC<Partial<ScatterPointProps>> = (props) => {\n  const {\n    symbol,\n    index,\n    id,\n    data,\n    xScale,\n    yScale,\n    active,\n    tooltip,\n    cursor,\n    size,\n    glow,\n    color,\n    animated,\n    onClick,\n    onMouseEnter,\n    onMouseLeave,\n    visible,\n    ...rest\n  } = mergeDefaultProps(SCATTER_POINT_DEFAULT_PROPS, props);\n\n  const rectRef = useRef<any | null>(null);\n  const [tooltipVisible, setTooltipVisible] = useState<boolean>(false);\n  const extras = useMemo(\n    () => constructFunctionProps(rest, data),\n    [rest, data]\n  );\n  const r = useMemo(\n    () => (typeof size === 'function' ? size(data!) : size),\n    [size, data]\n  );\n  const renderedSymbol = useMemo(\n    () => (symbol ? symbol(data!) : null),\n    [data, symbol]\n  );\n\n  const transitionProps = useMemo(\n    () =>\n      animated\n        ? {\n          ...DEFAULT_TRANSITION,\n          delay: index! * 0.005\n        }\n        : {\n          type: false,\n          delay: 0\n        },\n    [index, animated]\n  );\n\n  const enterProps = useMemo(() => {\n    let cy = yScale(data!.y1);\n    if (yScale.bandwidth) {\n      const width = yScale.bandwidth();\n      cy = cy + width / 2;\n    }\n\n    return {\n      x: xScale(data!.x),\n      y: cy\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [data, yScale]);\n\n  const exitProps = useMemo(() => {\n    const [yStartDomain] = yScale.domain();\n    return {\n      y: yScale(yStartDomain),\n      x: xScale(data!.x)\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [data, yScale]);\n\n  const fill = useMemo(\n    () =>\n      getColor({\n        colorScheme: color,\n        index,\n        point: data\n      }),\n    [data, color, index]\n  );\n\n  const key = `symbol-${id}-${identifier(`${data!.id}`)}`;\n  const ariaLabelData = useMemo(() => getAriaLabel(data), [data]);\n\n  const isVisible = visible ? visible?.(data, index) : active;\n\n  return (\n    <Fragment>\n      <g\n        ref={rectRef}\n        className={classNames({\n          [css.inactive]: !active,\n          [css.hidden]: !isVisible\n        })}\n        onMouseEnter={() => {\n          setTooltipVisible(true);\n          onMouseEnter(data!);\n        }}\n        onMouseLeave={() => {\n          setTooltipVisible(false);\n          onMouseLeave(data!);\n        }}\n        onClick={() => onClick(data!)}\n        tabIndex={0}\n        aria-label={ariaLabelData}\n        role=\"graphics-document\"\n      >\n        {symbol ? (\n          <motion.g\n            key={key}\n            {...extras}\n            initial={{\n              translateX: exitProps.x,\n              translateY: exitProps.y,\n              opacity: 0\n            }}\n            animate={{\n              translateX: enterProps.x,\n              translateY: enterProps.y,\n              opacity: 1\n            }}\n            exit={{\n              translateX: exitProps.x,\n              translateY: exitProps.y,\n              opacity: 0\n            }}\n            transition={transitionProps}\n          >\n            {renderedSymbol}\n          </motion.g>\n        ) : (\n          <motion.circle\n            key={key}\n            className={extras.className}\n            style={{\n              ...extras.style,\n              ...generateGlowStyles({ glow }),\n              cursor\n            }}\n            fill={fill}\n            initial={{\n              cx: exitProps.x,\n              cy: exitProps.y,\n              r,\n              opacity: 0\n            }}\n            animate={{\n              cx: enterProps.x,\n              cy: enterProps.y,\n              opacity: 1,\n              r\n            }}\n            exit={{\n              cx: exitProps.x,\n              cy: exitProps.y,\n              r,\n              opacity: 0\n            }}\n            transition={transitionProps}\n          />\n        )}\n      </g>\n      {tooltip && !tooltip.props.disabled && (\n        <CloneElement<ChartTooltipProps>\n          element={tooltip}\n          visible={tooltipVisible}\n          reference={rectRef}\n          value={data}\n        />\n      )}\n    </Fragment>\n  );\n};\n\nexport const SCATTER_POINT_DEFAULT_PROPS = {\n  active: true,\n  tooltip: <ChartTooltip />,\n  cursor: 'pointer',\n  size: 4,\n  color: schemes.cybertron[0],\n  animated: true,\n  onClick: () => undefined,\n  onMouseEnter: () => undefined,\n  onMouseLeave: () => undefined\n};\n","import React, { useCallback, Fragment, ReactElement, FC } from 'react';\nimport { ChartInternalShallowDataShape } from '@/common/data';\nimport { CloneElement } from 'reablocks';\nimport { ScatterPoint, ScatterPointProps } from './ScatterPoint';\nimport { identifier } from 'safe-identifier';\nimport { LinearValueMarker, LinearValueMarkerProps } from '@/common';\n\nexport interface ScatterSeriesProps {\n  /**\n   * Point that is rendered.\n   */\n  point: ReactElement<ScatterPointProps, typeof ScatterPoint>;\n\n  /**\n   * D3 scale for X Axis. Set internally by `ScatterPlot`.\n   */\n  xScale: any;\n\n  /**\n   * D3 scale for Y Axis. Set internally by `ScatterPlot`.\n   */\n  yScale: any;\n\n  /**\n   * Parsed data shape. Set internally by `ScatterPlot`.\n   */\n  data: ChartInternalShallowDataShape[];\n\n  /**\n   * Id set internally by `ScatterPlot`.\n   */\n  id: string;\n\n  /**\n   * Height of the chart. Set internally by `ScatterPlot`.\n   */\n  height: number;\n\n  /**\n   * Width of the chart. Set internally by `ScatterPlot`.\n   */\n  width: number;\n\n  /**\n   * Whether the chart has been zoomed or not. Set internally by `ScatterPlot`.\n   */\n  isZoomed: boolean;\n\n  /**\n   * Whether to animate the enter/update/exit.\n   */\n  animated: boolean;\n\n  /**\n   * Active element ids to highlight.\n   */\n  activeIds?: string[];\n\n  /**\n   * Value markers line for the chart.\n   */\n  valueMarkers:\n    | ReactElement<LinearValueMarkerProps, typeof LinearValueMarker>[]\n    | null;\n}\n\n// For bubble charts, often symbols exceed the area\n// and we want to add a little bit of padding to prevent clipping\nconst PADDING = 25;\nconst HALF_PADDING = PADDING / 2;\n\nexport const ScatterSeries: FC<Partial<ScatterSeriesProps>> = ({\n  data,\n  height,\n  width,\n  id,\n  isZoomed,\n  activeIds,\n  point = <ScatterPoint />,\n  valueMarkers,\n  xScale,\n  yScale,\n  ...rest\n}) => {\n  const renderPoint = useCallback(\n    (pointData: ChartInternalShallowDataShape, index: number) => {\n      let pointId;\n      if (pointData.id) {\n        pointId = pointData.id;\n      }\n\n      const key = identifier(`${pointId || index}`);\n      const active =\n        !(activeIds && activeIds.length) || activeIds.includes(pointId);\n\n      return (\n        <CloneElement<ScatterPointProps>\n          element={point}\n          key={key}\n          xScale={xScale}\n          yScale={yScale}\n          {...rest}\n          id={id}\n          data={pointData}\n          index={index}\n          active={active}\n        />\n      );\n    },\n    [activeIds, point, xScale, yScale, rest, id]\n  );\n\n  const renderValueMarkers = useCallback(\n    () => (\n      <>\n        {valueMarkers?.length &&\n          valueMarkers.map((marker) => {\n            const isVertical = marker?.props?.direction === 'vertical';\n            const size = isVertical ? height : width;\n            const value = isVertical\n              ? xScale(marker.props.value)\n              : yScale(marker.props.value);\n            return (\n              <CloneElement<LinearValueMarkerProps>\n                key={marker.key}\n                element={marker}\n                size={size}\n                value={value}\n              />\n            );\n          })}\n      </>\n    ),\n    [height, valueMarkers, width, xScale, yScale]\n  );\n\n  return (\n    <Fragment>\n      <defs>\n        <clipPath id={`${id}-path`}>\n          <rect\n            width={isZoomed ? width : width! + PADDING}\n            height={height! + PADDING}\n            x={isZoomed ? 0 : -HALF_PADDING}\n            y={-HALF_PADDING}\n          />\n        </clipPath>\n      </defs>\n      {renderValueMarkers()}\n      <g clipPath={`url(#${id}-path)`}>{data!.map(renderPoint)}</g>\n    </Fragment>\n  );\n};\n","import React, {\n  FC,\n  Fragment,\n  ReactElement,\n  useState,\n  useRef,\n  useCallback,\n  useMemo\n} from 'react';\nimport classNames from 'classnames';\nimport {\n  ChartShallowDataShape,\n  buildShallowChartData,\n  ChartDataTypes\n} from '@/common/data';\nimport {\n  isAxisVisible,\n  LinearAxisProps,\n  LinearXAxis,\n  LinearYAxis,\n  LinearAxis,\n  LINEAR_X_AXIS_DEFAULT_PROPS,\n  LINEAR_Y_AXIS_DEFAULT_PROPS\n} from '@/common/Axis';\nimport { getYScale, getXScale } from '@/common/scales';\nimport { ScatterSeries, ScatterSeriesProps } from './ScatterSeries';\nimport { GridlineSeries, GridlineSeriesProps } from '@/common/Gridline';\nimport {\n  ZoomPanChangeEvent,\n  ChartZoomPanProps,\n  ChartZoomPan\n} from '@/common/ZoomPan';\nimport { ChartBrushProps, ChartBrush } from '@/common/Brush';\nimport {\n  ChartProps,\n  ChartContainer,\n  ChartContainerChildProps\n} from '@/common/containers/ChartContainer';\nimport { CloneElement } from 'reablocks';\nimport css from './ScatterPlot.module.css';\n\nexport interface ScatterPlotProps extends ChartProps {\n  /**\n   * Data the chart will receive to render.\n   */\n  data: ChartShallowDataShape[];\n\n  /**\n   * The series component that renders the scatter components.\n   */\n  series: ReactElement<ScatterSeriesProps, typeof ScatterSeries>;\n\n  /**\n   * The linear axis component for the Y Axis of the chart.\n   */\n  yAxis: ReactElement<LinearAxisProps, typeof LinearAxis>;\n\n  /**\n   * The linear axis component for the X Axis of the chart.\n   */\n  xAxis: ReactElement<LinearAxisProps, typeof LinearAxis>;\n\n  /**\n   * The chart's background gridlines component.\n   */\n  gridlines: ReactElement<GridlineSeriesProps, typeof GridlineSeries> | null;\n\n  /**\n   * The chart's brush component.\n   */\n  brush: ReactElement<ChartBrushProps, typeof ChartBrush> | null;\n\n  /**\n   * The chart's zoom pan component.\n   */\n  zoomPan: ReactElement<ChartZoomPanProps, typeof ChartZoomPan> | null;\n\n  /**\n   * Any secondary axis components. Useful for multi-axis charts.\n   */\n  secondaryAxis?: ReactElement<LinearAxisProps, typeof LinearAxis>[];\n}\n\nexport const ScatterPlot: FC<Partial<ScatterPlotProps>> = ({\n  id,\n  width,\n  height,\n  margins,\n  className,\n  series = <ScatterSeries />,\n  xAxis = <LinearXAxis type=\"time\" />,\n  yAxis = <LinearYAxis type=\"value\" />,\n  data = [],\n  gridlines = <GridlineSeries />,\n  containerClassName,\n  brush = null,\n  zoomPan = null,\n  secondaryAxis\n}) => {\n  const xAxisProps = useMemo(\n    () => ({ ...LINEAR_X_AXIS_DEFAULT_PROPS, ...xAxis.props }),\n    [xAxis.props]\n  );\n  const yAxisProps = useMemo(\n    () => ({ ...LINEAR_Y_AXIS_DEFAULT_PROPS, ...yAxis.props }),\n    [yAxis.props]\n  );\n  const zoomControlled = useMemo(\n    () =>\n      // eslint-disable-next-line\n      !zoomPan?.props?.domain?.hasOwnProperty('domain'),\n    [zoomPan]\n  );\n\n  const timeout = useRef<any | null>(null);\n  const [preventAnimation, setPreventAnimation] = useState<boolean>(false);\n  const [zoomDomain, setZoomDomain] = useState<\n    [ChartDataTypes, ChartDataTypes] | null\n  >(null);\n  const [isZoomed, setIsZoomed] = useState<boolean>(false);\n  const aggregatedData = useMemo(() => buildShallowChartData(data), [data]);\n\n  const getScales = useCallback(\n    (chartHeight: number, chartWidth: number) => {\n      const yScale = getYScale({\n        roundDomains: yAxisProps.roundDomains,\n        type: yAxisProps.type,\n        height: chartHeight,\n        data: aggregatedData,\n        domain: yAxisProps.domain\n      });\n\n      const xScale = getXScale({\n        width: chartWidth,\n        type: xAxisProps.type,\n        roundDomains: xAxisProps.roundDomains,\n        data: aggregatedData,\n        domain: zoomDomain || xAxisProps.domain\n      });\n\n      return {\n        yScale,\n        xScale\n      };\n    },\n    [yAxisProps, xAxisProps, aggregatedData, zoomDomain]\n  );\n\n  const onZoomPan = useCallback(\n    (event: ZoomPanChangeEvent) => {\n      if (zoomControlled) {\n        setPreventAnimation(true);\n        setZoomDomain(event.domain);\n        setIsZoomed(event.isZoomed);\n\n        clearTimeout(timeout.current);\n        timeout.current = setTimeout(() => setPreventAnimation(true), 500);\n      }\n    },\n    [zoomControlled]\n  );\n\n  const renderChart = useCallback(\n    ({\n      chartHeight,\n      chartWidth,\n      id,\n      updateAxes,\n      chartSized\n    }: ChartContainerChildProps) => {\n      const { yScale, xScale } = getScales(chartHeight, chartWidth);\n      const animated =\n        preventAnimation === true ? false : series.props.animated;\n      const disableBrush = aggregatedData.length <= 1;\n\n      return (\n        <Fragment>\n          {chartSized && gridlines && (\n            <CloneElement<GridlineSeriesProps>\n              element={gridlines}\n              height={chartHeight}\n              width={chartWidth}\n              yScale={yScale}\n              xScale={xScale}\n              yAxis={yAxisProps}\n              xAxis={xAxisProps}\n            />\n          )}\n          <CloneElement<LinearAxisProps>\n            element={xAxis}\n            height={chartHeight}\n            width={chartWidth}\n            scale={xScale}\n            visibility={chartSized ? 'visible' : 'hidden'}\n            onDimensionsChange={(e) => updateAxes('horizontal', e)}\n          />\n          <CloneElement<LinearAxisProps>\n            element={yAxis}\n            height={chartHeight}\n            width={chartWidth}\n            scale={yScale}\n            visibility={chartSized ? 'visible' : 'hidden'}\n            onDimensionsChange={(e) => updateAxes('vertical', e)}\n          />\n          {secondaryAxis &&\n            secondaryAxis.map((axis, i) => (\n              <CloneElement<LinearAxisProps>\n                key={i}\n                element={axis}\n                height={chartHeight}\n                width={chartWidth}\n                visibility={chartSized ? 'visible' : 'hidden'}\n                onDimensionsChange={(e) => updateAxes('horizontal', e)}\n              />\n            ))}\n          {chartSized && (\n            <CloneElement<ChartBrushProps>\n              disabled={disableBrush}\n              element={brush}\n              height={chartHeight}\n              width={chartWidth}\n              scale={xScale}\n            >\n              <CloneElement<ChartZoomPanProps>\n                element={zoomPan}\n                onZoomPan={onZoomPan}\n                height={chartHeight}\n                width={chartWidth}\n                axisType={xAxis.props.type}\n                roundDomains={xAxis.props.roundDomains}\n                data={aggregatedData}\n                domain={zoomDomain}\n              >\n                <CloneElement<ScatterSeriesProps>\n                  element={series}\n                  id={`area-series-${id}`}\n                  data={aggregatedData}\n                  height={chartHeight}\n                  width={chartWidth}\n                  yScale={yScale}\n                  xScale={xScale}\n                  isZoomed={isZoomed}\n                  animated={animated}\n                />\n              </CloneElement>\n            </CloneElement>\n          )}\n        </Fragment>\n      );\n    },\n    [\n      getScales,\n      preventAnimation,\n      series,\n      gridlines,\n      yAxis,\n      xAxis,\n      xAxisProps,\n      yAxisProps,\n      secondaryAxis,\n      brush,\n      zoomPan,\n      onZoomPan,\n      aggregatedData,\n      zoomDomain,\n      isZoomed\n    ]\n  );\n\n  return (\n    <ChartContainer\n      id={id}\n      width={width}\n      height={height}\n      containerClassName={containerClassName}\n      margins={margins}\n      xAxisVisible={isAxisVisible(xAxisProps)}\n      yAxisVisible={isAxisVisible(yAxisProps)}\n      className={classNames(css.scatterPlot, className)}\n    >\n      {renderChart}\n    </ChartContainer>\n  );\n};\n","import React, { FC, ReactElement, useCallback } from 'react';\nimport { ChartInternalShallowDataShape } from '@/common/data';\nimport { CloneElement } from 'reablocks';\nimport { ScatterPoint, ScatterSeries, ScatterPointProps } from '@/ScatterPlot';\nimport css from './PointSeries.module.css';\nimport isEqual from 'react-fast-compare';\nimport { mergeDefaultProps } from '@/common';\n\nexport interface PointSeriesProps {\n  /**\n   * Determines if the points should be animated or not.\n   */\n  animated: boolean;\n\n  /**\n   * The color of the points.\n   */\n  color: any;\n\n  /**\n   * The active values for the points.\n   */\n  activeValues?: any;\n\n  /**\n   * The data for the points.\n   */\n  data: ChartInternalShallowDataShape[];\n\n  /**\n   * The y-scale for the points.\n   */\n  yScale: any;\n\n  /**\n   * The x-scale for the points.\n   */\n  xScale: any;\n\n  /**\n   * The unique identifier for the points.\n   */\n  id: string;\n\n  /**\n   * The height of the points.\n   */\n  height: number;\n\n  /**\n   * The width of the points.\n   */\n  width: number;\n\n  /**\n   * Determines when the points should be shown. Can be a boolean or one of the following strings: 'hover', 'first', 'last'.\n   */\n  show: boolean | 'hover' | 'first' | 'last';\n\n  /**\n   * The point element.\n   */\n  point: ReactElement<ScatterPointProps, typeof ScatterPoint>;\n\n  /**\n   * The index of the points.\n   */\n  index: number;\n}\n\nexport const PointSeries: FC<Partial<PointSeriesProps>> = (props) => {\n  const {\n    data,\n    xScale,\n    yScale,\n    animated,\n    point,\n    color,\n    height,\n    width,\n    id,\n    activeValues,\n    show\n  } = mergeDefaultProps(POINT_SERIES_DEFAULT_PROPS, props);\n\n  const getIsVisible = useCallback(\n    (point: ChartInternalShallowDataShape, index: number): boolean => {\n      const isActive =\n        activeValues && point && isEqual(activeValues.x, point.x);\n\n      if (show === 'hover') {\n        return isActive;\n      } else if (show === 'first') {\n        if (activeValues) {\n          return isActive;\n        } else {\n          return index === 0;\n        }\n      } else if (show === 'last') {\n        if (activeValues) {\n          return isActive;\n        } else {\n          return index === data.length - 1;\n        }\n      }\n\n      return Boolean(show);\n    },\n    [activeValues, data.length, show]\n  );\n\n  return (\n    <ScatterSeries\n      height={height}\n      width={width}\n      id={id}\n      animated={animated}\n      data={data}\n      xScale={xScale}\n      yScale={yScale}\n      point={\n        <CloneElement<ScatterPointProps>\n          element={point}\n          color={color}\n          className={css.point}\n          size={4}\n          tooltip={null}\n          visible={getIsVisible}\n        />\n      }\n    />\n  );\n};\n\nexport const POINT_SERIES_DEFAULT_PROPS: Partial<PointSeriesProps> = {\n  show: 'hover',\n  point: <ScatterPoint />\n};\n","import React, { Fragment, useMemo, ReactElement, FC, useCallback } from 'react';\nimport { area } from 'd3-shape';\nimport { Gradient, GradientProps } from '@/common/Gradient';\nimport { Mask, MaskProps } from '@/common/Mask';\nimport { interpolate, InterpolationTypes } from '@/common/utils/interpolation';\nimport {\n  ChartInternalDataShape,\n  ChartInternalShallowDataShape\n} from '@/common/data';\nimport { CloneElement } from 'reablocks';\nimport {\n  constructFunctionProps,\n  PropFunctionTypes\n} from '@/common/utils/functions';\nimport { MotionPath, DEFAULT_TRANSITION } from '@/common/Motion';\nimport { generateGlowStyles } from '@/common/Glow/utils';\nimport { Glow, mergeDefaultProps, roundDecimals } from '@/common';\n\nexport interface AreaProps extends PropFunctionTypes {\n  /**\n   * Id set internally by `AreaSeries`.\n   */\n  id: string;\n\n  /**\n   * Parsed data shape. Set internally by `AreaChart`.\n   */\n  data: ChartInternalDataShape[];\n\n  /**\n   * Interpolation for the area. Set internally by `AreaSeries`.\n   */\n  interpolation: InterpolationTypes;\n\n  /**\n   * Color for the area. Set internally by `AreaSeries`.\n   */\n  color: any;\n\n  /**\n   * D3 scale for X Axis. Set internally by `AreaChart`.\n   */\n  xScale: any;\n\n  /**\n   * D3 scale for Y Axis. Set internally by `AreaChart`.\n   */\n  yScale: any;\n\n  /**\n   * Index of the area in the series. Set internally by `AreaSeries`.\n   */\n  index: number;\n\n  /**\n   * Total number of areas in the series. Set internally by `AreaSeries`.\n   */\n  total: number;\n\n  /**\n   * Whether to animate the enter/update/exit. Set internally by `AreaSeries`.\n   */\n  animated: boolean;\n\n  /**\n   * Mask to apply to the area.\n   */\n  mask: ReactElement<MaskProps, typeof Mask> | null;\n\n  /**\n   * Gradient to apply to the area.\n   */\n  gradient: ReactElement<GradientProps, typeof Gradient> | null;\n\n  /**\n   * Glow to apply to the area.\n   */\n  glow?: Glow;\n\n  /**\n   * Pointer events to manage the area events.\n   * @default 'none'\n   */\n  pointerEvents: string;\n}\n\nexport const Area: FC<Partial<AreaProps>> = (props) => {\n  const {\n    id,\n    gradient,\n    glow,\n    mask,\n    data,\n    color,\n    index,\n    total,\n    xScale,\n    yScale,\n    animated,\n    interpolation,\n    pointerEvents = 'none',\n    ...rest\n  } = mergeDefaultProps(AREA_DEFAULT_PROPS, props);\n\n  const stroke = color(data, index);\n\n  const coords = useMemo(() => {\n    return data.map((item: any) => ({\n      x: xScale(item.x),\n      x1: xScale(item.x) - xScale(item.x1),\n      y: yScale(item.y),\n      y0: yScale(item.y0),\n      y1: yScale(item.y1)\n    })) as ChartInternalShallowDataShape[];\n  }, [data, xScale, yScale]);\n\n  const getAreaPath = useCallback(\n    (d: ChartInternalShallowDataShape[]) => {\n      // If the input data is a single value and this is the only\n      // area in a series, fill the available space with an area:\n      if (d.length === 1 && total === 1) {\n        const [point] = d;\n        // Assume the single data point's `x` value\n        // is the middle of the graph:\n        const midpoint = roundDecimals(point.x as number);\n        d = [{ ...point }, { ...point }];\n        const [start, end] = d;\n        start.x = 0;\n        end.x = midpoint * 2;\n      }\n\n      const fn = area()\n        .x((d: any) => roundDecimals(d.x))\n        .y0((d: any) => roundDecimals(d.y0))\n        .y1((d: any) => roundDecimals(d.y1))\n        .curve(interpolate(interpolation as InterpolationTypes));\n\n      return fn(d as any);\n    },\n    [interpolation, total]\n  );\n\n  const enter = useMemo(() => {\n    const areaPath = getAreaPath(coords);\n\n    return {\n      d: areaPath === null ? undefined : areaPath\n    };\n  }, [coords, getAreaPath]);\n\n  const exit = useMemo(() => {\n    const maxY = Math.max(...yScale.range());\n    const coords = data.map((item: any) => ({\n      x: xScale(item.x),\n      x1: 0,\n      y: 0,\n      y1: maxY,\n      y0: maxY\n    })) as ChartInternalShallowDataShape[];\n\n    const areaPath = getAreaPath(coords);\n\n    return {\n      d: areaPath === null ? undefined : areaPath\n    };\n  }, [data, getAreaPath, xScale, yScale]);\n\n  const fill = useMemo(() => {\n    if (mask) {\n      return `url(#mask-pattern-${id})`;\n    } else {\n      if (gradient) {\n        return `url(#gradient-${id})`;\n      }\n\n      return '';\n    }\n  }, [gradient, id, mask]);\n\n  const transition = useMemo(() => {\n    if (animated) {\n      return {\n        ...DEFAULT_TRANSITION,\n        delay: index * 0.05\n      };\n    } else {\n      return {\n        type: false,\n        delay: 0\n      };\n    }\n  }, [animated, index]);\n\n  const renderArea = useCallback(() => {\n    const maskPath = mask ? `url(#mask-${id})` : '';\n    const extras = constructFunctionProps(rest, data);\n\n    return (\n      <MotionPath\n        {...extras}\n        pointerEvents={pointerEvents}\n        mask={maskPath}\n        fill={fill}\n        transition={transition}\n        custom={{\n          enter,\n          exit\n        }}\n        style={{\n          ...extras.style,\n          ...generateGlowStyles({ glow, colorSchemeColor: stroke })\n        }}\n      />\n    );\n  }, [\n    data,\n    enter,\n    exit,\n    fill,\n    glow,\n    id,\n    mask,\n    rest,\n    stroke,\n    transition,\n    pointerEvents\n  ]);\n\n  return (\n    <Fragment>\n      {renderArea()}\n      {mask && (\n        <Fragment>\n          <Mask id={`mask-${id}`} fill={`url(#gradient-${id})`} />\n          <CloneElement<MaskProps>\n            element={mask}\n            id={`mask-pattern-${id}`}\n            fill={stroke}\n          />\n        </Fragment>\n      )}\n      {gradient && (\n        <CloneElement<GradientProps>\n          element={gradient}\n          id={`gradient-${id}`}\n          color={stroke}\n        />\n      )}\n    </Fragment>\n  );\n};\n\nexport const AREA_DEFAULT_PROPS: Partial<AreaProps> = {\n  gradient: <Gradient />,\n  interpolation: 'linear'\n};\n","import React, {\n  FC,\n  Fragment,\n  ReactElement,\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState\n} from 'react';\nimport { line } from 'd3-shape';\nimport { interpolate, InterpolationTypes } from '@/common/utils/interpolation';\nimport {\n  ChartInternalDataShape,\n  ChartInternalShallowDataShape\n} from '@/common/data';\nimport { calculateShowStroke } from '@/common/utils/stroke';\nimport {\n  constructFunctionProps,\n  PropFunctionTypes\n} from '@/common/utils/functions';\nimport { MotionPath, DEFAULT_TRANSITION } from '@/common/Motion';\nimport { Glow, Gradient, GradientProps, roundDecimals } from '@/common';\nimport { generateGlowStyles } from '@/common/Glow/utils';\nimport { CloneElement } from 'reablocks';\n\nexport interface LineProps extends PropFunctionTypes {\n  /**\n   * Id set internally by `AreaChart`.\n   */\n  id: string;\n\n  /**\n   * Parsed data shape. Set internally by `AreaChart`.\n   */\n  data: ChartInternalDataShape[];\n\n  /**\n   * Width of the chart. Set internally by `AreaChart`.\n   */\n  width: number;\n\n  /**\n   * Interpolation for the area. Set internally by `AreaSeries`.\n   */\n  interpolation: InterpolationTypes;\n\n  /**\n   * Color for the area. Set internally by `AreaSeries`.\n   */\n  color: any;\n\n  /**\n   * D3 scale for X Axis. Set internally by `AreaChart`.\n   */\n  xScale: any;\n\n  /**\n   * D3 scale for Y Axis. Set internally by `AreaChart`.\n   */\n  yScale: any;\n\n  /**\n   * Index of the area in the series. Set internally by `AreaSeries`.\n   */\n  index: number;\n\n  /**\n   * Whether to animate the enter/update/exit. Set internally by `AreaSeries`.\n   */\n  animated: boolean;\n\n  /**\n   * Stroke width of the line.\n   */\n  strokeWidth: number;\n\n  /**\n   * Show the stroke if there is no value.\n   */\n  showZeroStroke: boolean;\n\n  /**\n   * Internal property to identify if there is a area or not.\n   */\n  hasArea: boolean;\n\n  /**\n   * Gradient to apply to the line.\n   */\n  gradient: ReactElement<GradientProps, typeof Gradient> | null;\n\n  /**\n   * Glow to apply to the line.\n   */\n  glow?: Glow;\n}\n\nexport const Line: FC<Partial<LineProps>> = ({\n  id,\n  width,\n  data,\n  color,\n  index,\n  strokeWidth = 3,\n  hasArea,\n  animated,\n  yScale,\n  xScale,\n  showZeroStroke = true,\n  interpolation,\n  gradient,\n  glow,\n  ...rest\n}) => {\n  const [pathLength, setPathLength] = useState<number | null>(null);\n  const ghostPathRef = useRef<SVGPathElement | null>(null);\n\n  useEffect(() => {\n    if (ghostPathRef.current) {\n      setPathLength(roundDecimals(ghostPathRef.current.getTotalLength()));\n    }\n  }, [data, xScale, yScale, width]);\n\n  const getLinePath = useCallback(\n    (point: ChartInternalShallowDataShape[]) => {\n      const fn = line()\n        .x((d: any) => roundDecimals(d.x))\n        .y((d: any) => roundDecimals(d.y1))\n        .defined((d: any) => showZeroStroke || calculateShowStroke(d, point))\n        .curve(interpolate(interpolation));\n\n      return fn(point as any);\n    },\n    [interpolation, showZeroStroke]\n  );\n\n  const transition = useMemo(() => {\n    if (animated) {\n      return {\n        ...DEFAULT_TRANSITION,\n        delay: hasArea ? 0 : index * 0.05\n      };\n    } else {\n      return {\n        type: false,\n        delay: 0\n      };\n    }\n  }, [animated, hasArea, index]);\n\n  const coords = useMemo(() => {\n    return data.map((item: any) => ({\n      x: xScale(item.x),\n      x1: xScale(item.x) - xScale(item.x1),\n      y: yScale(item.y),\n      y0: yScale(item.y0),\n      y1: yScale(item.y1)\n    })) as ChartInternalShallowDataShape[];\n  }, [data, xScale, yScale]);\n\n  const enter = useMemo(() => {\n    const linePath = getLinePath(coords);\n\n    let strokeDasharray = '';\n    if (!hasArea && pathLength !== null) {\n      strokeDasharray = `${pathLength} ${pathLength}`;\n    }\n\n    return {\n      d: linePath === null ? undefined : linePath,\n      strokeDashoffset: 0,\n      strokeDasharray: strokeDasharray\n    };\n  }, [coords, getLinePath, hasArea, pathLength]);\n\n  const exit = useMemo(() => {\n    let newCoords = coords;\n    if (hasArea) {\n      const maxY = Math.max(...yScale.range());\n      newCoords = data.map((item: any) => ({\n        x: xScale(item.x),\n        x1: 0,\n        y: maxY,\n        y1: maxY,\n        y0: maxY\n      })) as ChartInternalShallowDataShape[];\n    }\n\n    const linePath = getLinePath(newCoords);\n\n    let strokeDasharray = '';\n    let strokeDashoffset = 0;\n    if (!hasArea && pathLength !== null) {\n      strokeDasharray = `${pathLength} ${pathLength}`;\n      strokeDashoffset = pathLength;\n    }\n\n    return {\n      d: linePath === null ? undefined : linePath,\n      strokeDasharray,\n      strokeDashoffset\n    };\n  }, [coords, data, getLinePath, hasArea, pathLength, xScale, yScale]);\n\n  const stroke = color(data, index);\n  const extras = constructFunctionProps(rest, data);\n  const showLine = hasArea || pathLength !== null;\n\n  const strokeFill = useMemo(() => {\n    if (gradient) {\n      return `url(#gradient-${id})`;\n    }\n    return stroke;\n  }, [gradient, id]);\n\n  // framer-motion freaks out when these are added for area\n  if (hasArea) {\n    delete enter.strokeDashoffset;\n    delete exit.strokeDashoffset;\n  }\n\n  return (\n    <Fragment>\n      {showLine && (\n        <MotionPath\n          {...extras}\n          pointerEvents=\"none\"\n          stroke={strokeFill}\n          strokeWidth={strokeWidth}\n          fill=\"none\"\n          transition={transition}\n          custom={{\n            enter,\n            exit\n          }}\n          style={{\n            ...extras.style,\n            ...generateGlowStyles({ glow, colorSchemeColor: strokeFill })\n          }}\n        />\n      )}\n      {!hasArea && (\n        <path opacity=\"0\" d={enter.d} ref={ghostPathRef} pointerEvents=\"none\" />\n      )}\n      {gradient && (\n        <CloneElement<GradientProps>\n          element={gradient}\n          id={`gradient-${id}`}\n          color={stroke}\n        />\n      )}\n    </Fragment>\n  );\n};\n","import React, {\n  Fragment,\n  ReactElement,\n  FC,\n  useCallback,\n  useState,\n  useMemo\n} from 'react';\nimport {\n  POINT_SERIES_DEFAULT_PROPS,\n  PointSeries,\n  PointSeriesProps\n} from './PointSeries';\nimport { Area, AreaProps } from './Area';\nimport { MarkLine, MarkLineProps } from '@/common/MarkLine';\nimport {\n  ChartInternalDataShape,\n  ChartInternalNestedDataShape,\n  ChartInternalShallowDataShape\n} from '@/common/data';\nimport { CloneElement } from 'reablocks';\nimport {\n  TooltipArea,\n  TooltipAreaProps,\n  TooltipAreaEvent\n} from '@/common/Tooltip';\nimport { Line, LineProps } from './Line';\nimport { InterpolationTypes } from '@/common/utils/interpolation';\nimport { getColor, ColorSchemeType } from '@/common/color';\nimport { identifier } from 'safe-identifier';\nimport {\n  LinearValueMarker,\n  LinearValueMarkerProps,\n  mergeDefaultProps\n} from '@/common';\n\nexport type AreaChartTypes =\n  | 'standard'\n  | 'grouped'\n  | 'stacked'\n  | 'stackedNormalized';\n\nexport interface AreaSeriesProps {\n  /**\n   * Id set internally by `AreaChart`.\n   */\n  id: string;\n\n  /**\n   * D3 scale for X Axis. Set internally by `AreaChart`.\n   */\n  xScale: any;\n\n  /**\n   * D3 scale for Y Axis. Set internally by `AreaChart`.\n   */\n  yScale: any;\n\n  /**\n   * Parsed data shape. Set internally by `AreaChart`.\n   */\n  data: ChartInternalDataShape[];\n\n  /**\n   * Height of the chart. Set internally by `AreaChart`.\n   */\n  height: number;\n\n  /**\n   * Width of the chart. Set internally by `AreaChart`.\n   */\n  width: number;\n\n  /**\n   * Whether to animate the enter/update/exit.\n   */\n  animated: boolean;\n\n  /**\n   * Type of area chart to render.\n   */\n  type: AreaChartTypes;\n\n  /**\n   * Interpolation type for the area/line.\n   */\n  interpolation: InterpolationTypes;\n\n  /**\n   * Tooltip for the chart area.\n   */\n  tooltip: ReactElement<TooltipAreaProps, typeof TooltipArea>;\n\n  /**\n   * Markline for the chart.\n   */\n  markLine: ReactElement<MarkLineProps, typeof MarkLine> | null;\n\n  /**\n   * Symbols used to show points.\n   */\n  symbols: ReactElement<PointSeriesProps, typeof PointSeries> | null;\n\n  /**\n   * Line that is rendered.\n   */\n  line: ReactElement<LineProps, typeof Line> | null;\n\n  /**\n   * Area that is rendered.\n   */\n  area: ReactElement<AreaProps, typeof Area> | null;\n\n  /**\n   * Color scheme for the series.\n   */\n  colorScheme: ColorSchemeType;\n\n  /**\n   * Whether the chart has been zoomed or not. Set internally by `AreaChart`.\n   */\n  isZoomed: boolean;\n\n  /**\n   * Value markers line for the chart.\n   */\n  valueMarkers:\n    | ReactElement<LinearValueMarkerProps, typeof LinearValueMarker>[]\n    | null;\n}\n\n// For area charts, often symbols exceed the area\n// and we want to add a little bit of padding to prevent clipping\nconst PADDING = 25;\nconst HALF_PADDING = PADDING / 2;\n\nexport const AreaSeries: FC<Partial<AreaSeriesProps>> = (props) => {\n  const {\n    data,\n    height,\n    id,\n    width,\n    isZoomed,\n    tooltip,\n    xScale,\n    yScale,\n    type,\n    markLine,\n    symbols,\n    animated,\n    area,\n    interpolation,\n    line,\n    colorScheme,\n    valueMarkers\n  } = mergeDefaultProps(AREA_SERIES_DEFAULT_PROPS, props);\n\n  const symbolsProps = useMemo(\n    () => ({\n      ...POINT_SERIES_DEFAULT_PROPS,\n      ...(symbols?.props ?? {})\n    }),\n    [symbols]\n  );\n\n  const [activeValues, setActiveValues] = useState<any | null>(null);\n  const [activePoint, setActivePoint] = useState<any | null>(null);\n\n  const onValueEnter = useCallback((event: TooltipAreaEvent) => {\n    setActivePoint(event.pointX);\n    setActiveValues(event.value);\n  }, []);\n\n  const onValueLeave = useCallback(() => {\n    setActivePoint(undefined);\n    setActiveValues(undefined);\n  }, []);\n\n  const isMulti =\n    type === 'grouped' || type === 'stacked' || type === 'stackedNormalized';\n\n  const getPointColor = useCallback(\n    (point, index: number) => {\n      const key = Array.isArray(point) ? point?.[0]?.key : point?.key;\n\n      return getColor({\n        data,\n        colorScheme,\n        active: activeValues,\n        point,\n        index,\n        key\n      });\n    },\n    [activeValues, colorScheme, data]\n  );\n\n  const renderArea = useCallback(\n    (data: ChartInternalShallowDataShape[], index = 0, total = 1) => (\n      <Fragment>\n        {line && (\n          <CloneElement<LineProps>\n            element={line}\n            xScale={xScale}\n            yScale={yScale}\n            data={data}\n            width={width}\n            index={index}\n            hasArea={area !== null}\n            animated={animated}\n            interpolation={interpolation as InterpolationTypes}\n            color={getPointColor}\n          />\n        )}\n        {area && (\n          <CloneElement<AreaProps>\n            element={area}\n            id={`${id}-area-${index}`}\n            xScale={xScale}\n            yScale={yScale}\n            data={data}\n            index={index}\n            total={total}\n            animated={animated}\n            interpolation={interpolation as InterpolationTypes}\n            color={getPointColor}\n          />\n        )}\n      </Fragment>\n    ),\n    [\n      animated,\n      area,\n      getPointColor,\n      id,\n      interpolation,\n      line,\n      width,\n      xScale,\n      yScale\n    ]\n  );\n\n  const renderSymbols = useCallback(\n    (data: ChartInternalShallowDataShape[], index = 0) => {\n      const visible = symbols !== null;\n      const activeSymbols =\n        (symbols && symbolsProps.activeValues) || activeValues;\n\n      // Animations are only valid for Area\n      const isAnimated = area !== undefined && animated && !activeSymbols;\n\n      return (\n        <Fragment>\n          {visible && (\n            <CloneElement<PointSeriesProps>\n              element={symbols}\n              key={`point-series-${id}`}\n              id={id}\n              height={height}\n              width={width}\n              activeValues={activeSymbols}\n              xScale={xScale}\n              yScale={yScale}\n              index={index}\n              data={data}\n              animated={isAnimated}\n              color={() => getPointColor(data, index)}\n            />\n          )}\n        </Fragment>\n      );\n    },\n    [\n      activeValues,\n      animated,\n      area,\n      getPointColor,\n      height,\n      id,\n      symbols,\n      width,\n      xScale,\n      yScale\n    ]\n  );\n\n  const renderMarkLine = useCallback(\n    () => (\n      <>\n        {activeValues && markLine && (\n          <CloneElement<MarkLineProps>\n            element={markLine}\n            height={height}\n            pointX={activePoint}\n          />\n        )}\n      </>\n    ),\n    [activePoint, activeValues, height, markLine]\n  );\n\n  const renderSingleSeries = useCallback(\n    (data: ChartInternalShallowDataShape[]) => (\n      <Fragment>\n        {renderArea(data)}\n        {renderMarkLine()}\n        {renderSymbols(data)}\n      </Fragment>\n    ),\n    [renderArea, renderMarkLine, renderSymbols]\n  );\n\n  const renderMultiSeries = useCallback(\n    (data: ChartInternalNestedDataShape[]) => (\n      <Fragment>\n        {data\n          .map((point, index) => (\n            <Fragment key={identifier(`${point.key}`)}>\n              {renderArea(point.data, index, data.length)}\n            </Fragment>\n          ))\n          .reverse()}\n        {renderMarkLine()}\n        {data\n          .map((point, index) => (\n            <Fragment key={identifier(`${point.key}`)}>\n              {renderSymbols(point.data, index)}\n            </Fragment>\n          ))\n          .reverse()}\n      </Fragment>\n    ),\n    [renderArea, renderMarkLine, renderSymbols]\n  );\n\n  const renderValueMarkers = useCallback(\n    () => (\n      <>\n        {valueMarkers?.length &&\n          valueMarkers.map((marker) => {\n            const isVertical = marker?.props?.direction === 'vertical';\n            const size = isVertical ? height : width;\n            const value = isVertical\n              ? xScale(marker.props.value)\n              : yScale(marker.props.value);\n            return (\n              <CloneElement<LinearValueMarkerProps>\n                key={marker.key}\n                element={marker}\n                size={size}\n                value={value}\n              />\n            );\n          })}\n      </>\n    ),\n    [valueMarkers, width, yScale, xScale, height]\n  );\n\n  return (\n    <Fragment>\n      <defs>\n        <clipPath id={`${id}-path`}>\n          <rect\n            width={isZoomed ? width : width + PADDING}\n            height={height + PADDING}\n            x={isZoomed ? 0 : -HALF_PADDING}\n            y={-HALF_PADDING}\n          />\n        </clipPath>\n      </defs>\n      <CloneElement<TooltipAreaProps>\n        element={tooltip}\n        xScale={xScale}\n        yScale={yScale}\n        data={data}\n        height={height}\n        width={width}\n        color={getPointColor}\n        onValueEnter={onValueEnter}\n        onValueLeave={onValueLeave}\n      >\n        <g clipPath={`url(#${id}-path)`}>\n          {isMulti && renderMultiSeries(data as ChartInternalNestedDataShape[])}\n          {!isMulti &&\n            renderSingleSeries(data as ChartInternalShallowDataShape[])}\n          {renderValueMarkers()}\n        </g>\n      </CloneElement>\n    </Fragment>\n  );\n};\n\nexport const AREA_SERIES_DEFAULT_PROPS: Partial<AreaSeriesProps> = {\n  colorScheme: 'cybertron',\n  animated: true,\n  interpolation: 'linear',\n  type: 'standard',\n  line: <Line />,\n  area: <Area />,\n  markLine: <MarkLine />,\n  tooltip: <TooltipArea />,\n  symbols: <PointSeries />\n};\n","import React, { FC, useMemo } from 'react';\nimport {\n  AreaSeriesProps,\n  AreaSeries,\n  AREA_SERIES_DEFAULT_PROPS\n} from './AreaSeries';\nimport { formatValue } from '@/common/utils/formatting';\nimport { TooltipTemplate, TooltipArea, ChartTooltip } from '@/common/Tooltip';\nimport { CloneElement } from 'reablocks';\nimport { POINT_SERIES_DEFAULT_PROPS, PointSeriesProps } from './PointSeries';\nimport { ScatterPointProps } from '@/ScatterPlot';\nimport { InterpolationTypes } from '@/common';\n\nexport const StackedNormalizedAreaSeries: FC<Partial<AreaSeriesProps>> = (\n  props\n) => {\n  const { interpolation, symbols, ...rest } = {\n    ...AREA_SERIES_DEFAULT_PROPS,\n    ...props\n  };\n\n  const symbolsProps = useMemo(\n    () => ({\n      ...POINT_SERIES_DEFAULT_PROPS,\n      ...symbols?.props\n    }),\n    [symbols]\n  );\n\n  return (\n    <AreaSeries\n      {...rest}\n      interpolation={interpolation as InterpolationTypes}\n      type=\"stackedNormalized\"\n      symbols={\n        symbols && (\n          <CloneElement<PointSeriesProps>\n            element={symbols}\n            {...symbols.props}\n            point={\n              <CloneElement<ScatterPointProps>\n                element={symbolsProps.point}\n                {...symbolsProps.point.props}\n                tooltip={null}\n              />\n            }\n          />\n        )\n      }\n      tooltip={\n        <TooltipArea\n          tooltip={\n            <ChartTooltip\n              content={(series, color) => {\n                if (!series) {\n                  return null;\n                }\n\n                const value = {\n                  ...series,\n                  data: series.data.map((d) => ({\n                    ...d,\n                    value: `${formatValue(d.value)} ∙ ${formatValue(\n                      Math.floor((d.y1 - d.y0) * 100)\n                    )}%`\n                  }))\n                };\n\n                return <TooltipTemplate color={color} value={value} />;\n              }}\n            />\n          }\n        />\n      }\n    />\n  );\n};\n","import React, { FC, useMemo } from 'react';\nimport {\n  AreaSeriesProps,\n  AreaSeries,\n  AREA_SERIES_DEFAULT_PROPS\n} from './AreaSeries';\nimport { CloneElement } from 'reablocks';\nimport { POINT_SERIES_DEFAULT_PROPS, PointSeriesProps } from './PointSeries';\nimport { SCATTER_POINT_DEFAULT_PROPS, ScatterPointProps } from '@/ScatterPlot';\nimport { InterpolationTypes } from '@/common';\n\nexport const StackedAreaSeries: FC<Partial<AreaSeriesProps>> = (props) => {\n  const { symbols, interpolation, ...rest } = {\n    ...AREA_SERIES_DEFAULT_PROPS,\n    ...props\n  };\n\n  const symbolsProps = useMemo(\n    () => ({\n      ...POINT_SERIES_DEFAULT_PROPS,\n      ...symbols?.props\n    }),\n    [symbols]\n  );\n\n  const pointProps = useMemo(\n    () => ({\n      ...SCATTER_POINT_DEFAULT_PROPS,\n      ...symbolsProps.point?.props\n    }),\n    [symbolsProps]\n  );\n\n  return (\n    <AreaSeries\n      {...rest}\n      interpolation={interpolation as InterpolationTypes}\n      type=\"stacked\"\n      symbols={\n        symbols && (\n          <CloneElement<PointSeriesProps>\n            element={symbols}\n            {...symbolsProps}\n            point={\n              <CloneElement<ScatterPointProps>\n                element={symbolsProps.point}\n                {...pointProps}\n                tooltip={null}\n              />\n            }\n          />\n        )\n      }\n    />\n  );\n};\n","import React, {\n  Fragment,\n  useEffect,\n  ReactElement,\n  FC,\n  useCallback,\n  useMemo,\n  useState,\n  useRef\n} from 'react';\nimport classNames from 'classnames';\nimport {\n  AREA_SERIES_DEFAULT_PROPS,\n  AreaSeries,\n  AreaSeriesProps\n} from './AreaSeries';\nimport {\n  isAxisVisible,\n  LinearAxisProps,\n  LinearXAxis,\n  LinearYAxis,\n  LinearAxis,\n  LINEAR_Y_AXIS_DEFAULT_PROPS,\n  LINEAR_X_AXIS_DEFAULT_PROPS\n} from '@/common/Axis/LinearAxis';\nimport { getXScale, getYScale } from '@/common/scales';\nimport { GridlineSeries, GridlineSeriesProps } from '@/common/Gridline';\nimport {\n  ChartDataShape,\n  ChartNestedDataShape,\n  buildStackData,\n  buildShallowChartData,\n  ChartShallowDataShape,\n  buildNestedChartData\n} from '@/common/data';\nimport css from './AreaChart.module.css';\nimport { ChartBrushProps, ChartBrush } from '@/common/Brush';\nimport {\n  ZoomPanChangeEvent,\n  ChartZoomPanProps,\n  ChartZoomPan\n} from '@/common/ZoomPan';\nimport {\n  ChartContainerChildProps,\n  ChartContainer,\n  ChartProps\n} from '@/common/containers/ChartContainer';\nimport { CloneElement } from 'reablocks';\nimport { mergeDefaultProps } from '@/common';\n\nexport interface AreaChartProps extends ChartProps {\n  /**\n   * Data the chart will receive to render.\n   */\n  data: ChartDataShape[];\n\n  /**\n   * The series component that renders the area/line/circles components.\n   */\n  series: ReactElement<AreaSeriesProps, typeof AreaSeries>;\n\n  /**\n   * The linear axis component for the Y Axis of the chart.\n   */\n  yAxis: ReactElement<LinearAxisProps, typeof LinearAxis>;\n\n  /**\n   * The linear axis component for the X Axis of the chart.\n   */\n  xAxis: ReactElement<LinearAxisProps, typeof LinearAxis>;\n\n  /**\n   * The chart's background gridlines component.\n   */\n  gridlines: ReactElement<GridlineSeriesProps, typeof GridlineSeries> | null;\n\n  /**\n   * The chart's brush component.\n   */\n  brush: ReactElement<ChartBrushProps, typeof ChartBrush> | null;\n\n  /**\n   * The chart's zoom pan component.\n   */\n  zoomPan: ReactElement<ChartZoomPanProps, typeof ChartZoomPan> | null;\n\n  /**\n   * Any secondary axis components. Useful for multi-axis charts.\n   */\n  secondaryAxis?: ReactElement<LinearAxisProps, typeof LinearAxis>[];\n}\n\nexport const AreaChart: FC<Partial<AreaChartProps>> = (props) => {\n  const {\n    xAxis,\n    yAxis,\n    id,\n    data,\n    width,\n    height,\n    margins,\n    className,\n    containerClassName,\n    series,\n    gridlines,\n    brush,\n    zoomPan,\n    secondaryAxis\n  } = mergeDefaultProps(AREA_CHART_DEFAULT_PROPS, props);\n\n  const zoom: any = zoomPan ? zoomPan.props : {};\n  const [zoomDomain, setZoomDomain] = useState<any>(zoom.domain);\n  const [preventAnimation, setPreventAnimation] = useState<boolean>(false);\n  const [isZoomed, setIsZoomed] = useState<boolean>(!!zoom.domain);\n  // eslint-disable-next-line\n  const [zoomControlled] = useState<boolean>(!zoom.hasOwnProperty('domain'));\n  const xAxisProps = useMemo(\n    () => ({ ...LINEAR_X_AXIS_DEFAULT_PROPS, ...xAxis.props }),\n    [xAxis.props]\n  );\n  const yAxisProps = useMemo(\n    () => ({ ...LINEAR_Y_AXIS_DEFAULT_PROPS, ...yAxis.props }),\n    [yAxis.props]\n  );\n  const seriesProps = useMemo(\n    () => ({ ...AREA_SERIES_DEFAULT_PROPS, ...series.props }),\n    [series.props]\n  );\n\n  const timeoutRef = useRef<any | null>(null);\n\n  const seriesType = seriesProps.type;\n  const isMultiSeries =\n    seriesType === 'stacked' ||\n    seriesType === 'stackedNormalized' ||\n    seriesType === 'grouped';\n\n  const animated = preventAnimation === true ? false : seriesProps.animated;\n\n  useEffect(() => {\n    if (zoomPan) {\n      const zoom = zoomPan.props;\n      if (!zoomControlled && zoom.domain !== zoomDomain) {\n        setZoomDomain(zoom.domain);\n        setIsZoomed(!!zoom.domain);\n      }\n    }\n  }, [zoomControlled, zoomDomain, zoomPan]);\n\n  const aggregatedData = useMemo(() => {\n    if (seriesType === 'stacked' || seriesType === 'stackedNormalized') {\n      return buildStackData(\n        data as ChartNestedDataShape[],\n        seriesType === 'stackedNormalized'\n      );\n    } else if (seriesType === 'grouped') {\n      return buildNestedChartData(data as ChartNestedDataShape[], true);\n    } else {\n      return buildShallowChartData(data as ChartShallowDataShape[]);\n    }\n  }, [data, seriesType]);\n\n  const getScales = useCallback(\n    (chartWidth: number, chartHeight: number) => {\n      const xScale = getXScale({\n        width: chartWidth,\n        type: xAxisProps.type,\n        roundDomains: xAxisProps.roundDomains,\n        data: aggregatedData,\n        domain: zoomDomain || xAxisProps.domain,\n        isMultiSeries\n      });\n\n      const yScale = getYScale({\n        roundDomains: yAxisProps.roundDomains,\n        type: yAxisProps.type,\n        height: chartHeight,\n        data: aggregatedData,\n        domain: yAxisProps.domain,\n        isMultiSeries\n      });\n\n      return { xScale, yScale };\n    },\n    [\n      aggregatedData,\n      isMultiSeries,\n      xAxisProps.domain,\n      xAxisProps.roundDomains,\n      xAxisProps.type,\n      yAxisProps.domain,\n      yAxisProps.roundDomains,\n      yAxisProps.type,\n      zoomDomain\n    ]\n  );\n\n  const onZoomPan = useCallback(\n    (event: ZoomPanChangeEvent) => {\n      if (zoomControlled) {\n        setZoomDomain(event.domain);\n        setIsZoomed(event.isZoomed);\n        setPreventAnimation(true);\n\n        clearTimeout(timeoutRef.current);\n        timeoutRef.current = setTimeout(() => setPreventAnimation(false));\n      }\n    },\n    [zoomControlled]\n  );\n\n  const renderChart = useCallback(\n    ({\n      chartHeight,\n      chartWidth,\n      id,\n      updateAxes,\n      chartSized\n    }: ChartContainerChildProps) => {\n      const { xScale, yScale } = getScales(chartWidth, chartHeight);\n      const disableBrush = aggregatedData.length <= 1;\n\n      return (\n        <Fragment>\n          {chartSized && gridlines && (\n            <CloneElement<GridlineSeriesProps>\n              element={gridlines}\n              height={chartHeight}\n              width={chartWidth}\n              yScale={yScale}\n              xScale={xScale}\n              yAxis={yAxisProps}\n              xAxis={xAxisProps}\n            />\n          )}\n          <CloneElement<LinearAxisProps>\n            element={xAxis}\n            height={chartHeight}\n            width={chartWidth}\n            scale={xScale}\n            visibility={chartSized ? 'visible' : 'hidden'}\n            onDimensionsChange={(event) => updateAxes('horizontal', event)}\n          />\n          <CloneElement<LinearAxisProps>\n            element={yAxis}\n            height={chartHeight}\n            width={chartWidth}\n            scale={yScale}\n            visibility={chartSized ? 'visible' : 'hidden'}\n            onDimensionsChange={(event) => updateAxes('vertical', event)}\n          />\n          {secondaryAxis &&\n            secondaryAxis.map((axis, i) => (\n              <CloneElement<LinearAxisProps>\n                key={i}\n                element={axis}\n                height={chartHeight}\n                width={chartWidth}\n                visibility={chartSized ? 'visible' : 'hidden'}\n                onDimensionsChange={(event) => updateAxes('horizontal', event)}\n              />\n            ))}\n          {chartSized && (\n            <CloneElement<ChartBrushProps>\n              disabled={disableBrush}\n              element={brush}\n              height={chartHeight}\n              width={chartWidth}\n              scale={xScale}\n            >\n              <CloneElement<ChartZoomPanProps>\n                element={zoomPan}\n                onZoomPan={onZoomPan}\n                height={chartHeight}\n                width={chartWidth}\n                axisType={xAxisProps.type}\n                roundDomains={xAxisProps.roundDomains}\n                data={aggregatedData}\n                domain={zoomDomain}\n              >\n                <CloneElement<AreaSeriesProps>\n                  element={series}\n                  id={`area-series-${id}`}\n                  data={aggregatedData}\n                  height={chartHeight}\n                  width={chartWidth}\n                  yScale={yScale}\n                  xScale={xScale}\n                  isZoomed={isZoomed}\n                  animated={animated}\n                />\n              </CloneElement>\n            </CloneElement>\n          )}\n        </Fragment>\n      );\n    },\n    [\n      aggregatedData,\n      animated,\n      brush,\n      getScales,\n      gridlines,\n      isZoomed,\n      onZoomPan,\n      secondaryAxis,\n      series,\n      xAxis,\n      yAxis,\n      xAxisProps,\n      yAxisProps,\n      zoomDomain,\n      zoomPan\n    ]\n  );\n\n  return (\n    <ChartContainer\n      id={id}\n      width={width}\n      height={height}\n      margins={margins}\n      containerClassName={containerClassName}\n      xAxisVisible={isAxisVisible(xAxisProps)}\n      yAxisVisible={isAxisVisible(yAxisProps)}\n      className={classNames(\n        css.areaChart,\n        className,\n        series.type as unknown as string\n      )}\n    >\n      {renderChart}\n    </ChartContainer>\n  );\n};\n\nexport const AREA_CHART_DEFAULT_PROPS = {\n  data: [],\n  xAxis: <LinearXAxis type=\"time\" />,\n  yAxis: <LinearYAxis type=\"value\" />,\n  series: <AreaSeries />,\n  gridlines: <GridlineSeries />,\n  brush: null,\n  zoomPan: null\n};\n","import React, { FC } from 'react';\nimport { AreaChart, AreaChartProps } from './AreaChart';\nimport { ChartNestedDataShape } from '@/common/data';\nimport { StackedAreaSeries } from './AreaSeries';\n\nexport interface StackedAreaChartProps extends AreaChartProps {\n  data: ChartNestedDataShape[];\n}\n\nexport const StackedAreaChart: FC<Partial<StackedAreaChartProps>> = (props) => (\n  <AreaChart\n    {...props}\n    series={<StackedAreaSeries {...props.series?.props} type=\"stacked\" />}\n  />\n);\n","import React, { FC } from 'react';\nimport { AreaChart, AreaChartProps } from './AreaChart';\nimport { ChartNestedDataShape } from '@/common/data';\nimport { StackedNormalizedAreaSeries } from './AreaSeries';\nimport {\n  LinearYAxis,\n  LinearYAxisTickSeries,\n  LinearYAxisTickLabel,\n  LINEAR_Y_AXIS_TICK_LABEL_DEFAULT_PROPS\n} from '@/common/Axis/LinearAxis';\n\nexport interface StackedNormalizedAreaChartProps extends AreaChartProps {\n  data: ChartNestedDataShape[];\n}\n\nexport const StackedNormalizedAreaChart: FC<\n  Partial<StackedNormalizedAreaChartProps>\n> = (props) => (\n  <AreaChart\n    {...props}\n    series={\n      <StackedNormalizedAreaSeries\n        {...props.series?.props}\n        type=\"stackedNormalized\"\n      />\n    }\n    yAxis={\n      <LinearYAxis\n        type=\"value\"\n        tickSeries={\n          <LinearYAxisTickSeries\n            label={\n              <LinearYAxisTickLabel\n                {...LINEAR_Y_AXIS_TICK_LABEL_DEFAULT_PROPS}\n                rotation={false}\n                format={(data) => `${data * 100}%`}\n              />\n            }\n          />\n        }\n        {...props.yAxis?.props}\n      />\n    }\n  />\n);\n","import React, { FC, useMemo } from 'react';\nimport { ChartInternalShallowDataShape, Direction } from '@/common/data';\nimport { BarType } from './Bar';\nimport { motion } from 'motion/react';\nimport { DEFAULT_TRANSITION } from '@/common/Motion';\nimport { mergeDefaultProps } from '@/common';\n\nexport interface BarLabelProps {\n  /**\n   * Text of the label. Set internally by `Bar`.\n   */\n  text: string;\n\n  /**\n   * Height of the bar.\n   */\n  height: number;\n\n  /**\n   * Width of the bar.\n   */\n  width: number;\n\n  /**\n   * SVG x attribute for the bar.\n   */\n  x: number;\n\n  /**\n   * SVG y attribute for the bar.\n   */\n  y: number;\n\n  /**\n   * Group index or index of the bar. Set internally by `BarSeries`.\n   */\n  index: number;\n\n  /**\n   * D3 scale for Axis. Set internally by `BarChart`.\n   */\n  scale: any;\n\n  /**\n   * Position of the label.\n   */\n  position: 'top' | 'center' | 'bottom';\n\n  /**\n   * Parsed data shape. Set internally by `BarChart`.\n   */\n  data: ChartInternalShallowDataShape;\n\n  /**\n   * Color of the text.\n   */\n  fill: string;\n\n  /**\n   * Number of the bars in the bar group. Set internally by `BarSeries`.\n   */\n  barCount: number;\n\n  /**\n   * Layout of bar chart to render. Set internally by `BarSeries`.\n   */\n  layout: Direction;\n\n  /**\n   * Whether to animate the enter/update/exit. Set internally by `BarSeries`.\n   */\n  animated: boolean;\n\n  /**\n   * Type of bar chart to render. Set internally by `BarSeries`.\n   */\n  type: BarType;\n\n  /**\n   * Font size of the text.\n   */\n  fontSize: number;\n\n  /**\n   * Font family of the text.\n   */\n  fontFamily: string;\n\n  /**\n   * Padding of the label.\n   */\n  padding: number;\n\n  /**\n   * Class name to apply to the text.\n   */\n  className?: any;\n}\n\nexport const BarLabel: FC<Partial<BarLabelProps>> = (props) => {\n  const {\n    fontSize,\n    fontFamily,\n    fill,\n    layout,\n    className,\n    text,\n    x,\n    y,\n    height,\n    position,\n    width,\n    data,\n    padding,\n    scale,\n    type,\n    animated,\n    index,\n    barCount\n  } = mergeDefaultProps(BAR_LABEL_DEFAULT_PROPS, props);\n\n  const isVertical = useMemo(() => layout === 'vertical', [layout]);\n  const textAnchor = isVertical ? 'middle' : 'start';\n\n  const enterProps = useMemo(() => {\n    let newY = y;\n    let newX = x;\n\n    // If its diverging and the value is negative, we\n    // need to reverse the type...\n    const isTop = position === 'top';\n    const direction = isVertical\n      ? (data.y as number) < 0 && isTop\n        ? 'bottom'\n        : position\n      : (data.x0 as number) < 0 && isTop\n        ? 'bottom'\n        : position;\n\n    if (isVertical) {\n      if (direction === 'top') {\n        newY = y - padding;\n      } else if (direction === 'center') {\n        newY = y + height / 2;\n      } else if (direction === 'bottom') {\n        newY = y + height - padding;\n      }\n      newX = newX + width / 2;\n    } else {\n      if (direction === 'top') {\n        newX = x + width + padding;\n      } else if (direction === 'center') {\n        newX = x + width / 2;\n      } else if (direction === 'bottom') {\n        newX = x + padding;\n      }\n      newY = newY + height / 2;\n    }\n\n    return {\n      translateX: newX,\n      translateY: newY,\n      opacity: 1\n    };\n  }, [data.x0, data.y, height, isVertical, padding, position, width, x, y]);\n\n  const exitProps = useMemo(() => {\n    let newY = y;\n    let newX = x;\n\n    if (isVertical) {\n      const maxY = Math.max(...scale.range());\n      if (position === 'top') {\n        newY = maxY;\n      } else {\n        newY = maxY + height + padding;\n      }\n\n      newX = newX + width / 2;\n    } else {\n      const minX = Math.min(...scale.range());\n      if (position === 'top') {\n        newX = minX;\n      } else {\n        newX = minX + width + padding;\n      }\n\n      newY = newY + height / 2;\n    }\n\n    if (type === 'stackedDiverging') {\n      if (isVertical) {\n        newY = newY / 2;\n      } else {\n        newX = newX / 2;\n      }\n    }\n\n    return {\n      translateY: newY,\n      translateX: newX,\n      opacity: 0\n    };\n  }, [height, isVertical, padding, position, scale, type, width, x, y]);\n\n  const delay = useMemo(() => {\n    let delay = 0;\n    if (animated) {\n      if (layout === 'vertical') {\n        return (index / barCount) * 0.5;\n      } else {\n        return ((barCount - index) / barCount) * 0.5;\n      }\n    }\n\n    return delay;\n  }, [animated, barCount, index, layout]);\n\n  return (\n    <motion.g\n      initial={exitProps}\n      animate={enterProps}\n      exit={exitProps}\n      transition={{\n        ...DEFAULT_TRANSITION,\n        delay\n      }}\n      fontSize={fontSize}\n      fontFamily={fontFamily}\n    >\n      <text fill={fill} className={className} textAnchor={textAnchor}>\n        {text}\n      </text>\n    </motion.g>\n  );\n};\n\nexport const BAR_LABEL_DEFAULT_PROPS: Partial<BarLabelProps> = {\n  position: 'top',\n  layout: 'vertical' as const,\n  fontSize: 13,\n  padding: 5,\n  fontFamily: 'sans-serif',\n  fill: '#000'\n};\n","import React, {\n  Fragment,\n  ReactElement,\n  useCallback,\n  FC,\n  useRef,\n  useMemo,\n  useState\n} from 'react';\nimport chroma from 'chroma-js';\nimport { Gradient, GradientProps } from '@/common/Gradient';\nimport classNames from 'classnames';\nimport { ChartInternalShallowDataShape, Direction } from '@/common/data';\nimport { RangeLinesProps, RangeLines } from './RangeLines';\nimport { CloneElement } from 'reablocks';\nimport { Mask, MaskProps } from '@/common/Mask';\nimport {\n  constructFunctionProps,\n  PropFunctionTypes\n} from '@/common/utils/functions';\nimport { motion } from 'motion/react';\nimport { DEFAULT_TRANSITION } from '@/common/Motion';\nimport { BarLabelProps, BarLabel, BAR_LABEL_DEFAULT_PROPS } from './BarLabel';\nimport { formatValue, getAriaLabel } from '@/common/utils/formatting';\nimport { GuideBarProps, GuideBar } from './GuideBar';\nimport { ChartTooltipProps, ChartTooltip } from '@/common/Tooltip';\nimport { Glow } from '@/common/Glow';\nimport { ClickEvent } from '@/common/types';\nimport { generateGlowStyles } from '@/common/Glow/utils';\nimport { mergeDefaultProps } from '@/common';\n\nexport type BarType =\n  | 'standard'\n  | 'grouped'\n  | 'stacked'\n  | 'stackedNormalized'\n  | 'stackedDiverging'\n  | 'marimekko'\n  | 'waterfall';\n\nexport type BarProps = {\n  /**\n   * Whether the bar is active or not.\n   */\n  active: boolean;\n\n  /**\n   * Chroma brightness factor to brighten the active bar. See\n   * https://gka.github.io/chroma.js/#color-brighten for more info.\n   */\n  activeBrightness?: number;\n\n  /**\n   * D3 scale for X Axis. Set internally by `BarChart`.\n   */\n  xScale: any;\n\n  /**\n   * D3 scale for Y Axis. Set internally by `BarChart`.\n   */\n  yScale: any;\n\n  /**\n   * D3 scale for X Multi-Group Axis. Set internally by `BarChart`.\n   */\n  xScale1: any;\n\n  /**\n   * Parsed data shape. Set internally by `BarChart`.\n   */\n  data: ChartInternalShallowDataShape;\n\n  /**\n   * Id set internally by `BarChart`.\n   */\n  id: string;\n\n  /**\n   * Gradient shades for the bar.\n   */\n  gradient: ReactElement<GradientProps, typeof Gradient> | null;\n\n  /**\n   * SVG rx attribute for the bar.\n   */\n  rx: number;\n\n  /**\n   * SVG ry attribute for the bar.\n   */\n  ry: number;\n\n  /**\n   * Width of the bar. Set internally by `BarSeries`.\n   */\n  width: number;\n\n  /**\n   * Padding for the bar groups.\n   */\n  padding: number;\n\n  /**\n   * Total number of bars used for animation. Set internally by `BarSeries`.\n   */\n  barCount: number;\n\n  /**\n   * Color callback for the bar.\n   */\n  color: any;\n\n  /**\n   * Cursor for the bar element.\n   */\n  cursor: string;\n\n  /**\n   * Index of the bar. Set internally by `BarSeries`.\n   */\n  barIndex: number;\n\n  /**\n   * Index of the group. Set internally by `BarSeries`.\n   */\n  groupIndex?: number;\n\n  /**\n   * Whether to animate the enter/update/exit. Set internally by `BarSeries`.\n   */\n  animated: boolean;\n\n  /**\n   * Whether this is categorical chart or not. Set internally by `BarSeries`.\n   */\n  isCategorical: boolean;\n\n  /**\n   * Rangelines element. for the bar.\n   */\n  rangeLines: ReactElement<RangeLinesProps, typeof RangeLines> | null;\n\n  /**\n   * Mask element for the bar.\n   */\n  mask: ReactElement<MaskProps, typeof Mask> | null;\n\n  /**\n   * Tooltip element.\n   */\n  tooltip: ReactElement<ChartTooltipProps, typeof ChartTooltip> | null;\n\n  /**\n   * Direction of the chart. Set internally by `BarSeries`.\n   */\n  layout: Direction;\n\n  /**\n   * Type of bar chart. Set internally by `BarSeries`.\n   */\n  type: BarType;\n\n  /**\n   * Label element.\n   */\n  label: ReactElement<BarLabelProps, typeof BarLabel> | null;\n\n  /**\n   * Guide bar component.\n   */\n  guide: ReactElement<GuideBarProps, typeof GuideBar> | null;\n\n  /**\n   * Force a min height on the bar.\n   */\n  minHeight?: number;\n\n  /**\n   * Glow styling for the bar.\n   */\n  glow?: Glow;\n\n  /**\n   * Event for when the bar is clicked.\n   */\n  onClick?: (event: ClickEvent) => void;\n\n  /**\n   * Event for when the bar has mouse enter.\n   */\n  onMouseEnter?: (event) => void;\n\n  /**\n   * Event for when the bar has mouse leave.\n   */\n  onMouseLeave?: (event) => void;\n\n  /**\n   * Event for when a bar has mouse move.\n   */\n  onMouseMove?: (event) => void;\n} & PropFunctionTypes;\n\ninterface BarCoordinates {\n  width: number;\n  height: number;\n  x: number;\n  y: number;\n}\n\nexport const Bar: FC<Partial<BarProps>> = (props) => {\n  const {\n    activeBrightness,\n    id,\n    gradient,\n    data,\n    barIndex,\n    color,\n    yScale,\n    barCount,\n    glow,\n    xScale,\n    groupIndex,\n    minHeight,\n    rangeLines,\n    animated,\n    active,\n    type,\n    tooltip,\n    layout,\n    mask,\n    label,\n    cursor,\n    rx,\n    ry,\n    isCategorical,\n    className,\n    style,\n    width,\n    padding,\n    guide,\n    xScale1,\n    onMouseEnter,\n    onClick,\n    onMouseMove,\n    onMouseLeave\n  } = mergeDefaultProps(BAR_DEFAULT_PROPS, props);\n  const labelProps = useMemo(\n    () => ({ ...BAR_LABEL_DEFAULT_PROPS, ...label?.props }),\n    [label?.props]\n  );\n\n  const isVertical = useMemo(() => layout === 'vertical', [layout]);\n  const rect = useRef<SVGGElement | null>(null);\n  const [internalActive, setInternalActive] = useState<boolean>(active);\n\n  const calculateLinearScalePadding = useCallback(\n    (scale, offset: number, size: number) => {\n      // This function calculates the padding on a linear scale used by the marimekko chart.\n      const totalSize = scale.range()[1];\n      const sizeMinusPadding = totalSize - padding * (barCount - 1);\n      const multiplier = sizeMinusPadding / totalSize;\n      offset = offset * multiplier + groupIndex! * padding;\n      size = size * multiplier;\n\n      return { size, offset };\n    },\n    [barCount, groupIndex, padding]\n  );\n\n  const getExit = useCallback(\n    ({ x, y, width, height }: BarCoordinates) => {\n      let newX = isVertical ? x : Math.min(...xScale.range());\n      let newY = isVertical ? Math.max(...yScale.range()) : y;\n      const newHeight = isVertical ? 0 : height;\n      const newWidth = isVertical ? width : 0;\n\n      if (type === 'stackedDiverging') {\n        if (isVertical) {\n          newY = newY / 2;\n        } else {\n          newX = newX / 2;\n        }\n      }\n\n      return {\n        x: newX,\n        y: newY,\n        height: newHeight,\n        width: newWidth\n      };\n    },\n    [isVertical, type, xScale, yScale]\n  );\n\n  const getKeyCoords = useCallback(\n    (\n      v,\n      v0,\n      v1,\n      scale,\n      sizeOverride: number,\n      isCategorical: boolean,\n      padding: number\n    ) => {\n      let offset;\n      let size;\n\n      if (isCategorical) {\n        if (scale.bandwidth) {\n          offset = scale(v);\n          size = scale.bandwidth();\n\n          if (sizeOverride) {\n            if (offset) {\n              offset = offset + size / 2 - sizeOverride / 2;\n            } else {\n              // Stacked bar charts don't have offsets...\n              offset = size / 2 - sizeOverride / 2;\n            }\n\n            size = sizeOverride;\n          }\n        } else {\n          if (sizeOverride) {\n            throw new Error('Not a valid option for this scale type');\n          }\n\n          offset = scale(v0);\n          size = scale((v1 as any) - (v0 as any));\n\n          if (padding) {\n            const calc = calculateLinearScalePadding(scale, offset, size);\n            offset = calc.offset;\n            size = calc.size;\n          }\n        }\n      } else {\n        if (sizeOverride) {\n          throw new Error('Not a valid option for this scale type');\n        }\n\n        const c0 = scale(v0);\n        const c1 = scale(v1);\n        const delta = c1 - c0;\n        offset = c0;\n        size = Math.max(delta - 1, 0);\n      }\n\n      return {\n        offset: isNaN(offset) ? 0 : offset,\n        size: isNaN(size) ? 0 : size\n      };\n    },\n    [calculateLinearScalePadding]\n  );\n\n  const getValueCoords = useCallback(\n    (v0, v1, scale) => {\n      const c0 = scale(v0);\n      const c1 = scale(v1);\n      const size = Math.abs(c0 - c1);\n      const minSize = Math.max(minHeight || 0, size);\n      const offset = Math.min(c0, c1);\n\n      return {\n        offset: isNaN(offset) ? 0 : offset,\n        size: isNaN(minSize) ? 0 : minSize\n      };\n    },\n    [minHeight]\n  );\n\n  const getCoords = useCallback(\n    (data: ChartInternalShallowDataShape) => {\n      let newYScale = yScale;\n      let newXScale = xScale;\n\n      if (xScale1) {\n        if (isVertical) {\n          newXScale = xScale1;\n        } else {\n          newYScale = xScale1;\n        }\n      }\n\n      if (isVertical) {\n        const xCoords = getKeyCoords(\n          data.x,\n          data.x0,\n          data.x1,\n          newXScale,\n          width,\n          isCategorical,\n          padding\n        );\n        const yCoords = getValueCoords(data.y0, data.y1, newYScale);\n\n        return {\n          x: xCoords.offset,\n          width: xCoords.size,\n          y: yCoords.offset,\n          height: yCoords.size\n        } as BarCoordinates;\n      } else {\n        const yCoords = getKeyCoords(\n          data.y,\n          data.y0,\n          data.y1,\n          newYScale,\n          width,\n          isCategorical,\n          padding\n        );\n        const xCoords = getValueCoords(data.x0, data.x1, newXScale);\n\n        return {\n          x: xCoords.offset,\n          width: xCoords.size,\n          y: yCoords.offset,\n          height: yCoords.size\n        } as BarCoordinates;\n      }\n    },\n    [\n      getKeyCoords,\n      getValueCoords,\n      isCategorical,\n      isVertical,\n      padding,\n      width,\n      xScale,\n      xScale1,\n      yScale\n    ]\n  );\n\n  const onMouseEnterInternal = useCallback(\n    (event) => {\n      // Only tooltip bars rely on this...\n      if (tooltip) {\n        setInternalActive(true);\n      }\n\n      onMouseEnter?.({\n        value: data,\n        nativeEvent: event\n      });\n    },\n    [data, onMouseEnter, tooltip]\n  );\n\n  const onMouseLeaveInternal = useCallback(\n    (event) => {\n      // Only tooltip bars rely on this...\n      if (tooltip) {\n        setInternalActive(false);\n      }\n\n      onMouseLeave?.({\n        value: data,\n        nativeEvent: event\n      });\n    },\n    [data, onMouseLeave, tooltip]\n  );\n\n  const onMouseClick = useCallback(\n    (event) => {\n      onClick?.({\n        value: data,\n        nativeEvent: event\n      });\n    },\n    [data, onClick]\n  );\n\n  const getFill = useCallback(\n    (color: string) => {\n      if (mask) {\n        return `url(#mask-pattern-${id})`;\n      } else {\n        if (gradient) {\n          return `url(#gradient-${id})`;\n        }\n\n        return color;\n      }\n    },\n    [gradient, id, mask]\n  );\n\n  const tooltipData = useMemo(() => {\n    const xAttr = isCategorical ? 'x' : 'x0';\n    let x = data[xAttr]!;\n\n    // Stacked diverging negative numbers\n    // in horizontal layouts need to pull x0\n    if ((data.x0 as number) < 0) {\n      x = data.x0;\n    }\n\n    const matches = isVertical\n      ? data.key && data.key !== x\n      : data.key && data.key !== data.y;\n\n    if (matches) {\n      x = `${data.key} ∙ ${x}`;\n    }\n\n    return {\n      y: data.y,\n      x\n    };\n  }, [data, isCategorical, isVertical]);\n\n  const ariaLabelData = useMemo(() => getAriaLabel(tooltipData), [tooltipData]);\n\n  const getTransition = useCallback(\n    (index: number) => {\n      if (animated) {\n        let delay = 0;\n        if (layout === 'vertical') {\n          delay = (index / barCount) * 0.5;\n        } else {\n          delay = ((barCount - index) / barCount) * 0.5;\n        }\n\n        return {\n          ...DEFAULT_TRANSITION,\n          delay: delay\n        };\n      } else {\n        return {\n          type: false,\n          delay: 0\n        };\n      }\n    },\n    [animated, barCount, layout]\n  );\n\n  const renderBar = useCallback(\n    (currentColorShade: string, coords: BarCoordinates, index: number) => {\n      const maskPath = mask ? `url(#mask-${id})` : '';\n      const fill = getFill(currentColorShade);\n      const initialExit = getExit(coords);\n      const extras = constructFunctionProps({ className, style }, data);\n      const transition = getTransition(index);\n\n      // UGH: https://github.com/framer/motion/issues/384\n      const initial = {\n        ...initialExit,\n        attrX: initialExit.x,\n        attrY: initialExit.y,\n        fill\n      };\n\n      delete initial.x;\n      delete initial.y;\n\n      const animate = {\n        ...coords,\n        attrX: coords.x,\n        attrY: coords.y,\n        fill\n      };\n\n      delete animate.x;\n      delete animate.y;\n\n      // If the fill is a gradient, we need to add it to the element\n      // rather than try and animate it. This is a workaround for a bug\n      // in the motion library where the gradient is not animated.\n      const extra: any = {};\n      if (fill.includes('url')) {\n        delete initial.fill;\n        delete animate.fill;\n        extra.fill = fill;\n      }\n\n      return (\n        <g ref={rect}>\n          <motion.rect\n            className={classNames(extras.className)}\n            style={{\n              ...extras.style,\n              ...generateGlowStyles({\n                glow,\n                colorSchemeColor: currentColorShade\n              }),\n              cursor\n            }}\n            {...extra}\n            mask={maskPath}\n            rx={rx}\n            ry={ry}\n            initial={initial}\n            animate={animate}\n            exit={initial}\n            transition={transition}\n            onMouseEnter={onMouseEnterInternal}\n            onMouseLeave={onMouseLeaveInternal}\n            onClick={onMouseClick}\n            onMouseMove={onMouseMove}\n            tabIndex={0}\n            aria-label={ariaLabelData}\n            role=\"graphics-document\"\n          />\n        </g>\n      );\n    },\n    [\n      className,\n      cursor,\n      data,\n      getExit,\n      getFill,\n      getTransition,\n      glow,\n      id,\n      mask,\n      onMouseClick,\n      onMouseEnterInternal,\n      onMouseLeaveInternal,\n      onMouseMove,\n      rx,\n      ry,\n      style,\n      ariaLabelData\n    ]\n  );\n\n  const renderGuideBar = useCallback(() => {\n    if (!guide) {\n      return null;\n    }\n\n    // If we are stacked, only render the first bar\n    if (type === 'stacked' && barIndex !== 0) {\n      return null;\n    }\n\n    // No reason to show them since they are always 100% tall\n    if (type === 'stackedNormalized' || type === 'marimekko') {\n      console.error('Guide bars are not supported for these chart types');\n      return null;\n    }\n\n    const valueScale = isVertical ? yScale : xScale;\n    const [start, end] = valueScale.domain();\n    const attr = isVertical ? 'y' : 'x';\n\n    // For stacked diverging we need to flip the points for positive / negative bars\n    const attrStart = type === 'stackedDiverging' ? '0' : '1';\n    const endPoint = type === 'stackedDiverging' ? start : end;\n    const startPoint =\n      type === 'stackedDiverging' && (data[attr]! as number) > 0\n        ? end\n        : endPoint;\n\n    const coords = getCoords({\n      ...data,\n      [attr]: endPoint,\n      [`${attr}${attrStart}`]: startPoint\n    });\n\n    return (\n      <CloneElement<GuideBarProps>\n        element={guide}\n        {...coords}\n        active={active}\n      />\n    );\n  }, [\n    active,\n    barIndex,\n    data,\n    getCoords,\n    guide,\n    isVertical,\n    type,\n    xScale,\n    yScale\n  ]);\n\n  const isActive = tooltip ? internalActive : active;\n  const stroke = color(data, barIndex);\n  const coords = getCoords(data);\n  const currentColorShade = active\n    ? chroma(stroke).brighten(activeBrightness).hex()\n    : stroke;\n  const rangeLineColor = (rangeLines && rangeLines.props.color) || stroke;\n  const rangeLineColorShade = active\n    ? chroma(rangeLineColor).brighten(activeBrightness)\n    : rangeLineColor;\n  const index = groupIndex !== undefined ? groupIndex : barIndex;\n  const scale = isVertical ? yScale : xScale;\n  const barLabel = isVertical ? tooltipData.y : tooltipData.x;\n  const placement = layout === 'vertical' ? 'top' : 'right';\n\n  return (\n    <Fragment>\n      {renderGuideBar()}\n      {renderBar(currentColorShade, coords, index)}\n      {rangeLines && (\n        <CloneElement<RangeLinesProps>\n          element={rangeLines}\n          {...coords}\n          index={index}\n          data={data}\n          scale={scale}\n          color={rangeLineColorShade}\n          barCount={barCount}\n          animated={animated}\n          layout={layout}\n          type={type}\n        />\n      )}\n      {mask && (\n        <Fragment>\n          <Mask id={`mask-${id}`} fill={`url(#gradient-${id})`} />\n          <CloneElement<MaskProps>\n            element={mask}\n            id={`mask-pattern-${id}`}\n            fill={stroke}\n          />\n        </Fragment>\n      )}\n      {gradient && (\n        <CloneElement<GradientProps>\n          element={gradient}\n          id={`gradient-${id}`}\n          direction={layout}\n          color={currentColorShade}\n        />\n      )}\n      {label && (\n        <CloneElement<BarLabelProps>\n          element={label}\n          {...coords}\n          text={formatValue(barLabel)}\n          index={index}\n          data={data}\n          scale={scale}\n          fill={labelProps.fill || currentColorShade}\n          barCount={barCount}\n          animated={animated}\n          layout={layout}\n          type={type}\n        />\n      )}\n      {tooltip && (\n        <CloneElement<ChartTooltipProps>\n          element={tooltip}\n          visible={!!isActive}\n          reference={rect}\n          color={color}\n          value={tooltipData}\n          placement={(tooltip.props as any).placement || placement}\n          data={data}\n        />\n      )}\n    </Fragment>\n  );\n};\n\nexport const BAR_DEFAULT_PROPS = {\n  activeBrightness: 0.5,\n  rx: 0,\n  ry: 0,\n  cursor: 'auto',\n  rangeLines: null,\n  label: null,\n  tooltip: null,\n  layout: 'vertical' as const,\n  guide: null,\n  gradient: <Gradient />\n};\n","import {\n  LinearValueMarker,\n  LinearValueMarkerProps,\n  mergeDefaultProps\n} from '@/common';\nimport { ColorSchemeType, getColor } from '@/common/color';\nimport {\n  ChartInternalDataShape,\n  ChartInternalNestedDataShape,\n  ChartInternalShallowDataShape,\n  Direction\n} from '@/common/data';\nimport {\n  ChartTooltip,\n  TooltipArea,\n  TooltipAreaEvent,\n  TooltipAreaProps\n} from '@/common/Tooltip';\nimport { offset } from '@floating-ui/dom';\nimport { CloneElement } from 'reablocks';\nimport React, {\n  FC,\n  Fragment,\n  ReactElement,\n  useCallback,\n  useMemo,\n  useRef,\n  useState\n} from 'react';\nimport { Bar, BAR_DEFAULT_PROPS, BarProps, BarType } from './Bar';\n\ntype BarElement = ReactElement<BarProps, typeof Bar>;\n\nexport interface BarSeriesProps {\n  /**\n   * Parsed data shape. Set internally by `BarChart`.\n   */\n  data: ChartInternalDataShape[];\n\n  /**\n   * Id of the bar chart. Set internally by `BarChart`.\n   */\n  id: string;\n\n  /**\n   * D3 scale for X Axis. Set internally by `BarChart`.\n   */\n  xScale: any;\n\n  /**\n   * D3 scale for Y Axis. Set internally by `BarChart`.\n   */\n  yScale: any;\n\n  /**\n   * D3 scale for X Multi-Group Axis. Set internally by `BarChart`.\n   */\n  xScale1: any;\n\n  /**\n   * Bar element.\n   */\n  bar: BarElement | BarElement[];\n\n  /**\n   * Type of the chart.\n   */\n  type: BarType;\n\n  /**\n   * Color scheme for the chart.\n   */\n  colorScheme: ColorSchemeType;\n\n  /**\n   * Whether the chart is animated or not.\n   */\n  animated: boolean;\n\n  /**\n   * Amount of padding between each bar.\n   */\n  padding: number;\n\n  /**\n   * Amount of padding between each group.\n   */\n  groupPadding: number;\n\n  /**\n   * Whether the chart is categorical or not. Set internally by `BarChart`.\n   */\n  isCategorical: boolean;\n\n  /**\n   * Direction of the chart\n   */\n  layout: Direction;\n\n  /**\n   * The size of each bin/bucket in the bar chart.\n   */\n  binSize?: number;\n\n  /**\n   * Height of the chart. Set internally by `BarChart`.\n   */\n  height: number;\n\n  /**\n   * Width of the chart. Set internally by `BarChart`.\n   */\n  width: number;\n\n  /**\n   * Tooltip for the chart area.\n   */\n  tooltip: ReactElement<TooltipAreaProps, typeof TooltipArea> | null;\n\n  /**\n   * Value markers line for the chart.\n   */\n  valueMarkers:\n    | ReactElement<LinearValueMarkerProps, typeof LinearValueMarker>[]\n    | null;\n}\n\nexport const BarSeries: FC<Partial<BarSeriesProps>> = (props) => {\n  const {\n    data,\n    tooltip,\n    xScale,\n    yScale,\n    height,\n    width,\n    colorScheme,\n    xScale1,\n    bar,\n    padding,\n    animated,\n    isCategorical,\n    layout,\n    type,\n    id,\n    valueMarkers\n  } = mergeDefaultProps(BAR_SERIES_DEFAULT_PROPS, props);\n  const ref = useRef<any | null>(null);\n  const [activeValues, setActiveValues] = useState<any | null>(null);\n  const isVertical = useMemo(() => layout === 'vertical', [layout]);\n\n  const isMultiSeries = useMemo(() => {\n    return (\n      type === 'grouped' ||\n      type === 'stacked' ||\n      type === 'marimekko' ||\n      type === 'stackedNormalized' ||\n      type === 'stackedDiverging'\n    );\n  }, [type]);\n\n  const getTransform = useCallback(\n    (data: ChartInternalNestedDataShape) => {\n      let xPos = 0;\n      let yPos = 0;\n      if (type !== 'marimekko') {\n        if (layout === 'vertical') {\n          xPos = xScale(data.key);\n        } else {\n          yPos = yScale(data.key);\n        }\n      }\n\n      return `translate(${xPos}, ${yPos})`;\n    },\n    [layout, type, xScale, yScale]\n  );\n\n  const getBarColor = useCallback(\n    (point, index: number) => {\n      let key = 'key';\n      if (isMultiSeries) {\n        if (layout === 'vertical') {\n          key = 'x';\n        } else {\n          key = 'y';\n        }\n      }\n\n      // histograms...\n      if (point[key] === undefined) {\n        key = 'x0';\n      }\n\n      return getColor({\n        colorScheme,\n        point,\n        index,\n        data,\n        isMultiSeries,\n        attribute: key\n      });\n    },\n    [colorScheme, data, isMultiSeries, layout]\n  );\n\n  const onMouseMove = useCallback((event) => {\n    // Manuallly call mouse move so we don't have to kill bar pointer events\n    ref.current?.triggerMouseMove(event);\n  }, []);\n\n  const onValueEnter = useCallback((event: TooltipAreaEvent) => {\n    setActiveValues(event.value);\n  }, []);\n\n  const onValueLeave = useCallback(() => {\n    setActiveValues(null);\n  }, []);\n\n  const renderBar = useCallback(\n    (\n      data: ChartInternalShallowDataShape,\n      barIndex: number,\n      barCount: number,\n      groupIndex?: number\n    ) => {\n      const active = activeValues && activeValues.x === data.key;\n\n      let newYScale = yScale;\n      let newXScale = xScale;\n\n      if (xScale1) {\n        if (isVertical) {\n          newXScale = xScale1;\n        } else {\n          newYScale = xScale1;\n        }\n      }\n\n      // Histograms dont have keys\n      let key = barIndex.toString();\n      if (data.key) {\n        key = `${data.key!.toString()}-${groupIndex}-${data.x}`;\n      }\n\n      let barElements = Array.isArray(bar) ? bar[barIndex] : bar;\n      if (!bar) {\n        barElements = <Bar {...BAR_DEFAULT_PROPS} />;\n      }\n\n      return (\n        <Fragment key={key}>\n          <CloneElement<BarProps>\n            element={barElements}\n            id={`${id}-bar-${groupIndex}-${barIndex}`}\n            animated={animated}\n            active={active}\n            xScale={newXScale}\n            xScale1={xScale1}\n            yScale={newYScale}\n            padding={padding}\n            barCount={barCount}\n            groupIndex={groupIndex}\n            barIndex={barIndex}\n            data={data}\n            isCategorical={isCategorical}\n            color={getBarColor}\n            layout={layout}\n            type={type}\n            onMouseMove={onMouseMove}\n          />\n        </Fragment>\n      );\n    },\n    [\n      activeValues,\n      animated,\n      bar,\n      getBarColor,\n      id,\n      isCategorical,\n      isVertical,\n      layout,\n      onMouseMove,\n      padding,\n      type,\n      xScale,\n      xScale1,\n      yScale\n    ]\n  );\n\n  const renderBarGroup = useCallback(\n    (\n      data: ChartInternalShallowDataShape[],\n      barCount: number,\n      groupIndex?: number\n    ) => {\n      return (\n        <Fragment>\n          {data.map((barData, barIndex) =>\n            renderBar(barData, barIndex, barCount, groupIndex)\n          )}\n        </Fragment>\n      );\n    },\n    [renderBar]\n  );\n\n  const renderValueMarkers = useCallback(\n    () => (\n      <>\n        {valueMarkers?.length &&\n          valueMarkers.map((marker) => (\n            <CloneElement<LinearValueMarkerProps>\n              key={marker.key}\n              element={marker}\n              size={layout === 'vertical' ? width : height}\n              value={\n                layout === 'vertical'\n                  ? yScale(marker.props.value)\n                  : xScale(marker.props.value)\n              }\n              direction={layout === 'vertical' ? 'horizontal' : 'vertical'}\n            />\n          ))}\n      </>\n    ),\n    [height, layout, valueMarkers, width, xScale, yScale]\n  );\n\n  return (\n    <CloneElement<TooltipAreaProps>\n      element={tooltip}\n      childRef={ref}\n      xScale={xScale}\n      yScale={yScale}\n      data={data}\n      height={height}\n      width={width}\n      inverse={false}\n      isHorizontal={layout === 'horizontal'}\n      color={getBarColor}\n      onValueEnter={onValueEnter}\n      onValueLeave={onValueLeave}\n      isContinous={false}\n    >\n      {isMultiSeries &&\n        (data as ChartInternalNestedDataShape[]).map((groupData, index) => (\n          <g transform={getTransform(groupData)} key={`bar-group-${index}`}>\n            {renderBarGroup(\n              groupData.data as ChartInternalShallowDataShape[],\n              data.length,\n              index\n            )}\n          </g>\n        ))}\n      {!isMultiSeries &&\n        renderBarGroup(data as ChartInternalShallowDataShape[], data.length)}\n      {renderValueMarkers()}\n    </CloneElement>\n  );\n};\n\nexport const BAR_SERIES_DEFAULT_PROPS = {\n  type: 'standard' as BarType,\n  padding: 0.1,\n  groupPadding: 16,\n  animated: true,\n  tooltip: (\n    <TooltipArea\n      tooltip={<ChartTooltip followCursor={true} modifiers={[offset(5)]} />}\n    />\n  ),\n  colorScheme: 'cybertron',\n  bar: <Bar />,\n  layout: 'vertical' as const\n};\n","import React, { FC, useMemo } from 'react';\nimport { ChartInternalShallowDataShape, Direction } from '@/common/data';\nimport { motion } from 'motion/react';\nimport { DEFAULT_TRANSITION } from '@/common/Motion';\nimport { BarType } from './Bar';\n\nexport interface RangeLinesProps {\n  /**\n   * Height of the bar.\n   */\n  height: number;\n\n  /**\n   * Width of the bar.\n   */\n  width: number;\n\n  /**\n   * SVG x attribute for the bar.\n   */\n  x: number;\n\n  /**\n   * SVG y attribute for the bar.\n   */\n  y: number;\n\n  /**\n   * Group index or index of the bar. Set internally by `BarSeries`.\n   */\n  index: number;\n\n  /**\n   * Stroke width of the range line.\n   */\n  strokeWidth: number;\n\n  /**\n   * D3 scale for Axis. Set internally by `BarChart`.\n   */\n  scale: any;\n\n  /**\n   * Position of the range line.\n   */\n  position: 'top' | 'bottom';\n\n  /**\n   * Parsed data shape. Set internally by `BarChart`.\n   */\n  data: ChartInternalShallowDataShape;\n\n  /**\n   * Color for the range line.\n   */\n  color: string;\n\n  /**\n   * Total number of bars used for animation. Set internally by `BarSeries`.\n   */\n  barCount: number;\n\n  /**\n   * Direction of the chart. Set internally by `BarSeries`.\n   */\n  layout: Direction;\n\n  /**\n   * Whether to animate the enter/update/exit. Set internally by `BarSeries`.\n   */\n  animated: boolean;\n\n  /**\n   * Type of bar chart. Set internally by `BarSeries`.\n   */\n  type: BarType;\n}\n\nexport const RangeLines: FC<Partial<RangeLinesProps>> = ({\n  layout = 'vertical',\n  color,\n  x,\n  y,\n  scale,\n  type,\n  height,\n  position = 'top',\n  strokeWidth = 1,\n  width,\n  animated,\n  index,\n  barCount,\n  data\n}) => {\n  const isVertical = useMemo(() => layout === 'vertical', [layout]);\n  const rangeLineHeight = useMemo(\n    () => Math.min(strokeWidth, isVertical ? height : width),\n    [height, isVertical, strokeWidth, width]\n  );\n\n  const [newWidth, newHeight] = useMemo(\n    () => [\n      isVertical ? width : rangeLineHeight,\n      isVertical ? rangeLineHeight : height\n    ],\n    [height, isVertical, rangeLineHeight, width]\n  );\n\n  const enterProps = useMemo(() => {\n    let newY = y;\n    let newX = x;\n\n    // If its diverging and the value is negative, we\n    // need to reverse the type...\n    const isTop = position === 'top';\n    const direction = isVertical\n      ? (data.y as number) < 0 && isTop\n        ? 'bottom'\n        : position\n      : (data.x0 as number) < 0 && isTop\n        ? 'bottom'\n        : position;\n\n    if (isVertical) {\n      if (direction === 'top') {\n        newY = y;\n      } else {\n        newY = y + height - rangeLineHeight;\n      }\n    } else {\n      if (direction === 'top') {\n        newX = x + width - rangeLineHeight;\n      } else {\n        newX = x;\n      }\n    }\n\n    return {\n      x: newX,\n      y: newY,\n      opacity: 1\n    };\n  }, [\n    data.x0,\n    data.y,\n    height,\n    isVertical,\n    position,\n    rangeLineHeight,\n    width,\n    x,\n    y\n  ]);\n\n  const exitProps = useMemo(() => {\n    let newY = y;\n    let newX = x;\n\n    if (isVertical) {\n      const maxY = Math.max(...scale.range());\n      if (position === 'top') {\n        newY = maxY;\n      } else {\n        newY = maxY + height - rangeLineHeight;\n      }\n    } else {\n      const minX = Math.min(...scale.range());\n      if (position === 'top') {\n        newX = minX;\n      } else {\n        newX = minX + width - rangeLineHeight;\n      }\n    }\n\n    if (type === 'stackedDiverging') {\n      if (isVertical) {\n        newY = newY / 2;\n      } else {\n        newX = newX / 2;\n      }\n    }\n\n    return {\n      y: newY,\n      x: newX,\n      opacity: 0\n    };\n  }, [height, isVertical, position, rangeLineHeight, scale, type, width, x, y]);\n\n  const delay = useMemo(() => {\n    let delay = 0;\n    if (animated) {\n      if (layout === 'vertical') {\n        return (index / barCount) * 0.5;\n      } else {\n        return ((barCount - index) / barCount) * 0.5;\n      }\n    }\n\n    return delay;\n  }, [animated, barCount, index, layout]);\n\n  // UGH: https://github.com/framer/motion/issues/384\n  const initial = useMemo(() => {\n    const r = {\n      ...exitProps,\n      attrX: exitProps.x,\n      attrY: exitProps.y\n    };\n\n    delete r.x;\n    delete r.y;\n\n    return r;\n  }, [exitProps]);\n\n  const animate = useMemo(() => {\n    const r = {\n      ...enterProps,\n      attrX: enterProps.x,\n      attrY: enterProps.y\n    };\n\n    delete r.x;\n    delete r.y;\n\n    return r;\n  }, [enterProps]);\n\n  return (\n    <motion.rect\n      pointerEvents=\"none\"\n      fill={color}\n      width={newWidth}\n      height={newHeight}\n      initial={initial}\n      animate={animate}\n      exit={initial}\n      transition={{\n        ...DEFAULT_TRANSITION,\n        delay\n      }}\n    />\n  );\n};\n","import React, { FC } from 'react';\nimport {\n  BarSeriesProps,\n  BarSeries,\n  BAR_SERIES_DEFAULT_PROPS\n} from './BarSeries';\nimport { Bar, BAR_DEFAULT_PROPS, BarType } from './Bar';\nimport { RangeLines } from './RangeLines';\nimport { Gradient, GradientStop } from '@/common';\n\nexport const StackedBarSeries: FC<Partial<BarSeriesProps>> = (props) => (\n  <BarSeries {...STACKED_BAR_SERIES_DEFAULT_PROPS} {...props} />\n);\n\nexport const STACKED_BAR_SERIES_DEFAULT_PROPS = {\n  ...BAR_SERIES_DEFAULT_PROPS,\n  type: 'stacked' as BarType,\n  bar: (\n    <Bar\n      {...BAR_DEFAULT_PROPS}\n      gradient={\n        <Gradient\n          stops={[\n            <GradientStop offset=\"5%\" stopOpacity={0.1} key=\"start\" />,\n            <GradientStop offset=\"90%\" stopOpacity={0.7} key=\"stop\" />\n          ]}\n        />\n      }\n      rangeLines={<RangeLines position=\"top\" strokeWidth={3} />}\n    />\n  )\n};\n","import React, { FC } from 'react';\nimport { offset } from '@floating-ui/dom';\nimport {\n  BarSeriesProps,\n  BarSeries,\n  BAR_SERIES_DEFAULT_PROPS\n} from './BarSeries';\nimport { Bar, BAR_DEFAULT_PROPS, BarType } from './Bar';\nimport { RangeLines } from './RangeLines';\nimport { ChartTooltip, TooltipTemplate, TooltipArea } from '@/common/Tooltip';\nimport { formatValue } from '@/common/utils/formatting';\nimport { Gradient, GradientStop } from '@/common/Gradient';\n\nexport const StackedNormalizedBarSeries: FC<Partial<BarSeriesProps>> = (\n  props\n) => <BarSeries {...STACKED_NORMALIZED_BAR_SERIES_DEFAULT_PROPS} {...props} />;\n\nexport const STACKED_NORMALIZED_BAR_SERIES_DEFAULT_PROPS = {\n  ...BAR_SERIES_DEFAULT_PROPS,\n  type: 'stackedNormalized' as BarType,\n  tooltip: (\n    <TooltipArea\n      tooltip={\n        <ChartTooltip\n          followCursor={true}\n          modifiers={[offset(5)]}\n          content={(point, color) => {\n            point.data = point.data.map((d) => {\n              // Handle horz case\n              const start = isNaN(d.y0) ? d.x0 : d.y0;\n              const end = isNaN(d.y1) ? d.x1 : d.y1;\n\n              return {\n                ...d,\n                value: `${formatValue(Math.floor((end - start) * 100))}%`\n              };\n            });\n\n            return <TooltipTemplate value={point} color={color} />;\n          }}\n        />\n      }\n    />\n  ),\n  bar: (\n    <Bar\n      {...BAR_DEFAULT_PROPS}\n      gradient={\n        <Gradient\n          stops={[\n            <GradientStop offset=\"5%\" stopOpacity={0.1} key=\"start\" />,\n            <GradientStop offset=\"90%\" stopOpacity={0.7} key=\"stop\" />\n          ]}\n        />\n      }\n      rangeLines={<RangeLines position=\"top\" strokeWidth={3} />}\n    />\n  )\n};\n","import React, { FC } from 'react';\nimport { offset } from '@floating-ui/dom';\nimport {\n  BarSeriesProps,\n  BarSeries,\n  BAR_SERIES_DEFAULT_PROPS\n} from './BarSeries';\nimport { Bar, BAR_DEFAULT_PROPS, BarType } from './Bar';\nimport { RangeLines } from './RangeLines';\nimport { ChartTooltip, TooltipTemplate, TooltipArea } from '@/common/Tooltip';\nimport { formatValue } from '@/common/utils/formatting';\nimport { Gradient, GradientStop } from '@/common/Gradient';\n\nexport const MarimekkoBarSeries: FC<Partial<BarSeriesProps>> = (props) => (\n  <BarSeries {...MARIMEKKO_BAR_SERIES_DEFAULT_PROPS} {...props} />\n);\n\nexport const MARIMEKKO_BAR_SERIES_DEFAULT_PROPS: Partial<BarSeriesProps> = {\n  ...BAR_SERIES_DEFAULT_PROPS,\n  type: 'marimekko' as BarType,\n  padding: 10,\n  tooltip: (\n    <TooltipArea\n      tooltip={\n        <ChartTooltip\n          followCursor={true}\n          modifiers={[offset(5)]}\n          content={(point, color) => {\n            const data = {\n              ...point,\n              data: point.data.map((d) => ({\n                ...d,\n                value: `${formatValue(d.value)} ∙ ${formatValue(\n                  Math.floor((d.y1 - d.y0) * 100)\n                )}%`\n              }))\n            };\n\n            return <TooltipTemplate value={data} color={color} />;\n          }}\n        />\n      }\n    />\n  ),\n  bar: (\n    <Bar\n      {...BAR_DEFAULT_PROPS}\n      padding={10}\n      gradient={\n        <Gradient\n          stops={[\n            <GradientStop offset=\"5%\" stopOpacity={0.1} key=\"start\" />,\n            <GradientStop offset=\"90%\" stopOpacity={0.7} key=\"stop\" />\n          ]}\n        />\n      }\n      rangeLines={<RangeLines position=\"top\" strokeWidth={3} />}\n    />\n  )\n};\n","import React, { FC } from 'react';\nimport { offset } from '@floating-ui/dom';\nimport {\n  BarSeriesProps,\n  BarSeries,\n  BAR_SERIES_DEFAULT_PROPS\n} from './BarSeries';\nimport { ChartTooltip, TooltipTemplate, TooltipArea } from '@/common/Tooltip';\nimport { formatValue } from '@/common/utils/formatting';\nimport { schemes } from '@/common/color';\n\nexport const HistogramBarSeries: FC<Partial<BarSeriesProps>> = ({\n  type,\n  ...rest\n}) => <BarSeries {...HISTOGRAM_BAR_SERIES_DEFAULT_PROPS} {...rest} />;\n\nexport const HISTOGRAM_BAR_SERIES_DEFAULT_PROPS = {\n  ...BAR_SERIES_DEFAULT_PROPS,\n  colorScheme: schemes.cybertron[0],\n  tooltip: (\n    <TooltipArea\n      tooltip={\n        <ChartTooltip\n          followCursor={true}\n          modifiers={[offset(5)]}\n          content={(point, color) => {\n            const data = {\n              ...point,\n              x: `${formatValue(point.x0)} - ${formatValue(point.x1)}`,\n              value: point.y\n            };\n\n            return <TooltipTemplate value={data} color={color} />;\n          }}\n        />\n      }\n    />\n  )\n};\n","import React, { FC } from 'react';\nimport { motion } from 'motion/react';\n\nexport interface GuideBarProps extends SVGRect {\n  /**\n   * Whether the guide bar is active.\n   */\n  active: boolean;\n\n  /**\n   * Fill for the guide bar element.\n   */\n  fill?: string;\n\n  /**\n   * Opacity for the guide bar element.\n   */\n  opacity?: number;\n}\n\nexport const GuideBar: FC<Partial<GuideBarProps>> = ({\n  fill = '#eee',\n  active,\n  opacity = 0.15,\n  ...rest\n}) => {\n  const { x, y, ...other } = rest;\n\n  return (\n    <motion.rect\n      fill={fill}\n      {...other}\n      pointerEvents=\"none\"\n      initial=\"hidden\"\n      animate={active ? 'visible' : 'hidden'}\n      variants={{\n        hidden: { opacity: 0, attrX: x, attrY: y },\n        visible: { opacity, attrX: x, attrY: y }\n      }}\n    />\n  );\n};\n","import React, { Fragment, ReactElement, FC, useMemo, useCallback } from 'react';\nimport classNames from 'classnames';\nimport {\n  isAxisVisible,\n  LinearAxisProps,\n  LinearXAxisTickSeries,\n  LinearXAxis,\n  LinearYAxis,\n  LinearAxis,\n  LINEAR_X_AXIS_DEFAULT_PROPS,\n  LINEAR_Y_AXIS_DEFAULT_PROPS\n} from '@/common/Axis';\nimport {\n  BAR_SERIES_DEFAULT_PROPS,\n  BarSeries,\n  BarSeriesProps\n} from './BarSeries';\nimport {\n  ChartDataShape,\n  ChartNestedDataShape,\n  buildBarStackData,\n  buildMarimekkoData,\n  buildWaterfall,\n  ChartShallowDataShape,\n  buildNestedChartData,\n  buildShallowChartData,\n  StackTypes\n} from '@/common/data';\nimport { GridlineSeries, GridlineSeriesProps } from '@/common/Gridline';\nimport {\n  getXScale,\n  getYScale,\n  getGroupScale,\n  getInnerScale,\n  getMarimekkoScale,\n  getMarimekkoGroupScale\n} from '@/common/scales';\nimport { ChartBrushProps, ChartBrush } from '@/common/Brush';\nimport css from './BarChart.module.css';\nimport {\n  ChartContainer,\n  ChartContainerChildProps,\n  ChartProps\n} from '@/common/containers/ChartContainer';\nimport { CloneElement } from 'reablocks';\nimport { mergeDefaultProps } from '@/common';\n\nexport interface BarChartProps extends ChartProps {\n  /**\n   * Data the chart will receive to render.\n   */\n  data: ChartDataShape[];\n\n  /**\n   * The series component that renders the bar components.\n   */\n  series: ReactElement<BarSeriesProps, typeof BarSeries>;\n\n  /**\n   * The linear axis component for the Y Axis of the chart.\n   */\n  yAxis: ReactElement<LinearAxisProps, typeof LinearAxis>;\n\n  /**\n   * The linear axis component for the X Axis of the chart.\n   */\n  xAxis: ReactElement<LinearAxisProps, typeof LinearAxis>;\n\n  /**\n   * The chart's background gridlines component.\n   */\n  gridlines: ReactElement<GridlineSeriesProps, typeof GridlineSeries> | null;\n\n  /**\n   * The chart's brush component.\n   */\n  brush: ReactElement<ChartBrushProps, typeof ChartBrush> | null;\n\n  /**\n   * Any secondary axis components. Useful for multi-axis charts.\n   */\n  secondaryAxis?: ReactElement<LinearAxisProps, typeof LinearAxis>[];\n}\n\nexport const BarChart: FC<Partial<BarChartProps>> = (props) => {\n  const {\n    id,\n    width,\n    height,\n    margins,\n    className,\n    data,\n    xAxis,\n    yAxis,\n    series,\n    brush,\n    gridlines,\n    secondaryAxis,\n    containerClassName\n  } = mergeDefaultProps(BAR_CHART_DEFAULT_PROPS, props);\n  const seriesProps = useMemo(\n    () => ({ ...BAR_SERIES_DEFAULT_PROPS, ...series?.props }),\n    [series?.props]\n  );\n  const xAxisProps = useMemo(\n    () => ({ ...LINEAR_X_AXIS_DEFAULT_PROPS, ...xAxis.props }),\n    [xAxis.props]\n  );\n  const yAxisProps = useMemo(\n    () => ({ ...LINEAR_Y_AXIS_DEFAULT_PROPS, ...yAxis.props }),\n    [yAxis.props]\n  );\n  const isVertical = useMemo(\n    () => seriesProps.layout === 'vertical',\n    [seriesProps]\n  );\n  const keyAxisProps = useMemo(\n    () => (isVertical ? xAxisProps : yAxisProps),\n    [isVertical, xAxisProps, yAxisProps]\n  );\n  const isDiverging = useMemo(\n    () => seriesProps.type === 'stackedDiverging',\n    [seriesProps.type]\n  );\n\n  const getMarimekkoGroupScales = useCallback(\n    (aggregatedData, axisProps, width: number) => {\n      const keyScale = getMarimekkoScale(width, axisProps.roundDomains);\n\n      const groupScale = getMarimekkoGroupScale({\n        width,\n        padding: seriesProps.padding,\n        data: aggregatedData,\n        valueScale: keyScale\n      });\n\n      return {\n        keyScale,\n        groupScale\n      };\n    },\n    [seriesProps.padding]\n  );\n\n  const getMultiGroupScales = useCallback(\n    (aggregatedData, height: number, width: number) => {\n      const { groupPadding, layout } = seriesProps;\n\n      const groupScale = getGroupScale({\n        dimension: isVertical ? width : height,\n        direction: layout,\n        padding: groupPadding,\n        data: aggregatedData\n      });\n\n      const keyScale = getInnerScale({\n        groupScale: groupScale,\n        padding: seriesProps.padding,\n        data: aggregatedData,\n        prop: isVertical ? 'x' : 'y'\n      });\n\n      return {\n        groupScale,\n        keyScale\n      };\n    },\n    [isVertical, seriesProps]\n  );\n\n  const getKeyScale = useCallback(\n    (aggregatedData, axisProps, isMultiSeries: boolean, width: number) => {\n      return getXScale({\n        width,\n        type: axisProps.type,\n        roundDomains: axisProps.roundDomains,\n        data: aggregatedData,\n        padding: seriesProps.padding,\n        domain: axisProps.domain,\n        isMultiSeries,\n        isDiverging\n      });\n    },\n    [isDiverging, seriesProps]\n  );\n\n  const getValueScale = useCallback(\n    (aggregatedData, axisProps, isMultiSeries: boolean, height: number) => {\n      return getYScale({\n        roundDomains: axisProps.roundDomains,\n        padding: seriesProps.padding,\n        type: axisProps.type,\n        height,\n        data: aggregatedData,\n        domain: axisProps.domain,\n        isMultiSeries,\n        isDiverging\n      });\n    },\n    [isDiverging, seriesProps]\n  );\n\n  const getScalesAndData = useCallback(\n    (chartHeight: number, chartWidth: number) => {\n      const { type, layout } = seriesProps;\n      const isMarimekko = type === 'marimekko';\n      const isGrouped = type === 'grouped';\n      const isStacked =\n        type === 'stacked' ||\n        type === 'stackedNormalized' ||\n        type === 'stackedDiverging';\n      const isMultiSeries = isGrouped || isStacked;\n\n      let aggregatedData;\n      if (isStacked) {\n        let distroType: StackTypes = 'default';\n        if (type === 'stackedNormalized') {\n          distroType = 'expand';\n        } else if (type === 'stackedDiverging') {\n          distroType = 'diverging';\n        }\n\n        aggregatedData = buildBarStackData(\n          data as ChartNestedDataShape[],\n          distroType,\n          layout\n        );\n      } else if (type === 'waterfall') {\n        aggregatedData = buildWaterfall(\n          data as ChartShallowDataShape[],\n          layout,\n          seriesProps.binSize\n        );\n      } else if (isMarimekko) {\n        aggregatedData = buildMarimekkoData(data as ChartNestedDataShape[]);\n      } else if (isGrouped) {\n        aggregatedData = buildNestedChartData(\n          data as ChartNestedDataShape[],\n          false,\n          layout\n        );\n      } else {\n        aggregatedData = buildShallowChartData(\n          data as ChartShallowDataShape[],\n          layout,\n          seriesProps.binSize\n        );\n      }\n\n      let yScale;\n      let xScale;\n      let xScale1;\n\n      if (isVertical) {\n        if (isGrouped) {\n          const { keyScale, groupScale } = getMultiGroupScales(\n            aggregatedData,\n            chartHeight,\n            chartWidth\n          );\n          xScale = groupScale;\n          xScale1 = keyScale;\n        } else if (isMarimekko) {\n          const { keyScale, groupScale } = getMarimekkoGroupScales(\n            aggregatedData,\n            xAxisProps,\n            chartWidth\n          );\n          xScale = groupScale;\n          xScale1 = keyScale;\n        } else {\n          xScale = getKeyScale(\n            aggregatedData,\n            xAxisProps,\n            isMultiSeries,\n            chartWidth\n          );\n        }\n\n        yScale = getValueScale(\n          aggregatedData,\n          yAxisProps,\n          isMultiSeries,\n          chartHeight\n        );\n      } else {\n        if (isGrouped) {\n          const { keyScale, groupScale } = getMultiGroupScales(\n            aggregatedData,\n            chartHeight,\n            chartWidth\n          );\n          yScale = groupScale;\n          xScale1 = keyScale;\n          xScale = getKeyScale(\n            aggregatedData,\n            xAxisProps,\n            isMultiSeries,\n            chartWidth\n          );\n        } else if (isMarimekko) {\n          throw new Error(\n            'Marimekko is currently not supported for horizontal layouts'\n          );\n        } else {\n          xScale = getKeyScale(\n            aggregatedData,\n            xAxisProps,\n            isMultiSeries,\n            chartWidth\n          );\n          yScale = getValueScale(\n            aggregatedData,\n            yAxisProps,\n            isMultiSeries,\n            chartHeight\n          );\n        }\n      }\n\n      return { xScale, xScale1, yScale, aggregatedData };\n    },\n    [\n      getKeyScale,\n      data,\n      getMarimekkoGroupScales,\n      getMultiGroupScales,\n      getValueScale,\n      isVertical,\n      seriesProps,\n      xAxisProps,\n      yAxisProps\n    ]\n  );\n\n  const renderChart = useCallback(\n    (containerProps: ChartContainerChildProps) => {\n      const { chartHeight, chartWidth, id, updateAxes, chartSized } =\n        containerProps;\n      const { xScale, xScale1, yScale, aggregatedData } = getScalesAndData(\n        chartHeight,\n        chartWidth\n      );\n\n      const isCategorical = keyAxisProps.type === 'category';\n      const disableBrush = aggregatedData.length <= 1;\n\n      return (\n        <Fragment>\n          {chartSized && gridlines && (\n            <CloneElement<GridlineSeriesProps>\n              element={gridlines}\n              height={chartHeight}\n              width={chartWidth}\n              yScale={yScale}\n              xScale={xScale}\n              yAxis={yAxisProps}\n              xAxis={xAxisProps}\n            />\n          )}\n          <CloneElement<LinearAxisProps>\n            element={xAxis}\n            height={chartHeight}\n            width={chartWidth}\n            scale={xScale}\n            visibility={chartSized ? 'visible' : 'hidden'}\n            onDimensionsChange={(event) =>\n              updateAxes(isVertical ? 'horizontal' : 'vertical', event)\n            }\n          />\n          <CloneElement<LinearAxisProps>\n            element={yAxis}\n            height={chartHeight}\n            width={chartWidth}\n            scale={yScale}\n            visibility={chartSized ? 'visible' : 'hidden'}\n            onDimensionsChange={(event) =>\n              updateAxes(isVertical ? 'vertical' : 'horizontal', event)\n            }\n          />\n          {secondaryAxis &&\n            secondaryAxis.map((axis, i) => (\n              <CloneElement<LinearAxisProps>\n                key={i}\n                element={axis}\n                height={chartHeight}\n                width={chartWidth}\n                visibility={chartSized ? 'visible' : 'hidden'}\n                onDimensionsChange={(event) => updateAxes('horizontal', event)}\n              />\n            ))}\n          {chartSized && (\n            <CloneElement<ChartBrushProps>\n              disabled={disableBrush}\n              element={brush}\n              height={chartHeight}\n              width={chartWidth}\n              scale={xScale}\n            >\n              <CloneElement<BarSeriesProps>\n                element={series}\n                id={`bar-series-${id}`}\n                data={aggregatedData}\n                height={chartHeight}\n                width={chartWidth}\n                isCategorical={isCategorical}\n                xScale={xScale}\n                xScale1={xScale1}\n                yScale={yScale}\n              />\n            </CloneElement>\n          )}\n        </Fragment>\n      );\n    },\n    [\n      brush,\n      getScalesAndData,\n      gridlines,\n      isVertical,\n      keyAxisProps,\n      secondaryAxis,\n      series,\n      xAxis,\n      yAxis,\n      xAxisProps,\n      yAxisProps\n    ]\n  );\n\n  return (\n    <ChartContainer\n      id={id}\n      width={width}\n      height={height}\n      margins={margins}\n      containerClassName={containerClassName}\n      xAxisVisible={isAxisVisible(xAxisProps)}\n      yAxisVisible={isAxisVisible(yAxisProps)}\n      className={classNames(css.barChart, className, css[seriesProps.type])}\n    >\n      {renderChart}\n    </ChartContainer>\n  );\n};\n\nconst BAR_CHART_DEFAULT_PROPS = {\n  data: [],\n  xAxis: (\n    <LinearXAxis\n      type=\"category\"\n      tickSeries={<LinearXAxisTickSeries tickSize={20} />}\n    />\n  ),\n  yAxis: <LinearYAxis type=\"value\" />,\n  series: <BarSeries />,\n  gridlines: <GridlineSeries />,\n  brush: null\n};\n","import React, { FC, ReactElement } from 'react';\nimport { BarChart, BarChartProps } from './BarChart';\nimport { ChartNestedDataShape } from '@/common/data';\nimport {\n  BarSeriesProps,\n  MARIMEKKO_BAR_SERIES_DEFAULT_PROPS,\n  MarimekkoBarSeries\n} from './BarSeries';\nimport {\n  LinearXAxis,\n  LinearXAxisTickSeries,\n  LinearYAxis,\n  LinearYAxisTickSeries,\n  LinearYAxisTickLabel,\n  LINEAR_Y_AXIS_TICK_LABEL_DEFAULT_PROPS\n} from '@/common/Axis/LinearAxis';\n\nexport interface MarimekkoChartProps extends BarChartProps {\n  data: ChartNestedDataShape[];\n  series: ReactElement<BarSeriesProps, typeof MarimekkoBarSeries>;\n}\n\nexport const MarimekkoChart: FC<Partial<MarimekkoChartProps>> = (props) => (\n  <BarChart\n    {...MARIMEKKO_CHART_DEFAULT_PROPS}\n    {...props}\n    series={\n      <MarimekkoBarSeries\n        {...MARIMEKKO_BAR_SERIES_DEFAULT_PROPS}\n        {...props.series.props}\n      />\n    }\n  />\n);\n\nconst MARIMEKKO_CHART_DEFAULT_PROPS = {\n  xAxis: (\n    <LinearXAxis\n      type=\"category\"\n      tickSeries={<LinearXAxisTickSeries tickSize={15} />}\n    />\n  ),\n  yAxis: (\n    <LinearYAxis\n      type=\"value\"\n      tickSeries={\n        <LinearYAxisTickSeries\n          label={\n            <LinearYAxisTickLabel\n              {...LINEAR_Y_AXIS_TICK_LABEL_DEFAULT_PROPS}\n              rotation={false}\n              format={(data) => `${data * 100}%`}\n            />\n          }\n        />\n      }\n    />\n  )\n};\n","import React, { FC } from 'react';\nimport { BarChart, BarChartProps } from './BarChart';\nimport { ChartNestedDataShape } from '@/common/data';\nimport {\n  STACKED_BAR_SERIES_DEFAULT_PROPS,\n  StackedBarSeries\n} from './BarSeries';\n\nexport interface StackedBarChartProps extends BarChartProps {\n  data: ChartNestedDataShape[];\n}\n\nexport const StackedBarChart: FC<Partial<StackedBarChartProps>> = (props) => (\n  <BarChart\n    {...props}\n    series={\n      <StackedBarSeries\n        {...STACKED_BAR_SERIES_DEFAULT_PROPS}\n        {...props.series.props}\n      />\n    }\n  />\n);\n","import React, { FC } from 'react';\nimport { ChartNestedDataShape } from '@/common/data';\nimport { BarChartProps, BarChart } from './BarChart';\nimport {\n  STACKED_NORMALIZED_BAR_SERIES_DEFAULT_PROPS,\n  StackedNormalizedBarSeries\n} from './BarSeries';\nimport {\n  LinearYAxis,\n  LinearYAxisTickSeries,\n  LinearYAxisTickLabel,\n  LINEAR_Y_AXIS_TICK_LABEL_DEFAULT_PROPS\n} from '@/common/Axis/LinearAxis';\n\nexport interface StackedNormalizedBarChartProps extends BarChartProps {\n  data: ChartNestedDataShape[];\n}\n\nexport const StackedNormalizedBarChart: FC<\n  Partial<StackedNormalizedBarChartProps>\n> = (props) => (\n  <BarChart\n    {...STACKED_NORMALIZED_BAR_CHART_DEFAULT_PROPS}\n    {...props}\n    series={\n      <StackedNormalizedBarSeries\n        {...STACKED_NORMALIZED_BAR_SERIES_DEFAULT_PROPS}\n        {...props.series.props}\n      />\n    }\n  />\n);\n\nconst STACKED_NORMALIZED_BAR_CHART_DEFAULT_PROPS = {\n  yAxis: (\n    <LinearYAxis\n      type=\"value\"\n      tickSeries={\n        <LinearYAxisTickSeries\n          label={\n            <LinearYAxisTickLabel\n              {...LINEAR_Y_AXIS_TICK_LABEL_DEFAULT_PROPS}\n              rotation={false}\n              format={(data) => `${data * 100}%`}\n            />\n          }\n        />\n      }\n    />\n  )\n};\n","import React, { FC } from 'react';\nimport { ChartShallowDataShape } from '@/common/data';\nimport { BarChartProps, BarChart } from './BarChart';\nimport {\n  HISTOGRAM_BAR_SERIES_DEFAULT_PROPS,\n  HistogramBarSeries\n} from './BarSeries';\n\nexport interface HistogramBarChartProps extends BarChartProps {\n  data: ChartShallowDataShape[];\n}\n\nexport const HistogramBarChart: FC<Partial<HistogramBarChartProps>> = (\n  props\n) => (\n  <BarChart\n    {...props}\n    series={\n      <HistogramBarSeries\n        {...HISTOGRAM_BAR_SERIES_DEFAULT_PROPS}\n        {...props.series.props}\n      />\n    }\n  />\n);\n","import React, { FC } from 'react';\nimport { AreaSeries, Line, AreaSeriesProps } from '@/AreaChart';\n\nexport type LineSeriesProps = AreaSeriesProps;\n\nexport const LineSeries: FC<Partial<LineSeriesProps>> = (props) => (\n  <AreaSeries area={null} line={<Line strokeWidth={3} />} {...props} />\n);\n","import React, { FC } from 'react';\nimport { AreaChart, AreaChartProps } from '@/AreaChart';\nimport { LineSeries } from './LineSeries';\n\nexport type LineChartProps = AreaChartProps;\n\nexport const LineChart: FC<Partial<LineChartProps>> = (props) => (\n  <AreaChart series={<LineSeries />} {...props} />\n);\n","import React, { Fragment, ReactElement, FC, useCallback } from 'react';\nimport {\n  geoNaturalEarth1,\n  geoPath,\n  GeoProjection,\n  GeoPath,\n  geoMercator\n} from 'd3-geo';\nimport {\n  ChartProps,\n  ChartContainer,\n  ChartContainerChildProps\n} from '@/common/containers/ChartContainer';\nimport { CloneElement } from 'reablocks';\nimport { MapMarkerProps, MapMarker } from './MapMarker';\nimport { motion } from 'motion/react';\n\ntype MarkerElement = ReactElement<MapMarkerProps, typeof MapMarker>;\n\nexport interface MapProps extends ChartProps {\n  markers?: MarkerElement[];\n  data: any;\n  fill?: string;\n  /**\n   * Determines how the map transforms spherical geometry to planar geometry\n   */\n  projection?: 'mercator' | 'natural-earth';\n}\n\nexport const Map: FC<MapProps> = ({\n  id,\n  width,\n  height,\n  margins,\n  className,\n  containerClassName,\n  markers,\n  data,\n  fill = 'rgba(255, 255, 255, 0.3)',\n  projection = 'mercator'\n}) => {\n  const getProjection = useCallback(\n    ({ chartWidth, chartHeight }: ChartContainerChildProps) => {\n      if (projection === 'natural-earth') {\n        return geoNaturalEarth1()\n          .fitSize([chartWidth, chartHeight], data)\n          .center([0, 0]);\n      }\n      return geoMercator()\n        .fitSize([chartWidth, chartHeight], data)\n        .center([0, 35]);\n    },\n    [data, projection]\n  );\n\n  const renderMarker = useCallback(\n    (marker: MarkerElement, index: number, projection: GeoProjection) => {\n      const position = projection(marker.props.coordinates);\n\n      if (!position) {\n        console.warn(\n          `Position for ${marker.props.coordinates.toString()} not found.`\n        );\n        return null;\n      }\n\n      return (\n        <CloneElement<MapMarkerProps>\n          element={marker}\n          cx={position[0]}\n          cy={position[1]}\n          index={index}\n        />\n      );\n    },\n    []\n  );\n\n  const renderCountry = useCallback(\n    (point, index: number, path: GeoPath) => {\n      // Exclude ATA\n      if (point.id === '010') {\n        return null;\n      }\n\n      return <path key={`path-${index}`} d={path(point)!} fill={fill} />;\n    },\n    [fill]\n  );\n\n  const renderChart = useCallback(\n    (containerProps: ChartContainerChildProps) => {\n      if (!data) {\n        return null;\n      }\n\n      const geoProjection = getProjection(containerProps);\n      const path = geoPath().projection(geoProjection);\n\n      return (\n        <motion.g\n          initial={{\n            opacity: 0\n          }}\n          animate={{\n            opacity: 1\n          }}\n        >\n          {data.features.map((point, index) =>\n            renderCountry(point, index, path)\n          )}\n          {markers &&\n            markers.map((marker, index) => (\n              <Fragment key={`marker-${index}`}>\n                {renderMarker(marker, index, geoProjection)}\n              </Fragment>\n            ))}\n        </motion.g>\n      );\n    },\n    [data, getProjection, markers, renderCountry, renderMarker]\n  );\n\n  return (\n    <ChartContainer\n      id={id}\n      width={width}\n      height={height}\n      margins={margins}\n      containerClassName={containerClassName}\n      xAxisVisible={false}\n      yAxisVisible={false}\n      className={className}\n    >\n      {(props) => renderChart(props)}\n    </ChartContainer>\n  );\n};\n","import React, { Fragment, useRef, useState, FC, useMemo } from 'react';\nimport { Tooltip } from 'reablocks';\nimport { motion } from 'motion/react';\nimport css from './MapMarker.module.css';\nimport { tooltipTheme } from '@/common';\nimport { offset } from '@floating-ui/dom';\n\nexport interface MapMarkerProps {\n  coordinates: [number, number];\n  index: number;\n  cy?: number;\n  cx?: number;\n  size?: number;\n  tooltip?: any;\n  onClick?: () => void;\n}\n\nexport const MapMarker: FC<Partial<MapMarkerProps>> = ({\n  size = 3,\n  index,\n  tooltip,\n  cx,\n  cy,\n  onClick = () => undefined\n}) => {\n  const ref = useRef<SVGCircleElement | null>(null);\n  const [active, setActive] = useState<boolean>(false);\n\n  const ariaLabelData = useMemo(\n    () => (typeof tooltip === 'string' ? tooltip : 'map marker'),\n    [tooltip]\n  );\n\n  return (\n    <Fragment>\n      <motion.circle\n        initial={{\n          opacity: 0,\n          scale: 0.02\n        }}\n        animate={{\n          opacity: 1,\n          scale: 1\n        }}\n        transition={{\n          delay: index! * 0.3\n        }}\n        ref={ref}\n        className={css.marker}\n        cx={cx}\n        cy={cy}\n        r={size}\n        onMouseEnter={() => setActive(true)}\n        onMouseLeave={() => setActive(false)}\n        onClick={onClick}\n        tabIndex={0}\n        aria-label={ariaLabelData}\n        role=\"graphics-document\"\n      />\n      {tooltip && (\n        <Tooltip\n          theme={tooltipTheme}\n          visible={active}\n          reference={ref}\n          modifiers={[offset({ mainAxis: 0, crossAxis: 3 })]}\n          content={tooltip}\n        />\n      )}\n    </Fragment>\n  );\n};\n","import { useEffect, useMemo, useRef } from 'react';\nimport { DEFAULT_TRANSITION } from '@/common/Motion';\nimport { useMotionValue, useSpring } from 'motion/react';\nimport { interpolate } from 'd3-interpolate';\n\nexport const useInterpolate = ({ data, animated, arc }) => {\n  const exit = useMemo(() => {\n    const startAngle = data.startAngle;\n    const endAngle = animated ? startAngle : data.endAngle;\n\n    return {\n      ...data,\n      startAngle,\n      endAngle\n    };\n  }, [data, animated]);\n\n  const prevData = useRef(exit);\n  const d = useMotionValue(exit);\n  const spring = useSpring(0, DEFAULT_TRANSITION);\n\n  useEffect(() => {\n    const interpolator = interpolate(prevData.current, data);\n    const prevSpring = spring.get();\n\n    spring.set(prevSpring + 1);\n\n    return spring.on('change', (v) => {\n      const newData = interpolator(v - prevSpring);\n      prevData.current = newData;\n\n      d.set(arc(newData));\n    });\n  }, [arc, d, data, exit, spring]);\n\n  return d;\n};\n","import React, { ReactElement, useState, FC, useRef, useMemo } from 'react';\nimport chroma from 'chroma-js';\nimport { motion } from 'motion/react';\nimport { CloneElement } from 'reablocks';\nimport { ArcData } from '@/PieChart';\nimport { ChartTooltip, ChartTooltipProps } from '@/common/Tooltip';\nimport { useInterpolate } from './useInterpolate';\nimport { useHoverIntent } from '@/common/utils/useHoverIntent';\nimport { Gradient, GradientProps } from '@/common/Gradient';\nimport { getAriaLabel } from '@/common';\n\nexport interface PieArcMouseEvent {\n  value: ArcData['data'];\n  nativeEvent: React.MouseEvent<SVGPathElement>;\n}\n\nexport interface PieArcProps {\n  /**\n   * Unique id for arc\n   */\n  id?: string;\n\n  /**\n   * The arc generator function returning an arc path\n   * @param data\n   */\n  arc?: (data: ArcData) => string | null;\n\n  /**\n   * Data is the datum passed to the arc generator function\n   */\n  data?: ArcData;\n\n  /**\n   * Color\n   */\n  color?: string;\n\n  /**\n   * Animate\n   */\n  animated?: boolean;\n\n  /**\n   * Tooltip component\n   */\n  tooltip?: ReactElement<ChartTooltipProps, typeof ChartTooltip> | null;\n\n  /**\n   * The cursor type used when hovering\n   */\n  cursor?: string;\n\n  /**\n   * Disable the arc\n   */\n  disabled?: boolean;\n\n  /**\n   * Gradient shades for the bar.\n   */\n  gradient?: ReactElement<GradientProps, typeof Gradient> | null;\n\n  /**\n   * OnClick event handler\n   * @param e Click event\n   */\n  onClick?: (e: PieArcMouseEvent) => void;\n\n  /**\n   * MouseEnter event handler\n   * @param e MouseEnter event\n   */\n  onMouseEnter?: (e: PieArcMouseEvent) => void;\n\n  /**\n   * MouseLeave event handler\n   * @param e MouseLeave event\n   */\n  onMouseLeave?: (e: PieArcMouseEvent) => void;\n}\n\nexport const PieArc: FC<PieArcProps> = ({\n  id,\n  color,\n  data,\n  arc,\n  cursor = 'initial',\n  animated = true,\n  gradient,\n  disabled = false,\n  onClick,\n  onMouseEnter,\n  onMouseLeave,\n  tooltip = <ChartTooltip />\n}) => {\n  const arcRef = useRef<SVGPathElement | null>(null);\n  const d = useInterpolate({ animated, arc, data });\n  const [active, setActive] = useState<boolean>(false);\n  const fill = useMemo(\n    () => (active ? chroma(color).brighten(0.5) : color),\n    [color, active]\n  );\n\n  const { pointerOut, pointerOver } = useHoverIntent({\n    onPointerOver: (event) => {\n      if (!disabled) {\n        setActive(true);\n        onMouseEnter?.({\n          value: data.data,\n          nativeEvent: event as any\n        });\n      }\n    },\n    onPointerOut: (event) => {\n      if (!disabled) {\n        setActive(false);\n        onMouseLeave?.({\n          value: data.data,\n          nativeEvent: event as any\n        });\n      }\n    }\n  });\n\n  const internalFill = useMemo(() => {\n    if (gradient) {\n      return `url(#gradient-${id})`;\n    }\n\n    return color;\n  }, [gradient, id, color]);\n\n  const tooltipData = useMemo(\n    () => ({ y: data.data.data, x: data.data.key }),\n    [data]\n  );\n  const ariaLabelData = useMemo(() => getAriaLabel(tooltipData), [tooltipData]);\n\n  return (\n    <g\n      ref={arcRef}\n      tabIndex={0}\n      aria-label={ariaLabelData}\n      role=\"graphics-document\"\n    >\n      <motion.path\n        role=\"graphics-symbol\"\n        d={d}\n        style={{ cursor }}\n        fill={internalFill}\n        onPointerOver={pointerOver}\n        onPointerOut={pointerOut}\n        onClick={(event) => {\n          if (!disabled) {\n            onClick?.({\n              value: data.data,\n              nativeEvent: event\n            });\n          }\n        }}\n      />\n      {gradient && (\n        <CloneElement<GradientProps>\n          element={gradient}\n          id={`gradient-${id}`}\n          direction=\"horizontal\"\n          color={fill}\n        />\n      )}\n      {!tooltip?.props?.disabled && (\n        <CloneElement<ChartTooltipProps>\n          element={tooltip}\n          visible={!!active}\n          reference={arcRef}\n          value={tooltipData}\n        />\n      )}\n    </g>\n  );\n};\n","type Coordinate = [number, number];\n\n/**\n * Finds intermediate point between two points so that this three points\n * can be nicely connected by two lines. One of this lines must be horizontal\n */\nexport function findBreakPoint(\n  [startX, startY]: Coordinate,\n  [endX, endY]: Coordinate\n): Coordinate {\n  let breakPoint: Coordinate = [0, 0];\n\n  // whether we should create breakpoint near pie or near label\n  const breakPointCondition = (endY - startY) * Math.sign(startY) >= 0;\n\n  if (breakPointCondition) {\n    // extend the line starting from startY till the endY\n    let scale = Math.abs(endY / startY) || 1;\n    const minScale = 1;\n    const maxScale = Math.abs(endX / startX) || 1;\n\n    scale = Math.max(Math.min(maxScale, scale), minScale);\n\n    breakPoint = [startX * scale, endY];\n  } else {\n    // some arbitrary scale to ensure that break point will be placed\n    // at some horizontal distance from the end point\n    let scale = 0.85;\n    const minScale = Math.abs(startX / endX) || 1;\n    const maxScale = 1;\n\n    scale = Math.max(Math.min(maxScale, scale), minScale);\n\n    breakPoint = [endX * scale, startY];\n  }\n\n  return breakPoint;\n}\n","import React, { FC } from 'react';\nimport { motion } from 'motion/react';\nimport { arc } from 'd3-shape';\nimport { ArcData } from '@/PieChart';\nimport { ChartInternalDataTypes } from '@/common/data/types';\nimport { formatValue } from '@/common/utils/formatting';\nimport { findBreakPoint } from './findBreakPoint';\nimport { mergeDefaultProps } from '@/common';\n\nexport interface PieArcLabelProps {\n  /**\n   * Data set by the parent component\n   */\n  data: ArcData;\n\n  /**\n   * A function returning the centroid of the corresponding `PieArc`\n   * @param d PieArcDatum\n   */\n  centroid: (d: ArcData) => [number, number];\n\n  /**\n   * A Formatting function for the label value\n   * @param v The label value\n   */\n  format?: (\n    // have added any because not sure whether this change won't be breaking\n    v: any & ArcData['data'] & { textAnchor: 'start' | 'end' }\n  ) => React.ReactNode;\n\n  /**\n   * FontFill color\n   */\n  fontFill: string;\n\n  /**\n   * FontSize\n   */\n  fontSize: number;\n\n  /**\n   * FontFamily\n   */\n  fontFamily: string;\n\n  /**\n   * Line stroke of the label connector\n   */\n  lineStroke: string;\n\n  /**\n   * Outer radius of the corresponding `PieArc`\n   */\n  outerRadius: number;\n\n  /**\n   * y Padding of the label\n   */\n  padding: string;\n\n  /**\n   * The label position set by the parent component\n   */\n  position: [number, number];\n\n  /**\n   * Width of the label\n   */\n  width?: number;\n\n  /**\n   * Height of the label\n   */\n  height?: number;\n}\n\nconst getTextAnchor = ({ startAngle, endAngle }: ArcData) =>\n  // we could also use the sign of position[0]\n  startAngle + (endAngle - startAngle) / 2 < Math.PI ? 'start' : 'end';\n\nexport const PieArcLabel: FC<Partial<PieArcLabelProps>> = (props) => {\n  const {\n    centroid,\n    data,\n    lineStroke,\n    padding,\n    fontSize,\n    fontFill,\n    format,\n    fontFamily,\n    position,\n    outerRadius,\n    width,\n    height\n  } = mergeDefaultProps(PIE_ARC_LABEL_DEFAULT_PROPS, props);\n\n  const textAnchor = getTextAnchor(data);\n  const text: React.ReactNode = format\n    ? format({ ...data.data, textAnchor })\n    : formatValue(data.data.key as ChartInternalDataTypes);\n  const [posX, posY] = position;\n  // we want to have at least some pixels of straight line (margin)\n  // from pie section till we start to change line direction\n  const minRadius = outerRadius + 4;\n\n  const startPoint = centroid(data);\n  const innerPoint = arc<ArcData>()\n    .innerRadius(minRadius)\n    .outerRadius(minRadius)\n    .centroid(data);\n  const breakPoint = findBreakPoint(innerPoint, position);\n\n  return (\n    <motion.g\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      exit={{ opacity: 0 }}\n      transition={{\n        duration: 0.1\n      }}\n    >\n      {typeof text === 'string' ? (\n        <>\n          <title>{text}</title>\n          <text\n            dy={padding}\n            fill={fontFill}\n            fontSize={fontSize}\n            fontFamily={fontFamily}\n            textAnchor={textAnchor}\n            style={{\n              shapeRendering: 'crispEdges',\n              transform: `translate3d(${posX}px,${posY}px, 0)`\n            }}\n          >\n            {text}\n          </text>\n        </>\n      ) : (\n        <foreignObject\n          width={width}\n          height={height}\n          style={{\n            transform: `translate3d(${\n              textAnchor === 'start' ? posX : posX - width\n            }px,${posY - height / 2}px, 0)`,\n            color: fontFill,\n            fontFamily,\n            fontSize\n          }}\n        >\n          {text}\n        </foreignObject>\n      )}\n      <polyline\n        fill=\"none\"\n        stroke={lineStroke}\n        points={`${startPoint},${innerPoint},${breakPoint},${position}`}\n      />\n    </motion.g>\n  );\n};\n\nexport const PIE_ARC_LABEL_DEFAULT_PROPS = {\n  format: undefined,\n  lineStroke: 'rgba(127,127,127,0.5)',\n  fontFill: '#8F979F',\n  fontSize: 11,\n  fontFamily: 'sans-serif',\n  padding: '.35em',\n  height: 11\n};\n","import { max } from 'd3-array';\nimport { arc } from 'd3-shape';\nimport { ArcData } from '@/PieChart';\n\nconst factor = 1.2;\nconst midAngle = (d: ArcData) => d.startAngle + (d.endAngle - d.startAngle) / 2;\nconst labelVisible = (arc: ArcData) =>\n  arc.endAngle - arc.startAngle > Math.PI / 30;\n\nfunction shouldDisplayLabel(displayAllLabels: boolean, arcData: ArcData) {\n  return displayAllLabels || labelVisible(arcData);\n}\n\nexport function calculateOuterRadius(\n  outerRadius: number,\n  data: ArcData[],\n  point: ArcData,\n  explode: boolean\n) {\n  if (!explode || data === undefined) {\n    return outerRadius;\n  }\n\n  const maxVal = max(data, (d: ArcData) => d.value);\n\n  return (outerRadius * point.value) / maxVal;\n}\n\nexport function calculateCentroid(\n  data: ArcData[],\n  innerRadius: number,\n  outerRadius: number,\n  explode: boolean\n) {\n  return (point: ArcData) => {\n    const newOuter = calculateOuterRadius(outerRadius, data, point, explode);\n\n    return arc<any, ArcData>()\n      .innerRadius(innerRadius)\n      .outerRadius(newOuter)\n      .centroid(point);\n  };\n}\n\nexport function calculateRadius(height, width, label, arcWidth, doughnut) {\n  const minDimension = Math.min(width, height);\n\n  let outerRadius = minDimension / 2;\n  let labelWidth = 0;\n\n  if (label) {\n    labelWidth = label.props.width;\n\n    if (labelWidth) {\n      const outerArcRadius = width / 2 - labelWidth;\n\n      outerRadius = Math.min(outerArcRadius / factor, height / 2);\n    } else {\n      outerRadius = minDimension / 3;\n      labelWidth = width / 2 - outerRadius * factor;\n    }\n  }\n\n  const innerRadius = doughnut ? outerRadius * (1 - arcWidth) : 0;\n\n  return {\n    outerRadius,\n    innerRadius,\n    labelWidth\n  };\n}\n\nexport function calculateInnerArc(\n  data: ArcData[],\n  innerRadius: number,\n  outerRadius: number,\n  cornerRadius: number,\n  padAngle: number,\n  padRadius: number,\n  explode: boolean\n) {\n  return (point: ArcData) => {\n    const newOuter = calculateOuterRadius(outerRadius, data, point, explode);\n\n    return arc<any, ArcData>()\n      .innerRadius(innerRadius)\n      .outerRadius(newOuter)\n      .cornerRadius(cornerRadius)\n      .padRadius(padRadius)\n      .padAngle(padAngle)(point);\n  };\n}\n\nexport function calculateLabelPositions(\n  data: ArcData[],\n  outerRadius: number,\n  minDistance: number,\n  cornerRadius: number,\n  padAngle: number,\n  padRadius: number,\n  displayAllLabels: boolean\n): Array<[number, number] | null> {\n  const outerArcRadius = outerRadius * factor;\n  const outerArc = arc<any, ArcData>()\n    .innerRadius(outerArcRadius)\n    .outerRadius(outerArcRadius)\n    .cornerRadius(cornerRadius)\n    .padAngle(padAngle)\n    .padRadius(padRadius);\n\n  const positions: Array<[number, number] | null> = data.map((d) => {\n    if (!shouldDisplayLabel(displayAllLabels, d)) {\n      return null;\n    }\n\n    const pos = outerArc.centroid(d);\n\n    // reposition the labels to the left/right from outerArc centroid\n    // so that all labels won't collide with pie\n    // when we will vertically reposition them\n    pos[0] = outerArcRadius * (midAngle(d) < Math.PI ? 1 : -1);\n\n    return pos;\n  });\n\n  for (let i = 0; i < data.length - 1; i++) {\n    if (!positions[i]) {\n      continue;\n    }\n\n    const [aPosX, aPosY] = positions[i];\n\n    for (let j = i + 1; j < data.length; j++) {\n      if (!positions[j]) {\n        continue;\n      }\n\n      const [bPosX, bPosY] = positions[j];\n\n      // if they're on the same side (both with - or + sign)\n      if (bPosX * aPosX > 0) {\n        // if they're overlapping\n        const overlap = minDistance - Math.abs(bPosY - aPosY);\n\n        if (overlap > 0) {\n          // push the second up or down\n          positions[j][1] += Math.sign(bPosX) * overlap;\n        }\n      }\n    }\n  }\n\n  return positions;\n}\n","import React, { FC, Fragment, ReactElement, useMemo } from 'react';\nimport { CloneElement } from 'reablocks';\nimport { ArcData } from '@/PieChart';\nimport { PieArc, PieArcProps } from './PieArc';\nimport {\n  PIE_ARC_LABEL_DEFAULT_PROPS,\n  PieArcLabel,\n  PieArcLabelProps\n} from './PieArcLabel';\nimport { getColor, ColorSchemeType } from '@/common/color';\nimport {\n  calculateCentroid,\n  calculateInnerArc,\n  calculateLabelPositions,\n  calculateRadius\n} from './radiusUtils';\nimport { identifier } from 'safe-identifier';\nimport { mergeDefaultProps } from '@/common';\n\nexport interface PieArcSeriesProps {\n  /**\n   * Unique id for the series.\n   */\n  id?: string;\n\n  /**\n   * Animated set by the `PieArc` components.\n   */\n  animated: boolean;\n\n  /**\n   * Outer radius set by the parent component.\n   */\n  outerRadius: number;\n\n  /**\n   * Inner radius set by the parent component.\n   */\n  innerRadius: number;\n\n  /**\n   * Pad Angle between adjacent arcs, see https://github.com/d3/d3-shape#arc_padAngle\n   */\n  padAngle: number;\n\n  /**\n   * Pad Radius between adjacent arcs, see https://github.com/d3/d3-shape#arc_padRadius\n   */\n  padRadius: number;\n\n  /**\n   * Corner Radius of the arcs, see https://github.com/d3/d3-shape#arc_cornerRadius\n   */\n  cornerRadius: number;\n\n  /**\n   * Data set by the parent component.\n   */\n  data: ArcData[];\n\n  /**\n   * Width of the arc\n   */\n  arcWidth: number;\n\n  /**\n   * Doughnut, render as a donut shape\n   */\n  doughnut: boolean;\n\n  /**\n   * Explode: OuterRadius will be adjusted by the data property\n   */\n  explode: boolean;\n\n  /**\n   * Display all labels shows labels even if there is little space\n   */\n  displayAllLabels: boolean;\n\n  /**\n   * Label component\n   */\n  label?: ReactElement<PieArcLabelProps, typeof PieArcLabel> | null;\n\n  /**\n   * Arc Component\n   */\n  arc: ReactElement<PieArcProps, typeof PieArc>;\n\n  /**\n   * Color scheme\n   */\n  colorScheme: ColorSchemeType;\n\n  /**\n   * Height set by the parent component\n   */\n  height: number;\n\n  /**\n   * Width set by the parent component\n   */\n  width: number;\n}\n\nexport const PieArcSeries: FC<Partial<PieArcSeriesProps>> = (props) => {\n  const {\n    doughnut,\n    arcWidth,\n    label,\n    colorScheme,\n    width,\n    displayAllLabels,\n    height,\n    explode,\n    id,\n    animated,\n    cornerRadius,\n    padAngle,\n    padRadius,\n    arc,\n    data\n  } = mergeDefaultProps(PIE_ARC_SERIES_DEFAULT_PROPS, props);\n\n  const labelProps = useMemo(\n    () => ({ ...PIE_ARC_LABEL_DEFAULT_PROPS, ...label?.props }),\n    [label]\n  );\n\n  const { outerRadius, innerRadius, labelWidth } = calculateRadius(\n    height,\n    width,\n    label,\n    arcWidth,\n    doughnut\n  );\n\n  const innerArc = calculateInnerArc(\n    data,\n    innerRadius,\n    outerRadius,\n    cornerRadius,\n    padAngle,\n    padRadius,\n    explode\n  );\n\n  const positions = label\n    ? calculateLabelPositions(\n      data,\n      outerRadius,\n      // 4 is for vertical margins between labels\n      labelProps.height + 4,\n      cornerRadius,\n      padAngle,\n      padRadius,\n      displayAllLabels\n    )\n    : [];\n\n  const centroid = calculateCentroid(data, innerRadius, outerRadius, explode);\n\n  function renderItem(arcData: ArcData, index: number) {\n    const safeKey = identifier(arcData.data.key.toString());\n    const color = getColor({\n      data,\n      colorScheme,\n      point: arcData.data,\n      index\n    });\n\n    return (\n      <Fragment key={safeKey}>\n        {positions[index] && (\n          <CloneElement<PieArcLabelProps>\n            id={id}\n            element={label}\n            data={arcData}\n            centroid={centroid}\n            outerRadius={outerRadius}\n            width={labelWidth}\n            position={positions[index]}\n          />\n        )}\n        <CloneElement<PieArcProps>\n          element={arc}\n          id={`${id}-arc-${safeKey}`}\n          data={arcData}\n          animated={animated}\n          arc={innerArc}\n          color={color}\n        />\n      </Fragment>\n    );\n  }\n\n  return <>{data.map(renderItem)}</>;\n};\n\nexport const PIE_ARC_SERIES_DEFAULT_PROPS = {\n  animated: true,\n  colorScheme: 'cybertron',\n  innerRadius: 0,\n  cornerRadius: 0,\n  padAngle: 0,\n  padRadius: 0,\n  explode: false,\n  displayAllLabels: false,\n  arcWidth: 0.25,\n  label: <PieArcLabel />,\n  arc: <PieArc />\n};\n","import React, { FC, ReactElement, useCallback, useMemo } from 'react';\nimport classNames from 'classnames';\nimport { PieArcDatum } from 'd3-shape';\nimport { pie } from 'd3-shape';\nimport { CloneElement, useId } from 'reablocks';\nimport {\n  ChartProps,\n  ChartContainer,\n  ChartContainerChildProps\n} from '@/common/containers';\nimport { ChartShallowDataShape } from '@/common/data';\nimport { PieArcSeries, PieArcSeriesProps } from './PieArcSeries';\n\nexport type ArcData = PieArcDatum<ChartShallowDataShape>;\n\nexport interface PieChartProps extends ChartProps {\n  /**\n   * Data the chart will receive to render.\n   */\n  data?: ChartShallowDataShape[];\n\n  /**\n   * Whether the chart is disabled.\n   */\n  disabled?: boolean;\n\n  /**\n   * Whether to display labels even if their value has a small display radius.\n   */\n  displayAllLabels?: boolean;\n\n  /**\n   * The series component that renders the arc components.\n   */\n  series?: ReactElement<PieArcSeriesProps, typeof PieArcSeries>;\n}\n\nexport const PieChart: FC<PieChartProps> = ({\n  id,\n  width,\n  height,\n  className,\n  containerClassName,\n  displayAllLabels,\n  data = [],\n  margins = 10,\n  series = <PieArcSeries />\n}) => {\n  const newId = useId(id);\n\n  const internalData = useMemo(() => {\n    const pieLayout = pie<void, ChartShallowDataShape>().value(\n      (d: ChartShallowDataShape) => Number(d.data)\n    );\n\n    // Explode sort doesn't work right...\n    if (!series.props.explode) {\n      pieLayout.sort(null);\n    }\n\n    return pieLayout(data);\n  }, [data, series]);\n\n  const renderSeries = useCallback(\n    ({ chartWidth, chartHeight }: ChartContainerChildProps) => {\n      return (\n        <CloneElement<PieArcSeriesProps>\n          element={series}\n          id={newId}\n          data={internalData}\n          height={chartHeight}\n          width={chartWidth}\n          displayAllLabels={displayAllLabels}\n        />\n      );\n    },\n    [displayAllLabels, internalData, newId, series]\n  );\n\n  return (\n    <ChartContainer\n      id={id}\n      width={width}\n      height={height}\n      margins={margins}\n      containerClassName={containerClassName}\n      xAxisVisible={false}\n      yAxisVisible={false}\n      center={true}\n      className={classNames(className)}\n    >\n      {renderSeries}\n    </ChartContainer>\n  );\n};\n","import { SankeyNode, SankeyLink } from 'd3-sankey';\n\nexport interface NodeExtra {\n  /**\n   * ID of the node. If not provided, the node's index will be used.\n   */\n  id?: string;\n\n  /**\n   * Title of the node.\n   */\n  title: string;\n\n  /**\n   * Color of the node.\n   */\n  color?: string;\n}\n\nexport interface LinkExtra {\n  /**\n   * Color of the link.\n   */\n  color?: string;\n}\n\nexport type SankeyNodeExtra = SankeyNode<NodeExtra, LinkExtra>;\n\nexport type SankeyLinkExtra = SankeyLink<NodeExtra, LinkExtra>;\n\nexport const DEFAULT_COLOR = 'rgba(255, 255, 255, 0.2)';\n\nexport const LABEL_PADDING_PERCENT = 0.1;\n","import React, {\n  FC,\n  Fragment,\n  ReactElement,\n  useCallback,\n  useMemo,\n  useState\n} from 'react';\nimport {\n  sankey,\n  sankeyLeft,\n  sankeyRight,\n  sankeyCenter,\n  sankeyJustify\n} from 'd3-sankey';\nimport {\n  ChartProps,\n  ChartContainer,\n  ChartContainerChildProps\n} from '@/common/containers/ChartContainer';\nimport { CloneElement, useId } from 'reablocks';\n\nimport { getColor, ColorSchemeType } from '@/common/color';\nimport { SankeyNodeProps, SankeyNode } from './SankeyNode';\nimport { SankeyLinkProps, SankeyLink } from './SankeyLink';\nimport {\n  SankeyNodeExtra,\n  SankeyLinkExtra,\n  LABEL_PADDING_PERCENT\n} from './utils';\nimport { SankeyLabelPosition } from './SankeyLabel';\n\nconst JUSTIFICATION = {\n  justify: sankeyJustify,\n  center: sankeyCenter,\n  left: sankeyLeft,\n  right: sankeyRight\n};\n\nexport type Justification = 'justify' | 'center' | 'left' | 'right';\n\nexport type NodeElement = ReactElement<SankeyNodeProps, typeof SankeyNode>;\n\nexport type LinkElement = ReactElement<SankeyLinkProps, typeof SankeyLink>;\n\nexport interface SankeyProps extends ChartProps {\n  /**\n   * Whether to animate the enter/update/exit. Set internally by `SankeyNode` and `SankeyLink`.\n   */\n  animated?: boolean;\n\n  /**\n   * Color scheme for the nodes. Set internally by `SankeyNode`.\n   */\n  colorScheme?: ColorSchemeType;\n\n  /**\n   * The node alignment method.\n   */\n  justification?: Justification;\n\n  /**\n   * Width of the node.\n   */\n  nodeWidth?: number;\n\n  /**\n   * Vertical padding between nodes in the same column.\n   */\n  nodePadding?: number;\n\n  /**\n   * Label position.\n   */\n  labelPosition?: SankeyLabelPosition;\n\n  /**\n   * Sort function for the nodes.\n   *\n   * If sort is specified, sets the node sort method and returns this Sankey generator.\n   * If sort is not specified, returns the current node sort method, which defaults\n   * to undefined, indicating that vertical order of nodes within each column will\n   * be determined automatically by the layout. If sort is null, the order is fixed\n   * by the input. Otherwise, the specified sort function determines the order;\n   * the function is passed two nodes, and must return a value less than 0 if the\n   * first node should be above the second, and a value greater than 0 if the second\n   * node should be above the first, or 0 if the order is not specified.\n   *\n   * Reference: https://github.com/d3/d3-sankey#sankey_nodeSort\n   */\n  nodeSort?: (a: any, b: any) => number;\n\n  /**\n   * Nodes that are rendered.\n   */\n  nodes: NodeElement[];\n\n  /**\n   * Links that are rendered.\n   */\n  links: LinkElement[];\n}\n\nexport const Sankey: FC<SankeyProps> = ({\n  width,\n  height,\n  margins,\n  className,\n  animated = true,\n  links,\n  justification = 'justify',\n  nodeWidth = 15,\n  nodePadding = 10,\n  labelPosition = 'inside',\n  nodeSort,\n  colorScheme,\n  nodes,\n  containerClassName,\n  ...rest\n}) => {\n  const id = useId(rest.id);\n  const [activeNodes, setActiveNodes] = useState<SankeyNodeExtra[]>([]);\n  const [activeLinks, setActiveLinks] = useState<SankeyLinkExtra[]>([]);\n\n  const getNodeColor = useCallback(\n    (node: NodeElement, index: any) => {\n      if (colorScheme) {\n        return getColor({\n          data: nodes,\n          colorScheme,\n          point: nodes[index],\n          index\n        });\n      } else {\n        return node.props.color;\n      }\n    },\n    [colorScheme, nodes]\n  );\n\n  const onNodeActive = useCallback((node: SankeyNodeExtra) => {\n    const activeNodes: SankeyNodeExtra[] = [node];\n    const activeLinks: SankeyLinkExtra[] = [];\n\n    if (node.sourceLinks) {\n      activeLinks.push(...node.sourceLinks);\n      node.sourceLinks.forEach((sourceLink) => {\n        const sourceLinkTarget = sourceLink.target as SankeyNodeExtra;\n        if (sourceLinkTarget.index !== node.index) {\n          activeNodes.push(sourceLinkTarget);\n        }\n      });\n    }\n\n    if (node.targetLinks) {\n      activeLinks.push(...node.targetLinks);\n      node.targetLinks.forEach((targetLink) => {\n        const targetLinkSource = targetLink.source as SankeyNodeExtra;\n        if (targetLinkSource.index !== node.index) {\n          activeNodes.push(targetLinkSource);\n        }\n      });\n    }\n\n    setActiveNodes(activeNodes);\n    setActiveLinks(activeLinks);\n  }, []);\n\n  const onLinkActive = useCallback((link: SankeyLinkExtra) => {\n    const activeNodes: SankeyNodeExtra[] = [\n      link.source as SankeyNodeExtra,\n      link.target as SankeyNodeExtra\n    ];\n    const activeLinks: SankeyLinkExtra[] = [link];\n\n    setActiveNodes(activeNodes);\n    setActiveLinks(activeLinks);\n  }, []);\n\n  const onInactive = useCallback(() => {\n    setActiveNodes([]);\n    setActiveLinks([]);\n  }, []);\n\n  const nodeMap = useMemo(() => {\n    // Not sure what this is for\n    const nodeMap = new Map<string, NodeElement>();\n    nodes.forEach((node: any) => node && nodeMap.set(node.props.title, node));\n\n    return nodeMap;\n  }, [nodes]);\n\n  const renderNode = useCallback(\n    (\n      computedNode: SankeyNodeExtra,\n      index: number,\n      chartWidth: number,\n      node?: NodeElement\n    ) => {\n      const active = activeNodes.some(\n        (node) => node.index === computedNode.index\n      );\n      const disabled = activeNodes.length > 0 && !active;\n      const labelPadding =\n        labelPosition === 'outside' ? LABEL_PADDING_PERCENT : 0;\n\n      return (\n        <CloneElement<SankeyNodeProps>\n          element={node}\n          key={`node-${index}`}\n          active={active}\n          animated={animated}\n          disabled={disabled}\n          chartWidth={chartWidth}\n          onMouseEnter={() => onNodeActive(computedNode)}\n          onMouseLeave={() => onInactive()}\n          labelPosition={labelPosition}\n          labelPadding={labelPadding}\n          {...computedNode}\n        />\n      );\n    },\n    [activeNodes, animated, onInactive, onNodeActive, labelPosition]\n  );\n\n  const renderLink = useCallback(\n    (computedLink: SankeyLinkExtra, index: number) => {\n      const active = activeLinks.some(\n        (link) => link.index === computedLink.index\n      );\n      const disabled = activeLinks.length > 0 && !active;\n\n      return (\n        <CloneElement<SankeyLinkProps>\n          element={links[index]}\n          active={active}\n          animated={animated}\n          key={`link-${index}`}\n          chartId={`sankey-${id}`}\n          disabled={disabled}\n          {...computedLink}\n          onMouseEnter={() => onLinkActive(computedLink)}\n          onMouseLeave={() => onInactive()}\n        />\n      );\n    },\n    [activeLinks, id, animated, links, onInactive, onLinkActive]\n  );\n\n  const getNodesAndLinks = useCallback(\n    (chartWidth: number, chartHeight: number) => {\n      const labelPadding =\n        labelPosition === 'outside' ? LABEL_PADDING_PERCENT : 0;\n      const padding = labelPadding * chartWidth;\n\n      const sankeyChart = sankey()\n        .extent([\n          [1 + padding, 1],\n          [chartWidth - padding, chartHeight]\n        ])\n        .nodeWidth(nodeWidth)\n        .nodePadding(nodePadding)\n        .nodeSort(nodeSort)\n        .nodeAlign(JUSTIFICATION[justification])\n        .nodeId((node: any) => node.id || node.index);\n\n      const nodesCopy: any = nodes.map((node, index) => ({\n        id: node.props.id,\n        title: node.props.title,\n        color: getNodeColor(node, index)\n      }));\n\n      const linksCopy = links.map((link) => ({\n        source: link.props.source,\n        target: link.props.target,\n        value: link.props.value\n      }));\n\n      const { nodes: sankeyNodes, links: sankeyLinks } = sankeyChart({\n        nodes: nodesCopy,\n        links: linksCopy\n      });\n\n      /*\n      // NOTE: Not sure what this is doing\n      sankeyNodes.sort((a, b) => {\n        const aX0 = a && a.x0 ? a.x0 : 0;\n        const aY0 = a && a.y0 ? a.y0 : 0;\n        const bX0 = b && b.x0 ? b.x0 : 0;\n        const bY0 = b && b.y0 ? b.y0 : 0;\n        return aX0 - bX0 || aY0 - bY0;\n      });\n      */\n\n      return { sankeyNodes, sankeyLinks };\n    },\n    [\n      getNodeColor,\n      nodeSort,\n      justification,\n      links,\n      nodePadding,\n      nodeWidth,\n      nodes,\n      labelPosition\n    ]\n  );\n\n  const renderChart = useCallback(\n    ({ id, chartWidth, chartHeight, chartSized }: ChartContainerChildProps) => {\n      if (!chartSized) {\n        return null;\n      }\n\n      const { sankeyNodes, sankeyLinks } = getNodesAndLinks(\n        chartWidth,\n        chartHeight\n      );\n\n      return (\n        <Fragment key=\"group\">\n          {sankeyLinks.map((link, index) =>\n            renderLink(link as SankeyLinkExtra, index)\n          )}\n          {sankeyNodes.map((node: SankeyNodeExtra, index) =>\n            renderNode(node, index, chartWidth, nodeMap.get(node.title))\n          )}\n        </Fragment>\n      );\n    },\n    [getNodesAndLinks, nodeMap, renderLink, renderNode]\n  );\n\n  return (\n    <ChartContainer\n      id={id}\n      width={width}\n      containerClassName={containerClassName}\n      height={height}\n      margins={margins}\n      className={className}\n    >\n      {renderChart}\n    </ChartContainer>\n  );\n};\n","import React, { FC } from 'react';\nimport classNames from 'classnames';\nimport { SankeyNodeExtra } from '@/Sankey/utils';\nimport css from './SankeyLabel.module.css';\nimport ellipsize from 'ellipsize';\n\nexport type SankeyLabelPosition = 'inside' | 'outside';\n\nexport interface SankeyLabelFormatProps {\n  x: number;\n  y: number;\n  textAnchor: string;\n  node: SankeyNodeExtra;\n}\n\nexport interface SankeyLabelProps {\n  /**\n   * Whether the element is active or not. Set internally by `Sankey`.\n   */\n  active: boolean;\n\n  /**\n   * Whether the label is disabled. Set internally by `Sankey`.\n   */\n  disabled: boolean;\n\n  /**\n   * Width of the chart. Set internally by `Sankey`.\n   */\n  chartWidth?: number;\n\n  /**\n   * CSS class to apply.\n   */\n  className?: string;\n\n  /**\n   * Fill color.\n   */\n  fill: string;\n\n  /**\n   * Label position. Set internally by `Sankey`.\n   */\n  position?: SankeyLabelPosition;\n\n  /**\n   * Percentage of total width occupied by labels on\n   * either side of the graph inside the container.\n   * Used for auto-ellipsizing labels\n   * Set internally by `Sankey`.\n   */\n  labelPadding?: number;\n\n  /**\n   * Node data. Set internally by `Sankey`.\n   */\n  node?: SankeyNodeExtra;\n\n  /**\n   * Opacity callback. Used internally by `Sankey`.\n   */\n  opacity: (active: boolean, disabled: boolean) => number;\n\n  /**\n   * Padding between the label and the node.\n   */\n  padding?: string | number;\n\n  /**\n   * Whether to show the label or not.\n   */\n  visible: boolean;\n\n  /**\n   * Width of the node set by the 'Sankey'.\n   */\n  nodeWidth: number;\n\n  /**\n   * Custom formatting for the label.\n   */\n  format?: (value: SankeyLabelFormatProps) => any;\n\n  /**\n   * Specify the number of characters at which the text would be ellipsized.\n   * Defaults to 'auto' based on available width and max cut-off at `LABEL_TRUNCATE_LENGTH=10`\n   */\n  ellipsis?: number | 'none' | 'auto';\n}\n\nconst LABEL_PADDING = 5;\nconst LABEL_TRUNCATE_LENGTH = 10;\n\nexport const SankeyLabel: FC<Partial<SankeyLabelProps>> = ({\n  active = false,\n  chartWidth,\n  className,\n  nodeWidth,\n  disabled,\n  fill = '#fff',\n  format,\n  node,\n  position = 'inside',\n  opacity = (active, disabled) => (active ? 1 : disabled ? 0.2 : 0.9),\n  padding,\n  visible = true,\n  ellipsis = 'auto',\n  labelPadding\n}) => {\n  const x0 = node?.x0 || 0;\n  const x1 = node?.x1 || 0;\n  const y0 = node?.y0 || 0;\n  const y1 = node?.y1 || 0;\n  const paddedWidth = nodeWidth + LABEL_PADDING;\n\n  const width = chartWidth || 0;\n  const showRightSide = x0 < width / 2;\n  let x = showRightSide ? x1 + paddedWidth : x0 - paddedWidth;\n  const y = (y1 + y0) / 2;\n\n  let textAnchor = showRightSide ? 'start' : 'end';\n  if (position === 'outside') {\n    textAnchor = showRightSide ? 'end' : 'start';\n    x = showRightSide ? x1 - paddedWidth : x0 + paddedWidth;\n  }\n\n  if (!visible || !node) {\n    return null;\n  }\n\n  let truncatedTitle = '';\n  if (ellipsis === 'auto') {\n    // This math somehow works for now!\n    const avaialableWidth = showRightSide ? x : width - x;\n    truncatedTitle = ellipsize(\n      node.title,\n      Math.min(LABEL_TRUNCATE_LENGTH, avaialableWidth / (labelPadding * 100))\n    );\n  } else if (ellipsis === 'none') {\n    truncatedTitle = node.title;\n  } else {\n    truncatedTitle = ellipsize(node.title, ellipsis);\n  }\n\n  return (\n    <text\n      className={classNames(css.label, className)}\n      x={x}\n      y={y}\n      dy=\"0.35em\"\n      textAnchor={textAnchor}\n      fill={fill}\n      opacity={opacity(active, disabled)}\n      style={{ padding }}\n    >\n      {typeof format === 'function'\n        ? format({ x, y, textAnchor, node })\n        : truncatedTitle}\n    </text>\n  );\n};\n","import React, {\n  Fragment,\n  ReactElement,\n  useCallback,\n  useState,\n  useMemo,\n  useRef,\n  FC\n} from 'react';\nimport { offset } from '@floating-ui/dom';\nimport classNames from 'classnames';\nimport { motion } from 'motion/react';\nimport { sankeyLinkHorizontal } from 'd3-sankey';\nimport { CloneElement } from 'reablocks';\nimport { formatValue } from '@/common/utils/formatting';\nimport { Tooltip, TooltipProps } from 'reablocks';\nimport {\n  NodeExtra,\n  SankeyNodeExtra,\n  SankeyLinkExtra,\n  DEFAULT_COLOR\n} from '@/Sankey/utils';\nimport css from './SankeyLink.module.css';\nimport { useHoverIntent } from '@/common/utils/useHoverIntent';\nimport { tooltipTheme } from '@/common';\n\nexport interface SankeyLinkProps extends SankeyLinkExtra {\n  /**\n   * Color of the link.\n   */\n  color?: string;\n\n  /**\n   * Whether the element is active or not. Set internally by `Sankey`.\n   */\n  active: boolean;\n\n  /**\n   * Whether to animate the enter/update/exit.\n   */\n  animated: boolean;\n\n  /**\n   * Id of Sankey chart. Set internally by `Sankey`.\n   */\n  chartId: string;\n\n  /**\n   * CSS class to apply.\n   */\n  className?: string;\n\n  /**\n   * Whether the node is disabled. Set internally by `Sankey`.\n   */\n  disabled: boolean;\n\n  /**\n   * Whether to use gradient or not.\n   */\n  gradient?: boolean;\n\n  /**\n   * Opacity callback for the link.\n   */\n  opacity: (active: boolean, disabled: boolean) => number;\n\n  /**\n   * CSS styles to apply.\n   */\n  style?: object;\n\n  /**\n   * Tooltip element.\n   */\n  tooltip?: ReactElement<TooltipProps, typeof Tooltip> | null;\n\n  /**\n   * Width of the link. Set internally by `Sankey`.\n   */\n  width: number;\n\n  /**\n   * Event for when the link is clicked.\n   */\n  onClick?: (event: React.MouseEvent<SVGPathElement>) => void;\n\n  /**\n   * Event for when the link has mouse enter.\n   */\n  onMouseEnter?: (event: React.MouseEvent<SVGPathElement>) => void;\n\n  /**\n   * Event for when the link has mouse leave.\n   */\n  onMouseLeave?: (event: React.MouseEvent<SVGPathElement>) => void;\n}\n\nexport const SankeyLink: FC<Partial<SankeyLinkProps>> = ({\n  gradient = true,\n  index,\n  source,\n  target,\n  tooltip = (\n    <Tooltip theme={tooltipTheme} followCursor={true} modifiers={[offset(5)]} />\n  ),\n  chartId,\n  value,\n  active = false,\n  animated = true,\n  className,\n  disabled = false,\n  opacity = (active, disabled) => (active ? 0.5 : disabled ? 0.1 : 0.35),\n  style,\n  width = 0,\n  color,\n  y0,\n  y1,\n  onClick,\n  onMouseEnter,\n  onMouseLeave\n}) => {\n  const linkSource = source as SankeyNodeExtra;\n  const linkTarget = target as SankeyNodeExtra;\n\n  const [hovered, setHovered] = useState<boolean>(false);\n  const linkRef = useRef<SVGPathElement | null>(null);\n\n  const getLink = useCallback(() => {\n    return { index, y0, y1, value, width, source, target };\n  }, [index, source, target, value, width, y0, y1]);\n\n  const stroke = useMemo(() => {\n    if (gradient) {\n      return `url(#${chartId}-gradient-${index})`;\n    } else if (color) {\n      return color;\n    }\n\n    return DEFAULT_COLOR;\n  }, [chartId, gradient, index, color]);\n\n  const enterProps = useMemo(() => {\n    const path = sankeyLinkHorizontal();\n    const d = path(getLink()) as string;\n    const strokeWidth = Math.max(1, width);\n    return { d, strokeWidth };\n  }, [getLink, width]);\n\n  const exitProps = useMemo(() => {\n    const path = sankeyLinkHorizontal();\n    const d = path({ ...getLink(), width: 0 }) as string;\n    return { d, strokeWidth: 0 };\n  }, [getLink]);\n\n  const renderTooltipContent = useCallback(() => {\n    return (\n      <div className={css.tooltip}>\n        <div className={css.tooltipLabel}>\n          {`${(source as NodeExtra).title} → ${(target as NodeExtra).title}`}\n        </div>\n        <div className={css.tooltipValue}>{formatValue(value)}</div>\n      </div>\n    );\n  }, [source, target, value]);\n\n  const { pointerOut, pointerOver } = useHoverIntent({\n    onPointerOver: (event) => {\n      setHovered(true);\n      onMouseEnter?.(event as any);\n    },\n    onPointerOut: (event) => {\n      setHovered(false);\n      onMouseLeave?.(event as any);\n    }\n  });\n\n  const ariaLabelData = useMemo(\n    () =>\n      `${(source as NodeExtra).title} → ${\n        (target as NodeExtra).title\n      }: ${formatValue(value)}`,\n    [source, target, value]\n  );\n\n  return (\n    <Fragment>\n      {gradient && (\n        <linearGradient\n          id={`${chartId}-gradient-${index}`}\n          gradientUnits=\"userSpaceOnUse\"\n          x1={linkSource.x1}\n          x2={linkTarget.x0}\n        >\n          <stop offset=\"0%\" stopColor={linkSource.color} />\n          <stop offset=\"100%\" stopColor={linkTarget.color} />\n        </linearGradient>\n      )}\n      <g ref={linkRef}>\n        <motion.path\n          key={`sankey-link-${enterProps.d}-${index}`}\n          className={classNames(css.link, className)}\n          style={style}\n          initial={exitProps}\n          animate={enterProps}\n          exit={exitProps}\n          transition={{\n            duration: animated ? 0.5 : 0\n          }}\n          stroke={stroke}\n          strokeOpacity={opacity(active, disabled)}\n          onClick={onClick}\n          onPointerOver={pointerOver}\n          onPointerOut={pointerOut}\n          aria-label={ariaLabelData}\n          role=\"graphics-document\"\n        />\n      </g>\n      {!tooltip?.props?.disabled && (\n        <CloneElement<TooltipProps>\n          content={renderTooltipContent}\n          element={tooltip}\n          visible={hovered}\n          reference={linkRef}\n        />\n      )}\n    </Fragment>\n  );\n};\n","import React, {\n  Fragment,\n  ReactElement,\n  useCallback,\n  FC,\n  useState,\n  useRef,\n  useMemo\n} from 'react';\nimport { offset } from '@floating-ui/dom';\nimport classNames from 'classnames';\nimport { motion } from 'motion/react';\nimport { ChartInternalDataTypes } from '@/common/data';\nimport { CloneElement } from 'reablocks';\nimport { formatValue } from '@/common/utils/formatting';\nimport { Tooltip, TooltipProps } from 'reablocks';\nimport {\n  SankeyLabel,\n  SankeyLabelPosition,\n  SankeyLabelProps\n} from '@/Sankey/SankeyLabel';\nimport { SankeyNodeExtra, DEFAULT_COLOR } from '@/Sankey/utils';\nimport css from './SankeyNode.module.css';\nimport { useHoverIntent } from '@/common/utils/useHoverIntent';\nimport { tooltipTheme } from '@/common';\n\nexport interface SankeyNodeProps extends SankeyNodeExtra {\n  /**\n   * ID of the node. If not provided, the node's index will be used.\n   */\n  id?: string;\n\n  /**\n   * Title of the node.\n   */\n  title: string;\n\n  /**\n   * Color of the node.\n   */\n  color?: string;\n\n  /**\n   * Whether the element is active or not. Set internally by `Sankey`.\n   */\n  active: boolean;\n\n  /**\n   * Whether to animate the enter/update/exit.\n   */\n  animated: boolean;\n\n  /**\n   * Width of the chart. Set internally by `Sankey`.\n   */\n  chartWidth?: number;\n\n  /**\n   * CSS class to apply.\n   */\n  className?: string;\n\n  /**\n   * Whether the node is disabled. Set internally by `Sankey`.\n   */\n  disabled: boolean;\n\n  /**\n   * Label element.\n   */\n  label: ReactElement<SankeyLabelProps, typeof SankeyLabel>;\n\n  /**\n   * Label position. Set internally by `Sankey`.\n   */\n  labelPosition?: SankeyLabelPosition;\n\n  /**\n   * Percentage of total width occupied by labels on\n   * either side of the graph inside the container.\n   * Set internally by `Sankey`.\n   */\n  labelPadding?: number;\n\n  /**\n   * Opacity callback for the node.\n   */\n  opacity: (active: boolean, disabled: boolean) => number;\n\n  /**\n   * CSS styles to apply.\n   */\n  style?: React.StyleHTMLAttributes<SVGRectElement>;\n\n  /**\n   * Tooltip element.\n   */\n  tooltip?: ReactElement<TooltipProps, typeof Tooltip> | null;\n\n  /**\n   * Width of the node. Set internally by `Sankey`.\n   */\n  width?: number;\n\n  /**\n   * Event for when the node is clicked.\n   */\n  onClick?: (event: React.MouseEvent<SVGRectElement>) => void;\n\n  /**\n   * Event for when the node has mouse enter.\n   */\n  onMouseEnter?: (event: React.MouseEvent<SVGRectElement>) => void;\n\n  /**\n   * Event for when the node has mouse leave.\n   */\n  onMouseLeave?: (event: React.MouseEvent<SVGRectElement>) => void;\n}\n\nexport const SankeyNode: FC<Partial<SankeyNodeProps>> = ({\n  active = false,\n  animated = true,\n  chartWidth,\n  label = <SankeyLabel />,\n  labelPosition,\n  labelPadding,\n  tooltip = (\n    <Tooltip theme={tooltipTheme} followCursor={true} modifiers={[offset(5)]} />\n  ),\n  title,\n  value,\n  className,\n  color = DEFAULT_COLOR,\n  disabled = false,\n  index,\n  opacity = (active, disabled) => (active ? 1 : disabled ? 0.2 : 0.9),\n  style,\n  width,\n  x0,\n  x1,\n  y0,\n  y1,\n  id,\n  sourceLinks,\n  targetLinks,\n  onClick,\n  onMouseEnter,\n  onMouseLeave\n}) => {\n  const node = {\n    id,\n    title,\n    color,\n    sourceLinks,\n    targetLinks,\n    value,\n    index,\n    x0,\n    x1,\n    y0,\n    y1\n  };\n  const nodeWidth = width || (x1 && x0 && x1 - x0 > 0 ? x1 - x0 : 0);\n  const nodeHeight = y1 && y0 && y1 - y0 > 0 ? y1 - y0 : 0;\n\n  const [hovered, setHovered] = useState<boolean>(false);\n  const rectRef = useRef<SVGRectElement | null>(null);\n\n  const renderTooltipContent = useCallback(() => {\n    return (\n      <div className={css.tooltip}>\n        <div className={css.tooltipLabel}>{title}</div>\n        <div className={css.tooltipValue}>\n          {formatValue(value as ChartInternalDataTypes)}\n        </div>\n      </div>\n    );\n  }, [title, value]);\n\n  const { pointerOut, pointerOver } = useHoverIntent({\n    onPointerOver: (event) => {\n      setHovered(true);\n      onMouseEnter?.(event as any);\n    },\n    onPointerOut: (event) => {\n      setHovered(false);\n      onMouseLeave?.(event as any);\n    }\n  });\n\n  const ariaLabelData = useMemo(\n    () => `${title}: ${formatValue(value as ChartInternalDataTypes)}`,\n    [title, value]\n  );\n\n  return (\n    <Fragment>\n      <motion.g\n        ref={rectRef}\n        tabIndex={0}\n        aria-label={ariaLabelData}\n        role=\"graphics-document\"\n      >\n        <motion.rect\n          key={`sankey-node-${x0}-${x1}-${y0}-${y1}-${index}`}\n          className={classNames(css.node, className)}\n          fillOpacity={opacity(active, disabled)}\n          style={style}\n          width={nodeWidth}\n          height={nodeHeight}\n          fill={color}\n          initial={{\n            opacity: 0,\n            attrX: x0,\n            attrY: y0\n          }}\n          animate={{\n            opacity: 1,\n            attrX: x0,\n            attrY: y0\n          }}\n          exit={{\n            opacity: 0,\n            attrX: x0,\n            attrY: y0\n          }}\n          transition={{\n            duration: animated ? 0.1 : 0\n          }}\n          onClick={onClick}\n          onPointerOver={pointerOver}\n          onPointerOut={pointerOut}\n        />\n      </motion.g>\n      {label !== null && (\n        <CloneElement<SankeyLabelProps>\n          active={active}\n          element={label}\n          disabled={disabled}\n          chartWidth={chartWidth}\n          nodeWidth={nodeWidth}\n          node={node}\n          position={labelPosition}\n          labelPadding={labelPadding}\n        />\n      )}\n      {!tooltip?.props?.disabled && (\n        <CloneElement<TooltipProps>\n          content={renderTooltipContent}\n          element={tooltip}\n          visible={hovered}\n          reference={rectRef}\n        />\n      )}\n    </Fragment>\n  );\n};\n","import React, { FC } from 'react';\nimport { LineChart, LineChartProps } from '@/LineChart';\nimport { ChartShallowDataShape } from '@/common/data';\nimport { AreaSeries, Line } from '@/AreaChart';\nimport { PointSeries } from '@/AreaChart';\nimport {\n  LinearXAxis,\n  LinearYAxis,\n  LinearYAxisTickSeries,\n  LinearXAxisTickSeries\n} from '@/common/Axis/LinearAxis';\n\nexport interface SparklineChartProps extends LineChartProps {\n  data: ChartShallowDataShape[];\n}\n\nexport const SparklineChart: FC<Partial<SparklineChartProps>> = (props) => (\n  <LineChart\n    gridlines={null}\n    series={\n      <AreaSeries\n        symbols={<PointSeries show=\"hover\" />}\n        interpolation=\"smooth\"\n        markLine={null}\n        area={null}\n        line={<Line strokeWidth={2} />}\n      />\n    }\n    yAxis={\n      <LinearYAxis\n        scaled={true}\n        type=\"value\"\n        axisLine={null}\n        tickSeries={<LinearYAxisTickSeries line={null} label={null} />}\n      />\n    }\n    xAxis={\n      <LinearXAxis\n        type=\"time\"\n        scaled={true}\n        axisLine={null}\n        tickSeries={<LinearXAxisTickSeries line={null} label={null} />}\n      />\n    }\n    {...props}\n  />\n);\n","import React, { FC } from 'react';\nimport { AreaChart, AreaChartProps, AreaSeries, Area, Line } from '@/AreaChart';\nimport { ChartShallowDataShape } from '@/common/data';\nimport { PointSeries } from '@/AreaChart';\nimport {\n  LinearYAxisTickSeries,\n  LinearYAxis,\n  LinearXAxis,\n  LinearXAxisTickSeries\n} from '@/common/Axis/LinearAxis';\nimport { GradientStop, Gradient } from '@/common/Gradient';\nimport { Stripes } from '@/common/Mask';\n\nexport interface AreaSparklineChartProps extends AreaChartProps {\n  data: ChartShallowDataShape[];\n}\n\nexport const AreaSparklineChart: FC<Partial<AreaSparklineChartProps>> = (\n  props\n) => (\n  <AreaChart\n    gridlines={null}\n    series={\n      <AreaSeries\n        symbols={<PointSeries show=\"hover\" />}\n        interpolation=\"smooth\"\n        markLine={null}\n        area={\n          <Area\n            mask={<Stripes />}\n            gradient={\n              <Gradient\n                stops={[\n                  <GradientStop offset=\"10%\" stopOpacity={0} key=\"start\" />,\n                  <GradientStop offset=\"80%\" stopOpacity={1} key=\"stop\" />\n                ]}\n              />\n            }\n          />\n        }\n        line={<Line strokeWidth={3} />}\n      />\n    }\n    yAxis={\n      <LinearYAxis\n        type=\"value\"\n        scaled={true}\n        axisLine={null}\n        tickSeries={<LinearYAxisTickSeries line={null} label={null} />}\n      />\n    }\n    xAxis={\n      <LinearXAxis\n        type=\"time\"\n        scaled={true}\n        axisLine={null}\n        tickSeries={<LinearXAxisTickSeries line={null} label={null} />}\n      />\n    }\n    {...props}\n  />\n);\n","import React, { FC } from 'react';\nimport { BarChart, BarChartProps } from '@/BarChart';\nimport { ChartShallowDataShape } from '@/common/data';\nimport {\n  LinearXAxis,\n  LinearYAxis,\n  LinearYAxisTickSeries,\n  LinearXAxisTickSeries\n} from '@/common/Axis';\nimport { BarSeries } from '@/BarChart';\nimport { schemes } from '@/common/color';\n\nexport interface BarSparklineChartProps extends BarChartProps {\n  data: ChartShallowDataShape[];\n}\n\nexport const BarSparklineChart: FC<Partial<BarSparklineChartProps>> = (\n  props\n) => (\n  <BarChart\n    gridlines={null}\n    series={<BarSeries colorScheme={schemes.cybertron[0]} />}\n    yAxis={\n      <LinearYAxis\n        type=\"value\"\n        axisLine={null}\n        tickSeries={<LinearYAxisTickSeries line={null} label={null} />}\n      />\n    }\n    xAxis={\n      <LinearXAxis\n        type=\"category\"\n        axisLine={null}\n        tickSeries={<LinearXAxisTickSeries line={null} label={null} />}\n      />\n    }\n    {...props}\n  />\n);\n","import React, { FC } from 'react';\nimport { offset } from '@floating-ui/dom';\nimport {\n  StackedBarChart,\n  StackedBarSeries,\n  Bar,\n  BarChartProps,\n  BAR_DEFAULT_PROPS\n} from '@/BarChart';\nimport {\n  Gradient,\n  GradientStop,\n  LinearYAxis,\n  LinearXAxis,\n  LinearYAxisTickSeries,\n  LinearXAxisTickSeries,\n  TooltipArea,\n  ChartTooltip,\n  TooltipTemplate,\n  formatValue,\n  ChartNestedDataShape\n} from '@/common';\n\nexport interface SonarChartProps extends BarChartProps {\n  data: ChartNestedDataShape[];\n}\n\nexport const SonarChart: FC<Partial<SonarChartProps>> = (props) => (\n  <StackedBarChart\n    {...props}\n    margins={0}\n    gridlines={null}\n    series={\n      <StackedBarSeries\n        type=\"stackedDiverging\"\n        colorScheme=\"rgb(17, 207, 247)\"\n        tooltip={\n          <TooltipArea\n            tooltip={\n              <ChartTooltip\n                followCursor={true}\n                modifiers={[offset(5)]}\n                content={(data, color) => (\n                  <TooltipTemplate\n                    color={color}\n                    value={{\n                      x: formatValue(data.x),\n                      y: `${formatValue(Math.abs(data.data[0].y))}`\n                    }}\n                  />\n                )}\n              />\n            }\n          />\n        }\n        bar={[\n          <Bar\n            {...BAR_DEFAULT_PROPS}\n            key=\"first\"\n            width={1}\n            rangeLines={null}\n            minHeight={1}\n            gradient={\n              <Gradient\n                stops={[\n                  <GradientStop offset=\"5%\" stopOpacity={0.7} key=\"start\" />,\n                  <GradientStop offset=\"90%\" stopOpacity={1} key=\"stop\" />\n                ]}\n              />\n            }\n          />,\n          <Bar\n            key=\"second\"\n            width={1}\n            rangeLines={null}\n            minHeight={1}\n            gradient={\n              <Gradient\n                stops={[\n                  <GradientStop offset=\"5%\" stopOpacity={1} key=\"stop\" />,\n                  <GradientStop offset=\"90%\" stopOpacity={0.7} key=\"start\" />\n                ]}\n              />\n            }\n          />\n        ]}\n      />\n    }\n    yAxis={\n      <LinearYAxis\n        type=\"value\"\n        axisLine={null}\n        tickSeries={<LinearYAxisTickSeries line={null} label={null} />}\n      />\n    }\n    xAxis={\n      <LinearXAxis\n        type=\"category\"\n        axisLine={null}\n        tickSeries={<LinearXAxisTickSeries line={null} label={null} />}\n      />\n    }\n  />\n);\n","import React, { ReactElement, useCallback, FC, useMemo, Fragment } from 'react';\nimport { ChartInternalShallowDataShape } from '@/common/data';\nimport {\n  radialArea,\n  curveCardinalClosed,\n  curveLinearClosed,\n  curveCardinal,\n  curveLinear\n} from 'd3-shape';\nimport { RadialGradient, RadialGradientProps } from '@/common/Gradient';\nimport { CloneElement } from 'reablocks';\nimport { RadialInterpolationTypes } from '@/common/utils/interpolation';\nimport { MotionPath, DEFAULT_TRANSITION } from '@/common/Motion';\n\nexport interface RadialAreaProps {\n  /**\n   * Parsed data shape. Set internally by `RadialAreaChart`.\n   */\n  data: ChartInternalShallowDataShape[];\n\n  /**\n   * Whether to animate the enter/update/exit.\n   */\n  animated: boolean;\n\n  /**\n   * D3 scale for X Axis. Set internally by `RadialAreaChart`.\n   */\n  xScale: any;\n\n  /**\n   * D3 scale for Y Axis. Set internally by `RadialAreaChart`.\n   */\n  yScale: any;\n\n  /**\n   * Interpolation for the area. Set internally by `RadialAreaSeries`.\n   */\n  interpolation: RadialInterpolationTypes;\n\n  /**\n   * Color for the area. Set internally by `RadialAreaSeries`.\n   */\n  color: any;\n\n  /**\n   * Id set internally by `RadialAreaSeries`.\n   */\n  id: string;\n\n  /**\n   * The inner radius for the chart center.\n   */\n  innerRadius: number;\n\n  /**\n   * The outer radius for the chart center.\n   */\n  outerRadius: number;\n\n  /**\n   * CSS classes to apply.\n   */\n  className?: string;\n\n  /**\n   * Index of the area in the series. Set internally by `RadialAreaSeries`.\n   */\n  index: number;\n\n  /**\n   * Gradient to apply to the area.\n   */\n  gradient: ReactElement<RadialGradientProps, typeof RadialGradient> | null;\n\n  /**\n   * Whether the curve should be closed. Set to true by deafult\n   */\n  isClosedCurve: boolean;\n}\n\nexport const RadialArea: FC<Partial<RadialAreaProps>> = ({\n  id,\n  data,\n  className,\n  yScale,\n  color,\n  animated,\n  index,\n  outerRadius,\n  xScale,\n  innerRadius,\n  interpolation,\n  gradient = <RadialGradient />,\n  isClosedCurve = true\n}) => {\n  const transition = useMemo(\n    () =>\n      animated\n        ? {\n          ...DEFAULT_TRANSITION,\n          delay: index * 0.05\n        }\n        : {\n          type: false,\n          delay: 0\n        },\n    [animated, index]\n  );\n\n  const getFill = useCallback(\n    (c: string) => {\n      if (!gradient) {\n        return c;\n      }\n\n      return `url(#${id}-gradient)`;\n    },\n    [id, gradient]\n  );\n\n  const getPath = useCallback(\n    (d: ChartInternalShallowDataShape[]) => {\n      const curve =\n        interpolation === 'smooth'\n          ? isClosedCurve\n            ? curveCardinalClosed\n            : curveCardinal\n          : isClosedCurve\n            ? curveLinearClosed\n            : curveLinear;\n\n      const radialFn = radialArea()\n        .angle((dd: any) => xScale(dd.x))\n        .innerRadius((_) => innerRadius!)\n        .outerRadius((d: any) => yScale(d.y))\n        .curve(curve);\n\n      return radialFn(d as any);\n    },\n    [interpolation, isClosedCurve, xScale, innerRadius, yScale]\n  );\n\n  const enter = useMemo(\n    () => ({\n      d: getPath(data!),\n      opacity: 1\n    }),\n    [data, getPath]\n  );\n\n  const exit = useMemo(() => {\n    const [yStart] = yScale.domain();\n    return {\n      d: getPath(data!.map((d) => ({ ...d, y: yStart }))),\n      opacity: 0\n    };\n  }, [data, getPath, yScale]);\n\n  const fill = color(data, 0);\n\n  return (\n    <Fragment>\n      <MotionPath\n        custom={{\n          enter,\n          exit\n        }}\n        transition={transition}\n        pointerEvents=\"none\"\n        className={className}\n        fill={getFill(color)}\n      />\n      {gradient && (\n        <CloneElement<RadialGradientProps>\n          element={gradient}\n          id={`${id}-gradient`}\n          radius={outerRadius}\n          color={fill}\n        />\n      )}\n    </Fragment>\n  );\n};\n","import React, { useCallback, useMemo, FC } from 'react';\nimport { ChartInternalShallowDataShape } from '@/common/data';\nimport {\n  radialLine,\n  curveCardinalClosed,\n  curveLinearClosed,\n  curveCardinal,\n  curveLinear\n} from 'd3-shape';\nimport { RadialInterpolationTypes } from '@/common/utils/interpolation';\nimport { MotionPath, DEFAULT_TRANSITION } from '@/common/Motion';\n\nexport interface RadialLineProps {\n  /**\n   * Parsed data shape. Set internally by `RadialAreaChart`.\n   */\n  data: ChartInternalShallowDataShape[];\n\n  /**\n   * Whether to animate the enter/update/exit. Set internally by `RadialAreaSeries`.\n   */\n  animated: boolean;\n\n  /**\n   * D3 scale for X Axis. Set internally by `RadialAreaChart`.\n   */\n  xScale: any;\n\n  /**\n   * D3 scale for Y Axis. Set internally by `RadialAreaChart`.\n   */\n  yScale: any;\n\n  /**\n   * Color for the area. Set internally by `RadialAreaSeries`.\n   */\n  color: any;\n\n  /**\n   * Interpolation for the area. Set internally by `RadialAreaSeries`.\n   */\n  interpolation: RadialInterpolationTypes;\n\n  /**\n   * Index of the area in the series. Set internally by `RadialAreaSeries`.\n   */\n  index: number;\n\n  /**\n   * Stroke width of the line.\n   */\n  strokeWidth: number;\n\n  /**\n   * CSS classes to apply.\n   */\n  className?: string;\n\n  /**\n   * Internal property to identify if there is a area or not.\n   */\n  hasArea: boolean;\n\n  /**\n   * Whether the curve should be closed. Set to true by deafult\n   */\n  isClosedCurve: boolean;\n}\n\nexport const RadialLine: FC<Partial<RadialLineProps>> = ({\n  xScale,\n  yScale,\n  className,\n  index,\n  hasArea,\n  color,\n  data,\n  interpolation,\n  strokeWidth = 2,\n  animated = true,\n  isClosedCurve = true\n}) => {\n  const fill = color(data, index);\n\n  const getPath = useCallback(\n    (preData: ChartInternalShallowDataShape[]) => {\n      const curve =\n        interpolation === 'smooth'\n          ? isClosedCurve\n            ? curveCardinalClosed\n            : curveCardinal\n          : isClosedCurve\n            ? curveLinearClosed\n            : curveLinear;\n\n      const radialFn = radialLine()\n        .angle((d: any) => xScale(d.x))\n        .radius((d: any) => yScale(d.y))\n        .curve(curve);\n\n      return radialFn(preData as any);\n    },\n    [interpolation, isClosedCurve, xScale, yScale]\n  );\n\n  const transition = useMemo(\n    () =>\n      animated\n        ? {\n          ...DEFAULT_TRANSITION,\n          delay: hasArea ? 0 : index * 0.05\n        }\n        : {\n          type: false,\n          delay: 0\n        },\n    [animated, index, hasArea]\n  );\n\n  const enter = useMemo(\n    () => ({\n      d: getPath(data!),\n      opacity: 1\n    }),\n    [data, getPath]\n  );\n\n  const exit = useMemo(() => {\n    const [yStart] = yScale.domain();\n    return {\n      d: getPath(data!.map((d) => ({ ...d, y: yStart }))),\n      opacity: 0\n    };\n  }, [data, yScale, getPath]);\n\n  return (\n    <MotionPath\n      custom={{\n        enter,\n        exit\n      }}\n      transition={transition}\n      className={className}\n      pointerEvents=\"none\"\n      stroke={fill}\n      fill=\"none\"\n      strokeWidth={strokeWidth}\n    />\n  );\n};\n","import React, { FC, useCallback, Fragment, ReactElement } from 'react';\nimport {\n  ChartShallowDataShape,\n  buildShallowChartData,\n  ChartInternalShallowDataShape\n} from '@/common/data';\nimport { scaleBand, scaleTime } from 'd3-scale';\nimport { getYDomain, getXDomain } from '@/common/utils/domains';\nimport {\n  RadialScatterSeries,\n  RadialScatterSeriesProps\n} from './RadialScatterSeries';\nimport {\n  ChartProps,\n  ChartContainer,\n  ChartContainerChildProps\n} from '@/common/containers';\nimport { CloneElement } from 'reablocks';\nimport { RadialAxisProps, RadialAxis } from '@/common/Axis/RadialAxis';\nimport { getRadialYScale } from '@/common/scales';\nimport { uniqueBy } from '@/common';\n\nexport interface RadialScatterPlotProps extends ChartProps {\n  /**\n   * Data the chart will receive to render.\n   */\n  data: ChartShallowDataShape[];\n\n  /**\n   * The series component that renders the scatter components.\n   */\n  series: ReactElement<RadialScatterSeriesProps, typeof RadialScatterSeries>;\n\n  /**\n   * The radial axis component for the chart.\n   */\n  axis: ReactElement<RadialAxisProps, typeof RadialAxis> | null;\n\n  /**\n   * The inner radius for the chart center.\n   */\n  innerRadius: number;\n}\n\nexport const RadialScatterPlot: FC<Partial<RadialScatterPlotProps>> = ({\n  id,\n  width,\n  height,\n  margins,\n  className,\n  containerClassName,\n  innerRadius,\n  series,\n  axis,\n  data\n}) => {\n  const getScales = useCallback(\n    (\n      aggregatedData: ChartInternalShallowDataShape[],\n      outer: number,\n      inner: number\n    ) => {\n      let xScale;\n      if (axis?.props.type === 'category') {\n        const xDomain = uniqueBy<ChartInternalShallowDataShape>(\n          aggregatedData,\n          (dd) => dd.x\n        );\n        xScale = scaleBand()\n          .range([0, 2 * Math.PI])\n          .domain(xDomain as any[]);\n      } else {\n        const xDomain = getXDomain({ data: aggregatedData });\n        xScale = scaleTime()\n          .range([0, 2 * Math.PI])\n          .domain(xDomain);\n      }\n\n      const yDomain = getYDomain({ data: aggregatedData, scaled: false });\n      const yScale = getRadialYScale(inner, outer, yDomain);\n\n      return {\n        yScale,\n        xScale\n      };\n    },\n    []\n  );\n\n  const renderChart = useCallback(\n    (containerProps: ChartContainerChildProps) => {\n      const { chartWidth, chartHeight, id } = containerProps;\n      const outerRadius = Math.min(chartWidth, chartHeight) / 2;\n      const aggregatedData = buildShallowChartData(data);\n      const { yScale, xScale } = getScales(\n        aggregatedData,\n        outerRadius,\n        innerRadius\n      );\n\n      return (\n        <Fragment>\n          {axis && (\n            <CloneElement<RadialAxisProps>\n              element={axis}\n              xScale={xScale}\n              height={chartHeight}\n              width={chartWidth}\n              innerRadius={innerRadius}\n            />\n          )}\n          <CloneElement<RadialScatterSeriesProps>\n            element={series}\n            id={id}\n            data={aggregatedData}\n            xScale={xScale}\n            yScale={yScale}\n          />\n        </Fragment>\n      );\n    },\n    [data, getScales, innerRadius, series, axis]\n  );\n\n  return (\n    <ChartContainer\n      id={id}\n      containerClassName={containerClassName}\n      width={width}\n      height={height}\n      margins={margins}\n      xAxisVisible={false}\n      yAxisVisible={false}\n      center={true}\n      className={className}\n    >\n      {renderChart}\n    </ChartContainer>\n  );\n};\n","import React, {\n  ReactNode,\n  useRef,\n  Fragment,\n  ReactElement,\n  FC,\n  useState,\n  useMemo\n} from 'react';\nimport { ChartInternalShallowDataShape } from '@/common/data';\nimport { radialLine } from 'd3-shape';\nimport classNames from 'classnames';\nimport { ChartTooltip, ChartTooltipProps } from '@/common/Tooltip';\nimport { CloneElement } from 'reablocks';\nimport { motion } from 'motion/react';\nimport { DEFAULT_TRANSITION } from '@/common/Motion';\nimport { schemes } from '@/common/color';\nimport css from './RadialScatterPoint.module.css';\nimport { getAriaLabel, mergeDefaultProps } from '@/common';\n\nexport interface RadialScatterPointProps {\n  /**\n   * Parsed data shape. Set internally by `RadialScatterPlot`.\n   */\n  data: ChartInternalShallowDataShape;\n\n  /**\n   * Index of the element in the series. Set internally by `RadialScatterSeries`.\n   */\n  index: number;\n\n  /**\n   * Whether the element is active or not. Set internally by `RadialScatterSeries`.\n   */\n  animated: boolean;\n\n  /**\n   * D3 scale for X Axis. Set internally by `RadialScatterPlot`.\n   */\n  xScale: any;\n\n  /**\n   * D3 scale for Y Axis. Set internally by `RadialScatterPlot`.\n   */\n  yScale: any;\n\n  /**\n   * Fill for the element.\n   */\n  fill: string;\n\n  /**\n   * Id set internally by `RadialScatterPlot`.\n   */\n  id: string;\n\n  /**\n   * Color of the circle.\n   */\n  color: any;\n\n  /**\n   * CSS classes to apply.\n   */\n  className?: any;\n\n  /**\n   * Whether the element is active or not. Set internally by `RadialScatterSeries`.\n   */\n  active?: boolean;\n\n  /**\n   * Whether the elment is visiblbe or not.\n   */\n  visible?: (value, index) => boolean;\n\n  /**\n   * Symbol element to render.\n   */\n  symbol: (value) => ReactNode;\n\n  /**\n   * Size of the circle element.\n   */\n  size?: ((d) => number) | number;\n\n  /**\n   * Tooltip element.\n   */\n  tooltip: ReactElement<ChartTooltipProps, typeof ChartTooltip> | null;\n\n  /**\n   * Event for when a symbol is clicked.\n   */\n  onClick: (event) => void;\n\n  /**\n   * Event for when the symbol has mouse enter.\n   */\n  onMouseEnter: (event) => void;\n\n  /**\n   * Event for when the symbol has mouse leave.\n   */\n  onMouseLeave: (event) => void;\n}\n\nexport const RadialScatterPoint: FC<Partial<RadialScatterPointProps>> = (\n  props\n) => {\n  const {\n    size,\n    data,\n    color,\n    index,\n    symbol,\n    active,\n    tooltip,\n    yScale,\n    xScale,\n    animated,\n    className,\n    visible,\n    ...rest\n  } = mergeDefaultProps(RADIAL_SCATTER_POINT_DEFAULT_PROPS, props);\n\n  const ref = useRef<any>(null);\n  const [hovered, setHovered] = useState<boolean>(false);\n\n  function onMouseEnter(event: React.MouseEvent) {\n    setHovered(true);\n    rest.onMouseEnter({\n      value: data,\n      nativeEvent: event\n    });\n  }\n\n  function onMouseLeave(event: React.MouseEvent) {\n    setHovered(false);\n    rest.onMouseLeave({\n      value: data,\n      nativeEvent: event\n    });\n  }\n\n  function onClick(event: React.MouseEvent) {\n    rest.onClick({\n      value: data,\n      nativeEvent: event\n    });\n  }\n\n  function getTranslate(data: ChartInternalShallowDataShape) {\n    const fn = radialLine()\n      .radius((d: any) => yScale(d.y))\n      .angle((d: any) => xScale(d.x));\n\n    // Parse the generated path to get point coordinates\n    // Ref: https://bit.ly/2CnZcPl\n    const path = fn([data] as any);\n\n    if (path) {\n      const [translateX, translateY] = path.slice(1).slice(0, -1).split(',');\n\n      return {\n        translateX: parseFloat(translateX),\n        translateY: parseFloat(translateY)\n      };\n    }\n  }\n\n  function getTransition() {\n    if (animated) {\n      return {\n        ...DEFAULT_TRANSITION,\n        delay: index * 0.005\n      };\n    } else {\n      return {\n        type: false,\n        delay: 0\n      };\n    }\n  }\n\n  const fill = typeof color === 'function' ? color(data, index) : color;\n  const transform = getTranslate(data);\n  const sizeVal = typeof size === 'function' ? size(data) : size;\n  const transition = getTransition();\n\n  const [yStart] = yScale.domain();\n  const exitTransform = getTranslate({ ...data, y: yStart });\n\n  const ariaLabelData = useMemo(() => getAriaLabel(data), [data]);\n\n  const isVisible = visible ? visible?.(data, index) : active;\n\n  return (\n    <Fragment>\n      <motion.g\n        initial={{ ...exitTransform, opacity: 0 }}\n        animate={{ ...transform, opacity: 1 }}\n        exit={{ ...exitTransform, opacity: 0 }}\n        transition={transition}\n        ref={ref}\n        onMouseEnter={onMouseEnter}\n        onMouseLeave={onMouseLeave}\n        onClick={onClick}\n        className={classNames(className, {\n          [css.inactive]: !active,\n          [css.hidden]: !isVisible\n        })}\n        tabIndex={0}\n        aria-label={ariaLabelData}\n        role=\"graphics-document\"\n      >\n        {symbol && symbol(data)}\n        {!symbol && <circle r={sizeVal} fill={fill} />}\n      </motion.g>\n      {tooltip && (\n        <CloneElement<ChartTooltipProps>\n          element={tooltip}\n          visible={hovered}\n          reference={ref}\n          value={data}\n        />\n      )}\n    </Fragment>\n  );\n};\n\nexport const RADIAL_SCATTER_POINT_DEFAULT_PROPS = {\n  size: 3,\n  color: schemes.cybertron[0],\n  tooltip: <ChartTooltip />,\n  active: true,\n  onClick: () => undefined,\n  onMouseEnter: () => undefined,\n  onMouseLeave: () => undefined\n};\n","import React, {\n  useState,\n  FC,\n  Fragment,\n  ReactElement,\n  useEffect,\n  useCallback,\n  useMemo\n} from 'react';\nimport { ChartInternalShallowDataShape } from '@/common/data';\nimport {\n  RADIAL_SCATTER_POINT_DEFAULT_PROPS,\n  RadialScatterPoint,\n  RadialScatterPointProps\n} from './RadialScatterPoint';\nimport { CloneElement } from 'reablocks';\nimport { identifier } from 'safe-identifier';\nimport { RadialValueMarker, RadialValueMarkerProps } from '@/common';\n\nexport interface RadialScatterSeriesProps {\n  /**\n   * Point that is rendered.\n   */\n  point: ReactElement<RadialScatterPointProps, typeof RadialScatterPoint>;\n\n  /**\n   * D3 scale for X Axis. Set internally by `RadialScatterPlot`.\n   */\n  xScale: any;\n\n  /**\n   * D3 scale for Y Axis. Set internally by `RadialScatterPlot`.\n   */\n  yScale: any;\n\n  /**\n   * Parsed data shape. Set internally by `RadialScatterPlot`.\n   */\n  data: ChartInternalShallowDataShape[];\n\n  /**\n   * Id set internally by `RadialScatterPlot`.\n   */\n  id: string;\n\n  /**\n   * Whether to animate the enter/update/exit.\n   */\n  animated: boolean;\n\n  /**\n   * Active element ids to highlight.\n   */\n  activeIds?: string[];\n\n  /**\n   * When to show the point.\n   */\n  show: boolean;\n\n  /**\n   * Value markers line for the chart.\n   */\n  valueMarkers:\n    | ReactElement<RadialValueMarkerProps, typeof RadialValueMarker>[]\n    | null;\n}\n\nexport const RadialScatterSeries: FC<Partial<RadialScatterSeriesProps>> = ({\n  data,\n  point = <RadialScatterPoint />,\n  xScale,\n  yScale,\n  animated = true,\n  activeIds,\n  show = true,\n  valueMarkers\n}) => {\n  const pointProps = useMemo(\n    () => ({ ...RADIAL_SCATTER_POINT_DEFAULT_PROPS, ...(point?.props ?? {}) }),\n    [point?.props]\n  );\n  const [internalActiveIds, setInternalActiveIds] = useState<string[] | null>(\n    activeIds\n  );\n\n  useEffect(() => {\n    setInternalActiveIds(activeIds || []);\n  }, [activeIds]);\n\n  const onMouseEnter = useCallback(\n    ({ value }) => {\n      // Only perform this on unmanaged activations\n      if (!activeIds) {\n        setInternalActiveIds([value.id]);\n      }\n    },\n    [activeIds]\n  );\n\n  const onMouseLeave = useCallback(() => {\n    // Only perform this on unmanaged activations\n    if (!activeIds) {\n      setInternalActiveIds([]);\n    }\n  }, [activeIds]);\n\n  const isVisible = useCallback(() => show, [show]);\n\n  const renderPoint = useCallback(\n    (d: ChartInternalShallowDataShape, index: number) => {\n      let dataId;\n      if (d.id) {\n        dataId = d.id;\n      } else {\n        console.warn(\n          'No \\'id\\' property provided for scatter point; provide one via \\'id\\'.'\n        );\n      }\n\n      const key = identifier(`${dataId || index}`);\n      const active =\n        !(internalActiveIds && internalActiveIds.length) ||\n        internalActiveIds.includes(dataId);\n\n      const pointVisible = pointProps?.visible;\n\n      return (\n        <CloneElement<RadialScatterPointProps>\n          /* Trick to pass isVisible callback, directly cannot be passed when point is a cloned element already */\n          {...(pointVisible ? {} : { visible: isVisible })}\n          element={point}\n          key={key}\n          data={d}\n          index={index}\n          active={active}\n          xScale={xScale}\n          yScale={yScale}\n          animated={animated}\n          onMouseEnter={onMouseEnter}\n          onMouseLeave={onMouseLeave}\n        />\n      );\n    },\n    [\n      isVisible,\n      point,\n      pointProps,\n      internalActiveIds,\n      xScale,\n      yScale,\n      animated,\n      onMouseEnter,\n      onMouseLeave\n    ]\n  );\n\n  const renderValueMarkers = useCallback(\n    () => (\n      <>\n        {valueMarkers?.length &&\n          valueMarkers.map((marker) => (\n            <CloneElement<RadialValueMarkerProps>\n              key={marker.key}\n              element={marker}\n              value={yScale(marker.props.value)}\n            />\n          ))}\n      </>\n    ),\n    [valueMarkers, yScale]\n  );\n\n  return (\n    <Fragment>\n      {renderValueMarkers()}\n      {data.map(renderPoint)}\n    </Fragment>\n  );\n};\n","import React, { useCallback, ReactElement, FC } from 'react';\nimport {\n  RadialScatterSeries,\n  RadialScatterPoint,\n  RadialScatterPointProps\n} from '@/RadialScatterPlot';\nimport { ChartInternalShallowDataShape } from '@/common/data';\nimport { CloneElement } from 'reablocks';\nimport isEqual from 'react-fast-compare';\n\nexport interface RadialPointSeriesProps {\n  /**\n   * Whether the points are animated or not.\n   */\n  animated: boolean;\n\n  /**\n   * Color scheme.\n   */\n  color: any;\n\n  /**\n   * Index of the area in the series. Set internally by `RadialAreaSeries`.\n   */\n  index: number;\n\n  /**\n   * Active values set by parent.\n   */\n  activeValues?: any;\n\n  /**\n   * Parsed data object.\n   */\n  data: ChartInternalShallowDataShape[];\n\n  /**\n   * D3 X-Scale.\n   */\n  yScale: any;\n\n  /**\n   * D3 Y-Scale.\n   */\n  xScale: any;\n\n  /**\n   * When to show the point.\n   */\n  show: boolean | 'hover' | 'first' | 'last';\n\n  /**\n   * Point react component.\n   */\n  point: ReactElement<RadialScatterPointProps, typeof RadialScatterPoint>;\n}\n\nexport const RadialPointSeries: FC<Partial<RadialPointSeriesProps>> = (\n  props\n) => {\n  const { data, xScale, yScale, animated, color, activeValues, show, point } = {\n    ...RADIAL_POINT_SERIES_DEFAULT_PROPS,\n    ...props\n  };\n\n  const isVisible = useCallback(\n    (point: ChartInternalShallowDataShape, index: number): boolean => {\n      const isActive =\n        activeValues && point && isEqual(activeValues.x, point.x);\n\n      if (show === 'hover') {\n        return isActive;\n      } else if (show === 'first') {\n        if (activeValues) {\n          return isActive;\n        } else {\n          return index === 0;\n        }\n      } else if (show === 'last') {\n        if (activeValues) {\n          return isActive;\n        } else {\n          return index === data!.length - 1;\n        }\n      }\n\n      return Boolean(show);\n    },\n    [data, activeValues, show]\n  );\n\n  return (\n    <RadialScatterSeries\n      animated={animated}\n      data={data}\n      xScale={xScale}\n      yScale={yScale}\n      point={\n        <CloneElement<RadialScatterPointProps>\n          element={point}\n          color={color}\n          tooltip={null}\n          visible={isVisible}\n        />\n      }\n    />\n  );\n};\n\nexport const RADIAL_POINT_SERIES_DEFAULT_PROPS = {\n  show: 'hover',\n  point: <RadialScatterPoint />\n};\n","import React, {\n  FC,\n  Fragment,\n  ReactElement,\n  useCallback,\n  useMemo,\n  useState\n} from 'react';\nimport {\n  ChartInternalNestedDataShape,\n  ChartInternalShallowDataShape\n} from '@/common/data';\nimport { getColor, ColorSchemeType, schemes } from '@/common/color';\nimport { CloneElement } from 'reablocks';\nimport { RadialAreaProps, RadialArea } from './RadialArea';\nimport { RadialLine, RadialLineProps } from './RadialLine';\nimport { RadialInterpolationTypes } from '@/common/utils/interpolation';\nimport {\n  RADIAL_POINT_SERIES_DEFAULT_PROPS,\n  RadialPointSeries,\n  RadialPointSeriesProps\n} from './RadialPointSeries';\nimport { TooltipAreaProps, TooltipArea } from '@/common/Tooltip';\nimport {\n  mergeDefaultProps,\n  RadialValueMarker,\n  RadialValueMarkerProps\n} from '@/common';\n\nexport type RadialPointSeriesType = 'standard' | 'grouped';\n\nexport interface RadialAreaSeriesProps {\n  /**\n   * Parsed data shape. Set internally by `RadialAreaChart`.\n   */\n  data: ChartInternalShallowDataShape[];\n\n  /**\n   * The type of the chart.\n   */\n  type?: RadialPointSeriesType;\n\n  /**\n   * Color scheme for the series.\n   */\n  colorScheme: ColorSchemeType;\n\n  /**\n   * The outer radius for the chart center.\n   */\n  outerRadius: number;\n\n  /**\n   * The inner radius for the chart center.\n   */\n  innerRadius: number;\n\n  /**\n   * D3 scale for X Axis. Set internally by `RadialAreaChart`.\n   */\n  xScale: any;\n\n  /**\n   * D3 scale for Y Axis. Set internally by `RadialAreaChart`.\n   */\n  yScale: any;\n\n  /**\n   * Id set internally by `RadialAreaChart`.\n   */\n  id: string;\n\n  /**\n   * interpolation set internally by `RadialAreaChart`.\n   */\n  interpolation: RadialInterpolationTypes;\n\n  /**\n   * Whether to animate the enter/update/exit.\n   */\n  animated: boolean;\n\n  /**\n   * Height of the chart. Set internally by `RadialAreaChart`.\n   */\n  height: number;\n\n  /**\n   * Width of the chart. Set internally by `RadialAreaChart`.\n   */\n  width: number;\n\n  /**\n   * Area that is rendered.\n   */\n  area: ReactElement<RadialAreaProps, typeof RadialArea> | null;\n\n  /**\n   * Line that is rendered.\n   */\n  line: ReactElement<RadialLineProps, typeof RadialLine> | null;\n\n  /**\n   * Symbols used to show points.\n   */\n  symbols: ReactElement<\n    RadialPointSeriesProps,\n    typeof RadialPointSeries\n  > | null;\n\n  /**\n   * Tooltip for the chart area.\n   */\n  tooltip: ReactElement<TooltipAreaProps, typeof TooltipArea>;\n\n  /**\n   * Start angle for the first value.\n   */\n  startAngle?: number;\n\n  /**\n   * End angle for the last value.\n   */\n  endAngle?: number;\n\n  /**\n   * Whether the curve should be closed. Set to true by deafult\n   */\n  isClosedCurve: boolean;\n\n  /**\n   * Value markers line for the chart.\n   */\n  valueMarkers:\n    | ReactElement<RadialValueMarkerProps, typeof RadialValueMarker>[]\n    | null;\n}\n\nexport const RadialAreaSeries: FC<Partial<RadialAreaSeriesProps>> = (props) => {\n  const {\n    area,\n    line,\n    symbols,\n    tooltip,\n    xScale,\n    yScale,\n    data,\n    id,\n    animated,\n    width,\n    height,\n    innerRadius,\n    outerRadius,\n    type,\n    colorScheme,\n    interpolation,\n    startAngle,\n    endAngle,\n    isClosedCurve,\n    valueMarkers\n  } = mergeDefaultProps(RADIAL_AREA_SERIES_DEFAULT_PROPS, props);\n\n  const symbolsProps = useMemo(\n    () => ({\n      ...RADIAL_POINT_SERIES_DEFAULT_PROPS,\n      ...symbols?.props\n    }),\n    [symbols]\n  );\n  const [activeValues, setActiveValues] = useState<any | null>(null);\n  const isMulti = type === 'grouped';\n\n  const getColorForPoint = useCallback(\n    (point: ChartInternalShallowDataShape, index: number) => {\n      const key = Array.isArray(point) ? point?.[0]?.key : point?.key;\n\n      return getColor({\n        colorScheme,\n        data,\n        index,\n        point,\n        key\n      });\n    },\n    [colorScheme, data]\n  );\n\n  const renderArea = useCallback(\n    (point: ChartInternalShallowDataShape[], index = 0) => (\n      <>\n        {area && (\n          <CloneElement<RadialAreaProps>\n            element={area}\n            id={`${id}-radial-area-${index}`}\n            xScale={xScale}\n            yScale={yScale}\n            animated={animated}\n            color={getColorForPoint}\n            index={index}\n            data={point}\n            interpolation={interpolation as RadialInterpolationTypes}\n            outerRadius={outerRadius}\n            innerRadius={innerRadius}\n            isClosedCurve={isClosedCurve}\n          />\n        )}\n        {line && (\n          <CloneElement<RadialLineProps>\n            element={line}\n            xScale={xScale}\n            yScale={yScale}\n            hasArea={area !== null}\n            index={index}\n            animated={animated}\n            interpolation={interpolation as RadialInterpolationTypes}\n            color={getColorForPoint}\n            data={point}\n            isClosedCurve={isClosedCurve}\n          />\n        )}\n      </>\n    ),\n    [\n      animated,\n      area,\n      getColorForPoint,\n      id,\n      innerRadius,\n      interpolation,\n      isClosedCurve,\n      line,\n      outerRadius,\n      xScale,\n      yScale\n    ]\n  );\n\n  const renderSymbols = useCallback(\n    (data: ChartInternalShallowDataShape[], index = 0) => {\n      // Animations are only valid for Area\n      const activeSymbols =\n        (symbols && symbolsProps.activeValues) || activeValues;\n      const isAnimated = area !== undefined && animated && !activeSymbols;\n\n      return (\n        <CloneElement<RadialPointSeriesProps>\n          element={symbols}\n          activeValues={activeValues}\n          xScale={xScale}\n          index={index}\n          yScale={yScale}\n          data={data}\n          animated={isAnimated}\n          color={getColorForPoint}\n        />\n      );\n    },\n    [\n      activeValues,\n      animated,\n      area,\n      getColorForPoint,\n      symbols,\n      symbolsProps,\n      xScale,\n      yScale\n    ]\n  );\n\n  const renderSingleSeries = useCallback(\n    (points: ChartInternalShallowDataShape[]) => (\n      <Fragment>\n        {renderArea(points)}\n        {symbols && renderSymbols(points)}\n      </Fragment>\n    ),\n    [renderArea, renderSymbols, symbols]\n  );\n\n  const renderMultiSeries = useCallback(\n    (points: ChartInternalNestedDataShape[]) => (\n      <Fragment>\n        {points\n          .map((point, index) => (\n            <Fragment key={`${point.key!.toString()}`}>\n              {renderArea(point.data, index)}\n            </Fragment>\n          ))\n          .reverse()}\n        {points\n          .map((point, index) => (\n            <Fragment key={`${point.key!.toString()}`}>\n              {renderSymbols(point.data, index)}\n            </Fragment>\n          ))\n          .reverse()}\n      </Fragment>\n    ),\n    [renderArea, renderSymbols]\n  );\n\n  const renderValueMarkers = useCallback(\n    () => (\n      <>\n        {valueMarkers?.length &&\n          valueMarkers.map((marker) => (\n            <CloneElement<RadialValueMarkerProps>\n              key={marker.key}\n              element={marker}\n              value={yScale(marker.props.value)}\n            />\n          ))}\n      </>\n    ),\n    [valueMarkers, yScale]\n  );\n\n  return (\n    <CloneElement<TooltipAreaProps>\n      element={tooltip}\n      xScale={xScale}\n      yScale={yScale}\n      data={data}\n      height={height}\n      width={width}\n      isRadial={true}\n      innerRadius={innerRadius}\n      outerRadius={outerRadius}\n      color={getColorForPoint}\n      onValueEnter={(event) => setActiveValues(event.value)}\n      onValueLeave={() => setActiveValues(null)}\n      startAngle={startAngle}\n      endAngle={endAngle}\n    >\n      <g clipPath={`url(#${id}-path)`}>\n        {isMulti &&\n          renderMultiSeries(data as unknown as ChartInternalNestedDataShape[])}\n        {!isMulti &&\n          renderSingleSeries(data as ChartInternalShallowDataShape[])}\n        {renderValueMarkers()}\n      </g>\n    </CloneElement>\n  );\n};\n\nexport const RADIAL_AREA_SERIES_DEFAULT_PROPS: Partial<RadialAreaSeriesProps> =\n  {\n    colorScheme: schemes.cybertron,\n    interpolation: 'smooth',\n    type: 'standard',\n    animated: true,\n    area: <RadialArea />,\n    line: <RadialLine />,\n    symbols: <RadialPointSeries />,\n    tooltip: <TooltipArea />,\n    startAngle: 0,\n    endAngle: 2 * Math.PI,\n    isClosedCurve: true\n  };\n","import React, { Fragment, ReactElement, FC, useCallback, useMemo } from 'react';\nimport {\n  ChartInternalShallowDataShape,\n  buildShallowChartData,\n  ChartDataShape,\n  buildNestedChartData,\n  ChartNestedDataShape,\n  ChartShallowDataShape\n} from '@/common/data';\nimport { scaleTime, scaleBand, scalePoint } from 'd3-scale';\nimport { getYDomain, getXDomain } from '@/common/utils/domains';\nimport {\n  ChartProps,\n  ChartContainer,\n  ChartContainerChildProps\n} from '@/common/containers';\nimport { CloneElement } from 'reablocks';\nimport {\n  RADIAL_AREA_SERIES_DEFAULT_PROPS,\n  RadialAreaSeries,\n  RadialAreaSeriesProps\n} from './RadialAreaSeries';\nimport {\n  RADIAL_AXIS_DEFAULT_PROPS,\n  RadialAxis,\n  RadialAxisProps\n} from '@/common/Axis/RadialAxis';\nimport { getRadialYScale } from '@/common/scales/radial';\nimport { uniqueBy } from '@/common/utils';\n\nexport interface RadialAreaChartProps extends ChartProps {\n  /**\n   * Data the chart will receive to render.\n   */\n  data: ChartDataShape[];\n\n  /**\n   * The series component that renders the area components.\n   */\n  series: ReactElement<RadialAreaSeriesProps, typeof RadialAreaSeries>;\n\n  /**\n   * The radial axis component for the chart.\n   */\n  innerRadius: number;\n\n  /**\n   * The inner radius for the chart center.\n   */\n  axis: ReactElement<RadialAxisProps, typeof RadialAxis> | null;\n\n  /**\n   * Start angle for the first value.\n   */\n  startAngle?: number;\n\n  /**\n   * End angle for the last value.\n   */\n  endAngle?: number;\n\n  /**\n   * Whether the curve should be closed. Set to true by deafult\n   */\n  isClosedCurve?: boolean;\n}\n\nexport const RadialAreaChart: FC<Partial<RadialAreaChartProps>> = ({\n  id,\n  width,\n  height,\n  className,\n  data,\n  containerClassName,\n  innerRadius = 0.1,\n  series = <RadialAreaSeries />,\n  axis = <RadialAxis />,\n  margins = 75,\n  startAngle = 0,\n  endAngle = 2 * Math.PI,\n  isClosedCurve = true\n}) => {\n  const seriesProps = useMemo(\n    () => ({ ...RADIAL_AREA_SERIES_DEFAULT_PROPS, ...series.props }),\n    [series.props]\n  );\n  const axisProps = useMemo(\n    () => ({ ...RADIAL_AXIS_DEFAULT_PROPS, ...(axis?.props ?? {}) }),\n    [axis?.props]\n  );\n\n  const getXScale = useCallback(\n    (points) => {\n      const isFullCircle = Math.abs(endAngle - startAngle) >= 2 * Math.PI;\n      let xScale;\n      if (axisProps.type === 'category') {\n        const isMultiSeries = seriesProps.type === 'grouped';\n\n        let xDomain;\n        if (isMultiSeries) {\n          xDomain = uniqueBy<ChartInternalShallowDataShape>(\n            points,\n            (dd) => dd.data,\n            (dd) => dd.x\n          );\n        } else {\n          xDomain = uniqueBy<ChartInternalShallowDataShape>(\n            points,\n            (dd) => dd.x\n          );\n        }\n\n        if (isFullCircle) {\n          xScale = scaleBand()\n            .range([0, 2 * Math.PI])\n            .domain(xDomain as any[]);\n        } else {\n          // scaleBand() excludes the end value from the band:\n          //  https://www.d3indepth.com/scales/#scaleband\n          xScale = scalePoint()\n            .range([startAngle, endAngle])\n            .domain(xDomain as any[]);\n        }\n      } else {\n        const xDomain = getXDomain({ data: points });\n\n        xScale = scaleTime().range([startAngle, endAngle]).domain(xDomain);\n      }\n\n      return xScale;\n    },\n    [axisProps.type, endAngle, seriesProps.type, startAngle]\n  );\n\n  const getScales = useCallback(\n    (preData: ChartDataShape[], outerRadius: number, innerRadius: number) => {\n      const isMultiSeries = seriesProps.type === 'grouped';\n\n      let d;\n      if (isMultiSeries) {\n        d = buildNestedChartData(preData as ChartNestedDataShape[], true);\n      } else {\n        d = buildShallowChartData(preData as ChartShallowDataShape[]);\n      }\n\n      const xScale = getXScale(d);\n      const yDomain = getYDomain({ data: d, scaled: false });\n      const yScale = getRadialYScale(innerRadius, outerRadius, yDomain);\n\n      return {\n        yScale,\n        xScale,\n        result: d\n      };\n    },\n    [getXScale, seriesProps.type]\n  );\n\n  const renderChart = useCallback(\n    (containerProps: ChartContainerChildProps) => {\n      const { chartWidth, chartHeight, id } = containerProps;\n      const outerRadius = Math.min(chartWidth, chartHeight) / 2;\n      const { yScale, xScale, result } = getScales(\n        data!,\n        outerRadius,\n        innerRadius\n      );\n\n      return (\n        <Fragment>\n          {axis && (\n            <CloneElement<RadialAxisProps>\n              element={axis}\n              xScale={xScale}\n              height={chartHeight}\n              width={chartWidth}\n              innerRadius={innerRadius}\n              startAngle={startAngle}\n              endAngle={endAngle}\n            />\n          )}\n          <CloneElement<RadialAreaSeriesProps>\n            element={series}\n            id={id}\n            data={result}\n            xScale={xScale}\n            yScale={yScale}\n            height={chartHeight}\n            width={chartWidth}\n            outerRadius={outerRadius}\n            innerRadius={innerRadius}\n            startAngle={startAngle}\n            endAngle={endAngle}\n            isClosedCurve={isClosedCurve}\n          />\n        </Fragment>\n      );\n    },\n    [\n      getScales,\n      data,\n      innerRadius,\n      axis,\n      startAngle,\n      endAngle,\n      series,\n      isClosedCurve\n    ]\n  );\n\n  return (\n    <ChartContainer\n      id={id}\n      width={width}\n      height={height}\n      containerClassName={containerClassName}\n      margins={margins}\n      xAxisVisible={false}\n      yAxisVisible={false}\n      center={true}\n      className={className}\n    >\n      {renderChart}\n    </ChartContainer>\n  );\n};\n","const pi = Math.PI,\n    tau = 2 * pi,\n    epsilon = 1e-6,\n    tauEpsilon = tau - epsilon;\n\nfunction append(strings) {\n  this._ += strings[0];\n  for (let i = 1, n = strings.length; i < n; ++i) {\n    this._ += arguments[i] + strings[i];\n  }\n}\n\nfunction appendRound(digits) {\n  let d = Math.floor(digits);\n  if (!(d >= 0)) throw new Error(`invalid digits: ${digits}`);\n  if (d > 15) return append;\n  const k = 10 ** d;\n  return function(strings) {\n    this._ += strings[0];\n    for (let i = 1, n = strings.length; i < n; ++i) {\n      this._ += Math.round(arguments[i] * k) / k + strings[i];\n    }\n  };\n}\n\nexport class Path {\n  constructor(digits) {\n    this._x0 = this._y0 = // start of current subpath\n    this._x1 = this._y1 = null; // end of current subpath\n    this._ = \"\";\n    this._append = digits == null ? append : appendRound(digits);\n  }\n  moveTo(x, y) {\n    this._append`M${this._x0 = this._x1 = +x},${this._y0 = this._y1 = +y}`;\n  }\n  closePath() {\n    if (this._x1 !== null) {\n      this._x1 = this._x0, this._y1 = this._y0;\n      this._append`Z`;\n    }\n  }\n  lineTo(x, y) {\n    this._append`L${this._x1 = +x},${this._y1 = +y}`;\n  }\n  quadraticCurveTo(x1, y1, x, y) {\n    this._append`Q${+x1},${+y1},${this._x1 = +x},${this._y1 = +y}`;\n  }\n  bezierCurveTo(x1, y1, x2, y2, x, y) {\n    this._append`C${+x1},${+y1},${+x2},${+y2},${this._x1 = +x},${this._y1 = +y}`;\n  }\n  arcTo(x1, y1, x2, y2, r) {\n    x1 = +x1, y1 = +y1, x2 = +x2, y2 = +y2, r = +r;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(`negative radius: ${r}`);\n\n    let x0 = this._x1,\n        y0 = this._y1,\n        x21 = x2 - x1,\n        y21 = y2 - y1,\n        x01 = x0 - x1,\n        y01 = y0 - y1,\n        l01_2 = x01 * x01 + y01 * y01;\n\n    // Is this path empty? Move to (x1,y1).\n    if (this._x1 === null) {\n      this._append`M${this._x1 = x1},${this._y1 = y1}`;\n    }\n\n    // Or, is (x1,y1) coincident with (x0,y0)? Do nothing.\n    else if (!(l01_2 > epsilon));\n\n    // Or, are (x0,y0), (x1,y1) and (x2,y2) collinear?\n    // Equivalently, is (x1,y1) coincident with (x2,y2)?\n    // Or, is the radius zero? Line to (x1,y1).\n    else if (!(Math.abs(y01 * x21 - y21 * x01) > epsilon) || !r) {\n      this._append`L${this._x1 = x1},${this._y1 = y1}`;\n    }\n\n    // Otherwise, draw an arc!\n    else {\n      let x20 = x2 - x0,\n          y20 = y2 - y0,\n          l21_2 = x21 * x21 + y21 * y21,\n          l20_2 = x20 * x20 + y20 * y20,\n          l21 = Math.sqrt(l21_2),\n          l01 = Math.sqrt(l01_2),\n          l = r * Math.tan((pi - Math.acos((l21_2 + l01_2 - l20_2) / (2 * l21 * l01))) / 2),\n          t01 = l / l01,\n          t21 = l / l21;\n\n      // If the start tangent is not coincident with (x0,y0), line to.\n      if (Math.abs(t01 - 1) > epsilon) {\n        this._append`L${x1 + t01 * x01},${y1 + t01 * y01}`;\n      }\n\n      this._append`A${r},${r},0,0,${+(y01 * x20 > x01 * y20)},${this._x1 = x1 + t21 * x21},${this._y1 = y1 + t21 * y21}`;\n    }\n  }\n  arc(x, y, r, a0, a1, ccw) {\n    x = +x, y = +y, r = +r, ccw = !!ccw;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(`negative radius: ${r}`);\n\n    let dx = r * Math.cos(a0),\n        dy = r * Math.sin(a0),\n        x0 = x + dx,\n        y0 = y + dy,\n        cw = 1 ^ ccw,\n        da = ccw ? a0 - a1 : a1 - a0;\n\n    // Is this path empty? Move to (x0,y0).\n    if (this._x1 === null) {\n      this._append`M${x0},${y0}`;\n    }\n\n    // Or, is (x0,y0) not coincident with the previous point? Line to (x0,y0).\n    else if (Math.abs(this._x1 - x0) > epsilon || Math.abs(this._y1 - y0) > epsilon) {\n      this._append`L${x0},${y0}`;\n    }\n\n    // Is this arc empty? We’re done.\n    if (!r) return;\n\n    // Does the angle go the wrong way? Flip the direction.\n    if (da < 0) da = da % tau + tau;\n\n    // Is this a complete circle? Draw two arcs to complete the circle.\n    if (da > tauEpsilon) {\n      this._append`A${r},${r},0,1,${cw},${x - dx},${y - dy}A${r},${r},0,1,${cw},${this._x1 = x0},${this._y1 = y0}`;\n    }\n\n    // Is this arc non-empty? Draw an arc!\n    else if (da > epsilon) {\n      this._append`A${r},${r},0,${+(da >= pi)},${cw},${this._x1 = x + r * Math.cos(a1)},${this._y1 = y + r * Math.sin(a1)}`;\n    }\n  }\n  rect(x, y, w, h) {\n    this._append`M${this._x0 = this._x1 = +x},${this._y0 = this._y1 = +y}h${w = +w}v${+h}h${-w}Z`;\n  }\n  toString() {\n    return this._;\n  }\n}\n\nexport function path() {\n  return new Path;\n}\n\n// Allow instanceof d3.path\npath.prototype = Path.prototype;\n\nexport function pathRound(digits = 3) {\n  return new Path(+digits);\n}\n","import React, { useEffect, useRef } from 'react';\nimport { motion, useMotionValue, useSpring } from 'motion/react';\nimport { interpolate } from 'd3-interpolate';\nimport { DEFAULT_TRANSITION } from '@/common/Motion';\n\nexport const MotionBar = ({ custom, transition, arc, ...rest }) => {\n  const d = useMotionValue('');\n  const currentYRef = useRef(custom.exit.y);\n  const spring = useSpring(0, DEFAULT_TRANSITION);\n\n  useEffect(() => {\n    const interpolator = interpolate(currentYRef.current, custom.enter.y);\n    const prevSpring = spring.get();\n    let timeoutId;\n\n    if (transition?.delay) {\n      timeoutId = setTimeout(() => {\n        spring.set(prevSpring + 1);\n      }, transition.delay * 1000);\n    } else {\n      spring.set(prevSpring + 1);\n    }\n\n    const unsubscribe = spring.onChange((v) => {\n      currentYRef.current = interpolator(v - prevSpring);\n      d.set(arc({ ...custom.enter, y: currentYRef.current }));\n    });\n\n    return () => {\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n      }\n      unsubscribe();\n    };\n  }, [arc, custom.enter, d, spring, transition.delay]);\n\n  const { d: enterD, ...enterRest } = custom.enter;\n  const { d: exitD, ...exitRest } = custom.exit;\n\n  return (\n    <motion.path\n      {...rest}\n      initial={exitRest}\n      exit={exitRest}\n      animate={enterRest}\n      transition={transition}\n      d={transition.type !== false ? d : enterD}\n      tabIndex={0}\n    />\n  );\n};\n","import React, { FC } from 'react';\nimport { motion } from 'motion/react';\n\nexport interface RadialGuideBarProps {\n  active: boolean;\n  path: string;\n  fill?: string;\n  opacity?: number;\n}\n\nexport const RadialGuideBar: FC<Partial<RadialGuideBarProps>> = ({\n  active,\n  path,\n  fill = '#eee',\n  opacity = 0.2\n}) => (\n  <motion.path\n    d={path}\n    fill={fill}\n    pointerEvents=\"none\"\n    initial=\"hidden\"\n    animate={active ? 'visible' : 'hidden'}\n    variants={{\n      hidden: { opacity: 0 },\n      visible: { opacity }\n    }}\n  />\n);\n","import React, {\n  FC,\n  Fragment,\n  ReactElement,\n  useCallback,\n  useMemo,\n  useRef\n} from 'react';\nimport { ChartInternalShallowDataShape } from '@/common/data';\nimport { arc } from 'd3-shape';\nimport { Gradient } from '@/common/Gradient';\nimport chroma from 'chroma-js';\nimport { path } from 'd3-path';\nimport { DEFAULT_TRANSITION } from '@/common/Motion';\nimport { MotionBar } from './MotionBar';\nimport { RadialGuideBar, RadialGuideBarProps } from './RadialGuideBar';\nimport { CloneElement } from 'reablocks';\nimport { scaleBand } from 'd3-scale';\n\nexport interface RadialBarProps {\n  /**\n   * Parsed data shape. Set internally by `RadialBarChart`.\n   */\n  data: ChartInternalShallowDataShape;\n\n  /**\n   * The inner radius for the chart center.\n   */\n  innerRadius: number;\n\n  /**\n   * Index of the element in the series. Set internally by `RadialBarSeries`.\n   */\n  index: number;\n\n  /**\n   * Whether the element is active or not. Set internally by `RadialBarSeries`.\n   */\n  animated: boolean;\n\n  /**\n   * D3 scale for X Axis. Set internally by `RadialBarChart`.\n   */\n  xScale: any;\n\n  /**\n   * D3 scale for Y Axis. Set internally by `RadialBarChart`.\n   */\n  yScale: any;\n\n  /**\n   * Color of the bar.\n   */\n  color: any;\n\n  /**\n   * Whether to use gradient or not.\n   */\n  gradient: boolean;\n\n  /**\n   * Id set internally by `RadialBarSeries`.\n   */\n  id: string;\n\n  /**\n   * Total number of bars used for animation. Set internally by `RadialBarSeries`.\n   */\n  barCount: number;\n\n  /**\n   * Total number of nested bars inside each group. Set internally by `RadialBarSeries`.\n   */\n  innerBarCount: number;\n\n  /**\n   * Index of the group. Set internally by `BarSeries`.\n   */\n  groupIndex?: number;\n\n  /**\n   * CSS classes to apply.\n   */\n  className?: string;\n\n  /**\n   * Whether the bar is curved or not.\n   */\n  curved: boolean;\n\n  /**\n   * Guide bar component.\n   */\n  guide: ReactElement<RadialGuideBarProps, typeof RadialGuideBar> | null;\n\n  /**\n   * Active caused by hover.\n   */\n  active: boolean;\n\n  /**\n   * Event for when a symbol is clicked.\n   */\n  onClick: (event) => void;\n\n  /**\n   * Event for when the symbol has mouse enter.\n   */\n  onMouseEnter: (event) => void;\n\n  /**\n   * Event for when the symbol has mouse leave.\n   */\n  onMouseLeave: (event) => void;\n}\n\nexport const RadialBar: FC<Partial<RadialBarProps>> = ({\n  animated,\n  innerRadius,\n  xScale,\n  yScale,\n  curved = false,\n  id,\n  gradient = true,\n  barCount,\n  innerBarCount,\n  groupIndex,\n  className,\n  data,\n  active,\n  guide = <RadialGuideBar />,\n  index,\n  color,\n  onClick = () => undefined,\n  onMouseEnter = () => undefined,\n  onMouseLeave = () => undefined\n}) => {\n  const previousEnter = useRef<any | null>(null);\n  const fill = color(data, index);\n  const currentColorShade = active ? chroma(fill).brighten(0.5) : fill;\n\n  const transition = useMemo(() => {\n    if (animated) {\n      return {\n        ...DEFAULT_TRANSITION,\n        delay: (index / barCount) * 0.9\n      };\n    } else {\n      return {\n        type: false,\n        delay: 0\n      };\n    }\n  }, [animated, barCount, index]);\n\n  const getFill = useCallback(\n    (color: string) => {\n      if (!gradient) {\n        return color;\n      }\n\n      return `url(#${id}-gradient)`;\n    },\n    [gradient, id]\n  );\n\n  const getArc = useCallback(\n    (data: ChartInternalShallowDataShape) => {\n      const outerRadius = yScale(data.y);\n\n      if (curved) {\n        const startAngle = xScale(data.x);\n        const endAngle = startAngle + xScale.bandwidth();\n\n        const arcFn = arc()\n          .innerRadius(innerRadius)\n          .outerRadius(outerRadius)\n          .startAngle(startAngle)\n          .endAngle(endAngle)\n          .padAngle(0.01)\n          .padRadius(innerRadius);\n\n        return arcFn(data as any);\n      } else {\n        const isMultiSeries = groupIndex !== undefined;\n        const xScaleDomain = xScale.domain();\n        const xScaleRange = xScale.range();\n        const isFullCircle =\n          Math.abs(xScaleRange[1] - xScaleRange[0]) >= 2 * Math.PI;\n\n        let xScaleBandwidth;\n        let rotateMid;\n        let startAngle;\n        let endAngle;\n        if (isFullCircle) {\n          xScaleBandwidth = xScale.bandwidth();\n\n          // Align groups centrally about the label axis\n          rotateMid =\n            isMultiSeries && xScaleBandwidth ? xScaleBandwidth / 2 : 0;\n          startAngle = xScale(data.x) - Math.PI * 0.5 - rotateMid;\n          endAngle = startAngle + xScaleBandwidth;\n        } else {\n          xScaleBandwidth = scaleBand()\n            .domain(xScaleDomain)\n            .range(xScaleRange)\n            .bandwidth();\n          rotateMid =\n            isMultiSeries && xScaleBandwidth ? xScaleBandwidth / 2 : 0;\n\n          if (index === 0) {\n            // Squeeze in the first group aligning the first bar in the group with the start margin\n            startAngle = xScale(data.x) - Math.PI * 0.5;\n            endAngle = startAngle + xScaleBandwidth - rotateMid;\n          } else if (index === barCount - 1) {\n            // Squeeze in the last group aligning the last bar in the group with the end margin\n            endAngle = xScaleRange[1] - Math.PI * 0.5;\n            startAngle = endAngle - xScaleBandwidth + rotateMid;\n          } else {\n            // Other groups are center aligned with the label axis\n            startAngle = xScale(data.x) - Math.PI * 0.5 - rotateMid;\n            endAngle = startAngle + xScaleBandwidth;\n          }\n        }\n\n        const innerAngleDistance = endAngle - startAngle;\n        const arcLength = innerRadius * innerAngleDistance;\n        const outerAngleDistance = arcLength / outerRadius;\n        const halfAngleDistanceDelta =\n          (innerAngleDistance - outerAngleDistance) / 2;\n\n        const innerDiff = innerAngleDistance / innerBarCount;\n        const innerStart = isMultiSeries\n          ? startAngle + groupIndex * innerDiff\n          : startAngle;\n        const innerEnd = isMultiSeries ? innerStart + innerDiff : endAngle;\n        const outerDiff = outerAngleDistance / innerBarCount;\n        const halfAngleDiffDistanceDelta = isMultiSeries\n          ? (innerDiff - outerDiff) / 2\n          : halfAngleDistanceDelta;\n\n        const pathFn = path();\n        pathFn.arc(0, 0, innerRadius, innerStart, innerEnd);\n        pathFn.arc(\n          0,\n          0,\n          outerRadius,\n          innerEnd - halfAngleDiffDistanceDelta,\n          innerStart + halfAngleDiffDistanceDelta,\n          true\n        );\n\n        return pathFn.toString();\n      }\n    },\n    [\n      barCount,\n      curved,\n      groupIndex,\n      index,\n      innerBarCount,\n      innerRadius,\n      xScale,\n      yScale\n    ]\n  );\n\n  const renderBar = useCallback(\n    (color: string) => {\n      const fill = getFill(color);\n\n      // Track previous props\n      const prev = previousEnter.current\n        ? { ...previousEnter.current }\n        : undefined;\n      previousEnter.current = { ...data };\n\n      const [yStart, yEnd] = yScale.domain();\n      const exit = {\n        ...data,\n        y: yStart\n      };\n\n      const guidePath = getArc({\n        ...data,\n        y: yEnd\n      }) as string;\n\n      return (\n        <Fragment>\n          {guide && (\n            <CloneElement<RadialGuideBarProps>\n              element={guide}\n              active={active}\n              path={guidePath}\n            />\n          )}\n          <MotionBar\n            arc={getArc}\n            custom={{\n              enter: data,\n              exit,\n              previousEnter: prev\n            }}\n            transition={transition}\n            fill={fill}\n            className={className}\n            onMouseEnter={(event) =>\n              onMouseEnter?.({\n                value: data,\n                nativeEvent: event\n              })\n            }\n            onMouseLeave={(event) =>\n              onMouseLeave?.({\n                value: data,\n                nativeEvent: event\n              })\n            }\n            onClick={(event) =>\n              onClick?.({\n                value: data,\n                nativeEvent: event\n              })\n            }\n          />\n        </Fragment>\n      );\n    },\n    [\n      active,\n      className,\n      data,\n      getArc,\n      getFill,\n      guide,\n      onClick,\n      onMouseEnter,\n      onMouseLeave,\n      transition,\n      yScale\n    ]\n  );\n\n  return (\n    <Fragment>\n      {renderBar(currentColorShade)}\n      {gradient && <Gradient id={`${id}-gradient`} color={currentColorShade} />}\n    </Fragment>\n  );\n};\n","import React, {\n  FC,\n  Fragment,\n  ReactElement,\n  useState,\n  useCallback,\n  useMemo\n} from 'react';\nimport {\n  ChartInternalDataShape,\n  ChartInternalNestedDataShape,\n  ChartInternalShallowDataShape\n} from '@/common/data';\nimport { RadialBar, RadialBarProps } from './RadialBar';\nimport { CloneElement } from 'reablocks';\nimport { ColorSchemeType, getColor, schemes } from '@/common/color';\nimport { TooltipAreaProps, TooltipArea, ChartTooltip } from '@/common/Tooltip';\nimport isEqual from 'react-fast-compare';\nimport { RadialValueMarker, RadialValueMarkerProps } from '@/common';\n\nexport type RadialBarSeriesType = 'standard' | 'grouped';\n\nexport interface RadialBarSeriesProps {\n  /**\n   * Parsed data shape. Set internally by `RadialBarChart`.\n   */\n  data: ChartInternalDataShape[];\n\n  /**\n   * Color scheme for the series.\n   */\n  colorScheme: ColorSchemeType;\n\n  /**\n   * The inner radius for the chart center.\n   */\n  innerRadius: number;\n\n  /**\n   * The outer radius for the chart center.\n   */\n  outerRadius: number;\n\n  /**\n   * D3 scale for X Axis. Set internally by `RadialBarChart`.\n   */\n  xScale: any;\n\n  /**\n   * D3 scale for Y Axis. Set internally by `RadialBarChart`.\n   */\n  yScale: any;\n\n  /**\n   * Id set internally by `RadialBarChart`.\n   */\n  id: string;\n\n  /**\n   * Bar that is rendered.\n   */\n  bar: ReactElement<RadialBarProps, typeof RadialBar>;\n\n  /**\n   * Whether to animate the enter/update/exit.\n   */\n  animated: boolean;\n\n  /**\n   * Height of the chart. Set internally by `RadialBarChart`.\n   */\n  height: number;\n\n  /**\n   * Width of the chart. Set internally by `RadialBarChart`.\n   */\n  width: number;\n\n  /**\n   * Tooltip for the chart area.\n   */\n  tooltip: ReactElement<TooltipAreaProps, typeof TooltipArea>;\n\n  /**\n   * Start angle for the first value.\n   */\n  startAngle?: number;\n\n  /**\n   * End angle for the last value.\n   */\n  endAngle?: number;\n\n  /**\n   * The type of the chart.\n   */\n  type?: RadialBarSeriesType;\n\n  /**\n   * Value markers line for the chart.\n   */\n  valueMarkers:\n    | ReactElement<RadialValueMarkerProps, typeof RadialValueMarker>[]\n    | null;\n}\n\nexport const RadialBarSeries: FC<Partial<RadialBarSeriesProps>> = ({\n  data,\n  id,\n  innerRadius,\n  outerRadius,\n  xScale,\n  yScale,\n  height,\n  width,\n  tooltip = <TooltipArea tooltip={<ChartTooltip followCursor={true} />} />,\n  colorScheme = schemes.cybertron[0],\n  bar = <RadialBar />,\n  animated = true,\n  startAngle = 0,\n  endAngle = 2 * Math.PI,\n  type = 'standard',\n  valueMarkers\n}) => {\n  const [activeValues, setActiveValues] = useState<any | null>(null);\n  const isMultiSeries = useMemo(() => type === 'grouped', [type]);\n\n  const renderBar = useCallback(\n    (\n      point: ChartInternalShallowDataShape,\n      innerBarCount: number,\n      index: number,\n      barCount: number,\n      groupIndex?: number\n    ) => {\n      const active = activeValues && data && isEqual(activeValues.x, point.x);\n\n      return (\n        <Fragment key={index}>\n          <CloneElement<RadialBarProps>\n            element={bar}\n            id={`radialbar-${id}-${index}`}\n            index={index}\n            data={point}\n            xScale={xScale}\n            active={active}\n            yScale={yScale}\n            innerRadius={innerRadius}\n            color={(point) => getColor({ data, point, index: 0, colorScheme })}\n            barCount={barCount}\n            innerBarCount={innerBarCount}\n            groupIndex={groupIndex}\n            animated={animated}\n            startAngle={startAngle}\n            endAngle={endAngle}\n          />\n        </Fragment>\n      );\n    },\n    [\n      activeValues,\n      animated,\n      bar,\n      colorScheme,\n      data,\n      endAngle,\n      id,\n      innerRadius,\n      startAngle,\n      xScale,\n      yScale\n    ]\n  );\n\n  const renderBarGroup = useCallback(\n    (\n      data: ChartInternalShallowDataShape[],\n      innerBarCount: number,\n      barCount: number,\n      groupIndex?: number\n    ) => {\n      return (\n        <Fragment>\n          {data.map((barData, barIndex) =>\n            renderBar(barData, innerBarCount, barIndex, barCount, groupIndex)\n          )}\n        </Fragment>\n      );\n    },\n    [renderBar]\n  );\n\n  const renderValueMarkers = useCallback(\n    () => (\n      <>\n        {valueMarkers?.length &&\n          valueMarkers.map((marker) => (\n            <CloneElement<RadialValueMarkerProps>\n              key={marker.key}\n              element={marker}\n              value={yScale(marker.props.value)}\n            />\n          ))}\n      </>\n    ),\n    [valueMarkers, yScale]\n  );\n\n  return (\n    <CloneElement<TooltipAreaProps>\n      element={tooltip}\n      xScale={xScale}\n      yScale={yScale}\n      data={data}\n      height={height}\n      width={width}\n      isRadial={true}\n      innerRadius={innerRadius}\n      outerRadius={outerRadius}\n      onValueEnter={(event) => setActiveValues(event.value)}\n      onValueLeave={() => setActiveValues(null)}\n      color={(point, index) => getColor({ data, point, index, colorScheme })}\n      startAngle={startAngle}\n      endAngle={endAngle}\n    >\n      {isMultiSeries\n        ? (data as ChartInternalNestedDataShape[]).map((groupData, index) => (\n          <g key={`bar-group-${index}`}>\n            {renderBarGroup(\n                groupData.data as ChartInternalShallowDataShape[],\n                data.length,\n                groupData.data.length,\n                index\n            )}\n          </g>\n        ))\n        : renderBarGroup(\n            data as ChartInternalShallowDataShape[],\n            1,\n            data.length\n        )}\n      {renderValueMarkers()}\n    </CloneElement>\n  );\n};\n","import React, { useCallback, FC, Fragment, ReactElement, useMemo } from 'react';\nimport {\n  ChartShallowDataShape,\n  ChartInternalShallowDataShape,\n  buildShallowChartData,\n  ChartDataShape,\n  buildNestedChartData,\n  ChartNestedDataShape\n} from '@/common/data';\nimport { scaleBand, scalePoint } from 'd3-scale';\nimport { getYDomain } from '@/common/utils/domains';\nimport { RadialBarSeries, RadialBarSeriesProps } from './RadialBarSeries';\nimport {\n  ChartProps,\n  ChartContainer,\n  ChartContainerChildProps\n} from '@/common/containers';\nimport { CloneElement } from 'reablocks';\nimport {\n  RADIAL_AXIS_DEFAULT_PROPS,\n  RadialAxis,\n  RadialAxisProps\n} from '@/common/Axis/RadialAxis';\nimport { getRadialYScale } from '@/common/scales';\nimport { uniqueBy } from '@/common/utils/array';\n\nexport interface RadialBarChartProps extends ChartProps {\n  /**\n   * Data the chart will receive to render.\n   */\n  data: ChartDataShape[];\n\n  /**\n   * The series component that renders the bar components.\n   */\n  series: ReactElement<RadialBarSeriesProps, typeof RadialBarSeries>;\n\n  /**\n   * The radial axis component for the chart.\n   */\n  axis: ReactElement<RadialAxisProps, typeof RadialAxis> | null;\n\n  /**\n   * The inner radius for the chart center.\n   */\n  innerRadius: number;\n\n  /**\n   * Start angle for the first value.\n   */\n  startAngle?: number;\n\n  /**\n   * End angle for the last value.\n   */\n  endAngle?: number;\n}\n\nexport const RadialBarChart: FC<Partial<RadialBarChartProps>> = ({\n  id,\n  width,\n  height,\n  margins = 75,\n  className,\n  containerClassName,\n  data,\n  innerRadius = 10,\n  series = <RadialBarSeries />,\n  axis = <RadialAxis />,\n  startAngle = 0,\n  endAngle = 2 * Math.PI\n}) => {\n  const axisProps = useMemo(\n    () => ({ ...RADIAL_AXIS_DEFAULT_PROPS, ...(axis?.props ?? {}) }),\n    [axis?.props]\n  );\n\n  const seriesProps = useMemo(\n    () => ({ ...RADIAL_AXIS_DEFAULT_PROPS, ...(series?.props ?? {}) }),\n    [series?.props]\n  );\n\n  const getXScale = useCallback(\n    (points) => {\n      const isFullCircle = Math.abs(endAngle - startAngle) >= 2 * Math.PI;\n      let xScale;\n      if (axisProps.type === 'category') {\n        const isMultiSeries = seriesProps.type === 'grouped';\n\n        let xDomain;\n        if (isMultiSeries) {\n          xDomain = uniqueBy<ChartInternalShallowDataShape>(\n            points,\n            (dd) => dd.data,\n            (dd) => dd.x\n          );\n        } else {\n          xDomain = uniqueBy<ChartInternalShallowDataShape>(\n            points,\n            (dd) => dd.x\n          );\n        }\n\n        if (isFullCircle) {\n          xScale = scaleBand()\n            .range([0, 2 * Math.PI])\n            .domain(xDomain as any[]);\n        } else {\n          // scaleBand() excludes the end value from the band:\n          //  https://www.d3indepth.com/scales/#scaleband\n          xScale = scalePoint()\n            .range([startAngle, endAngle])\n            .domain(xDomain as any[]);\n        }\n      } else {\n        const xDomain = uniqueBy(points, (d) => d.x);\n\n        xScale = scaleBand()\n          .range([startAngle, endAngle])\n          .domain(xDomain as any[]);\n      }\n\n      return xScale;\n    },\n    [axisProps.type, endAngle, seriesProps.type, startAngle]\n  );\n\n  const getScales = useCallback(\n    (preData: ChartDataShape[], innerRadius: number, outerRadius: number) => {\n      const isMultiSeries = seriesProps.type === 'grouped';\n      let newData;\n      if (isMultiSeries) {\n        newData = buildNestedChartData(preData as ChartNestedDataShape[], true);\n      } else {\n        newData = buildShallowChartData(preData as ChartShallowDataShape[]);\n      }\n\n      const yDomain = getYDomain({ data: newData, scaled: false });\n\n      const yScale = getRadialYScale(innerRadius, outerRadius, yDomain);\n\n      const xScale = getXScale(newData);\n\n      return {\n        xScale,\n        yScale,\n        newData\n      };\n    },\n    [getXScale, seriesProps.type]\n  );\n\n  const renderChart = useCallback(\n    ({ chartWidth, chartHeight, id }: ChartContainerChildProps) => {\n      const outerRadius = Math.min(chartWidth, chartHeight) / 2;\n      const { yScale, xScale, newData } = getScales(\n        data,\n        innerRadius,\n        outerRadius\n      );\n\n      return (\n        <Fragment>\n          {axis && (\n            <CloneElement<RadialAxisProps>\n              element={axis}\n              xScale={xScale}\n              height={chartHeight}\n              width={chartWidth}\n              innerRadius={innerRadius}\n              startAngle={startAngle}\n              endAngle={endAngle}\n            />\n          )}\n          <CloneElement<RadialBarSeriesProps>\n            element={series}\n            id={id}\n            data={newData}\n            height={chartHeight}\n            width={chartWidth}\n            xScale={xScale}\n            yScale={yScale}\n            innerRadius={innerRadius}\n            outerRadius={outerRadius}\n            startAngle={startAngle}\n            endAngle={endAngle}\n          />\n        </Fragment>\n      );\n    },\n    [axis, data, endAngle, getScales, innerRadius, series, startAngle]\n  );\n\n  return (\n    <ChartContainer\n      id={id}\n      width={width}\n      height={height}\n      margins={margins}\n      xAxisVisible={false}\n      yAxisVisible={false}\n      center={true}\n      className={className}\n      containerClassName={containerClassName}\n    >\n      {renderChart}\n    </ChartContainer>\n  );\n};\n","import React, { FC, ReactElement, useMemo } from 'react';\nimport { arc } from 'd3-shape';\nimport { PieArc, ArcData } from '@/PieChart';\nimport { ChartShallowDataShape } from '@/common/data';\nimport { ChartTooltip, ChartTooltipProps } from '@/common/Tooltip';\nimport { Gradient, GradientProps } from '@/common/Gradient';\n\nexport interface RadialGaugeArcProps {\n  /**\n   * ID generated by the chart.\n   */\n  id?: string;\n\n  /**\n   * Data set by the `RadialGaugeSeries` components.\n   */\n  data?: ChartShallowDataShape;\n\n  /**\n   * Start angle set by the `RadialGaugeSeries` components.\n   */\n  startAngle: number;\n\n  /**\n   * End angle set by the `RadialGaugeSeries` components.\n   */\n  endAngle: number;\n\n  /**\n   * Inner radius set by the `RadialGaugeSeries` components.\n   */\n  innerRadius: number;\n\n  /**\n   * Outer radius set by the `RadialGaugeSeries` components.\n   */\n  outerRadius: number;\n\n  /**\n   * Color set by the `RadialGaugeSeries` components.\n   */\n  color: any;\n\n  /**\n   * Corner Radius of the arcs, see https://github.com/d3/d3-shape#arc_cornerRadius\n   */\n  cornerRadius?: number;\n\n  /**\n   * Pad Angle between adjacent arcs, see https://github.com/d3/d3-shape#arc_padAngle\n   */\n  padAngle?: number;\n\n  /**\n   * Pad Radius between adjacent arcs, see https://github.com/d3/d3-shape#arc_padRadius\n   */\n  padRadius?: number;\n\n  /**\n   * Animation set by the `RadialGaugeSeries` component.\n   */\n  animated: boolean;\n\n  /**\n   * Disable the interactions.\n   */\n  disabled: boolean;\n\n  /**\n   * Fill the arc.\n   */\n  fill?: string;\n\n  /**\n   * Gradient shades for the bar.\n   */\n  gradient: ReactElement<GradientProps, typeof Gradient> | null;\n\n  /**\n   * Tooltip component.\n   */\n  tooltip: ReactElement<ChartTooltipProps, typeof ChartTooltip> | null;\n\n  /**\n   * Event for when the arc is clicked.\n   */\n  onClick: (event) => void;\n\n  /**\n   * Event for when the arc has mouse enter.\n   */\n  onMouseEnter: (event) => void;\n\n  /**\n   * Event for when the arc has mouse leave.\n   */\n  onMouseLeave: (event) => void;\n}\n\nexport const RadialGaugeArc: FC<Partial<RadialGaugeArcProps>> = ({\n  data,\n  gradient,\n  startAngle,\n  id,\n  endAngle,\n  innerRadius,\n  outerRadius,\n  cornerRadius = 0,\n  padAngle = 0,\n  color = '#353d44',\n  animated = true,\n  disabled = false,\n  fill,\n  onClick,\n  onMouseEnter,\n  onMouseLeave,\n  tooltip = <ChartTooltip />\n}) => {\n  /**\n   * This function will generate the arcs\n   * https://github.com/d3/d3-shape#arcs\n   */\n  const arcGenerator = useMemo(() => {\n    return arc<ArcData>()\n      .innerRadius(innerRadius)\n      .outerRadius(outerRadius)\n      .cornerRadius(cornerRadius);\n  }, [innerRadius, outerRadius, cornerRadius]);\n\n  const arcElement = useMemo(() => {\n    const arcData: ArcData = {\n      // @ts-ignore Data must be passed\n      data: data || {},\n      startAngle,\n      endAngle,\n      padAngle\n    };\n\n    return (\n      <PieArc\n        id={id}\n        arc={arcGenerator}\n        data={arcData}\n        animated={animated}\n        color={color}\n        gradient={gradient}\n        disabled={disabled}\n        tooltip={tooltip}\n        onClick={onClick}\n        onMouseEnter={onMouseEnter}\n        onMouseLeave={onMouseLeave}\n      />\n    );\n  }, [\n    id,\n    arcGenerator,\n    startAngle,\n    endAngle,\n    padAngle,\n    data,\n    animated,\n    color,\n    gradient,\n    disabled,\n    tooltip,\n    onClick,\n    onMouseEnter,\n    onMouseLeave\n  ]);\n\n  return (\n    <g>\n      {fill && <circle fill={fill} r={outerRadius} />}\n      {arcElement}\n    </g>\n  );\n};\n","import React, { FC } from 'react';\nimport { ChartShallowDataShape, ChartInternalDataTypes } from '@/common/data';\nimport { formatValue } from '@/common/utils';\nimport classNames from 'classnames';\nimport css from './RadialGaugeLabel.module.css';\n\nexport interface RadialGaugeLabelProps {\n  /**\n   * Data set by the `RadialGaugeSeries` component.\n   */\n  data: ChartShallowDataShape;\n\n  /**\n   * Offset set by the `RadialGaugeSeries` component.\n   */\n  offset: number;\n\n  /**\n   * Classname to apply to the label.\n   */\n  className?: any;\n\n  /**\n   * Label click event.\n   */\n  onClick: (event: { data; nativeEvent }) => void;\n}\n\nexport const RadialGaugeLabel: FC<Partial<RadialGaugeLabelProps>> = ({\n  data,\n  className,\n  offset,\n  onClick = () => undefined\n}) => {\n  const label = formatValue(data.key as ChartInternalDataTypes);\n\n  return (\n    <text\n      x=\"0\"\n      y={offset}\n      textAnchor=\"middle\"\n      // This is only valid when placed below the chart\n      alignmentBaseline={'text-after-edge'}\n      onClick={(nativeEvent) => onClick({ data, nativeEvent })}\n      className={classNames(className, css.valueLabel)}\n    >\n      {label}\n    </text>\n  );\n};\n","import React, { FC } from 'react';\nimport { ChartShallowDataShape } from '@/common/data';\nimport classNames from 'classnames';\nimport css from './RadialGaugeValueLabel.module.css';\nimport { useCount } from '@/common/Count';\n\nexport interface RadialGaugeValueLabelProps {\n  /**\n   * Data set by the `RadialGaugeSeries` component.\n   */\n  data: ChartShallowDataShape;\n\n  /**\n   * Classname to apply to the value label.\n   */\n  className?: any;\n}\n\nexport const RadialGaugeValueLabel: FC<Partial<RadialGaugeValueLabelProps>> = ({\n  data,\n  className\n}) => {\n  const ref = useCount({\n    to: data.data as number\n  });\n\n  return (\n    <text\n      dy=\"-0.5em\"\n      x=\"0\"\n      y=\"15\"\n      textAnchor=\"middle\"\n      className={classNames(className, css.valueLabel)}\n      ref={ref}\n    />\n  );\n};\n","import React, { FC } from 'react';\nimport { RadialGaugeArc, RadialGaugeArcProps } from './RadialGaugeArc';\n\nexport const RadialGaugeOuterArc: FC<Partial<RadialGaugeArcProps>> = (\n  props\n) => <RadialGaugeArc animated={false} disabled={true} {...props} />;\n","import React, {\n  cloneElement,\n  FC,\n  Fragment,\n  ReactElement,\n  useCallback,\n  useMemo\n} from 'react';\nimport { range, min } from 'd3-array';\nimport { scaleBand } from 'd3-scale';\nimport { ChartShallowDataShape } from '@/common';\nimport { ColorSchemeType, getColor } from '@/common/color';\nimport { RadialGaugeArc, RadialGaugeArcProps } from './RadialGaugeArc';\nimport { RadialGaugeLabel, RadialGaugeLabelProps } from './RadialGaugeLabel';\nimport {\n  RadialGaugeValueLabel,\n  RadialGaugeValueLabelProps\n} from './RadialGaugeValueLabel';\nimport { RadialGaugeOuterArc } from './RadialGaugeOuterArc';\nimport { identifier } from 'safe-identifier';\n\nexport interface RadialGaugeSeriesProps {\n  /**\n   * Unique id for the series.\n   */\n  id?: string;\n\n  /**\n   * Data to render set by `RadialGauge` component.\n   */\n  data: ChartShallowDataShape[];\n\n  /**\n   * D3 scale function set by `RadialGauge` component.\n   */\n  scale: any;\n\n  /**\n   * Start angle set by `RadialGauge` component.\n   */\n  startAngle: number;\n\n  /**\n   * Start angle set by `RadialGauge` component.\n   */\n  endAngle: number;\n\n  /**\n   * The \"thickness\" of the arcs\n   */\n  arcWidth?: number;\n\n  /**\n   * Width set by `RadialGauge` component.\n   */\n  width: number;\n\n  /**\n   * Height set by `RadialGauge` component.\n   */\n  height: number;\n\n  /**\n   * Padding between each gauge.\n   */\n  padding: number;\n\n  /**\n   * Color scheme to apply.\n   */\n  colorScheme: ColorSchemeType;\n\n  /**\n   * Arc component.\n   */\n  innerArc: ReactElement<RadialGaugeArcProps, typeof RadialGaugeArc>;\n\n  /**\n   * Outer arc component. This is the 'fill' element.\n   */\n  outerArc: ReactElement<RadialGaugeArcProps, typeof RadialGaugeArc> | null;\n\n  /**\n   * Label component.\n   */\n  label: ReactElement<RadialGaugeLabelProps, typeof RadialGaugeLabel> | null;\n\n  /**\n   * Value label component.\n   */\n  valueLabel: ReactElement<\n    RadialGaugeValueLabelProps,\n    typeof RadialGaugeValueLabel\n  > | null;\n\n  /**\n   * Min width for a gauge. Only applicable in multi-series gauges.\n   */\n  minGaugeWidth: number;\n}\n\nexport const RadialGaugeSeries: FC<Partial<RadialGaugeSeriesProps>> = ({\n  data,\n  scale,\n  startAngle,\n  endAngle,\n  arcWidth = 5,\n  outerArc = <RadialGaugeOuterArc />,\n  innerArc = <RadialGaugeArc />,\n  label = <RadialGaugeLabel />,\n  valueLabel = <RadialGaugeValueLabel />,\n  colorScheme = ['#00ECB1'],\n  id,\n  padding = 20,\n  minGaugeWidth = 50,\n  ...props\n}) => {\n  const { columns, width, height, xScale, yScale } = useMemo(() => {\n    let rows = 1;\n    let columns = data.length;\n\n    if (props.width / data.length < minGaugeWidth) {\n      while (props.width / columns < minGaugeWidth) {\n        rows += 1;\n        columns = Math.ceil(data.length / rows);\n      }\n    }\n\n    const xScale: any = scaleBand();\n    xScale.domain(range(columns));\n    xScale.rangeRound([0, props.width], 0.1);\n\n    const yScale: any = scaleBand();\n    yScale.domain(range(rows));\n    yScale.rangeRound([0, props.height], 0.1);\n\n    return {\n      columns,\n      xScale,\n      yScale,\n      width: xScale.bandwidth(),\n      height: yScale.bandwidth()\n    };\n  }, [data.length, minGaugeWidth, props.height, props.width]);\n\n  const renderGauge = useCallback(\n    (point: ChartShallowDataShape, index: number) => {\n      const dataEndAngle = scale(point.data as number);\n\n      const outerRadius =\n        (min([width - padding * 2, height - padding * 2]) as number) / 2;\n\n      const innerRadius = outerRadius - arcWidth;\n\n      const labelOffset = height / 2;\n\n      const x = xScale(index % columns);\n      const y = yScale(Math.floor(index / columns));\n\n      const xOffset = x + width / 2;\n      const yOffset = y + height / 2;\n      const key = identifier(point.key?.toLocaleString());\n\n      return (\n        <g key={key} transform={`translate(${xOffset}, ${yOffset})`}>\n          {outerArc &&\n            cloneElement(outerArc, {\n              id: `${id}-${key}-outer`,\n              outerRadius,\n              innerRadius,\n              startAngle,\n              endAngle\n            })}\n          {innerArc &&\n            cloneElement(innerArc, {\n              id: `${id}-${key}-inner`,\n              outerRadius,\n              innerRadius,\n              startAngle,\n              endAngle: dataEndAngle,\n              data: point,\n              color: getColor({\n                data,\n                colorScheme,\n                point,\n                index\n              })\n            })}\n          {valueLabel && cloneElement(valueLabel, { data: point })}\n          {label && cloneElement(label, { data: point, offset: labelOffset })}\n        </g>\n      );\n    },\n    [\n      id,\n      arcWidth,\n      colorScheme,\n      columns,\n      data,\n      endAngle,\n      height,\n      innerArc,\n      label,\n      outerArc,\n      padding,\n      scale,\n      startAngle,\n      valueLabel,\n      width,\n      xScale,\n      yScale\n    ]\n  );\n\n  return <Fragment>{data.map(renderGauge)}</Fragment>;\n};\n","import React, { FC, JSX, useMemo } from 'react';\nimport { arc } from 'd3-shape';\n\nimport {\n  ChartNestedDataShape,\n  ChartShallowDataShape,\n  ChartTooltip,\n  ColorSchemeType,\n  getColor\n} from '@/common';\nimport { ArcData, PieArc } from '@/PieChart';\nimport { RadialGaugeArcProps } from './RadialGaugeArc';\n\nexport type RadialGaugeStackedArcProps = Omit<\n  RadialGaugeArcProps,\n  'endAngle' | 'data' | 'color'\n> & {\n  /**\n   * Data set by the `StackedRadialGaugeSeries` components.\n   */\n  data: ChartNestedDataShape;\n\n  /**\n   * D3 scale function set by `RadialGauge` component.\n   */\n  scale: (x: number) => number;\n\n  /**\n   * Color scheme to apply set by 'StackedRadialGaugeSeries' component.\n   */\n  colorScheme: ColorSchemeType;\n};\n\nexport const RadialGaugeStackedArc: FC<Partial<RadialGaugeStackedArcProps>> = ({\n  id,\n  data,\n  scale,\n  innerRadius,\n  outerRadius,\n  cornerRadius = 0,\n  padAngle = 0,\n  padRadius = 0,\n  startAngle,\n  colorScheme,\n  animated = true,\n  disabled = false,\n  tooltip = <ChartTooltip />,\n  ...restProps\n}) => {\n  const arcGenerator = useMemo(() => {\n    return arc<ArcData>()\n      .innerRadius(innerRadius)\n      .outerRadius(outerRadius)\n      .cornerRadius(cornerRadius);\n  }, [innerRadius, outerRadius, cornerRadius]);\n\n  const stackedArcs = useMemo(() => {\n    let prevEndAngle = startAngle;\n\n    function renderArc(\n      point: ChartShallowDataShape,\n      index: number\n    ): JSX.Element {\n      const value = point.data as number;\n      const startArcAngle = prevEndAngle;\n      const endArcAngle = startArcAngle + scale(value) - startAngle;\n      prevEndAngle = endArcAngle;\n\n      const arcData: ArcData = {\n        data: point,\n        startAngle: startArcAngle,\n        endAngle: endArcAngle,\n        padAngle,\n        value,\n        index\n      };\n\n      const color = getColor({\n        colorScheme,\n        data: [data],\n        point: point,\n        index,\n        active: [data],\n        isMultiSeries: true\n      });\n\n      return (\n        <PieArc\n          animated={animated}\n          disabled={disabled}\n          tooltip={tooltip}\n          {...restProps}\n          id={point.key.toLocaleString()}\n          key={point.key.toLocaleString()}\n          arc={arcGenerator}\n          data={arcData}\n          color={color}\n        />\n      );\n    }\n\n    return data.data.map(renderArc as any) as any;\n  }, [\n    animated,\n    arcGenerator,\n    colorScheme,\n    data,\n    disabled,\n    padAngle,\n    restProps,\n    scale,\n    startAngle,\n    tooltip\n  ]);\n\n  return <g key={id}>{stackedArcs}</g>;\n};\n","import React, { FC } from 'react';\nimport classNames from 'classnames';\nimport css from './StackedRadialGaugeValueLabel.module.css';\n\nexport interface StackedRadialGaugeValueLabelProps {\n  /**\n   * A label shown at the center\n   */\n  label: string;\n\n  /**\n   * A class name to apply\n   */\n  className?: string;\n\n  /**\n   * A y offset to apply to the label\n   */\n  yOffset?: number;\n}\n\nexport const StackedRadialGaugeValueLabel: FC<\n  Partial<StackedRadialGaugeValueLabelProps>\n> = ({ label, className, yOffset = 0 }) => (\n  <>\n    {label && (\n      <text\n        x=\"0\"\n        y={yOffset}\n        textAnchor=\"middle\"\n        alignmentBaseline=\"middle\"\n        className={classNames(className, css.stackedValueLabel)}\n      >\n        {label}\n      </text>\n    )}\n  </>\n);\n","import React, { cloneElement, FC, ReactElement, useCallback } from 'react';\nimport { range } from 'd3-array';\nimport { scaleBand } from 'd3-scale';\nimport {\n  ChartDataShape,\n  ChartNestedDataShape,\n  ChartShallowDataShape\n} from '@/common/data';\nimport { ColorSchemeType, getColor } from '@/common/color';\nimport { RadialGaugeArc, RadialGaugeArcProps } from './RadialGaugeArc';\nimport {\n  RadialGaugeStackedArc,\n  RadialGaugeStackedArcProps\n} from './RadialGaugeStackedArc';\nimport {\n  StackedRadialGaugeValueLabel,\n  StackedRadialGaugeValueLabelProps\n} from './StackedRadialGaugeValueLabel';\nimport {\n  StackedRadialGaugeDescriptionLabel,\n  StackedRadialGaugeDescriptionLabelProps\n} from './StackedRadialGaugeDescriptionLabel';\n\nexport interface StackedRadialGaugeSeriesProps {\n  /**\n   * Data to render set by `RadialGauge` component.\n   */\n  data: ChartDataShape[];\n\n  /**\n   * D3 scale function set by `RadialGauge` component.\n   */\n  scale: any;\n\n  /**\n   * Start angle set by `RadialGauge` component.\n   */\n  startAngle: number;\n\n  /**\n   * Start angle set by `RadialGauge` component.\n   */\n  endAngle: number;\n\n  /**\n   * Width set by `RadialGauge` component.\n   */\n  width: number;\n\n  /**\n   * Height set by `RadialGauge` component.\n   */\n  height: number;\n\n  /**\n   * Color scheme to apply.\n   */\n  colorScheme: ColorSchemeType;\n\n  /**\n   * Arc component.\n   */\n  innerArc: ReactElement<RadialGaugeArcProps, typeof RadialGaugeArc>;\n\n  /**\n   * Stacked Arc component.\n   */\n  stackedInnerArc: ReactElement<\n    RadialGaugeStackedArcProps,\n    typeof RadialGaugeStackedArc\n  >;\n\n  /**\n   * Outer arc component. This is the 'fill' element.\n   */\n  outerArc: ReactElement<RadialGaugeArcProps, typeof RadialGaugeArc> | null;\n\n  /**\n   * Label component.\n   */\n  label: ReactElement<\n    StackedRadialGaugeValueLabelProps,\n    typeof StackedRadialGaugeValueLabel\n  > | null;\n\n  /**\n   * Description label component.\n   */\n  descriptionLabel: ReactElement<\n    StackedRadialGaugeDescriptionLabelProps,\n    typeof StackedRadialGaugeDescriptionLabel\n  > | null;\n\n  /**\n   * A factor from 0 to 1 determining how much of the Gauge should be filled with arcs\n   */\n  fillFactor: number;\n\n  /**\n   * Padding between the stacked arcs, following d3 bandwidth innerPadding\n   */\n  arcPadding: number;\n}\n\nconst isChartNestedData = (\n  point: ChartDataShape\n): point is ChartNestedDataShape => {\n  return Array.isArray(point.data);\n};\n\nexport const StackedRadialGaugeSeries: FC<\n  Partial<StackedRadialGaugeSeriesProps>\n> = ({\n  data,\n  width,\n  height,\n  scale,\n  startAngle,\n  endAngle,\n  outerArc = <RadialGaugeArc disabled={true} animated={false} />,\n  innerArc = <RadialGaugeArc animated={true} />,\n  stackedInnerArc = <RadialGaugeStackedArc animated={true} />,\n  label = <StackedRadialGaugeValueLabel />,\n  descriptionLabel,\n  colorScheme = ['#00ECB1'],\n  fillFactor = 0.2,\n  arcPadding = 0.15\n}) => {\n  const radius = Math.min(width, height) / 2;\n  const innerRadius = radius * (1 - Math.min(fillFactor, 1));\n\n  const rAxis = scaleBand()\n    .domain(range(data.length))\n    .range([innerRadius, radius])\n    .paddingInner(arcPadding);\n\n  const renderOuterArc = useCallback(\n    (outerRadius: number, innerRadius: number) => {\n      return (\n        outerArc &&\n        cloneElement(outerArc, {\n          outerRadius,\n          innerRadius,\n          startAngle,\n          endAngle\n        })\n      );\n    },\n    [outerArc, startAngle, endAngle]\n  );\n\n  const renderInnerArc = useCallback(\n    (\n      outerRadius: number,\n      innerRadius: number,\n      dataEndAngle: number,\n      point: ChartShallowDataShape,\n      index: number\n    ) => {\n      const color = getColor({ data, colorScheme, point, index });\n\n      return (\n        innerArc &&\n        cloneElement(innerArc, {\n          outerRadius,\n          innerRadius,\n          startAngle,\n          endAngle: dataEndAngle,\n          data: point,\n          color\n        })\n      );\n    },\n    [innerArc, startAngle, data, colorScheme]\n  );\n\n  const renderStackedArc = useCallback(\n    (\n      outerRadius: number,\n      innerRadius: number,\n      point: ChartNestedDataShape,\n      index: number\n    ) => {\n      return (\n        <>\n          {stackedInnerArc &&\n            cloneElement(stackedInnerArc, {\n              outerRadius,\n              innerRadius,\n              colorScheme,\n              startAngle,\n              scale: scale?.[index] ?? scale?.[index] ?? scale,\n              data: point\n            })}\n        </>\n      );\n    },\n    [stackedInnerArc, colorScheme, startAngle, scale]\n  );\n\n  const renderStackedGauges = useCallback(\n    (point: ChartDataShape, index: number) => {\n      const outerRadius = rAxis(index as any);\n      const innerRadius = outerRadius - rAxis.bandwidth();\n\n      return (\n        <g key={point.key.toLocaleString()}>\n          {renderOuterArc(outerRadius, innerRadius)}\n          {isChartNestedData(point)\n            ? renderStackedArc(outerRadius, innerRadius, point, index)\n            : renderInnerArc(\n              outerRadius,\n              innerRadius,\n              scale?.[index]?.(point.data) ??\n                  scale?.[0]?.(point.data) ??\n                  scale(point.data),\n              point,\n              index\n            )}\n        </g>\n      );\n    },\n    [rAxis, renderOuterArc, renderStackedArc, renderInnerArc, scale]\n  );\n\n  return (\n    <>\n      <g transform={`translate(${width / 2}, ${height / 2})`}>\n        {data.map(renderStackedGauges)}\n        {descriptionLabel}\n        {label}\n      </g>\n    </>\n  );\n};\n","import React, { FC } from 'react';\nimport classNames from 'classnames';\nimport css from './StackedRadialGaugeDescriptionLabel.module.css';\n\nexport interface StackedRadialGaugeDescriptionLabelProps {\n  /**\n   * A label shown at the center\n   */\n  label: string;\n\n  /**\n   * A class name to apply\n   */\n  className?: string;\n\n  /**\n   * A y offset to apply to the label\n   */\n  yOffset?: number;\n}\n\nexport const StackedRadialGaugeDescriptionLabel: FC<\n  Partial<StackedRadialGaugeDescriptionLabelProps>\n> = ({ label, className, yOffset = 0 }) => (\n  <>\n    {label && (\n      <text\n        x=\"0\"\n        y={yOffset - 20}\n        textAnchor=\"middle\"\n        alignmentBaseline=\"middle\"\n        className={classNames(className, css.stackedDescriptionLabel)}\n      >\n        {label}\n      </text>\n    )}\n  </>\n);\n","import React, { cloneElement, FC, ReactElement, useCallback } from 'react';\nimport { scaleLinear } from 'd3-scale';\nimport {\n  ChartContainer,\n  ChartContextProps,\n  ChartProps\n} from '@/common/containers';\nimport { ChartDataShape } from '@/common/data';\nimport {\n  RadialGaugeSeries,\n  RadialGaugeSeriesProps,\n  StackedRadialGaugeSeries,\n  StackedRadialGaugeSeriesProps\n} from './RadialGaugeSeries';\nimport { useId } from 'reablocks';\n\nexport interface RadialGaugeProps extends ChartProps {\n  /**\n   * Data the chart will receive to render.\n   */\n  data: ChartDataShape[];\n\n  /**\n   * Min value to scale on.\n   */\n  minValue?: number | number[];\n\n  /**\n   * Max value to scale on.\n   */\n  maxValue?: number | number[];\n\n  /**\n   * Start angle for the first value.\n   */\n  startAngle?: number;\n\n  /**\n   * End angle for the last value.\n   */\n  endAngle?: number;\n\n  /**\n   * Gauge series component to render.\n   */\n  series?: ReactElement<\n    RadialGaugeSeriesProps | StackedRadialGaugeSeriesProps,\n    typeof RadialGaugeSeries | typeof StackedRadialGaugeSeries\n  >;\n}\n\nexport const RadialGauge: FC<RadialGaugeProps> = ({\n  id,\n  width,\n  height,\n  margins,\n  className,\n  data,\n  minValue = 0,\n  maxValue = 100,\n  startAngle = 0,\n  endAngle = Math.PI * 2,\n  series = <RadialGaugeSeries />,\n  containerClassName\n}) => {\n  const newId = useId(id);\n\n  const renderSeries = useCallback(\n    ({ chartHeight, chartWidth }: ChartContextProps) => {\n      let scale;\n\n      if (Array.isArray(maxValue)) {\n        scale = maxValue.map((max, index) =>\n          scaleLinear()\n            .domain([minValue?.[index] ?? minValue?.[0] ?? minValue, max])\n            .range([startAngle, endAngle])\n        );\n      } else if (Array.isArray(minValue)) {\n        scale = minValue.map((min, index) =>\n          scaleLinear()\n            .domain([min, maxValue?.[index] ?? maxValue?.[0] ?? maxValue])\n            .range([startAngle, endAngle])\n        );\n      } else {\n        scale = scaleLinear()\n          .domain([minValue, maxValue])\n          .range([startAngle, endAngle]);\n      }\n\n      return cloneElement(series, {\n        id: newId,\n        scale,\n        data,\n        startAngle,\n        endAngle,\n        width: chartWidth,\n        height: chartHeight\n      });\n    },\n    [data, endAngle, maxValue, minValue, series, startAngle, newId]\n  );\n\n  return (\n    <ChartContainer\n      id={id}\n      width={width}\n      height={height}\n      margins={margins}\n      xAxisVisible={false}\n      yAxisVisible={false}\n      className={className}\n      containerClassName={containerClassName}\n    >\n      {renderSeries}\n    </ChartContainer>\n  );\n};\n","import React, {\n  FC,\n  Fragment,\n  MouseEvent,\n  ReactElement,\n  useMemo,\n  useState,\n  useRef,\n  ReactNode\n} from 'react';\nimport { offset } from '@floating-ui/dom';\nimport { ChartTooltip, ChartTooltipProps } from '@/common/Tooltip';\nimport { CloneElement } from 'reablocks';\nimport {\n  constructFunctionProps,\n  PropFunctionTypes\n} from '@/common/utils/functions';\nimport chroma from 'chroma-js';\nimport classNames from 'classnames';\nimport { motion } from 'motion/react';\nimport { DEFAULT_TRANSITION } from '@/common/Motion';\nimport { ChartInternalShallowDataShape } from '@/common/data';\nimport css from './HeatmapCell.module.css';\nimport { useHoverIntent } from '@/common/utils/useHoverIntent';\nimport { getAriaLabel } from '@/common';\n\nexport type HeatmapCellProps = {\n  /**\n   * X Position set by `HeatmapSeries`.\n   */\n  x: number;\n\n  /**\n   * Y Position set by `HeatmapSeries`.\n   */\n  y: number;\n\n  /**\n   * rx SVG Attribute.\n   */\n  rx: number;\n\n  /**\n   * ry SVG Attribute.\n   */\n  ry: number;\n\n  /**\n   * Height of cell set by `HeatmapSeries`.\n   */\n  height: number;\n\n  /**\n   * Width of cell set by `HeatmapSeries`.\n   */\n  width: number;\n\n  /**\n   * Total count of cells set by `HeatmapSeries`.\n   */\n  cellCount: number;\n\n  /**\n   * Tooltip component.\n   */\n  tooltip: ReactElement<ChartTooltipProps, typeof ChartTooltip> | null;\n\n  /**\n   * Fill color set by `HeatmapSeries`.\n   */\n  fill: string;\n\n  /**\n   * Stroke color set by `HeatmapSeries`.\n   */\n  stroke: string;\n\n  /**\n   * Symbol element to render.\n   */\n  symbol?: (data: ChartInternalShallowDataShape) => ReactNode;\n\n  /**\n   * Data object set by `Heatmap`.\n   */\n  data: ChartInternalShallowDataShape;\n\n  /**\n   * Whether cell is animated or not set by `HeatmapSeries`.\n   */\n  animated: boolean;\n\n  /**\n   * Cell index set by `HeatmapSeries`.\n   */\n  cellIndex: number;\n\n  /**\n   * Cursor style attribute.\n   */\n  cursor: string;\n\n  /**\n   * Event for when the bar is clicked.\n   */\n  onClick: (event) => void;\n\n  /**\n   * Event for when the bar has mouse enter.\n   */\n  onMouseEnter: (event) => void;\n\n  /**\n   * Event for when the bar has mouse leave.\n   */\n  onMouseLeave: (event) => void;\n} & PropFunctionTypes;\n\n// Set padding modifier for the tooltips\nconst modifiers = [offset({ mainAxis: 0, crossAxis: 3 })];\n\nexport const HeatmapCell: FC<Partial<HeatmapCellProps>> = ({\n  rx = 2,\n  ry = 2,\n  cursor = 'auto',\n  tooltip = <ChartTooltip />,\n  onClick,\n  onMouseEnter,\n  onMouseLeave,\n  data,\n  animated,\n  cellIndex,\n  cellCount,\n  fill,\n  stroke,\n  symbol,\n  x,\n  y,\n  style,\n  className,\n  ...rest\n}) => {\n  const [active, setActive] = useState(false);\n  const rect = useRef<SVGRectElement | null>(null);\n\n  const { pointerOut, pointerOver } = useHoverIntent({\n    onPointerOver: (event) => {\n      setActive(true);\n      onMouseEnter({\n        value: data,\n        nativeEvent: event\n      });\n    },\n    onPointerOut: (event) => {\n      setActive(false);\n      onMouseLeave({\n        value: data,\n        nativeEvent: event\n      });\n    }\n  });\n\n  const onMouseClick = (event: MouseEvent) => {\n    onClick({\n      value: data,\n      nativeEvent: event\n    });\n  };\n\n  const tooltipData = useMemo(\n    () => ({\n      y: data.value,\n      x: `${data.key} ∙ ${data.x}`,\n      data\n    }),\n    [data]\n  );\n\n  const transition = useMemo(() => {\n    if (animated) {\n      return {\n        ...DEFAULT_TRANSITION,\n        delay: (cellIndex / cellCount) * 0.005\n      };\n    } else {\n      return {\n        type: false,\n        delay: 0\n      };\n    }\n  }, [animated, cellIndex, cellCount]);\n\n  const extras = constructFunctionProps({ style, className }, data);\n  const isTransparent = fill === 'transparent';\n  const appliedStroke =\n    active && !isTransparent\n      ? chroma(stroke || fill).brighten(1)\n      : stroke || fill;\n\n  const ariaLabelData = useMemo(\n    () => getAriaLabel({ ...tooltipData, data: null }),\n    [tooltipData]\n  );\n\n  const renderedSymbol = useMemo(\n    () => (symbol ? symbol(data!) : null),\n    [data, symbol]\n  );\n\n  return (\n    <Fragment>\n      <g ref={rect}>\n        {renderedSymbol ? (\n          <motion.g\n            {...rest}\n            fill={fill}\n            stroke={appliedStroke}\n            style={{ ...extras.style, cursor }}\n            className={extras?.className}\n            transform={`translate(${x}, ${y})`}\n            initial={{\n              opacity: 0\n            }}\n            animate={{\n              opacity: 1\n            }}\n            exit={{\n              opacity: 0\n            }}\n            transition={transition}\n            onPointerOver={pointerOver}\n            onPointerOut={pointerOut}\n            onClick={onMouseClick}\n            tabIndex={0}\n            aria-label={ariaLabelData}\n            role=\"graphics-document\"\n          >\n            {renderedSymbol}\n          </motion.g>\n        ) : (\n          <motion.rect\n            {...rest}\n            fill={fill}\n            stroke={appliedStroke}\n            x={x}\n            y={y}\n            rx={rx}\n            ry={ry}\n            style={{ ...extras.style, cursor }}\n            className={classNames(css.cell, extras.className)}\n            initial={{\n              opacity: 0\n            }}\n            animate={{\n              opacity: 1\n            }}\n            exit={{\n              opacity: 0\n            }}\n            transition={transition}\n            onPointerOver={pointerOver}\n            onPointerOut={pointerOut}\n            onClick={onMouseClick}\n            tabIndex={0}\n            aria-label={ariaLabelData}\n            role=\"graphics-document\"\n          />\n        )}\n      </g>\n      {tooltip && !(tooltip.props as any).disabled && !isTransparent && (\n        <CloneElement<ChartTooltipProps>\n          element={tooltip}\n          visible={active}\n          modifiers={(tooltip.props as any).modifiers || modifiers}\n          reference={rect}\n          value={tooltipData}\n        />\n      )}\n    </Fragment>\n  );\n};\n","import React, { FC, ReactElement, Fragment } from 'react';\nimport { HeatmapCell, HeatmapCellProps } from './HeatmapCell';\nimport { CloneElement } from 'reablocks';\nimport { ColorSchemeType } from '@/common/color';\nimport { ChartInternalNestedDataShape } from '@/common/data';\nimport {\n  ColorSchemeStyleArray,\n  createColorSchemeValueScales,\n  getColorSchemeStyles\n} from '@/common/color/helper';\nimport { mergeDefaultProps } from '@/common';\n\nexport interface HeatmapSeriesProps {\n  /**\n   * Padding between cells.\n   */\n  padding: number;\n\n  /**\n   * Id set by `Heatmap`.\n   */\n  id: string;\n\n  /**\n   * Parsed data set by `Heatmap`.\n   */\n  data: ChartInternalNestedDataShape[];\n\n  /**\n   * D3 scale for X Axis. Set internally by `Heatmap`.\n   */\n  xScale: any;\n\n  /**\n   * D3 scale for Y Axis. Set internally by `Heatmap`.\n   */\n  yScale: any;\n\n  /**\n   * Color scheme for the chart.\n   */\n  colorScheme: ColorSchemeType | ColorSchemeStyleArray;\n\n  /**\n   * Color for the empty cell of the chart.\n   */\n  emptyColor: string;\n\n  /**\n   * Whether the chart is animated or not.\n   */\n  animated: boolean;\n\n  /**\n   * Cell component that will be rendered.\n   */\n  cell: ReactElement<HeatmapCellProps, typeof HeatmapCell>;\n\n  /**\n   * Selected cell(s) in active state\n   */\n  selections?: any;\n}\n\nexport const HeatmapSeries: FC<Partial<HeatmapSeriesProps>> = (props) => {\n  const {\n    animated,\n    emptyColor,\n    colorScheme,\n    cell: cellElement,\n    xScale,\n    yScale,\n    data,\n    id,\n    selections\n  } = mergeDefaultProps(HEATMAP_SERIES_DEFAULT_PROPS, props);\n\n  const valueScales = createColorSchemeValueScales(\n    data,\n    colorScheme,\n    emptyColor,\n    selections\n  );\n  const height = yScale.bandwidth();\n  const width = xScale.bandwidth();\n  const cellCount = [...yScale.domain(), ...xScale.domain()].length;\n\n  const renderCell = ({\n    row,\n    cell,\n    rowIndex,\n    cellIndex,\n    width,\n    height,\n    cellCount\n  }) => {\n    const x = xScale(row.key);\n    const y = yScale(cell.x);\n    const style = getColorSchemeStyles(cell, valueScales);\n\n    return (\n      <CloneElement<HeatmapCellProps>\n        key={`${id}-${rowIndex}-${cellIndex}`}\n        element={cellElement}\n        animated={animated}\n        cellIndex={rowIndex + cellIndex}\n        cellCount={cellCount}\n        x={x}\n        y={y}\n        fill={style?.fill}\n        stroke={style?.stroke}\n        width={width}\n        height={height}\n        data={cell}\n        style={style}\n      />\n    );\n  };\n\n  return (\n    <Fragment>\n      {data.map((row, rowIndex) =>\n        row.data.map((cell, cellIndex) =>\n          renderCell({\n            height,\n            width,\n            cellCount,\n            row,\n            cell,\n            rowIndex,\n            cellIndex\n          })\n        )\n      )}\n    </Fragment>\n  );\n};\n\nexport const HEATMAP_SERIES_DEFAULT_PROPS: Partial<HeatmapSeriesProps> = {\n  padding: 0.1,\n  animated: true,\n  emptyColor: 'rgba(200,200,200,0.08)',\n  colorScheme: ['rgba(28, 107, 86, 0.5)', '#2da283'],\n  cell: <HeatmapCell />\n};\n","import React, { useCallback, Fragment, ReactElement, FC, useMemo } from 'react';\nimport {\n  ChartProps,\n  ChartContainer,\n  ChartContainerChildProps\n} from '@/common/containers/ChartContainer';\nimport { ChartNestedDataShape, buildNestedChartData } from '@/common/data';\nimport { CloneElement } from 'reablocks';\nimport {\n  isAxisVisible,\n  LinearAxisProps,\n  LinearXAxis,\n  LinearYAxis,\n  LinearYAxisTickSeries,\n  LinearXAxisTickSeries,\n  LinearYAxisTickLabel,\n  LinearXAxisTickLabel,\n  LinearAxis,\n  LINEAR_X_AXIS_DEFAULT_PROPS,\n  LINEAR_Y_AXIS_DEFAULT_PROPS,\n  LINEAR_Y_AXIS_TICK_LABEL_DEFAULT_PROPS,\n  LINEAR_X_AXIS_TICK_LABEL_DEFAULT_PROPS\n} from '@/common/Axis';\nimport {\n  HEATMAP_SERIES_DEFAULT_PROPS,\n  HeatmapSeries,\n  HeatmapSeriesProps\n} from './HeatmapSeries';\nimport { scaleBand } from 'd3-scale';\nimport { uniqueBy } from '@/common/utils/array';\n\nexport interface HeatmapProps extends ChartProps {\n  /**\n   * Data the chart will receive to render.\n   */\n  data: ChartNestedDataShape[];\n\n  /**\n   * The series component that renders the cell components.\n   */\n  series: ReactElement<HeatmapSeriesProps, typeof HeatmapSeries>;\n\n  /**\n   * The linear axis component for the Y Axis of the chart.\n   */\n  yAxis: ReactElement<LinearAxisProps, typeof LinearAxis>;\n\n  /**\n   * The linear axis component for the X Axis of the chart.\n   */\n  xAxis: ReactElement<LinearAxisProps, typeof LinearAxis>;\n\n  /**\n   * Any secondary axis components. Useful for multi-axis charts.\n   */\n  secondaryAxis?: ReactElement<LinearAxisProps, typeof LinearAxis>[];\n}\n\nexport const Heatmap: FC<Partial<HeatmapProps>> = ({\n  data = [],\n  margins = 10,\n  series = <HeatmapSeries padding={0.3} />,\n  yAxis = (\n    <LinearYAxis\n      type=\"category\"\n      axisLine={null}\n      tickSeries={\n        <LinearYAxisTickSeries\n          line={null}\n          label={\n            <LinearYAxisTickLabel\n              {...LINEAR_Y_AXIS_TICK_LABEL_DEFAULT_PROPS}\n              padding={5}\n            />\n          }\n        />\n      }\n    />\n  ),\n  xAxis = (\n    <LinearXAxis\n      type=\"category\"\n      axisLine={null}\n      tickSeries={\n        <LinearXAxisTickSeries\n          line={null}\n          label={\n            <LinearXAxisTickLabel\n              {...LINEAR_X_AXIS_TICK_LABEL_DEFAULT_PROPS}\n              padding={5}\n            />\n          }\n        />\n      }\n    />\n  ),\n  secondaryAxis,\n  id,\n  width,\n  height,\n  className,\n  containerClassName\n}) => {\n  const xAxisProps = useMemo(\n    () => ({ ...LINEAR_X_AXIS_DEFAULT_PROPS, ...xAxis.props }),\n    [xAxis.props]\n  );\n  const yAxisProps = useMemo(\n    () => ({ ...LINEAR_Y_AXIS_DEFAULT_PROPS, ...yAxis.props }),\n    [yAxis.props]\n  );\n  const seriesProps = useMemo(\n    () => ({ ...HEATMAP_SERIES_DEFAULT_PROPS, ...series.props }),\n    [series.props]\n  );\n\n  const getScalesData = useCallback(\n    (chartHeight: number, chartWidth: number) => {\n      const nestedData = buildNestedChartData(data);\n\n      const xDomain: any =\n        xAxisProps.domain || uniqueBy(nestedData, (d) => d.key);\n\n      const xScale = scaleBand()\n        .range([0, chartWidth])\n        .domain(xDomain)\n        .paddingInner(seriesProps.padding || 0.1);\n\n      const yDomain: any =\n        yAxisProps.domain ||\n        uniqueBy(\n          nestedData,\n          (d) => d.data,\n          (d) => d.x\n        );\n\n      const yScale = scaleBand()\n        .domain(yDomain)\n        .range([chartHeight, 0])\n        .paddingInner(seriesProps.padding || 0.1);\n\n      return {\n        yScale,\n        xScale,\n        data: nestedData\n      };\n    },\n    [data, xAxisProps.domain, seriesProps.padding, yAxisProps.domain]\n  );\n\n  const renderChart = useCallback(\n    (containerProps: ChartContainerChildProps) => {\n      const { chartWidth, chartHeight, updateAxes, id, chartSized } =\n        containerProps;\n      const {\n        xScale,\n        yScale,\n        data: scalesData\n      } = getScalesData(chartHeight, chartWidth);\n\n      return (\n        <Fragment>\n          <CloneElement<LinearAxisProps>\n            element={xAxis}\n            height={chartHeight}\n            width={chartWidth}\n            scale={xScale}\n            visibility={chartSized ? 'visible' : 'hidden'}\n            onDimensionsChange={(event) => updateAxes('horizontal', event)}\n          />\n          <CloneElement<LinearAxisProps>\n            element={yAxis}\n            height={chartHeight}\n            width={chartWidth}\n            scale={yScale}\n            visibility={chartSized ? 'visible' : 'hidden'}\n            onDimensionsChange={(event) => updateAxes('vertical', event)}\n          />\n          {secondaryAxis &&\n            secondaryAxis.map((axis, i) => (\n              <CloneElement<LinearAxisProps>\n                key={i}\n                element={axis}\n                height={chartHeight}\n                width={chartWidth}\n                visibility={chartSized ? 'visible' : 'hidden'}\n                onDimensionsChange={(event) => updateAxes('horizontal', event)}\n              />\n            ))}\n          {chartSized && (\n            <CloneElement<HeatmapSeriesProps>\n              element={series}\n              id={`heat-series-${id}`}\n              data={scalesData}\n              xScale={xScale}\n              yScale={yScale}\n            />\n          )}\n        </Fragment>\n      );\n    },\n    [getScalesData, secondaryAxis, series, xAxis, yAxis]\n  );\n\n  return (\n    <ChartContainer\n      id={id}\n      width={width}\n      height={height}\n      margins={margins}\n      containerClassName={containerClassName}\n      xAxisVisible={isAxisVisible(xAxisProps)}\n      yAxisVisible={isAxisVisible(yAxisProps)}\n      className={className}\n    >\n      {renderChart}\n    </ChartContainer>\n  );\n};\n","/**\n * @name toDate\n * @category Common Helpers\n * @summary Convert the given argument to an instance of Date.\n *\n * @description\n * Convert the given argument to an instance of Date.\n *\n * If the argument is an instance of Date, the function returns its clone.\n *\n * If the argument is a number, it is treated as a timestamp.\n *\n * If the argument is none of the above, the function returns Invalid Date.\n *\n * **Note**: *all* Date arguments passed to any *date-fns* function is processed by `toDate`.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param argument - The value to convert\n *\n * @returns The parsed date in the local time zone\n *\n * @example\n * // Clone the date:\n * const result = toDate(new Date(2014, 1, 11, 11, 30, 30))\n * //=> Tue Feb 11 2014 11:30:30\n *\n * @example\n * // Convert the timestamp to date:\n * const result = toDate(1392098430000)\n * //=> Tue Feb 11 2014 11:30:30\n */\nexport function toDate(argument) {\n  const argStr = Object.prototype.toString.call(argument);\n\n  // Clone the date\n  if (\n    argument instanceof Date ||\n    (typeof argument === \"object\" && argStr === \"[object Date]\")\n  ) {\n    // Prevent the date to lose the milliseconds when passed to new Date() in IE10\n    return new argument.constructor(+argument);\n  } else if (\n    typeof argument === \"number\" ||\n    argStr === \"[object Number]\" ||\n    typeof argument === \"string\" ||\n    argStr === \"[object String]\"\n  ) {\n    // TODO: Can we get rid of as?\n    return new Date(argument);\n  } else {\n    // TODO: Can we get rid of as?\n    return new Date(NaN);\n  }\n}\n\n// Fallback for modularized imports:\nexport default toDate;\n","/**\n * @name constructFrom\n * @category Generic Helpers\n * @summary Constructs a date using the reference date and the value\n *\n * @description\n * The function constructs a new date using the constructor from the reference\n * date and the given value. It helps to build generic functions that accept\n * date extensions.\n *\n * It defaults to `Date` if the passed reference date is a number or a string.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param date - The reference date to take constructor from\n * @param value - The value to create the date\n *\n * @returns Date initialized using the given date and value\n *\n * @example\n * import { constructFrom } from 'date-fns'\n *\n * // A function that clones a date preserving the original type\n * function cloneDate<DateType extends Date(date: DateType): DateType {\n *   return constructFrom(\n *     date, // Use contrustor from the given date\n *     date.getTime() // Use the date value to create a new date\n *   )\n * }\n */\nexport function constructFrom(date, value) {\n  if (date instanceof Date) {\n    return new date.constructor(value);\n  } else {\n    return new Date(value);\n  }\n}\n\n// Fallback for modularized imports:\nexport default constructFrom;\n","import { toDate } from \"./toDate.mjs\";\nimport { constructFrom } from \"./constructFrom.mjs\";\n\n/**\n * @name addDays\n * @category Day Helpers\n * @summary Add the specified number of days to the given date.\n *\n * @description\n * Add the specified number of days to the given date.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param date - The date to be changed\n * @param amount - The amount of days to be added.\n *\n * @returns The new date with the days added\n *\n * @example\n * // Add 10 days to 1 September 2014:\n * const result = addDays(new Date(2014, 8, 1), 10)\n * //=> Thu Sep 11 2014 00:00:00\n */\nexport function addDays(date, amount) {\n  const _date = toDate(date);\n  if (isNaN(amount)) return constructFrom(date, NaN);\n  if (!amount) {\n    // If 0 days, no-op to avoid changing times in the hour before end of DST\n    return _date;\n  }\n  _date.setDate(_date.getDate() + amount);\n  return _date;\n}\n\n// Fallback for modularized imports:\nexport default addDays;\n","import { addDays } from \"./addDays.mjs\";\n\n/**\n * @name subDays\n * @category Day Helpers\n * @summary Subtract the specified number of days from the given date.\n *\n * @description\n * Subtract the specified number of days from the given date.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param date - The date to be changed\n * @param amount - The amount of days to be subtracted.\n *\n * @returns The new date with the days subtracted\n *\n * @example\n * // Subtract 10 days from 1 September 2014:\n * const result = subDays(new Date(2014, 8, 1), 10)\n * //=> Fri Aug 22 2014 00:00:00\n */\nexport function subDays(date, amount) {\n  return addDays(date, -amount);\n}\n\n// Fallback for modularized imports:\nexport default subDays;\n","import { ChartShallowDataShape } from '@/common/data';\nimport { max, min, range } from 'd3-array';\nimport { subDays } from 'date-fns';\n\nexport type CalendarView = 'year' | 'month';\n\nconst getFirstOfMonth = (date: Date) =>\n  new Date(date.getFullYear(), date.getMonth(), 1);\n\nexport const addWeeksToDate = (date: Date, weeks: number) => {\n  const d = new Date(date.getTime());\n  d.setDate(d.getDate() + weeks * 7);\n  return d;\n};\n\nconst getStartOfDay = (date: Date) => {\n  const d = new Date(date.getTime());\n  d.setHours(0, 0, 0, 0);\n  return d;\n};\n\nconst getNewDayFromDay = (date: Date, num: number) => {\n  const d = new Date(date.getTime());\n  d.setDate(d.getDate() + num);\n  return d;\n};\n\nexport const weekDays: string[] = (() => {\n  const base = new Date(Date.UTC(2017, 0, 2));\n  return range(7).map(() => {\n    const name = base.toLocaleDateString('default', { weekday: 'short' });\n    base.setDate(base.getDate() + 1);\n    return name;\n  });\n})();\n\nexport const buildDataScales = (\n  rawData: ChartShallowDataShape[],\n  view: CalendarView\n) => {\n  // Get the most recent date to get the range from\n  // From the end date, lets find the start year/month of that\n  // From that start year/month, lets find the end year/month for our bounds\n  const startDate = min(rawData, (d) => d.key) || new Date();\n  const endDomain = view === 'year' ? 53 : 5;\n\n  let end, start;\n  if (view === 'year') {\n    // For year view, end at the most recent date and start 364 days before that\n    end = getStartOfDay(max(rawData, (d) => d.key) || new Date());\n    start = getStartOfDay(subDays(end, 365));\n  } else {\n    // For month view, start at the first of the month and end 4 weeks from that\n    start = getFirstOfMonth(startDate);\n    end = addWeeksToDate(start, endDomain);\n  }\n\n  // Base on the view type, swap out some ranges\n  const xDomainRange = view === 'year' ? 53 : 5;\n\n  // Build our x/y domains for days of week + number of weeks in year\n  const yDomain = range(7).reverse();\n  const xDomain = range(xDomainRange);\n\n  // Filter out dates that are not in the start/end ranges\n  // and turn them into something our chart can read\n  const dates = rawData\n    .filter(\n      (d) =>\n        (d.key as Date).getTime() > start.getTime() ||\n        (d.key as Date).getTime() < end.getTime()\n    )\n    .map((d) => ({\n      key: getStartOfDay(d.key as Date),\n      data: d.data\n    }));\n\n  // Find the first day of the duration and subtract the delta\n  const firstDayOfStart = start.getDay();\n  const curDate = getNewDayFromDay(start, -firstDayOfStart);\n  const rows: any[] = [];\n\n  // Build out the dataset for the n duration\n  for (let week = 0; week < xDomainRange; week++) {\n    const row = {\n      key: week,\n      data: [] as any\n    };\n\n    for (let day = 0; day <= 6; day++) {\n      const dayValue = dates.find((d) => d.key.getTime() === curDate.getTime());\n\n      row.data.push({\n        key: day,\n        data: dayValue?.data ?? undefined,\n        metadata: {\n          date: new Date(curDate.getTime()),\n          start: start,\n          end: end\n        }\n      });\n\n      curDate.setDate(curDate.getDate() + 1);\n    }\n\n    rows.push(row);\n  }\n\n  return {\n    data: rows,\n    yDomain,\n    xDomain,\n    start\n  };\n};\n","import React, { FC, useCallback, useMemo } from 'react';\nimport { ChartShallowDataShape } from '@/common/data';\nimport { Heatmap, HeatmapProps } from './Heatmap';\nimport {\n  LinearXAxis,\n  LinearYAxis,\n  LinearYAxisTickSeries,\n  LinearXAxisTickSeries,\n  LinearYAxisTickLabel,\n  LinearXAxisTickLabel,\n  LINEAR_Y_AXIS_TICK_LABEL_DEFAULT_PROPS,\n  LINEAR_X_AXIS_TICK_LABEL_DEFAULT_PROPS\n} from '@/common/Axis';\nimport { HeatmapSeries, HeatmapCell } from './HeatmapSeries';\nimport { ChartTooltip } from '@/common/Tooltip';\nimport { formatValue } from '@/common/utils/formatting';\nimport {\n  buildDataScales,\n  CalendarView,\n  addWeeksToDate,\n  weekDays\n} from './calendarUtils';\n\nexport interface CalendarHeatmapProps extends Omit<HeatmapProps, 'data'> {\n  /**\n   * Chart data shape.\n   */\n  data: ChartShallowDataShape[];\n\n  /**\n   * Height of the component.\n   */\n  height: number;\n\n  /**\n   * Width of the component.\n   */\n  width: number;\n\n  /**\n   * View of the calendar renderer.\n   */\n  view: CalendarView;\n}\n\nexport const CalendarHeatmap: FC<Partial<CalendarHeatmapProps>> = ({\n  view = 'year',\n  data,\n  series = (\n    <HeatmapSeries\n      padding={0.3}\n      emptyColor=\"transparent\"\n      cell={\n        <HeatmapCell\n          tooltip={\n            <ChartTooltip\n              content={(d) =>\n                `${formatValue(d.data.metadata.date)} ∙ ${formatValue(\n                  d.data.value\n                )}`\n              }\n            />\n          }\n        />\n      }\n    />\n  ),\n  ...rest\n}) => {\n  const {\n    data: domainData,\n    yDomain,\n    xDomain,\n    start\n  } = useMemo(() => buildDataScales(data, view), [data, view]);\n\n  // For month, only pass 1 tick value\n  const xTickValues = view === 'year' ? undefined : [1];\n\n  const getDayOfWeek = useCallback((day: number) => weekDays[day], []);\n\n  // Get the yAxis label formatting based on view type\n  const yAxisLabelFormat = useMemo(\n    () => (view === 'year' ? getDayOfWeek : () => null),\n    [getDayOfWeek, view]\n  );\n\n  // Format the xAxis label for the start + n week\n  const xAxisLabelFormat = useCallback(\n    (weeks: number) =>\n      addWeeksToDate(start, weeks).toLocaleString('default', { month: 'long' }),\n    [start]\n  );\n\n  return (\n    <Heatmap\n      {...rest}\n      series={series}\n      data={domainData}\n      yAxis={\n        <LinearYAxis\n          type=\"category\"\n          axisLine={null}\n          domain={yDomain}\n          tickSeries={\n            <LinearYAxisTickSeries\n              tickSize={20}\n              line={null}\n              label={\n                <LinearYAxisTickLabel padding={5} format={yAxisLabelFormat} />\n              }\n            />\n          }\n        />\n      }\n      xAxis={\n        <LinearXAxis\n          type=\"category\"\n          axisLine={null}\n          domain={xDomain}\n          tickSeries={\n            <LinearXAxisTickSeries\n              line={null}\n              tickValues={xTickValues}\n              label={\n                <LinearXAxisTickLabel\n                  padding={5}\n                  align=\"end\"\n                  format={xAxisLabelFormat}\n                />\n              }\n            />\n          }\n        />\n      }\n    />\n  );\n};\n","import React, { FC } from 'react';\nimport { Bar, BarProps } from '../BarChart';\nimport { ChartTooltip, TooltipTemplate } from '@/common/Tooltip';\n\nexport type LinearGaugeBarProps = BarProps;\n\nexport const LinearGaugeBar: FC<Partial<LinearGaugeBarProps>> = (props) => (\n  <Bar\n    tooltip={\n      <ChartTooltip\n        placement=\"top\"\n        content={(data) => (\n          <TooltipTemplate value={{ y: data.value, x: data.y }} />\n        )}\n      />\n    }\n    {...props}\n  />\n);\n","import React, { FC } from 'react';\n\nexport interface LinearGaugeOuterBarProps extends SVGRect {\n  /**\n   * Height of the chart. Set by `LinearGauge` component.\n   */\n  height: number;\n\n  /**\n   * Width of the chart. Set by `LinearGauge` component.\n   */\n  width: number;\n\n  /**\n   * Fill for the bar element.\n   */\n  fill: string;\n}\n\nexport const LinearGaugeOuterBar: FC<Partial<LinearGaugeOuterBarProps>> = ({\n  height,\n  width,\n  fill = '#484848',\n  ...rest\n}) => (\n  <rect\n    {...rest}\n    fill={fill}\n    width={Math.max(width!, 0)}\n    height={Math.max(height!, 0)}\n  />\n);\n","import React, { Fragment, ReactElement, FC } from 'react';\nimport { BarSeries, BarSeriesProps } from '@/BarChart';\nimport { LinearGaugeBar, LinearGaugeBarProps } from './LinearGaugeBar';\nimport {\n  LinearGaugeOuterBar,\n  LinearGaugeOuterBarProps\n} from './LinearGaugeOuterBar';\nimport { CloneElement } from 'reablocks';\n\nexport interface LinearGaugeSeriesProps extends Omit<BarSeriesProps, 'bar'> {\n  /**\n   * Height of the chart. Set by `LinearGauge` component.\n   */\n  height: number;\n\n  /**\n   * Width of the chart. Set by `LinearGauge` component.\n   */\n  width: number;\n\n  /**\n   * Whether its a multi-series or not. Set by `LinearGauge` component.\n   */\n  isMultiSeries: boolean;\n\n  /**\n   * Bar element. Only applicable for single series.\n   */\n  bar: ReactElement<LinearGaugeBarProps, typeof LinearGaugeBar>;\n\n  /**\n   * Outer bar element. Only applicable for single series.\n   */\n  outerBar: ReactElement<LinearGaugeOuterBarProps, typeof LinearGaugeOuterBar>;\n}\n\nexport const LinearGaugeSeries: FC<Partial<LinearGaugeSeriesProps>> = ({\n  height,\n  width,\n  bar = <LinearGaugeBar />,\n  outerBar = <LinearGaugeOuterBar />,\n  isMultiSeries,\n  ...rest\n}) => (\n  <Fragment>\n    {!isMultiSeries && outerBar && (\n      <CloneElement<LinearGaugeOuterBarProps>\n        element={outerBar}\n        height={height}\n        width={width}\n      />\n    )}\n    <BarSeries\n      {...rest}\n      layout=\"horizontal\"\n      tooltip={null}\n      bar={<CloneElement<LinearGaugeOuterBarProps> element={bar} />}\n    />\n  </Fragment>\n);\n","import React, { FC, Fragment, ReactElement, useCallback, useMemo } from 'react';\nimport {\n  ChartProps,\n  ChartContainer,\n  ChartContainerChildProps\n} from '@/common/containers';\nimport {\n  ChartShallowDataShape,\n  buildBarStackData,\n  ChartInternalNestedDataShape,\n  buildShallowChartData,\n  ChartNestedDataShape\n} from '@/common/data';\nimport { getXScale, getYScale } from '@/common/scales';\nimport { CloneElement } from 'reablocks';\nimport { LinearGaugeSeries, LinearGaugeSeriesProps } from './LinearGaugeSeries';\n\nexport interface LinearGaugeProps extends ChartProps {\n  /**\n   * Data the chart will receive to render.\n   */\n  data: ChartShallowDataShape | ChartShallowDataShape[];\n\n  /**\n   * The series component that renders the bar components.\n   */\n  series: ReactElement<LinearGaugeSeriesProps, typeof LinearGaugeSeries>;\n\n  /**\n   * Min value to scale on. Only applicable for single-series.\n   */\n  minValue: number;\n\n  /**\n   * Max value to scale on. Only applicable for single-series.\n   */\n  maxValue: number;\n}\n\nexport const LinearGauge: FC<Partial<LinearGaugeProps>> = ({\n  id,\n  width,\n  height,\n  margins,\n  className,\n  containerClassName,\n  series = <LinearGaugeSeries />,\n  data,\n  minValue = 0,\n  maxValue = 100\n}) => {\n  const transformedData = useMemo(() => {\n    if (Array.isArray(data)) {\n      return buildBarStackData(\n        [\n          {\n            key: 'default',\n            data\n          }\n        ] as ChartNestedDataShape[],\n        'expand',\n        'horizontal'\n      );\n    } else {\n      return buildShallowChartData([data], 'horizontal');\n    }\n  }, [data]);\n\n  const getScales = useCallback(\n    (\n      isMultiSeries: boolean,\n      data: ChartInternalNestedDataShape[],\n      width: number,\n      height: number,\n      minValue: number,\n      maxValue: number\n    ) => {\n      const domain = !isMultiSeries ? [minValue, maxValue] : undefined;\n\n      const keyScale = getXScale({\n        width,\n        type: 'value',\n        data,\n        domain,\n        isMultiSeries\n      });\n\n      const valueScale = getYScale({\n        type: 'category',\n        height,\n        data,\n        isMultiSeries\n      });\n\n      return {\n        keyScale,\n        valueScale\n      };\n    },\n    []\n  );\n\n  const renderChart = useCallback(\n    ({ chartHeight, chartWidth, id, chartSized }: ChartContainerChildProps) => {\n      const isMultiSeries = Array.isArray(data);\n      const type = isMultiSeries ? 'stackedNormalized' : 'standard';\n      const { keyScale, valueScale } = getScales(\n        isMultiSeries,\n        transformedData as ChartInternalNestedDataShape[],\n        chartWidth,\n        chartHeight,\n        minValue,\n        maxValue\n      );\n\n      return (\n        <Fragment>\n          {chartSized && (\n            <CloneElement<LinearGaugeSeriesProps>\n              element={series}\n              id={`linear-gauge-series-${id}`}\n              data={transformedData}\n              isCategorical={true}\n              xScale={keyScale}\n              yScale={valueScale}\n              type={type}\n              height={chartHeight}\n              width={chartWidth}\n              isMultiSeries={isMultiSeries}\n            />\n          )}\n        </Fragment>\n      );\n    },\n    [data, getScales, maxValue, minValue, series, transformedData]\n  );\n\n  return (\n    <ChartContainer\n      id={id}\n      width={width}\n      height={height}\n      margins={margins}\n      className={className}\n      containerClassName={containerClassName}\n    >\n      {renderChart}\n    </ChartContainer>\n  );\n};\n","import { useEffect } from 'react';\nimport { DEFAULT_TRANSITION } from '@/common/Motion';\nimport { useMotionValue, useSpring } from 'motion/react';\nimport { interpolate } from 'd3-interpolate';\n\nexport const useInterpolate = ({ data, animated }) => {\n  const transition = animated\n    ? { ...DEFAULT_TRANSITION }\n    : {\n      delay: 0,\n      type: false\n    };\n\n  const d = useMotionValue(data.path);\n  const spring = useSpring(0, { stiffness: 300, damping: 30 });\n\n  useEffect(() => {\n    const interpolator = interpolate(d.get(), data.path);\n    const prevSpring = spring.get();\n    spring.set(1 + prevSpring);\n\n    return spring.on('change', (v) => d.set(interpolator(v - prevSpring)));\n  }, [d, data.path, spring]);\n\n  return { transition, d };\n};\n","import React, {\n  FC,\n  useRef,\n  ReactElement,\n  useState,\n  Fragment,\n  useMemo\n} from 'react';\nimport { IVennLayout } from '@upsetjs/venn.js';\nimport { ChartTooltip, ChartTooltipProps } from '@/common/Tooltip';\nimport { CloneElement } from 'reablocks';\nimport { motion } from 'motion/react';\nimport { useInterpolate } from './useInterpolate';\nimport { Mask, MaskProps } from '@/common/Mask';\nimport { Gradient, GradientProps } from '@/common/Gradient';\nimport { useHoverIntent } from '@/common/utils/useHoverIntent';\nimport { Glow, getAriaLabel } from '@/common';\nimport { generateGlowStyles } from '@/common/Glow/utils';\n\nexport interface VennArcProps {\n  /**\n   * Whether the shape is active or not.\n   */\n  active?: boolean | null;\n\n  /**\n   * Id set by the parent.\n   */\n  id: string;\n\n  /**\n   * Whether the chart is animated or not.\n   */\n  animated?: boolean;\n\n  /**\n   * Fill color for the arc.\n   */\n  fill: string;\n\n  /**\n   * Stroke for the arc.\n   */\n  stroke?:\n    | string\n    | ((\n        data: IVennLayout<any>[],\n        index: number,\n        isActive: boolean | null,\n        isHovered: boolean | null\n      ) => string);\n\n  /**\n   * The internal data object built by venn.js\n   */\n  data: IVennLayout<any>;\n\n  /**\n   * Whether the chart is disabled.\n   */\n  disabled?: boolean;\n\n  /**\n   * Stroke on the arc.\n   */\n  strokeWidth?: number;\n\n  /**\n   * Initial style of arc.\n   */\n  initialStyle?: any;\n\n  /**\n   * Active style of arc.\n   */\n  activeStyle?: any;\n\n  /**\n   * Inactive style of arc.\n   */\n  inactiveStyle?: any;\n\n  /**\n   * CSS Styles for the arc.\n   */\n  style?: any;\n\n  /**\n   * Tooltip element.\n   */\n  tooltip?: ReactElement<ChartTooltipProps, typeof ChartTooltip> | null;\n\n  /**\n   * Mask element for the arc.\n   */\n  mask: ReactElement<MaskProps, typeof Mask> | null;\n\n  /**\n   * Gradient shades for the arc.\n   */\n  gradient: ReactElement<GradientProps, typeof Gradient> | null;\n\n  /**\n   * Glow styling for the arc.\n   */\n  glow: Glow;\n\n  /**\n   * Event for when the arc is clicked.\n   */\n  onClick: (event) => void;\n\n  /**\n   * Event for when the arc has mouse enter.\n   */\n  onMouseEnter: (event) => void;\n\n  /**\n   * Event for when the arc has mouse leave.\n   */\n  onMouseLeave: (event) => void;\n}\n\nexport const VennArc: FC<Partial<VennArcProps>> = ({\n  data,\n  fill,\n  disabled,\n  animated,\n  stroke,\n  mask,\n  id,\n  style,\n  active = false,\n  inactiveStyle = { opacity: 0.3 },\n  activeStyle = { opacity: 0.8 },\n  initialStyle = { opacity: 0.6 },\n  strokeWidth = 3,\n  gradient = <Gradient />,\n  glow,\n  tooltip = <ChartTooltip />,\n  onClick = () => undefined,\n  onMouseEnter = () => undefined,\n  onMouseLeave = () => undefined\n}) => {\n  const [internalActive, setInternalActive] = useState<boolean>(false);\n  const arcRef = useRef<any | null>(null);\n  const { transition, d } = useInterpolate({ animated, data });\n  const currentStyle = active\n    ? activeStyle\n    : active === null\n      ? inactiveStyle\n      : initialStyle;\n\n  const arcFill =\n    gradient && !mask\n      ? `url(#gradient-${id})`\n      : mask\n        ? `url(#mask-pattern-${id})`\n        : fill;\n\n  const { pointerOut, pointerOver } = useHoverIntent({\n    onPointerOver: (event) => {\n      if (!disabled) {\n        setInternalActive(true);\n        onMouseEnter?.({\n          value: data.data,\n          nativeEvent: event\n        });\n      }\n    },\n    onPointerOut: (event) => {\n      if (!disabled) {\n        setInternalActive(false);\n        onMouseLeave?.({\n          value: data.data,\n          nativeEvent: event\n        });\n      }\n    }\n  });\n\n  const tooltipData = useMemo(\n    () => ({ y: data.data.size, x: data.data?.sets?.join(' | ') }),\n    [data]\n  );\n  const ariaLabelData = useMemo(() => getAriaLabel(tooltipData), [tooltipData]);\n\n  return (\n    <g\n      title={data.data.key}\n      onPointerOver={pointerOver}\n      onPointerOut={pointerOut}\n      onClick={(event) => {\n        if (!disabled) {\n          onClick?.({\n            value: data.data,\n            nativeEvent: event\n          });\n        }\n      }}\n      tabIndex={0}\n      aria-label={ariaLabelData}\n      role=\"graphics-document\"\n    >\n      <motion.path\n        ref={arcRef}\n        fill={arcFill}\n        id={`${id}-arc`}\n        strokeWidth={strokeWidth}\n        stroke={stroke as string}\n        transition={transition}\n        d={d}\n        initial={initialStyle}\n        animate={currentStyle}\n        style={{\n          ...style,\n          ...generateGlowStyles({\n            glow,\n            colorSchemeColor: typeof stroke === 'string' ? stroke : null\n          })\n        }}\n      />\n      {mask && (\n        <Fragment>\n          <Mask id={`mask-${id}`} fill={`url(#gradient-${id})`} />\n          <CloneElement<MaskProps>\n            element={mask}\n            id={`mask-pattern-${id}`}\n            fill={fill}\n          />\n        </Fragment>\n      )}\n      {gradient && (\n        <CloneElement<GradientProps>\n          element={gradient}\n          id={`gradient-${id}`}\n          color={fill}\n        />\n      )}\n      {tooltip && !tooltip.props.disabled && (\n        <CloneElement<ChartTooltipProps>\n          element={tooltip}\n          visible={!!internalActive}\n          reference={arcRef}\n          value={tooltipData}\n        />\n      )}\n    </g>\n  );\n};\n","import React, { FC } from 'react';\nimport { motion } from 'motion/react';\nimport { wrapText } from '@/common/utils/wrapText';\nimport { DEFAULT_TRANSITION } from '@/common/Motion';\n\nexport interface VennLabelProps {\n  /**\n   * Whether the shape is active or not.\n   */\n  active?: boolean | null;\n\n  /**\n   * Set by the parent element.\n   */\n  id?: string;\n\n  /**\n   * Show all labels or just the large ones. Default false.\n   */\n  showAll?: boolean;\n\n  /**\n   * The label type to show.\n   */\n  labelType: 'key' | 'value';\n\n  /**\n   * Should wrap text or not.\n   */\n  wrap?: boolean;\n\n  /**\n   * The internal data object built by venn.js\n   */\n  data: any;\n\n  /**\n   * Font size of the text.\n   */\n  fontSize?: number;\n\n  /**\n   * Font family of the text.\n   */\n  fontFamily?: string;\n\n  /**\n   * Fill of the text.\n   */\n  fill?: string;\n\n  /**\n   * Whether the chart is animated or not.\n   */\n  animated?: boolean;\n\n  /**\n   * Format label.\n   */\n  format?: (data) => any;\n}\n\nexport const VennLabel: FC<Partial<VennLabelProps>> = ({\n  data,\n  format,\n  id,\n  active,\n  labelType = 'key',\n  showAll = false,\n  wrap = true,\n  animated = true,\n  fill,\n  fontSize = 11,\n  fontFamily = 'sans-serif'\n}) => {\n  // If the text area is very large, then lets just skip showing the label\n  if (!showAll && !data.arcs?.filter((a) => a.large).length) {\n    return null;\n  }\n\n  const key =\n    labelType === 'key' ? data.data?.sets?.join(' | ') : data.data.size;\n\n  const transition = animated ? DEFAULT_TRANSITION : { delay: 0, type: false };\n  const text = wrap\n    ? wrapText({\n      key,\n      x: data.text.x,\n      fontFamily,\n      fontSize,\n      width: data?.circles?.[0]?.radius\n    })\n    : key;\n\n  return (\n    <motion.text\n      id={`${id}-text`}\n      fill={fill}\n      pointerEvents=\"none\"\n      fontFamily={fontFamily}\n      fontSize={fontSize}\n      initial={\n        {\n          attrX: data.text.x,\n          attrY: data.text.y,\n          opacity: 1\n        } as any\n      }\n      animate={\n        {\n          attrX: data.text.x,\n          attrY: data.text.y,\n          opacity: active === null ? 0.3 : 1\n        } as any\n      }\n      transition={transition}\n      textAnchor=\"middle\"\n    >\n      {format ? format(data) : text}\n    </motion.text>\n  );\n};\n","import React, { FC, Fragment, isValidElement } from 'react';\nimport { motion } from 'motion/react';\nimport { DEFAULT_TRANSITION } from '@/common/Motion';\n\nexport interface VennOuterLabelProps {\n  /**\n   * The internal data object built by venn.js\n   */\n  data: any;\n\n  /**\n   * Font size of the text.\n   */\n  fontSize?: number;\n\n  /**\n   * Font family of the text.\n   */\n  fontFamily?: string;\n\n  /**\n   * Fill of the text.\n   */\n  fill?: string;\n\n  /**\n   * Whether the chart is animated or not.\n   */\n  animated?: boolean;\n\n  /**\n   * Format label.\n   */\n  format?: (data) => any;\n}\n\nexport const VennOuterLabel: FC<Partial<VennOuterLabelProps>> = ({\n  data,\n  format,\n  animated = true,\n  fill = '#000',\n  fontSize = 14,\n  fontFamily = 'sans-serif'\n}) => {\n  const transition = animated ? DEFAULT_TRANSITION : { delay: 0, type: false };\n  const text = data.set.data.key;\n\n  const label = format ? format(data) : text;\n  const isElement = isValidElement(label);\n  const showIcon = isElement && data.set.icon;\n\n  // TODO: framer-motion doesn't seem to like the translates on the g\n  // initial={pos} animate={pos}\n  const pos = {\n    x: showIcon ? data.set.icon.x : data.set.text.x,\n    y: showIcon ? data.set.icon.y : data.set.text.y\n  };\n\n  return (\n    <Fragment>\n      {isElement ? (\n        <g style={{ transform: `translate(${pos.x}px, ${pos.y}px)` }}>\n          {label}\n        </g>\n      ) : (\n        <motion.text\n          fill={fill}\n          style={{ pointerEvents: 'none', fontFamily, fontSize }}\n          textAnchor={data.set.align === 'middle' ? 'center' : data.set.align}\n          alignmentBaseline={data.set.verticalAlign}\n          initial={\n            {\n              attrX: pos.x,\n              attrY: pos.y\n            } as any\n          }\n          animate={\n            {\n              attrX: pos.x,\n              attrY: pos.y\n            } as any\n          }\n          transition={transition}\n        >\n          {label}\n        </motion.text>\n      )}\n    </Fragment>\n  );\n};\n","import React, {\n  FC,\n  Fragment,\n  ReactElement,\n  useCallback,\n  useState,\n  useMemo\n} from 'react';\nimport { IVennLayout } from '@upsetjs/venn.js';\nimport { ColorSchemeType, getColor } from '@/common/color';\nimport { VennArc, VennArcProps } from './VennArc';\nimport { VennLabel, VennLabelProps } from './VennLabel';\nimport { motion } from 'motion/react';\nimport { CloneElement } from 'reablocks';\nimport chroma from 'chroma-js';\nimport { VennOuterLabel, VennOuterLabelProps } from './VennOuterLabel';\nimport invert from 'invert-color';\nimport { DEFAULT_TRANSITION } from '@/common/Motion';\nimport { identifier } from 'safe-identifier';\n\nexport interface VennSeriesProps {\n  /**\n   * Id set by the parent.\n   */\n  id: string;\n\n  /**\n   * Active managed selections.\n   */\n  selections?: string[];\n\n  /**\n   * The internal data object built by venn.js\n   */\n  data: IVennLayout<any>[];\n\n  /**\n   * Color scheme for the chart.\n   */\n  colorScheme: ColorSchemeType;\n\n  /**\n   * Whether the chart is disabled.\n   */\n  disabled?: boolean;\n\n  /**\n   * Whether the chart is animated or not.\n   */\n  animated?: boolean;\n\n  /**\n   * Label element.\n   */\n  label?: ReactElement<VennLabelProps, typeof VennLabel> | null;\n\n  /**\n   * Label element.\n   */\n  outerLabel?: ReactElement<VennOuterLabelProps, typeof VennOuterLabel> | null;\n\n  /**\n   * Arc element.\n   */\n  arc?: ReactElement<VennArcProps, typeof VennArc> | null;\n}\n\nexport const VennSeries: FC<Partial<VennSeriesProps>> = ({\n  data,\n  id,\n  selections,\n  animated = true,\n  disabled = false,\n  colorScheme = 'cybertron',\n  outerLabel = <VennOuterLabel />,\n  arc = <VennArc />,\n  label = <VennLabel />\n}) => {\n  const transition = animated ? DEFAULT_TRANSITION : { type: false, delay: 0 };\n  const [actives, setActives] = useState<string[]>([]);\n  const [hovered, setHovered] = useState<string | null>(null);\n\n  const onActivate = useCallback(\n    (point: string) => {\n      setHovered(point);\n\n      setActives(\n        data\n          .filter((d) => d.data?.key.indexOf(point) > -1)\n          .map((d) => d.data?.key)\n      );\n    },\n    [data]\n  );\n\n  const renderArc = useCallback(\n    (d: IVennLayout<any> & { set?: any }, index: number) => {\n      // Get the colors of the fill\n      const fill = getColor({\n        data,\n        colorScheme,\n        point: d.data,\n        index\n      });\n\n      const textFill = fill\n        ? invert(chroma(fill).darken(0.5).hex(), true)\n        : 'white';\n\n      const arcFill = arc.props.fill || fill;\n\n      const key = d?.data?.key;\n      const safeKey = identifier(d.data?.key);\n      const isSelected = selections?.includes(key);\n\n      // Get the state of the arc\n      const isHovered = hovered === key || isSelected;\n      const isActive =\n        isSelected ||\n        actives.includes(key) ||\n        (actives.length > 0 ? null : false);\n\n      const getStrokeColor = () => {\n        if (typeof arc.props.stroke === 'function') {\n          return arc.props.stroke(data, index, isActive, isHovered);\n        }\n        if (arc.props.stroke !== undefined) {\n          return arc.props.stroke;\n        }\n\n        // fallback to fill (determined by colorScheme) if stroke is undefined\n        return fill;\n      };\n\n      const stroke = getStrokeColor();\n\n      const arcStroke =\n        stroke ||\n        chroma(arcFill)\n          .darken(isActive ? 0.8 : 0.5)\n          .hex();\n\n      return (\n        <Fragment key={safeKey}>\n          <CloneElement<VennArcProps>\n            element={arc}\n            id={`${id}-${safeKey}`}\n            data={d}\n            fill={arcFill}\n            stroke={arcStroke}\n            disabled={disabled}\n            animated={animated}\n            active={isActive}\n            onMouseEnter={() => onActivate(key)}\n            onMouseLeave={() => {\n              setActives([]);\n              setHovered(null);\n            }}\n          />\n          {label && (\n            <CloneElement<VennLabelProps>\n              element={label}\n              data={d}\n              id={`${id}-${safeKey}`}\n              active={isActive}\n              animated={animated}\n              fill={textFill}\n              {...label.props}\n            />\n          )}\n          {d.set && outerLabel && (\n            <CloneElement<VennLabelProps>\n              element={outerLabel}\n              data={d}\n              animated={animated}\n            />\n          )}\n        </Fragment>\n      );\n    },\n    [\n      data,\n      colorScheme,\n      arc,\n      selections,\n      hovered,\n      actives,\n      id,\n      disabled,\n      animated,\n      label,\n      outerLabel,\n      onActivate\n    ]\n  );\n\n  const topArcs = useMemo(() => {\n    const result = [];\n\n    if (actives.length > 0) {\n      result.push(...actives.filter((s) => s !== hovered));\n    }\n\n    if (selections?.length) {\n      result.push(\n        ...selections.filter((s) => !actives.includes(s) && s !== hovered)\n      );\n    }\n\n    if (hovered) {\n      result.push(hovered);\n    }\n\n    return result;\n  }, [hovered, actives, selections]);\n\n  return (\n    <motion.g\n      initial={{ opacity: 0, scale: 0 }}\n      animate={{ opacity: 1, scale: 1 }}\n      transition={transition}\n    >\n      {data.map(renderArc)}\n      {topArcs.length > 0 &&\n        topArcs.map((a) => (\n          <use\n            key={a}\n            xlinkHref={`#${id}-${a}-arc`}\n            style={{ pointerEvents: 'none' }}\n          />\n        ))}\n      {data.map((d, index) => (\n        <use\n          key={index}\n          xlinkHref={`#${id}-${identifier(d.data?.key)}-text`}\n          style={{ pointerEvents: 'none' }}\n        />\n      ))}\n    </motion.g>\n  );\n};\n","import venn0 from './venn0.json';\nimport venn1 from './venn1.json';\nimport venn2 from './venn2.json';\nimport venn3 from './venn3.json';\nimport venn4 from './venn4.json';\nimport venn5 from './venn5.json';\n\nexport interface BoundingBox {\n  width: number;\n  height: number;\n}\n\n// Static shapes for rendering\nconst shapes = [venn0, venn1, venn2, venn3, venn4, venn5];\n\n/**\n * Sort helper.\n * Reference: https://stackoverflow.com/a/64449554/1288340\n */\nconst upto = (limit) => Array.from({ length: limit }, (_, i) => i);\n\n/**\n * Detect ellipse.\n * Reference: https://github.com/upsetjs/chartjs-chart-venn/blob/master/src/model/generate.ts#L4\n */\nfunction isEllipse(d) {\n  return typeof d.rx === 'number';\n}\n\n/**\n * Generate all combinations of a given array.\n * Reference: https://stackoverflow.com/questions/5752002/find-all-possible-subset-combos-in-an-array\n */\nfunction combinations(array: string[]) {\n  return (new Array(1 << array.length) as any)\n    .fill()\n    .map((_e1, i) => array.filter((_e2, j) => i & (1 << j)));\n}\n\n/**\n * Given a array set, lookup the data.\n */\nfunction lookup(combo: string[], data: any[]) {\n  const key = combo.join('|');\n  const found = data.find((d) => d.key === key);\n\n  return {\n    key,\n    sets: combo,\n    size: found?.size || 0\n  };\n}\n\n/**\n * Build the data combinations for the layout.\n */\nfunction buildData(data: any[]) {\n  // Collect all unique sets and sort by size\n  const uniqueSets = data\n    .filter((d) => d.sets.length === 1)\n    .sort((a, b) => b.size - a.size);\n\n  // Map our unique sets\n  const uniqueSetKeys = uniqueSets.map((u) => u.key);\n\n  // Build all combos and return 1+ combos\n  const sets: any[] = combinations(uniqueSetKeys);\n  const filteredSets = sets.slice(1, sets.length);\n\n  // Sort the child sets based on the parent\n  const result = filteredSets.map((d) =>\n    [...d].sort((a, b) => uniqueSetKeys.indexOf(a) - uniqueSetKeys.indexOf(b))\n  );\n\n  // Sort the data based on index of keys and length\n  // Reference: https://stackoverflow.com/a/64449554/1288340\n  result.sort(\n    (a, b) =>\n      a.length - b.length ||\n      upto(a.length).reduce(\n        (diff, i) =>\n          diff || uniqueSetKeys.indexOf(a[i]) - uniqueSetKeys.indexOf(b[i]),\n        0\n      )\n  );\n\n  // reshape the data key so they will match combos\n  const keyedData = data.map((d) => {\n    const sets = [...d.sets].sort(\n      (a, b) => uniqueSetKeys.indexOf(a) - uniqueSetKeys.indexOf(b)\n    );\n    const key = sets.join('|');\n\n    return {\n      size: d.size,\n      sets,\n      key\n    };\n  });\n\n  return {\n    uniqueCount: uniqueSets.length,\n    data: result.map((r) => lookup(r, keyedData))\n  };\n}\n\n/**\n * Generate the arc slice path.\n * Reference: https://github.com/upsetjs/chartjs-chart-venn/blob/master/src/model/generate.ts#L4\n */\nexport function generateArcSlicePath(s: any, refs: any[]) {\n  return `M ${s.x1},${s.y1} ${s.arcs\n    .map((arc) => {\n      const ref = refs[arc.ref];\n      const rx = isEllipse(ref) ? ref.rx : ref.r;\n      const ry = isEllipse(ref) ? ref.ry : ref.r;\n      const rot = isEllipse(ref) ? ref.rotation : 0;\n      return `A ${rx} ${ry} ${rot} ${arc.large ? 1 : 0} ${arc.sweep ? 1 : 0} ${\n        arc.x2\n      } ${arc.y2}`;\n    })\n    .join(' ')}`;\n}\n\n/**\n * Build the layout for the given chart.\n * Reference: https://github.com/upsetjs/chartjs-chart-venn/blob/master/src/model/generate.ts#L4\n */\nfunction buildLayout({ data, uniqueCount }, box: BoundingBox) {\n  const shape = shapes[Math.min(shapes.length - 1, uniqueCount)];\n  const f = Math.min(box.width / shape.bb.width, box.height / shape.bb.height);\n  const x = f * -shape.bb.x + (box.width - f * shape.bb.width) / 2 + 0;\n  const y = f * -shape.bb.y + (box.height - f * shape.bb.height) / 2 + 0;\n  const mx = (v: number) => x + f * v;\n  const my = (v: number) => y + f * v;\n\n  const shapeSets = shape.sets.map((c, i) => ({\n    ...c,\n    ...{\n      data: data[i],\n      cx: mx(c.cx),\n      cy: my(c.cy),\n      text: {\n        x: mx(c.text.x),\n        y: my(c.text.y)\n      },\n      ...(c.icon\n        ? {\n          icon: {\n            x: mx(c.icon.x),\n            y: my(c.icon.y)\n          }\n        }\n        : {})\n    },\n    ...(isEllipse(c)\n      ? {\n        rx: c.rx * f,\n        ry: c.ry * f\n      }\n      : {\n        r: c.r * f\n      })\n  }));\n\n  const intersections = shape.intersections.map((c, i) => ({\n    text: {\n      x: mx(c.text.x),\n      y: my(c.text.y)\n    },\n    x1: mx(c.x1),\n    y1: my(c.y1),\n    data: data[i],\n    set: shapeSets[i],\n    arcs: c.arcs.map((a) => ({\n      ...a,\n      x2: mx(a.x2),\n      y2: my(a.y2)\n    }))\n  }));\n\n  return intersections.map((i) => ({\n    ...i,\n    path: generateArcSlicePath(i, shapeSets)\n  }));\n}\n\n/**\n * Generate the star euler layout.\n * Adapted from: https://github.com/upsetjs/chartjs-chart-venn\n */\nexport function starEulerLayout(data: any[], bb: BoundingBox) {\n  return buildLayout(buildData(data), bb);\n}\n","import React, { FC, ReactElement, useCallback } from 'react';\nimport {\n  ChartContainer,\n  ChartContainerChildProps,\n  ChartProps\n} from '@/common/containers';\nimport { layout } from '@upsetjs/venn.js';\nimport { VennSeries, VennSeriesProps } from './VennSeries';\nimport { CloneElement } from 'reablocks';\nimport { starEulerLayout } from './starEuler';\n\nexport interface VennDiagramData {\n  /**\n   * List of Keys for the data.\n   */\n  key: string[];\n\n  /**\n   * Size of the data keys.\n   */\n  data: number;\n}\n\nexport interface VennDiagramProps extends ChartProps {\n  /**\n   * Type of the chart.\n   */\n  type?: 'venn' | 'euler' | 'starEuler';\n\n  /**\n   * Data the chart will receive to render.\n   */\n  data: VennDiagramData[];\n\n  /**\n   * The series component that renders the arc and label components.\n   */\n  series?: ReactElement<VennSeriesProps, typeof VennSeries> | null;\n\n  /**\n   * Whether the chart is disabled.\n   */\n  disabled?: boolean;\n}\n\nexport const VennDiagram: FC<VennDiagramProps> = ({\n  id,\n  type = 'venn',\n  width,\n  height,\n  margins,\n  className,\n  containerClassName,\n  data,\n  disabled,\n  series = <VennSeries />\n}) => {\n  const renderChart = useCallback(\n    (containerProps: ChartContainerChildProps) => {\n      const normalized = data.map((d) => ({\n        key: d.key.join('|'),\n        sets: d.key,\n        size: d.data\n      }));\n\n      let layoutData;\n      if (type === 'starEuler') {\n        layoutData = starEulerLayout(normalized, {\n          height: containerProps.height,\n          width: containerProps.width\n        });\n      } else {\n        layoutData = layout(normalized, {\n          height: containerProps.height,\n          width: containerProps.width,\n          distinct: type !== 'euler'\n        });\n      }\n\n      return (\n        <CloneElement<VennSeriesProps>\n          element={series}\n          data={layoutData}\n          disabled={disabled}\n          id={containerProps.id}\n        />\n      );\n    },\n    [data, disabled, series, type]\n  );\n\n  return (\n    <ChartContainer\n      id={id}\n      width={width}\n      height={height}\n      margins={margins}\n      containerClassName={containerClassName}\n      xAxisVisible={false}\n      yAxisVisible={false}\n      center={false}\n      className={className}\n    >\n      {renderChart}\n    </ChartContainer>\n  );\n};\n","import React, {\n  FC,\n  Fragment,\n  ReactElement,\n  useMemo,\n  useRef,\n  useState\n} from 'react';\nimport { HierarchyCircularNode } from 'd3-hierarchy';\nimport { ChartTooltip, ChartTooltipProps } from '@/common/Tooltip';\nimport { CloneElement } from 'reablocks';\nimport { motion } from 'motion/react';\nimport { Gradient, GradientProps } from '@/common/Gradient';\nimport { Mask, MaskProps } from '@/common/Mask';\nimport { DEFAULT_TRANSITION } from '@/common/Motion';\nimport { useHoverIntent } from '@/common/utils/useHoverIntent';\nimport { Glow } from '@/common/Glow';\nimport { generateGlowStyles } from '@/common/Glow/utils';\nimport { getAriaLabel } from '@/common';\n\nexport interface BubbleProps {\n  /**\n   * Id set by the parent.\n   */\n  id: string;\n\n  /**\n   * The internal data object built by d3\n   */\n  data: HierarchyCircularNode<any>;\n\n  /**\n   * Fill for the bubble.\n   */\n  fill: string;\n\n  /**\n   * Whether the chart is animated or not.\n   */\n  animated?: boolean;\n\n  /**\n   * Tooltip element.\n   */\n  tooltip?: ReactElement<ChartTooltipProps, typeof ChartTooltip> | null;\n\n  /**\n   * Mask element for the bubble.\n   */\n  mask: ReactElement<MaskProps, typeof Mask> | null;\n\n  /**\n   * Glow styling for the bubble.\n   */\n  glow?: Glow;\n\n  /**\n   * Gradient shades for the bubble.\n   */\n  gradient: ReactElement<GradientProps, typeof Gradient> | null;\n\n  /**\n   * Event for when the bubble is clicked.\n   */\n  onClick?: (\n    event: React.MouseEvent<SVGCircleElement>,\n    currentItem?: HierarchyCircularNode<any>\n  ) => void;\n\n  /**\n   * Event for when the mouse enters bubble.\n   */\n  onMouseEnter?: (event) => void;\n\n  /**\n   * Event for when the mouse leaves the bubble.\n   */\n  onMouseLeave?: (event) => void;\n}\n\nexport const Bubble: FC<Partial<BubbleProps>> = ({\n  id,\n  data,\n  fill,\n  mask,\n  gradient,\n  glow,\n  onClick,\n  onMouseEnter,\n  onMouseLeave,\n  animated,\n  tooltip = <ChartTooltip />\n}) => {\n  const [internalActive, setInternalActive] = useState<boolean>(false);\n  const bubbleRef = useRef<any | null>(null);\n  const transition = animated ? DEFAULT_TRANSITION : { type: false, delay: 0 };\n\n  const { pointerOut, pointerOver } = useHoverIntent({\n    onPointerOver: (event) => {\n      setInternalActive(true);\n      onMouseEnter?.(event);\n    },\n    onPointerOut: (event) => {\n      setInternalActive(false);\n      onMouseLeave?.(event);\n    }\n  });\n\n  const arcFill =\n    gradient && !mask\n      ? `url(#gradient-${id})`\n      : mask\n        ? `url(#mask-pattern-${id})`\n        : fill;\n\n  const tooltipData = useMemo(\n    () => ({ y: data.data.data, x: data.data.key }),\n    [data]\n  );\n  const ariaLabelData = useMemo(() => getAriaLabel(tooltipData), [tooltipData]);\n\n  return (\n    <Fragment>\n      <motion.circle\n        id={`${id}-bubble`}\n        ref={bubbleRef}\n        fill={arcFill}\n        style={generateGlowStyles({ glow })}\n        initial={{\n          r: data.r,\n          cx: data.x,\n          cy: data.y\n        }}\n        animate={{\n          r: data.r,\n          cx: data.x,\n          cy: data.y\n        }}\n        transition={transition}\n        onClick={(event) => onClick && onClick(event, data)}\n        onPointerOver={pointerOver}\n        onPointerOut={pointerOut}\n        tabIndex={0}\n        aria-label={ariaLabelData}\n        role=\"graphics-document\"\n      />\n      {mask && (\n        <Fragment>\n          <Mask id={`mask-${id}`} fill={`url(#gradient-${id})`} />\n          <CloneElement<MaskProps>\n            element={mask}\n            id={`mask-pattern-${id}`}\n            fill={fill}\n          />\n        </Fragment>\n      )}\n      {gradient && (\n        <CloneElement<GradientProps>\n          element={gradient}\n          id={`gradient-${id}`}\n          color={fill}\n        />\n      )}\n      {tooltip && !tooltip.props.disabled && (\n        <CloneElement<ChartTooltipProps>\n          element={tooltip}\n          visible={!!internalActive}\n          reference={bubbleRef}\n          value={tooltipData}\n        />\n      )}\n    </Fragment>\n  );\n};\n","import React, { FC, isValidElement } from 'react';\nimport { HierarchyCircularNode } from 'd3-hierarchy';\nimport { motion } from 'motion/react';\nimport { wrapText } from '@/common/utils/wrapText';\nimport { DEFAULT_TRANSITION } from '@/common/Motion';\n\nexport interface BubbleLabelProps {\n  /**\n   * Id set by the parent.\n   */\n  id: string;\n\n  /**\n   * The internal data object built by d3\n   */\n  data: HierarchyCircularNode<any>;\n\n  /**\n   * Font size of the text.\n   */\n  fontSize?: number;\n\n  /**\n   * Font family of the text.\n   */\n  fontFamily?: string;\n\n  /**\n   * Fill of the text.\n   */\n  fill?: string;\n\n  /**\n   * Should wrap text or not.\n   */\n  wrap?: boolean;\n\n  /**\n   * Whether the chart is animated or not.\n   */\n  animated?: boolean;\n\n  /**\n   * Format label.\n   */\n  format?: (data) => any;\n}\n\nexport const BubbleLabel: FC<Partial<BubbleLabelProps>> = ({\n  id,\n  data,\n  format,\n  wrap = true,\n  fill,\n  fontSize = 14,\n  fontFamily = 'sans-serif',\n  animated\n}) => {\n  const transition = animated ? DEFAULT_TRANSITION : { type: false, delay: 0 };\n  let isElement = false;\n  let label;\n\n  if (format) {\n    label = format(data);\n    isElement = isValidElement(label);\n  }\n\n  if (!isElement) {\n    const text = wrap\n      ? wrapText({\n        key: data.data.key,\n        fontFamily,\n        fontSize,\n        width: data.r\n      })\n      : data.data.key;\n\n    return (\n      <motion.text\n        initial={{\n          x: data.x,\n          y: data.y\n        }}\n        animate={{\n          x: data.x,\n          y: data.y\n        }}\n        transition={transition}\n        id={`${id}-text`}\n        style={{ pointerEvents: 'none', fontFamily, fontSize }}\n        fill={fill}\n        textAnchor=\"middle\"\n      >\n        {text}\n      </motion.text>\n    );\n  }\n\n  return (\n    <g style={{ transform: `translate(${data.x}px, ${data.y}px)` }}>{label}</g>\n  );\n};\n","import React, { FC, Fragment, ReactElement } from 'react';\nimport { motion } from 'motion/react';\nimport { HierarchyCircularNode } from 'd3-hierarchy';\nimport { ColorSchemeType, getColor } from '@/common/color';\nimport { Bubble, BubbleProps } from './Bubble';\nimport { BubbleLabel, BubbleLabelProps } from './BubbleLabel';\nimport { CloneElement } from 'reablocks';\nimport invert from 'invert-color';\nimport chroma from 'chroma-js';\nimport { DEFAULT_TRANSITION } from '@/common/Motion';\nimport { identifier } from 'safe-identifier';\n\nexport interface BubbleSeriesProps {\n  /**\n   * Id set by the parent.\n   */\n  id: string;\n\n  /**\n   * The internal data object built by d3\n   */\n  data: HierarchyCircularNode<any>[];\n\n  /**\n   * Whether the chart is animated or not.\n   */\n  animated?: boolean;\n\n  /**\n   * Color scheme for the chart.\n   */\n  colorScheme: ColorSchemeType;\n\n  /**\n   * Bubble element.\n   */\n  bubble?: ReactElement<BubbleProps, typeof Bubble>;\n\n  /**\n   * Bubble element.\n   */\n  format?: (item: any) => ReactElement<BubbleProps, typeof Bubble>;\n\n  /**\n   * Label element.\n   */\n  label?: ReactElement<BubbleLabelProps, typeof BubbleLabel>;\n}\n\nexport const BubbleSeries: FC<Partial<BubbleSeriesProps>> = ({\n  id,\n  data,\n  colorScheme = 'cybertron',\n  animated = true,\n  bubble = <Bubble />,\n  format,\n  label = <BubbleLabel />\n}) => {\n  const transition = animated ? DEFAULT_TRANSITION : { type: false, delay: 0 };\n\n  const renderBubble = (item, index) => {\n    const fill = getColor({\n      data,\n      colorScheme,\n      point: item.data,\n      index\n    });\n\n    const textFill = fill\n      ? invert(chroma(fill).darken(0.5).hex(), true)\n      : 'white';\n\n    return (\n      <motion.g\n        key={(item.data as any).key}\n        initial={{\n          scale: 0.5,\n          opacity: 0\n        }}\n        animate={{\n          scale: 1,\n          opacity: 1\n        }}\n        transition={transition}\n      >\n        <CloneElement<BubbleProps>\n          element={format ? format(item) : bubble}\n          id={identifier(`${id}-${item.data.key}-bubble`)}\n          animated={animated}\n          data={item}\n          fill={fill}\n        />\n        <CloneElement<BubbleLabelProps>\n          element={label}\n          id={identifier(`${id}-${item.data.key}-label`)}\n          animated={animated}\n          data={item}\n          fill={textFill}\n        />\n      </motion.g>\n    );\n  };\n\n  return <Fragment>{data.map(renderBubble)}</Fragment>;\n};\n","import React, { FC, ReactElement, useCallback } from 'react';\nimport { hierarchy, pack } from 'd3-hierarchy';\nimport { CloneElement } from 'reablocks';\nimport {\n  ChartContainer,\n  ChartContainerChildProps,\n  ChartProps,\n  ChartShallowDataShape\n} from '@/common';\nimport { BubbleSeries, BubbleSeriesProps } from './BubbleSeries';\n\nexport interface BubbleChartProps extends ChartProps {\n  /**\n   * Data the chart will receive to render.\n   */\n  data: ChartShallowDataShape[];\n\n  /**\n   * The series component that renders the arc components.\n   */\n  series?: ReactElement<BubbleSeriesProps, typeof BubbleSeries>;\n}\n\nexport const BubbleChart: FC<Partial<BubbleChartProps>> = ({\n  data = [],\n  id,\n  width,\n  height,\n  className,\n  containerClassName,\n  margins = 10,\n  series = <BubbleSeries />\n}) => {\n  const getData = useCallback(\n    (cw: number, ch: number) => {\n      const bubble = pack().size([cw, ch]).padding(3);\n\n      const root = hierarchy<any>({ children: data })\n        .sum((d) => d.data)\n        .sort((a, b) => b.data - a.data);\n\n      return bubble(root).leaves();\n    },\n    [data]\n  );\n\n  const renderChart = useCallback(\n    ({ chartWidth, chartHeight, ...rest }: ChartContainerChildProps) => {\n      const circles = getData(chartWidth, chartHeight);\n\n      return (\n        <CloneElement<BubbleSeriesProps>\n          element={series}\n          id={`${rest.id}-series`}\n          data={circles}\n        />\n      );\n    },\n    [series, getData]\n  );\n\n  return (\n    <ChartContainer\n      id={id}\n      width={width}\n      height={height}\n      containerClassName={containerClassName}\n      margins={margins}\n      xAxisVisible={false}\n      yAxisVisible={false}\n      className={className}\n    >\n      {renderChart}\n    </ChartContainer>\n  );\n};\n","import React, { FC } from 'react';\nimport { calculateDimensions, wrapText } from '@/common/utils';\n\nexport interface TreeMapLabelProps {\n  /**\n   * Id set by the parent.\n   */\n  id: string;\n\n  /**\n   * The internal data object built by d3\n   */\n  data: any;\n\n  /**\n   * Font size of the text.\n   */\n  fontSize?: number;\n\n  /**\n   * Font family of the text.\n   */\n  fontFamily?: string;\n\n  /**\n   * Fill of the text.\n   */\n  fill?: string;\n\n  /**\n   * Should wrap text or not.\n   */\n  wrap?: boolean;\n\n  /**\n   * Placement of the text.\n   */\n  placement?: 'start' | 'middle' | 'end';\n}\n\nexport const TreeMapLabel: FC<Partial<TreeMapLabelProps>> = ({\n  id,\n  data,\n  fill = '#FFF',\n  wrap = true,\n  placement = 'start',\n  fontSize = 14,\n  fontFamily = 'sans-serif'\n}) => {\n  const key = data.data.key;\n  const width = data.x1 - data.x0;\n  const text = wrapText({\n    key,\n    fontFamily,\n    fontSize,\n    paddingX: 10,\n    wrap,\n    paddingY: 10,\n    width,\n    height: data.y1 - data.y0\n  });\n  const size = calculateDimensions(\n    typeof text === 'string' ? text : key,\n    fontFamily,\n    fontSize\n  );\n\n  const offsetX =\n    placement === 'start'\n      ? 10\n      : placement === 'middle'\n        ? (width - size.width) / 2\n        : width - size.width - 10;\n\n  return (\n    <g style={{ transform: `translate(${offsetX}px, 15px)` }}>\n      <text\n        id={`${id}-text`}\n        style={{ pointerEvents: 'none', fontFamily, fontSize }}\n        fill={fill}\n      >\n        {text}\n      </text>\n    </g>\n  );\n};\n","import React, {\n  FC,\n  ReactElement,\n  useRef,\n  useState,\n  Fragment,\n  useMemo\n} from 'react';\nimport { motion } from 'motion/react';\nimport chroma from 'chroma-js';\nimport { ChartTooltip, ChartTooltipProps } from '@/common/Tooltip';\nimport { CloneElement } from 'reablocks';\nimport { DEFAULT_TRANSITION } from '@/common/Motion';\nimport { useHoverIntent } from '@/common/utils/useHoverIntent';\nimport { getAriaLabel } from '@/common';\n\nexport interface TreeMapRectProps {\n  /**\n   * The internal data object built by d3\n   */\n  data: any;\n\n  /**\n   * Id set by the parent.\n   */\n  id: string;\n\n  /**\n   * Fill for the rect.\n   */\n  fill: string;\n\n  /**\n   * Whether the chart is animated or not.\n   */\n  animated?: boolean;\n\n  /**\n   * Cursor for the element.\n   */\n  cursor?: string;\n\n  /**\n   * Tooltip element.\n   */\n  tooltip?: ReactElement<ChartTooltipProps, typeof ChartTooltip> | null;\n\n  /**\n   * Event for when the arc is clicked.\n   */\n  onClick?: (event, data) => void;\n\n  /**\n   * Event for when the arc has mouse enter.\n   */\n  onMouseEnter?: (event, data) => void;\n\n  /**\n   * Event for when the arc has mouse leave.\n   */\n  onMouseLeave?: (event, data) => void;\n}\n\nexport const TreeMapRect: FC<Partial<TreeMapRectProps>> = ({\n  data,\n  fill,\n  animated,\n  cursor = 'pointer',\n  tooltip = <ChartTooltip />,\n  onMouseEnter,\n  onMouseLeave,\n  onClick\n}) => {\n  const [internalActive, setInternalActive] = useState<boolean>(false);\n  const rectRef = useRef<any | null>(null);\n  const transition = animated ? DEFAULT_TRANSITION : { type: false, delay: 0 };\n  const currentFill = internalActive ? chroma(fill).darken(0.8).hex() : fill;\n\n  const { pointerOut, pointerOver } = useHoverIntent({\n    onPointerOver: (event) => {\n      setInternalActive(true);\n      onMouseEnter?.(event, data);\n    },\n    onPointerOut: (event) => {\n      setInternalActive(false);\n      onMouseLeave?.(event, data);\n    }\n  });\n\n  const tooltipLabel = useMemo(() => {\n    const getKey = (node): string[] => {\n      if (!node.parent) {\n        return [];\n      }\n      return [...getKey(node.parent), node.data.key];\n    };\n    return getKey(data).join(' → ');\n  }, [data]);\n\n  const tooltipData = useMemo(\n    () => ({ y: data.value, x: tooltipLabel }),\n    [data, tooltipLabel]\n  );\n  const ariaLabelData = useMemo(() => getAriaLabel(tooltipData), [tooltipData]);\n\n  return (\n    <Fragment>\n      <motion.rect\n        ref={rectRef}\n        initial={{\n          fill: currentFill,\n          width: data.x1 - data.x0,\n          height: data.y1 - data.y0\n        }}\n        animate={{\n          fill: currentFill,\n          width: data.x1 - data.x0,\n          height: data.y1 - data.y0\n        }}\n        style={{ cursor }}\n        transition={transition}\n        onClick={(event) => {\n          onClick?.(event, data);\n        }}\n        onPointerOver={pointerOver}\n        onPointerOut={pointerOut}\n        tabIndex={0}\n        aria-label={ariaLabelData}\n        role=\"graphics-document\"\n      />\n      {tooltip && !tooltip.props.disabled && (\n        <CloneElement<ChartTooltipProps>\n          element={tooltip}\n          visible={!!internalActive}\n          reference={rectRef}\n          value={tooltipData}\n        />\n      )}\n    </Fragment>\n  );\n};\n","import React, { FC, Fragment, ReactElement } from 'react';\nimport { motion } from 'motion/react';\nimport { CloneElement } from 'reablocks';\nimport { ColorSchemeType, getColor } from '@/common/color';\nimport { TreeMapLabel, TreeMapLabelProps } from './TreeMapLabel';\nimport { TreeMapRect, TreeMapRectProps } from './TreeMapRect';\nimport invert from 'invert-color';\nimport chroma from 'chroma-js';\nimport { DEFAULT_TRANSITION } from '@/common/Motion';\n\nexport interface TreeMapSeriesProps {\n  /**\n   * Id set by the parent.\n   */\n  id: string;\n\n  /**\n   * The internal data object built by d3\n   */\n  data: any[];\n\n  /**\n   * Whether the chart is animated or not.\n   */\n  animated?: boolean;\n\n  /**\n   * Color scheme for the chart.\n   */\n  colorScheme: ColorSchemeType;\n\n  /**\n   * Rect element to be rendered.\n   */\n  rect?: ReactElement<TreeMapRectProps, typeof TreeMapRect>;\n\n  /**\n   * Label element to be rendered.\n   */\n  label?: ReactElement<TreeMapLabelProps, typeof TreeMapLabel>;\n}\n\nexport const TreeMapSeries: FC<Partial<TreeMapSeriesProps>> = ({\n  id,\n  data,\n  colorScheme = 'cybertron',\n  animated = true,\n  rect = <TreeMapRect />,\n  label = <TreeMapLabel />\n}) => {\n  const transition = animated ? DEFAULT_TRANSITION : { type: false, delay: 0 };\n\n  const renderItem = (item: any, index: number) => {\n    const fill = getColor({\n      data,\n      colorScheme,\n      point: item.data,\n      index\n    });\n\n    const textFill = fill\n      ? invert(chroma(fill).darken(0.5).hex(), true)\n      : 'white';\n\n    return (\n      <motion.g\n        key={item.data.key}\n        initial={{\n          scale: 0.5,\n          opacity: 0,\n          x: item.x0,\n          y: item.y0\n        }}\n        animate={{\n          scale: 1,\n          opacity: 1,\n          x: item.x0,\n          y: item.y0\n        }}\n        transition={transition}\n      >\n        <CloneElement<TreeMapRectProps>\n          element={rect}\n          id={`${id}-${item.data.key}-rect`}\n          animated={animated}\n          data={item}\n          fill={fill}\n        />\n        <CloneElement<TreeMapLabelProps>\n          element={label}\n          id={`${id}-${item.data.key}-label`}\n          data={item}\n          fill={textFill}\n        />\n      </motion.g>\n    );\n  };\n\n  return <Fragment>{data.map((d, index) => renderItem(d, index))}</Fragment>;\n};\n","import React, { FC, ReactElement, useCallback } from 'react';\nimport {\n  ChartContainer,\n  ChartContainerChildProps,\n  ChartProps\n} from '@/common/containers/ChartContainer';\nimport { ChartNestedDataShape, ChartShallowDataShape } from '@/common/data';\nimport { hierarchy, treemap, treemapSquarify } from 'd3-hierarchy';\nimport { TreeMapSeries, TreeMapSeriesProps } from './TreeMapSeries';\nimport { CloneElement } from 'reablocks';\n\nexport interface TreeMapProps extends ChartProps {\n  /**\n   * Data the chart will receive to render.\n   */\n  data: ChartShallowDataShape[] | ChartNestedDataShape[];\n\n  /**\n   * The series component that renders the components.\n   */\n  series?: ReactElement<TreeMapSeriesProps, typeof TreeMapSeries>;\n\n  /**\n   * Inner padding for the treemap. Defaults to 5.\n   */\n  paddingInner?: number;\n\n  /**\n   * Outer padding for the treemap. Defaults to 5.\n   */\n  paddingOuter?: number;\n\n  /**\n   * Padding top for the treemap. This is used for the title\n   * spacing in nested situations. Defaults to 30.\n   */\n  paddingTop?: number;\n}\n\nexport const TreeMap: FC<Partial<TreeMapProps>> = ({\n  data = [],\n  id,\n  containerClassName,\n  paddingInner = 5,\n  paddingTop = 30,\n  paddingOuter = 5,\n  width,\n  height,\n  className,\n  margins = 0,\n  series = <TreeMapSeries />\n}) => {\n  const getData = useCallback(\n    (cw: number, ch: number) => {\n      const root = hierarchy<any>({ data }, (d) => d.data)\n        .sum((d) => d.data)\n        .sort((a, b) => b.data - a.data);\n\n      const t = treemap()\n        .size([cw, ch])\n        .tile(treemapSquarify)\n        .round(true)\n        .paddingInner(paddingInner)\n        .paddingOuter(paddingOuter)\n        .paddingTop(paddingTop);\n\n      const tree = t(root);\n      const nodes = [];\n\n      const getAllNodes = (node) => {\n        if (node?.parent) {\n          // Don't add root node\n          nodes.push(node);\n        }\n        for (let child of node?.children || []) {\n          getAllNodes(child);\n        }\n      };\n\n      getAllNodes(tree);\n      return nodes;\n    },\n    [data, paddingInner, paddingOuter, paddingTop]\n  );\n\n  const renderChart = useCallback(\n    ({ chartWidth, chartHeight, ...rest }: ChartContainerChildProps) => {\n      const datas = getData(chartWidth, chartHeight);\n      return (\n        <CloneElement<TreeMapSeriesProps>\n          element={series}\n          {...rest}\n          id={`${id || rest.id}-series`}\n          data={datas}\n        />\n      );\n    },\n    [series, getData, id]\n  );\n\n  return (\n    <ChartContainer\n      id={id}\n      width={width}\n      height={height}\n      containerClassName={containerClassName}\n      margins={margins}\n      xAxisVisible={false}\n      yAxisVisible={false}\n      className={className}\n    >\n      {renderChart}\n    </ChartContainer>\n  );\n};\n","import React, { FC, useCallback } from 'react';\nimport {\n  ChartInternalDataTypes,\n  ChartShallowDataShape,\n  ColorSchemeType,\n  DEFAULT_TRANSITION,\n  formatValue,\n  getAriaLabel,\n  getColor\n} from '@/common';\nimport { motion } from 'motion/react';\nimport classNames from 'classnames';\nimport css from './BarListSeries.module.css';\n\nexport type BarListLabelPosition = 'none' | 'top' | 'start' | 'end' | 'bottom';\n\nexport interface BarListSeriesProps {\n  /**\n   * Data for the chart.\n   */\n  data?: ChartShallowDataShape[];\n\n  /**\n   * Color scheme for the chart.\n   */\n  colorScheme?: ColorSchemeType;\n\n  /**\n   * The label position.\n   */\n  labelPosition?: BarListLabelPosition;\n\n  /**\n   * The value position.\n   */\n  valuePosition?: BarListLabelPosition;\n\n  /**\n   * The bar item class name.\n   */\n  itemClassName?: string;\n\n  /**\n   * Label css class name.\n   */\n  labelClassName?: string;\n\n  /**\n   * Label value class name.\n   */\n  valueClassName?: string;\n\n  /**\n   * Bar component class name.\n   */\n  barClassName?: string;\n\n  /**\n   * Bar container class name.\n   */\n  outerBarClassName?: string;\n\n  /**\n   * Custom label format.\n   */\n  labelFormat?: (data: ChartInternalDataTypes, index: number) => any;\n\n  /**\n   * Custom value format\n   */\n  valueFormat?: (data: ChartInternalDataTypes, index: number) => any;\n\n  /**\n   * Item was clicked.\n   */\n  onItemClick?: (data: ChartShallowDataShape) => void;\n\n  /**\n   * Item had mouse enter.\n   */\n  onItemMouseEnter?: (data: ChartShallowDataShape) => void;\n\n  /**\n   * Item had mouse leave.\n   */\n  onItemMouseLeave?: (data: ChartShallowDataShape) => void;\n}\n\nexport const BarListSeries: FC<Partial<BarListSeriesProps>> = ({\n  data,\n  colorScheme = 'cybertron',\n  itemClassName,\n  labelClassName,\n  outerBarClassName,\n  valueClassName,\n  labelFormat,\n  barClassName,\n  labelPosition = 'top',\n  valuePosition = 'none',\n  valueFormat,\n  onItemClick,\n  onItemMouseEnter,\n  onItemMouseLeave\n}) => {\n  const renderBar = useCallback(\n    (item, index) => {\n      const fill = getColor({\n        data,\n        colorScheme,\n        point: item.data,\n        index\n      });\n\n      return (\n        <div className={classNames(css.outerBar, outerBarClassName)}>\n          <motion.div\n            transition={DEFAULT_TRANSITION}\n            className={classNames(css.bar, barClassName)}\n            initial={{ width: '0%' }}\n            animate={{ width: `${item.data}%` }}\n            style={{ background: fill }}\n            tabIndex={0}\n            aria-label={getAriaLabel(item)}\n            role=\"graphics-document\"\n          />\n        </div>\n      );\n    },\n    [barClassName, outerBarClassName, colorScheme, data]\n  );\n\n  return (\n    <>\n      {data.map((d, i) => {\n        const label = labelFormat ? labelFormat(d.key as any, i) : d.key;\n\n        const valueLabel = valueFormat\n          ? valueFormat(d.metadata.value, i)\n          : formatValue(d.metadata.value);\n\n        return (\n          <div\n            key={d.key as string}\n            role=\"listitem\"\n            className={classNames(css.item, itemClassName, {\n              [css.clickable]: onItemClick,\n              [css.valueBottom]: valuePosition === 'bottom',\n              [css.valueStart]: valuePosition === 'start',\n              [css.valueEnd]: valuePosition === 'end',\n              [css.valueNone]: valuePosition === 'none',\n              [css.labelBottom]: labelPosition === 'bottom',\n              [css.labelTop]: labelPosition === 'top',\n              [css.labelStart]: labelPosition === 'start',\n              [css.labelEnd]: labelPosition === 'end',\n              [css.labelNone]: labelPosition === 'none'\n            })}\n            onMouseEnter={() => onItemMouseEnter?.(d)}\n            onMouseLeave={() => onItemMouseLeave?.(d)}\n            onClick={() => onItemClick?.(d)}\n          >\n            <label\n              title={label}\n              className={classNames(css.label, labelClassName)}\n            >\n              {label}\n            </label>\n            {renderBar(d, i)}\n            <label\n              title={valueLabel}\n              className={classNames(css.valueLabel, valueClassName)}\n            >\n              <small>{valueLabel}</small>\n            </label>\n          </div>\n        );\n      })}\n    </>\n  );\n};\n","import { max } from 'd3-array';\nimport { scaleLinear } from 'd3-scale';\nimport { motion } from 'motion/react';\nimport { CloneElement, useId } from 'reablocks';\nimport React, { FC, ReactElement, useMemo } from 'react';\nimport { ChartShallowDataShape } from '@/common';\nimport { BarListSeries, BarListSeriesProps } from './BarListSeries';\n\nexport interface BarListProps {\n  /**\n   * ID for the chart.\n   */\n  id?: string;\n\n  /**\n   * CSS Classname for the element.\n   */\n  className?: string;\n\n  /**\n   * Style for the element.\n   */\n  style?: React.CSSProperties;\n\n  /**\n   * Data for the chart.\n   */\n  data: ChartShallowDataShape[];\n\n  /**\n   * Sort direction of the data.\n   */\n  sortDirection?: 'asc' | 'desc' | 'none';\n\n  /**\n   * Series to render.\n   */\n  series?: ReactElement<BarListSeriesProps, typeof BarList>;\n\n  /**\n   * Whether the values are percentages or absolute values.\n   * In the latter case, the chart would be relative\n   */\n  type?: 'percent' | 'count';\n}\n\nexport const BarList: FC<BarListProps> = ({\n  id,\n  className,\n  style,\n  data = [],\n  sortDirection = 'desc',\n  series = <BarListSeries />,\n  type = 'count'\n}) => {\n  const curId = useId(id);\n\n  const mashedData = useMemo(() => {\n    const maxVal = type === 'count' ? max(data, (d) => d.data) : 100;\n    const domainVal = maxVal == 0 ? [0] : [0, maxVal];\n    const groupScale = scaleLinear().domain(domainVal).rangeRound([0, 100]);\n\n    const mashed = data.map((d) => ({\n      ...d,\n      data: groupScale(d.data as number),\n      metadata: {\n        value: d.data,\n        percent: (data.length * (d.data as number)) / 100\n      }\n    }));\n\n    if (sortDirection === 'asc') {\n      mashed.sort((a, b) => a.data - b.data);\n    } else if (sortDirection === 'desc') {\n      mashed.sort((a, b) => b.data - a.data);\n    }\n\n    return mashed;\n  }, [data, sortDirection]);\n\n  return (\n    <motion.section\n      role=\"list\"\n      variants={{\n        initial: {\n          transition: {\n            staggerChildren: 0.05,\n            staggerDirection: -1 as any\n          }\n        },\n        animate: {\n          transition: {\n            staggerChildren: 0.07,\n            delayChildren: 0.2\n          }\n        }\n      }}\n      id={curId}\n      className={className}\n      style={style}\n    >\n      <CloneElement<BarListSeriesProps> element={series} data={mashedData} />\n    </motion.section>\n  );\n};\n","import React, { FC } from 'react';\nimport { motion } from 'motion/react';\nimport { DEFAULT_TRANSITION, schemes } from '@/common';\n\nexport interface MeterColumnProps {\n  /**\n   * The value of the meter.\n   */\n  value: number;\n\n  /**\n   * The height of the column.\n   */\n  height?: number;\n\n  /**\n   * The index of the column.\n   */\n  index: number;\n\n  /**\n   * The scale to use.\n   */\n  scale: any;\n\n  /**\n   * The active fill color.\n   */\n  activeFill: string;\n\n  /**\n   * The inactive fill color.\n   */\n  inActiveFill: string;\n\n  /**\n   * Additional class names to apply.\n   */\n  className?: string;\n\n  /**\n   * The total number of columns. Set internally.\n   */\n  count?: number;\n\n  /**\n   * Whether to animate the column.\n   */\n  animated?: boolean;\n}\n\nexport const MeterColumn: FC<Partial<MeterColumnProps>> = ({\n  index,\n  scale,\n  value,\n  count,\n  height = 32,\n  className,\n  animated = true,\n  activeFill = schemes.cybertron[0],\n  inActiveFill = '#414242'\n}) => {\n  const isActive = scale(index) <= scale(value);\n  const fill = isActive ? activeFill : inActiveFill;\n  const transition = animated\n    ? {\n      ...DEFAULT_TRANSITION,\n      delay: (index / count) * 0.5\n    }\n    : {\n      type: false,\n      delay: 0\n    };\n\n  return (\n    <motion.div\n      key={index}\n      initial={{\n        background: inActiveFill,\n        height\n      }}\n      animate={{\n        background: fill,\n        height\n      }}\n      tranisition={transition}\n      className={className}\n    />\n  );\n};\n","import React, { FC, ReactElement } from 'react';\nimport { scaleLinear } from 'd3-scale';\nimport classNames from 'classnames';\nimport { MeterColumn, MeterColumnProps } from './MeterColumn';\nimport { CloneElement } from 'reablocks';\nimport css from './Meter.module.css';\n\nexport interface MeterProps {\n  /**\n   * The value of the meter.\n   */\n  value: number;\n\n  /**\n   * The minimum value of the meter.\n   */\n  min?: number;\n\n  /**\n   * The maximum value of the meter.\n   */\n  max?: number;\n\n  /**\n   * The number of columns to display.\n   */\n  columns?: number;\n\n  /**\n   * Additional class names to apply.\n   */\n  className?: string;\n\n  /**\n   * The gap between columns.\n   */\n  gap?: number;\n\n  /**\n   * Additional styles to apply.\n   */\n  style?: React.CSSProperties;\n\n  /**\n   * The column to render.\n   */\n  column: ReactElement<MeterColumnProps, typeof MeterColumn> | null;\n}\n\nexport const Meter: FC<Partial<MeterProps>> = ({\n  min = 0,\n  max = 100,\n  className,\n  column = <MeterColumn />,\n  gap = 15,\n  style = {},\n  value,\n  columns = 10\n}) => {\n  const scale = scaleLinear().domain([min, max]).range([0, 100]);\n  const cols = scale.ticks(columns);\n\n  return (\n    <div\n      className={classNames(css.container, className)}\n      style={{ gap: `${gap}px`, ...style }}\n    >\n      {cols.map((index) => (\n        <CloneElement<MeterColumnProps>\n          element={column}\n          key={index}\n          count={cols.length}\n          index={index}\n          scale={scale}\n          value={value}\n        />\n      ))}\n    </div>\n  );\n};\n","import React, { FC } from 'react';\nimport {\n  RadialAreaSeries,\n  RadialAreaSeriesProps,\n  RadialPointSeries,\n  RadialPointSeriesType\n} from '@/RadialAreaChart';\n\nexport interface RadarChartSeriesProps extends RadialAreaSeriesProps {}\n\nexport const RadarChartSeries: FC<Partial<RadarChartSeriesProps>> = (props) => (\n  <RadialAreaSeries {...RADAR_CHART_SERIES_DEFAULT_PROPS} {...props} />\n);\n\nexport const RADAR_CHART_SERIES_DEFAULT_PROPS = {\n  area: null,\n  type: 'grouped' as RadialPointSeriesType,\n  symbols: <RadialPointSeries show />\n};\n","import React, { FC } from 'react';\nimport { ChartNestedDataShape } from '@/common/data';\nimport { RadialAreaChart, RadialAreaChartProps } from '@/RadialAreaChart';\nimport {\n  RadialAxis,\n  RadialAxisArcLine,\n  RadialAxisArcSeries\n} from '@/common/Axis/RadialAxis';\nimport {\n  RADAR_CHART_SERIES_DEFAULT_PROPS,\n  RadarChartSeries\n} from './RadarChartSeries';\n\nexport interface RadarChartProps extends RadialAreaChartProps {\n  data: ChartNestedDataShape[];\n}\n\nexport const RadarChart: FC<Partial<RadarChartProps>> = (props) => (\n  <RadialAreaChart\n    {...props}\n    series={\n      <RadarChartSeries\n        {...RADAR_CHART_SERIES_DEFAULT_PROPS}\n        {...props?.series?.props}\n      />\n    }\n    axis={\n      <RadialAxis\n        type=\"category\"\n        arcs={\n          <RadialAxisArcSeries\n            count={5}\n            arc={null}\n            line={<RadialAxisArcLine />}\n          />\n        }\n      />\n    }\n  />\n);\n","import React, { FC, ReactElement, useMemo } from 'react';\nimport { ChartShallowDataShape } from '@/common/data';\nimport { area } from 'd3-shape';\nimport {\n  InterpolationTypes,\n  getAriaLabel,\n  interpolate,\n  mergeDefaultProps\n} from '@/common/utils';\nimport { ColorSchemeType, getColor, schemes } from '@/common/color';\nimport { Gradient, GradientProps, GradientStop } from '@/common/Gradient';\nimport { CloneElement } from 'reablocks';\nimport { motion } from 'motion/react';\nimport {\n  ChartTooltip,\n  TooltipArea,\n  TooltipAreaProps,\n  TooltipTemplate\n} from '@/common/Tooltip';\nimport { Glow } from '@/common/Glow';\nimport { generateGlowStyles } from '@/common/Glow/utils';\n\nexport interface FunnelArcProps {\n  /**\n   * Unique identifier for the arc. Set internally by `FunnelChart`.\n   */\n  id: string;\n\n  /**\n   * Data to render the funnel. Set internally by `FunnelChart`.\n   */\n  data: ChartShallowDataShape[];\n\n  /**\n   * Opacity of the funnel arc.\n   */\n  opacity?: number;\n\n  /**\n   * Index of the funnel arc. Set internally by `FunnelChart`.\n   */\n  index?: number;\n\n  /**\n   * The chart funnel style to use.\n   */\n  variant?: 'default' | 'layered';\n\n  /**\n   * xScale for the funnel. Set internally by `FunnelChart`.\n   */\n  xScale: any;\n\n  /**\n   * yScale for the funnel. Set internally by `FunnelChart`.\n   */\n  yScale: any;\n\n  /**\n   * Interpolation for the area. Set internally by `AreaSeries`.\n   */\n  interpolation: InterpolationTypes;\n\n  /**\n   * Color scheme for the chart.\n   */\n  colorScheme: ColorSchemeType;\n\n  /**\n   * Gradient to apply to the area.\n   */\n  gradient: ReactElement<GradientProps, typeof Gradient> | null;\n\n  /**\n   * Glow styling for the arc.\n   */\n  glow?: Glow;\n\n  /**\n   * Tooltip for the chart area.\n   */\n  tooltip: ReactElement<TooltipAreaProps, typeof TooltipArea>;\n}\n\nexport const FunnelArc: FC<Partial<FunnelArcProps>> = (props) => {\n  const {\n    data,\n    id,\n    xScale,\n    opacity,\n    index,\n    variant,\n    yScale,\n    interpolation,\n    colorScheme,\n    gradient,\n    glow,\n    tooltip\n  } = mergeDefaultProps(FUNNEL_ARC_DEFAULT_PROPS, props);\n\n  // Note: Need to append the last section\n  const internalData = [...data, data[data.length - 1]];\n\n  const areaGenerator = area()\n    .curve(interpolate(interpolation))\n    .x((_d, i) => xScale(i))\n    .y0(yScale(0))\n    .y1(({ data }: any) => yScale(data));\n\n  const areaMirrorGenerator = area()\n    .curve(interpolate(interpolation))\n    .x((_d, i) => xScale(i))\n    .y0(yScale(0))\n    .y1(({ data }: any) => yScale(-data));\n\n  const fillColor = getColor({\n    data,\n    domain: [0, 1, 2, 3],\n    colorScheme,\n    key: index\n  });\n\n  const fillTop = gradient ? `url(#gradient-${id}-top)` : fillColor;\n  const fillBottom = gradient ? `url(#gradient-${id}-bottom)` : fillColor;\n\n  const [height] = yScale.range();\n  const [_, width] = xScale.range();\n\n  const ariaLabelData = useMemo(() => getAriaLabel(data), [data]);\n\n  return (\n    <CloneElement<TooltipAreaProps>\n      element={tooltip}\n      xScale={xScale}\n      yScale={yScale}\n      data={data as any}\n      height={height}\n      width={width}\n      tooltip={\n        <ChartTooltip\n          followCursor\n          content={(data, color) => {\n            const value = {\n              x: data.key,\n              y: data.data,\n              value: data.data\n            };\n\n            return <TooltipTemplate value={value} color={color} />;\n          }}\n        />\n      }\n    >\n      <g\n        pointerEvents={tooltip ? 'none' : 'auto'}\n        style={generateGlowStyles({ glow })}\n        aria-label={ariaLabelData}\n        role=\"graphics-document\"\n      >\n        <motion.path\n          d={areaGenerator(internalData as any[])}\n          fill={fillTop}\n          stroke=\"none\"\n          initial={{\n            opacity: 0\n          }}\n          animate={{\n            opacity\n          }}\n        />\n        <motion.path\n          d={areaMirrorGenerator(internalData as any[])}\n          fill={fillBottom}\n          stroke=\"none\"\n          initial={{\n            opacity: 0\n          }}\n          animate={{\n            opacity\n          }}\n        />\n        {gradient && (\n          <>\n            <CloneElement<GradientProps>\n              element={gradient}\n              id={`gradient-${id}-top`}\n              color={fillColor}\n            />\n            <CloneElement<GradientProps>\n              element={gradient}\n              id={`gradient-${id}-bottom`}\n              color={fillColor}\n            />\n          </>\n        )}\n      </g>\n    </CloneElement>\n  );\n};\n\nexport const FUNNEL_ARC_DEFAULT_PROPS: Partial<FunnelArcProps> = {\n  gradient: (\n    <Gradient\n      direction=\"horizontal\"\n      stops={[\n        <GradientStop offset=\"0%\" stopOpacity={1} key=\"stop\" />,\n        <GradientStop offset=\"80%\" stopOpacity={0.5} key=\"start\" />\n      ]}\n    />\n  ),\n  interpolation: 'smooth',\n  colorScheme: schemes.cybertron[0],\n  variant: 'default',\n  opacity: 1,\n  tooltip: null\n};\n","import React, { FC, useCallback } from 'react';\nimport { ChartShallowDataShape } from '@/common/data';\nimport { calculateDimensions, formatValue, wrapText } from '@/common/utils';\nimport { motion } from 'motion/react';\n\nexport interface FunnelAxisLabelProps {\n  /**\n   * Data object for the label. Set internally by `FunnelAxis`.\n   */\n  data: ChartShallowDataShape;\n\n  /**\n   * Index of the label. Set internally by `FunnelAxis`.\n   */\n  index: number;\n\n  /**\n   * Color of the text.\n   */\n  fill: string;\n\n  /**\n   * Font size of the text.\n   */\n  fontSize: number;\n\n  /**\n   * Font family of the text.\n   */\n  fontFamily: string;\n\n  /**\n   * Padding of the label.\n   */\n  padding?: number;\n\n  /**\n   * Class name to apply to the text.\n   */\n  className?: string;\n\n  /**\n   * xScale for the funnel. Set internally by `FunnelAxis`.\n   */\n  xScale: any;\n\n  /**\n   * yScale for the funnel. Set internally by `FunnelAxis`.\n   */\n  yScale: any;\n\n  /**\n   * Positioning of the label.\n   */\n  position?: 'top' | 'middle' | 'bottom';\n\n  /**\n   * Whether to show the value of the data.\n   * Defaults to `true`.\n   */\n  showValue?: boolean;\n\n  /**\n   * Visibility of the label.\n   */\n  labelVisibility?: 'auto' | 'always';\n}\n\nexport const FunnelAxisLabel: FC<Partial<FunnelAxisLabelProps>> = ({\n  data,\n  index,\n  xScale,\n  yScale,\n  fontFamily = 'sans-serif',\n  padding = 10,\n  fontSize = 13,\n  fill = '#fff',\n  className,\n  position = 'middle',\n  showValue = true,\n  labelVisibility = 'auto'\n}) => {\n  const x = xScale(index) + padding;\n  const [height] = yScale.range();\n  const y = height / 2 + padding;\n  const label = data.key as string;\n  const nextOffset = xScale(index + 1);\n  const width = (nextOffset ? nextOffset - xScale(index) : 0) - padding;\n  const size = calculateDimensions(label, fontFamily, fontSize);\n  const text = wrapText({\n    key: label,\n    size,\n    paddingY: padding,\n    paddingX: padding,\n    width,\n    height,\n    fontFamily,\n    fontSize,\n    visibility: labelVisibility\n  });\n\n  const getTransformString = useCallback(() => {\n    let transform: string;\n\n    switch (position) {\n    case 'top':\n      transform = `translate(${x}, ${fontSize * 3})`; // fontSize * 3 is to account for the total height of the label\n      break;\n    case 'middle':\n      transform = `translate(${x}, ${y})`;\n      break;\n    case 'bottom':\n      {\n        // If the text is wrapping, we need to account for the height of all the lines\n        const textWrapHeight = Array.isArray(text)\n          ? text.slice(1).reduce((acc, curr) => acc + curr.props.dy, 0) // Don't include first line's dy in order to align properly\n          : 0;\n        transform = `translate(${x}, ${height - padding - textWrapHeight})`;\n      }\n      break;\n    }\n\n    return transform;\n  }, [position, x, fontSize, y, text, height, padding]);\n\n  // If the labels don't fit, just hide them\n  if (labelVisibility !== 'always' && size.width > width) {\n    return null;\n  }\n\n  return (\n    <motion.g\n      transform={getTransformString()}\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n    >\n      {showValue && (\n        <text\n          pointerEvents=\"none\"\n          fill={fill}\n          y={-(fontSize + padding)}\n          className={className}\n          dominantBaseline=\"middle\"\n          fontFamily={fontFamily}\n          fontSize={fontSize * 2}\n        >\n          {formatValue(data.data as any)}\n        </text>\n      )}\n      <text\n        pointerEvents=\"none\"\n        fill={fill}\n        className={className}\n        dominantBaseline=\"middle\"\n        fontFamily={fontFamily}\n        fontSize={fontSize}\n      >\n        {text}\n      </text>\n    </motion.g>\n  );\n};\n","import React, { FC } from 'react';\n\nexport interface FunnelAxisLineProps {\n  /**\n   * Color of the axis lines.\n   */\n  strokeColor: string;\n\n  /**\n   * Width of the axis lines.\n   */\n  strokeWidth: number;\n\n  /**\n   * xScale for the funnel. Set internally by `FunnelChart`.\n   */\n  xScale: any;\n\n  /**\n   * yScale for the funnel. Set internally by `FunnelChart`.\n   */\n  yScale: any;\n\n  /**\n   * Index of the line. Set internally by `FunnelAxis`.\n   */\n  index: number;\n}\n\nexport const FunnelAxisLine: FC<Partial<FunnelAxisLineProps>> = ({\n  strokeColor = '#333',\n  strokeWidth = 2,\n  yScale,\n  xScale,\n  index\n}) => {\n  const [height] = yScale.range();\n\n  return (\n    <line\n      x1={xScale(index)}\n      y1={0}\n      x2={xScale(index)}\n      y2={height}\n      stroke={strokeColor}\n      strokeWidth={strokeWidth}\n      pointerEvents=\"none\"\n    />\n  );\n};\n","import React, { FC, Fragment, ReactElement } from 'react';\nimport { ChartShallowDataShape } from '@/common/data';\nimport { range } from 'd3-array';\nimport { FunnelAxisLabel, FunnelAxisLabelProps } from './FunnelAxisLabel';\nimport { CloneElement } from 'reablocks';\nimport { FunnelAxisLine, FunnelAxisLineProps } from './FunnelAxisLine';\n\nexport interface FunnelAxisProps {\n  /**\n   * Data to render the funnel. Set internally by `FunnelChart`.\n   */\n  data: ChartShallowDataShape[];\n\n  /**\n   * xScale for the funnel. Set internally by `FunnelChart`.\n   */\n  xScale: any;\n\n  /**\n   * yScale for the funnel. Set internally by `FunnelChart`.\n   */\n  yScale: any;\n\n  /**\n   * The funnel axis line.\n   */\n  line?: ReactElement<FunnelAxisLineProps, typeof FunnelAxisLine> | null;\n\n  /**\n   * Label component for the axis.\n   */\n  label?: ReactElement<FunnelAxisLabelProps, typeof FunnelAxisLabel> | null;\n}\n\nexport const FunnelAxis: FC<Partial<FunnelAxisProps>> = ({\n  data,\n  xScale,\n  yScale,\n  line = <FunnelAxisLine />,\n  label = <FunnelAxisLabel />\n}) => {\n  const lines = range(0, data.length);\n\n  return (\n    <>\n      {lines.map((index) => (\n        <Fragment key={index}>\n          {line && index !== 0 && (\n            <CloneElement<FunnelAxisLineProps>\n              element={line}\n              index={index}\n              xScale={xScale}\n              yScale={yScale}\n            />\n          )}\n          {label && (\n            <CloneElement<FunnelAxisLabelProps>\n              element={label}\n              index={index}\n              data={data[index]}\n              xScale={xScale}\n              yScale={yScale}\n            />\n          )}\n        </Fragment>\n      ))}\n    </>\n  );\n};\n","import React, { MouseEvent, useCallback, useMemo } from 'react';\nimport { FUNNEL_ARC_DEFAULT_PROPS, FunnelArc } from './FunnelArc';\nimport { CloneElement } from 'reablocks';\nimport { FunnelArcProps } from './FunnelArc';\nimport { FunnelAxis, FunnelAxisProps } from './FunnelAxis';\nimport {\n  ChartShallowDataShape,\n  getClosestContinousScalePoint,\n  getPositionForTarget\n} from '@/common';\nimport { ClickEvent } from '@/common/types';\nimport { scaleLinear } from 'd3-scale';\nimport { max } from 'd3-array';\n\nexport interface FunnelSeriesProps {\n  /**\n   * Parsed data shape. Set internally by `FunnelChart`.\n   */\n  data: ChartShallowDataShape[];\n\n  /**\n   * Id of the funnel chart. Set internally by `FunnelChart`.\n   */\n  id: string;\n\n  /**\n   * The arc component that renders the funnel shape.\n   */\n  arc: React.ReactElement<FunnelArcProps, typeof FunnelArc>;\n\n  /**\n   * The axis component that renders the funnel axis.\n   */\n  axis: React.ReactElement<FunnelAxisProps, typeof FunnelAxis>;\n\n  /**\n   * Height of the chart. Set internally by `FunnelChart`.\n   */\n  height: number;\n\n  /**\n   * Width of the chart. Set internally by `FunnelChart`.\n   */\n  width: number;\n\n  /**\n   * Event for when a segment is clicked.\n   */\n  onSegmentClick?: (e: ClickEvent) => void;\n}\n\nexport const FunnelSeries: React.FC<Partial<FunnelSeriesProps>> = ({\n  data,\n  id,\n  arc = <FunnelArc />,\n  axis = <FunnelAxis />,\n  height,\n  width,\n  onSegmentClick\n}) => {\n  const arcProps = useMemo(\n    () => ({ ...FUNNEL_ARC_DEFAULT_PROPS, ...(arc?.props ?? {}) }),\n    [arc?.props]\n  );\n\n  // Calculate the funnel data on mount and when data changes\n  const getScales = useCallback(\n    (height: number, width: number) => {\n      const yScale = scaleLinear()\n        .domain([-max(data, ({ data }) => data), max(data, ({ data }) => data)])\n        .nice()\n        .range([height, 0]);\n\n      const xScale = scaleLinear().domain([0, data.length]).range([0, width]);\n\n      const transformedData = data.map((d, i) => ({\n        ...d,\n        key: d.key,\n        x: xScale(i),\n        i\n      }));\n\n      return {\n        data: transformedData,\n        yScale,\n        xScale\n      };\n    },\n    [data]\n  );\n\n  const { datas, halfOffset } = useMemo(() => {\n    // The 'layered' variant is actually just a series of funnel charts\n    // laid on top of each other to create the effect of a layered funnel.\n    if (arcProps.variant === 'layered') {\n      const offset = height / 4;\n      const halfOffset = offset / 2;\n\n      return {\n        halfOffset,\n        datas: [\n          { data, ...getScales(height, width) },\n          { data, ...getScales(height - offset, width) },\n          { data, ...getScales(height - offset * 2, width) }\n        ]\n      };\n    } else {\n      return {\n        halfOffset: 0,\n        datas: [{ data, ...getScales(height, width) }]\n      };\n    }\n  }, [data, arcProps, height, width, getScales]);\n\n  const handleSegmentClick = useCallback(\n    (e: MouseEvent) => {\n      if (onSegmentClick) {\n        const { xScale, data } = datas[0];\n        const { clientX, clientY, target } = e;\n        const position = getPositionForTarget({ target, clientX, clientY });\n        const value = getClosestContinousScalePoint({\n          pos: position.x,\n          scale: xScale,\n          data,\n          attr: 'i'\n        });\n\n        onSegmentClick({\n          value: { key: value.key, data: value.data },\n          nativeEvent: e\n        });\n      }\n    },\n    [datas, onSegmentClick]\n  );\n\n  return (\n    <>\n      {datas.map((d, i) => (\n        <g\n          key={i}\n          style={{ transform: `translate(0, ${i * halfOffset}px)` }}\n          onClick={handleSegmentClick}\n        >\n          <CloneElement<FunnelArcProps>\n            element={arc}\n            {...d}\n            id={`${id}-arc-${i}`}\n            index={i}\n          />\n        </g>\n      ))}\n      <CloneElement<FunnelAxisProps>\n        element={axis}\n        data={data}\n        xScale={datas[0].xScale}\n        yScale={datas[0].yScale}\n      />\n    </>\n  );\n};\n","import React, { FC, ReactElement, useCallback } from 'react';\nimport { CloneElement, useId } from 'reablocks';\nimport {\n  ChartContainer,\n  ChartContainerChildProps,\n  ChartProps\n} from '@/common/containers';\nimport { ChartShallowDataShape } from '@/common/data';\nimport { FunnelSeries, FunnelSeriesProps } from './FunnelSeries/FunnelSeries';\n\nexport interface FunnelChartProps extends ChartProps {\n  /**\n   * Chart shape used to render the funnel.\n   */\n  data: ChartShallowDataShape[];\n\n  /**\n   * The series component that renders the funnel components.\n   */\n  series: ReactElement<FunnelSeriesProps, typeof FunnelSeries>;\n}\n\nexport const FunnelChart: FC<Partial<FunnelChartProps>> = ({\n  data,\n  width,\n  margins = 0,\n  height,\n  className,\n  containerClassName,\n  series = <FunnelSeries />,\n  ...rest\n}) => {\n  const id = useId(rest.id);\n\n  const renderChart = useCallback(\n    ({ id, chartWidth, chartHeight, chartSized }: ChartContainerChildProps) => {\n      if (!chartSized) {\n        return null;\n      }\n\n      return (\n        <CloneElement<FunnelSeriesProps>\n          element={series}\n          id={`funnel-series-${id}`}\n          data={data}\n          height={chartHeight}\n          width={chartWidth}\n        />\n      );\n    },\n    [data, series]\n  );\n\n  return (\n    <ChartContainer\n      id={id}\n      width={width}\n      height={height}\n      margins={margins}\n      containerClassName={containerClassName}\n      className={className}\n    >\n      {renderChart}\n    </ChartContainer>\n  );\n};\n","import { useEffect } from 'react';\nimport { DEFAULT_TRANSITION } from '@/common/Motion';\nimport { useMotionValue, useSpring } from 'motion/react';\nimport { interpolate } from 'd3-interpolate';\n\nexport const useInterpolate = ({ animated, initial, path }) => {\n  const transition = animated\n    ? { ...DEFAULT_TRANSITION }\n    : {\n      delay: 0,\n      type: false\n    };\n\n  const d = useMotionValue(initial);\n  const spring = useSpring(0, { stiffness: 300, damping: 30 });\n\n  useEffect(() => {\n    const interpolator = interpolate(d.get(), path);\n    const prevSpring = spring.get();\n    spring.set(1 + prevSpring);\n\n    return spring.on('change', (v) => d.set(interpolator(v - prevSpring)));\n  }, [d, path, spring]);\n\n  return { transition, d: animated ? d : path };\n};\n","import React, {\n  FC,\n  ReactElement,\n  useCallback,\n  useMemo,\n  useRef,\n  useState\n} from 'react';\nimport { arc } from 'd3-shape';\nimport { getAriaLabel } from '@/common/utils/formatting';\nimport { motion } from 'motion/react';\nimport { ChartTooltip, ChartTooltipProps } from '@/common/Tooltip';\nimport { CloneElement } from 'reablocks';\nimport { useHoverIntent } from '@/common/utils/useHoverIntent';\nimport { Gradient, GradientProps } from '@/common/Gradient';\nimport chroma from 'chroma-js';\nimport { useInterpolate } from './useInterpolate';\n\nexport interface SunburstArcProps {\n  /**\n   * Id set by the parent.\n   */\n  id: string;\n\n  /**\n   * Radius of the chart. Set internally by `SunburstChart`.\n   */\n  radius: number;\n\n  /**\n   * The internal data object built by d3\n   */\n  data: any;\n\n  /**\n   * Fill color for the arc.\n   */\n  fill: string;\n\n  /**\n   * Whether the chart is animated or not.\n   */\n  animated?: boolean;\n\n  /**\n   * Cursor for the element.\n   */\n  cursor?: string;\n\n  /**\n   * Tooltip element.\n   */\n  tooltip?: ReactElement<ChartTooltipProps, typeof ChartTooltip> | null;\n\n  /**\n   * Gradient shades for the bar.\n   */\n  gradient?: ReactElement<GradientProps, typeof Gradient> | null;\n\n  /**\n   * The onClick handler for the arc.\n   */\n  onClick?: (event: React.MouseEvent, data: any) => void;\n\n  /**\n   * Event for when the arc has mouse enter.\n   */\n  onMouseEnter?: (event, data) => void;\n\n  /**\n   * Event for when the arc has mouse leave.\n   */\n  onMouseLeave?: (event, data) => void;\n}\n\nexport const SunburstArc: FC<Partial<SunburstArcProps>> = ({\n  id,\n  radius,\n  fill,\n  data,\n  cursor = 'pointer',\n  tooltip = <ChartTooltip />,\n  animated,\n  gradient,\n  onClick,\n  onMouseEnter,\n  onMouseLeave\n}) => {\n  const [internalActive, setInternalActive] = useState<boolean>(false);\n  const arcRef = useRef<any | null>(null);\n\n  const getPath = useCallback(\n    (item) => {\n      return arc()\n        .startAngle((d: any) => d.x0)\n        .endAngle((d: any) => d.x1)\n        .padAngle((d: any) => Math.min((d.x1 - d.x0) / 2, 0.005))\n        .padRadius(radius / 2)\n        .innerRadius((d: any) => d.y0)\n        .outerRadius((d: any) => d.y1 - 1)(item);\n    },\n    [radius]\n  );\n\n  const p = data.parent || { x0: 0, x1: 0, y0: 0, y1: 0 };\n  const initial = getPath({\n    x0: ((data.x0 - p.x0) / (p.x1 - p.x0)) * 2 * Math.PI,\n    x1: ((data.x1 - p.x0) / (p.x1 - p.x0)) * 2 * Math.PI,\n    y0: 0,\n    y1: 0\n  });\n  const animate = getPath(data);\n  const ariaLabelData = getAriaLabel(data.data);\n\n  const { pointerOut, pointerOver } = useHoverIntent({\n    onPointerOver: (event) => {\n      setInternalActive(true);\n      onMouseEnter?.(event, data);\n    },\n    onPointerOut: (event) => {\n      setInternalActive(false);\n      onMouseLeave?.(event, data);\n    }\n  });\n\n  const tooltipLabel = useMemo(() => {\n    const getKey = (node): string[] => {\n      if (!node.parent) {\n        return [];\n      }\n      return [...getKey(node.parent), node.data.key];\n    };\n    return getKey(data).join(' → ');\n  }, [data]);\n\n  const tooltipData = useMemo(\n    () => ({ y: data.value, x: tooltipLabel }),\n    [data, tooltipLabel]\n  );\n\n  const currentFill = useMemo(\n    () => (internalActive ? chroma(fill).brighten(0.5).hex() : fill),\n    [fill, internalActive]\n  );\n\n  const pathFill = gradient ? `url(#gradient-${id})` : currentFill;\n\n  const { transition, d } = useInterpolate({\n    animated,\n    path: animate,\n    initial\n  });\n\n  return (\n    <g\n      ref={arcRef}\n      tabIndex={0}\n      aria-label={ariaLabelData}\n      role=\"graphics-document\"\n    >\n      <motion.path\n        id={id}\n        fill={pathFill}\n        d={d}\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        role=\"graphics-symbol\"\n        tabIndex={0}\n        style={{ cursor }}\n        transition={transition}\n        aria-label={ariaLabelData}\n        onClick={(event) => onClick?.(event, data)}\n        onPointerOver={pointerOver}\n        onPointerOut={pointerOut}\n      />\n      {gradient && (\n        <CloneElement<GradientProps>\n          element={gradient}\n          id={`gradient-${id}`}\n          direction=\"vertical\"\n          color={currentFill}\n        />\n      )}\n      {tooltip && !tooltip.props.disabled && (\n        <CloneElement<ChartTooltipProps>\n          element={tooltip}\n          visible={!!internalActive}\n          reference={arcRef}\n          value={tooltipData}\n        />\n      )}\n    </g>\n  );\n};\n","import React, { FC, useMemo } from 'react';\nimport invert from 'invert-color';\nimport ellipsize from 'ellipsize';\nimport { motion } from 'motion/react';\nimport { DEFAULT_TRANSITION } from '@/common/Motion';\n\nexport interface SunburstArcLabelProps {\n  /**\n   * Id set by the parent.\n   */\n  id: string;\n\n  /**\n   * The internal data object built by d3\n   */\n  data: any;\n\n  /**\n   * Fill color for the arc.\n   */\n  fill: string;\n\n  /**\n   * Radius of the chart. Set internally by `SunburstChart`.\n   */\n  radius: number;\n\n  /**\n   * Font size of the text.\n   */\n  fontSize?: number;\n\n  /**\n   * Font family of the text.\n   */\n  fontFamily?: string;\n\n  /**\n   * Whether the chart is animated or not.\n   */\n  animated?: boolean;\n}\n\nexport const SunburstArcLabel: FC<Partial<SunburstArcLabelProps>> = ({\n  data,\n  animated,\n  fill = 'black',\n  fontSize = 14,\n  fontFamily = 'sans-serif',\n  radius\n}) => {\n  // Get the full text and the truncated text\n  // NOTE: This could use some improvement around measuring\n  const fullText = data.data.key;\n  const text = ellipsize(fullText, 10);\n\n  // Make the fill inverted for better contrast\n  fill = invert(fill, true);\n\n  function labelTransform(d) {\n    const x = (((data.x0 + data.x1) / 2) * 180) / Math.PI;\n    const y = (data.y0 + data.y1) / 2;\n    return `rotate(${x - 90}deg) translate(${y}px,0) rotate(${x < 180 ? 0 : 180}deg)`;\n  }\n\n  function labelVisible(d) {\n    return (d.y1 - d.y0) * (d.x1 - d.x0) > 0.05;\n  }\n\n  const transition = useMemo(() => {\n    if (animated) {\n      return {\n        ...DEFAULT_TRANSITION\n      };\n    } else {\n      return {\n        type: false,\n        delay: 0\n      };\n    }\n  }, [animated]);\n\n  if (!labelVisible(data)) {\n    return null;\n  }\n\n  return (\n    <motion.g\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      style={{ transform: labelTransform(data) }}\n      fontFamily={fontFamily}\n      fontSize={fontSize}\n      transition={transition}\n    >\n      <title>{fullText}</title>\n      <text\n        style={{\n          pointerEvents: 'none',\n          userSelect: 'none'\n        }}\n        fill={fill}\n        dy=\"0.35em\"\n        textAnchor=\"middle\"\n      >\n        {text}\n      </text>\n    </motion.g>\n  );\n};\n","import React, { FC, Fragment, ReactElement, useCallback } from 'react';\nimport { ColorSchemeType, getColor } from '@/common/color';\nimport chroma from 'chroma-js';\nimport { SunburstArc, SunburstArcProps } from './SunburstArc';\nimport { SunburstArcLabel, SunburstArcLabelProps } from './SunburstArcLabel';\nimport { CloneElement } from 'reablocks';\nimport { identifier } from 'safe-identifier';\n\nexport interface SunburstSeriesProps {\n  /**\n   * Id set by the parent.\n   */\n  id: string;\n\n  /**\n   * The internal data object built by d3\n   */\n  data: any[];\n\n  /**\n   * Whether the chart is animated or not.\n   */\n  animated?: boolean;\n\n  /**\n   * Color scheme for the chart.\n   */\n  colorScheme: ColorSchemeType;\n\n  /**\n   * Radius of the chart. Set internally by `SunburstChart`.\n   */\n  radius: number;\n\n  /**\n   * The arc component to render.\n   */\n  arc?: ReactElement<SunburstArcProps, typeof SunburstArc>;\n\n  /**\n   * The arc label component to render.\n   */\n  label?: ReactElement<SunburstArcLabelProps, typeof SunburstArcLabel>;\n}\n\nexport const SunburstSeries: FC<Partial<SunburstSeriesProps>> = ({\n  id,\n  data,\n  radius,\n  colorScheme = 'cybertron',\n  animated = true,\n  arc = <SunburstArc />,\n  label = <SunburstArcLabel />\n}) => {\n  const getFill = useCallback(\n    (item: any, index: number) => {\n      // Get the parent most item for the color start\n      let parent = item;\n      while (parent.depth > 1) {\n        parent = parent.parent;\n      }\n\n      let fill = getColor({\n        data,\n        colorScheme,\n        point: parent.data,\n        index\n      });\n\n      // darken the color based on the depth\n      fill = chroma(fill)\n        .darken((item.depth - 1) * 0.5)\n        .hex();\n\n      return fill;\n    },\n    [colorScheme, data]\n  );\n\n  const renderItem = useCallback(\n    (item: any, index: number) => {\n      const fill = getFill(item, index);\n\n      // // Handle getting the item id recursively\n      const getItemId = (item: any): string => {\n        if (item.parent) {\n          return `${getItemId(item.parent)}-${item.data.key}`;\n        }\n        return `${item.data.key}`;\n      };\n\n      const itemId = getItemId(item);\n      const safeKey = identifier(itemId);\n\n      return (\n        <Fragment key={safeKey}>\n          <CloneElement<SunburstArcProps>\n            element={arc}\n            id={`${id}-${safeKey}-arc`}\n            fill={fill}\n            radius={radius}\n            animated={animated}\n            data={item}\n          />\n          <CloneElement<SunburstArcLabelProps>\n            element={label}\n            id={`${id}-${safeKey}-label`}\n            fill={fill}\n            data={item}\n            radius={radius}\n            animated={animated}\n          />\n        </Fragment>\n      );\n    },\n    [animated, arc, getFill, id, label, radius]\n  );\n\n  return <>{data.map(renderItem)}</>;\n};\n","import React, { FC, ReactElement, useCallback } from 'react';\nimport {\n  ChartContainer,\n  ChartContainerChildProps,\n  ChartProps\n} from '@/common/containers/ChartContainer';\nimport { ChartNestedDataShape, ChartShallowDataShape } from '@/common/data';\nimport { hierarchy, partition } from 'd3-hierarchy';\nimport { CloneElement, useId } from 'reablocks';\nimport { SunburstSeries, SunburstSeriesProps } from './SunburstSeries';\n\nexport interface SunburstChartProps extends ChartProps {\n  /**\n   * Data the chart will receive to render.\n   */\n  data: ChartShallowDataShape[] | ChartNestedDataShape[];\n\n  /**\n   * The series component that renders the components.\n   */\n  series?: ReactElement<SunburstSeriesProps, typeof SunburstSeries>;\n}\n\nexport const SunburstChart: FC<Partial<SunburstChartProps>> = ({\n  data = [],\n  id,\n  series = <SunburstSeries />,\n  containerClassName,\n  width,\n  height,\n  className,\n  margins = 0\n}) => {\n  const newId = useId(id);\n\n  const getData = useCallback(\n    (radius: number) => {\n      const rootHierarchy = hierarchy<any>({ data }, (d) => d.data)\n        .sum((d) => d.data)\n        .sort((a, b) => b.data - a.data);\n\n      const root = partition().size([2 * Math.PI, radius])(rootHierarchy);\n\n      const nodes = [];\n      const getAllNodes = (node) => {\n        if (node?.parent) {\n          // Don't add root node\n          nodes.push(node);\n        }\n        for (let child of node?.children || []) {\n          getAllNodes(child);\n        }\n      };\n\n      getAllNodes(root);\n      return nodes;\n    },\n    [data]\n  );\n\n  const renderChart = useCallback(\n    ({ chartWidth, chartHeight, ...rest }: ChartContainerChildProps) => {\n      const radius = Math.min(chartWidth, chartHeight) / 2;\n      const root = getData(radius);\n\n      return (\n        <CloneElement<SunburstSeriesProps>\n          element={series}\n          id={`${newId}-series`}\n          data={root}\n          radius={radius}\n        />\n      );\n    },\n    [getData, newId, series]\n  );\n\n  return (\n    <ChartContainer\n      id={newId}\n      width={width}\n      height={height}\n      containerClassName={containerClassName}\n      margins={margins}\n      xAxisVisible={false}\n      yAxisVisible={false}\n      center={true}\n      className={className}\n    >\n      {renderChart}\n    </ChartContainer>\n  );\n};\n","import React, { FC, ReactElement, useRef, useState } from 'react';\nimport { motion } from 'motion/react';\nimport { ChartShallowDataShape } from '../common/data';\nimport { ChartTooltip, ChartTooltipProps } from '../common/Tooltip';\nimport { CloneElement } from 'reablocks';\nimport classNames from 'classnames';\nimport css from './WordCloudLabel.module.css';\nimport { useHoverIntent } from '@/common/utils/useHoverIntent';\n\nexport interface WordCloudLabelProps {\n  /**\n   * Text to display.\n   */\n  text: string;\n\n  /**\n   * Font size in pixels.\n   */\n  fontSize: number;\n\n  /**\n   * Font family to use.\n   */\n  fontFamily: string;\n\n  /**\n   * Fill color for the text.\n   */\n  fill: string;\n\n  /**\n   * X position of the text.\n   */\n  x: number;\n\n  /**\n   * Y position of the text.\n   */\n  y: number;\n\n  /**\n   * Rotation angle in degrees.\n   */\n  rotate: number;\n\n  /**\n   * Original data point.\n   */\n  data: ChartShallowDataShape;\n\n  /**\n   * Additional className to apply.\n   */\n  className?: string;\n\n  /**\n   * Tooltip element.\n   */\n  tooltip?: ReactElement<ChartTooltipProps, typeof ChartTooltip> | null;\n\n  /**\n   * Click handler.\n   */\n  onClick?: (event: React.MouseEvent, data: ChartShallowDataShape) => void;\n\n  /**\n   * Mouse enter handler.\n   */\n  onMouseEnter?: (\n    event: React.PointerEvent,\n    data: ChartShallowDataShape\n  ) => void;\n\n  /**\n   * Mouse leave handler.\n   */\n  onMouseLeave?: (\n    event: React.PointerEvent,\n    data: ChartShallowDataShape\n  ) => void;\n}\n\nexport const WordCloudLabel: FC<Partial<WordCloudLabelProps>> = ({\n  text,\n  fontSize,\n  fontFamily,\n  fill,\n  x,\n  y,\n  rotate,\n  data,\n  onClick,\n  className,\n  onMouseEnter,\n  onMouseLeave,\n  tooltip = <ChartTooltip />\n}) => {\n  const [tooltipVisible, setTooltipVisible] = useState<boolean>(false);\n  const labelRef = useRef<SVGTextElement>(null);\n\n  const { pointerOut, pointerOver } = useHoverIntent({\n    onPointerOver: (event) => {\n      setTooltipVisible(true);\n      onMouseEnter?.(event, data);\n    },\n    onPointerOut: (event) => {\n      setTooltipVisible(false);\n      onMouseLeave?.(event, data);\n    }\n  });\n\n  return (\n    <>\n      <g\n        ref={labelRef}\n        className={classNames(css.wordLabel, className, {\n          [css.clickable]: !!onClick\n        })}\n        onPointerOut={pointerOut}\n        onPointerOver={pointerOver}\n        onClick={(event) => onClick?.(event, data)}\n      >\n        <motion.text\n          style={{\n            fontSize: `${fontSize}px`,\n            fontFamily,\n            fill,\n            cursor: onClick ? 'pointer' : 'default'\n          }}\n          textAnchor=\"middle\"\n          initial={{\n            opacity: 0,\n            x,\n            y,\n            rotate\n          }}\n          animate={{\n            opacity: 1,\n            x,\n            y,\n            rotate\n          }}\n          exit={{\n            opacity: 0,\n            x,\n            y,\n            rotate\n          }}\n          whileHover={{\n            opacity: 0.7,\n            transition: { duration: 0.2 }\n          }}\n        >\n          {text}\n        </motion.text>\n      </g>\n      <CloneElement<ChartTooltipProps>\n        element={tooltip}\n        visible={tooltipVisible}\n        reference={labelRef}\n        value={{\n          x: text,\n          value: data.data\n        }}\n      />\n    </>\n  );\n};\n","import React, { useCallback, FC } from 'react';\nimport cloud from 'd3-cloud';\nimport { max } from 'd3-array';\nimport { scaleLinear } from 'd3-scale';\nimport { getColor, schemes } from '@/common/color';\nimport { ChartShallowDataShape } from '@/common/data';\nimport {\n  ChartProps,\n  ChartContainer,\n  ChartContextProps\n} from '@/common/containers';\nimport { WordCloudLabel } from './WordCloudLabel';\n\nexport interface WordCloudProps extends ChartProps {\n  /**\n   * Data to render in the word cloud.\n   * The 'key' represents the word and 'data' represents its frequency/weight.\n   */\n  data: ChartShallowDataShape[];\n\n  /**\n   * Font size range [min, max].\n   */\n  fontSizeRange?: [number, number];\n\n  /**\n   * Font family to use.\n   */\n  fontFamily?: string;\n\n  /**\n   * Padding between words.\n   */\n  padding?: number;\n\n  /**\n   * Rotation angles for words.\n   */\n  rotationAngles?: [number, number];\n\n  /**\n   * Number of possible rotations.\n   */\n  rotations?: number;\n\n  /**\n   * Custom color scheme for words.\n   */\n  colorScheme?: string[];\n\n  /**\n   * Event triggered when a word is clicked.\n   */\n  onLabelClick?: (event: React.MouseEvent, data: ChartShallowDataShape) => void;\n\n  /**\n   * Mouse enter handler.\n   */\n  onLabelMouseEnter?: (\n    event: React.PointerEvent,\n    data: ChartShallowDataShape\n  ) => void;\n\n  /**\n   * Mouse leave handler.\n   */\n  onLabelMouseLeave?: (\n    event: React.PointerEvent,\n    data: ChartShallowDataShape\n  ) => void;\n}\n\nexport const WordCloud: FC<Partial<WordCloudProps>> = ({\n  data = [],\n  width,\n  height,\n  fontSizeRange = [12, 50],\n  fontFamily = 'Arial',\n  padding = 3,\n  rotationAngles = [-30, 30],\n  rotations = 2,\n  colorScheme = schemes.cybertron,\n  onLabelClick,\n  onLabelMouseEnter,\n  onLabelMouseLeave,\n  margins,\n  className,\n  containerClassName\n}) => {\n  const buildData = useCallback(\n    (chartWidth: number, chartHeight: number) => {\n      // Create scales\n      const sizeScale = scaleLinear()\n        .domain([0, max(data, (d) => Number(d.data)) || 0])\n        .range(fontSizeRange);\n\n      // Create layout\n      const layout = cloud()\n        .size([chartWidth, chartHeight])\n        .words(\n          data.map((d, index) => ({\n            text: String(d.key),\n            size: sizeScale(Number(d.data)),\n            color: getColor({\n              colorScheme,\n              index,\n              point: d,\n              data\n            }),\n            data: d\n          }))\n        )\n        .padding(padding)\n        .font(fontFamily)\n        .fontSize((d) => d.size)\n        .rotate(() =>\n          rotations > 0\n            ? (Math.floor(Math.random() * rotations) *\n                (rotationAngles[1] - rotationAngles[0])) /\n                (rotations - 1) +\n              rotationAngles[0]\n            : 0\n        );\n\n      layout.start();\n      const words = layout.words();\n      return words;\n    },\n    [\n      colorScheme,\n      data,\n      fontFamily,\n      fontSizeRange,\n      padding,\n      rotationAngles,\n      rotations\n    ]\n  );\n\n  const renderChart = useCallback(\n    ({ chartHeight, chartWidth }: ChartContextProps) => {\n      const words = buildData(chartWidth, chartHeight);\n\n      return words.map((word: any, i) => (\n        <WordCloudLabel\n          key={`${word.text}-${i}`}\n          text={word.text}\n          fontSize={word.size}\n          fontFamily={fontFamily}\n          fill={word.color}\n          x={word.x || 0}\n          y={word.y || 0}\n          rotate={word.rotate || 0}\n          data={word.data}\n          onClick={onLabelClick}\n          onMouseEnter={onLabelMouseEnter}\n          onMouseLeave={onLabelMouseLeave}\n        />\n      ));\n    },\n    [buildData, fontFamily, onLabelClick, onLabelMouseEnter, onLabelMouseLeave]\n  );\n\n  return (\n    <ChartContainer\n      width={width}\n      height={height}\n      margins={margins}\n      className={className}\n      containerClassName={containerClassName}\n      center={true}\n    >\n      {renderChart}\n    </ChartContainer>\n  );\n};\n"],"names":["value","scale","end","offset","maxIndex","node","min","max","dimensions","entry","path","start","line","position","align","transform","label","getDimension","ticks","angle","height","width","translateY","translateX","point","textAnchor","translate","arc","Fragment","d","css","hasNoSlice","range","domain","layout","transformDataToStack","transformStackToData","symbol","extent","yAxisGrid","xAxisGrid","inverse","tooltip","data","target","offsetX","offsetY","outerRadius","zoomOffset","interpolate","PADDING","marker","id","gradient","item","coords","markLine","area","zoom","delay","isCategorical","padding","color","index","currentColorShade","animate","bar","getValueScale","Map","projection","useInterpolate","activeNodes","activeLinks","link","nodeMap","active","disabled","getXScale","innerRadius","fill","valueLabel","columns","xScale","yScale","cell","cellCount","base","outerBar","minValue","maxValue","sets","intersections","bb","tooltipLabel","halfOffset","labelVisible","buildData"],"mappings":"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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","x_google_ignoreList":[137,156,157,158,159]}